/*

*/

#pragma warning ( disable: 4146  4700 4703 4005)

#define _DEPRECATION_DISABLE
#pragma warning(push)
#pragma warning(disable:  _CRT_NONSTDC_NO_WARNINGS)
#pragma warning(disable: _CRT_SECURE_NO_WARNINGS) //4996 for _CRT_SECURE_NO_WARNINGS equivalent
// deprecated code here
#pragma warning(pop)// _ATL_SECURE_NO_DEPRECATE._CRT_SECURE_NO_DEPRECATE


#include <windows.h>
#include <SDL.h>
#include <SDL_opengl.h>
#include <math.h>
#include "defs.h"
#include "fmod.h"
#include "config.h"
#include "graphics.h"
#include "cars.h"
#include "drivers.h"
#include "variables.h"
#include "menus.h"
#include <stdio.h>
#include <stdlib.h>
#include "util.h"
#include "savegame.h"


#include <string.h>

//-------------------------------------------------------------------------
// Function declarations

const INITIAL_MONEY=10000; ///cambiar a 495
MainArgs mainArgs;
Configuration configuration;
GraphicsGeneral graphicsGeneral;
Graphics4 graphics4;
Car cars[6];
char driverNames[20][20];
Driver drivers[20];

int textureTemp[0xFFFFFu]; // weak
int screenSurface; // weak


int palette[256]; // weak
//SDL_Surface * screenSurface; // weak

int dword_45F054; // idb
int dword_45F050; // idb
int dword_461FD4; // weak
int dword_461F30[256]; //weak
int dword_461F2C[256]; // weak


#define ADS 256;

#define __thiscall __cdecl // Test compile in C mode

void __cdecl allocateMemory(size_t Size);
void __cdecl free(void *Memory);
int sub_401060();
int sub_402240();
int sub_4022A0();
unsigned int sub_402490();
unsigned int __cdecl sub_402510(int a1, const char *a2);
int __cdecl sub_402590(int a1, int a2, int a3, signed int a4, int a5, int a6, int a7, int a8);

//void __cdecl __noreturn errorExitScreen(int a1);
int __cdecl extractFromBpa(char *Filename, void *, int); // idb
signed int sub_402CF0();
void sub_402EE0();
int sub_403050();
void sub_403190();
int sub_4032F0();
int sub_403410();
void sub_4034F0();
void loadEngineGraphics();
void loadEngineGraphics2();
void sub_403960();
int sub_4039D0();
int sub_403B30();
int sub_403BB0();
int sub_403D50();
int sub_403E30();
int noMemExitScreen();
char *sub_404730();
int sub_404920();
int sub_4049F0();
int sub_404A60();
int sub_404AD0();
int sub_404BA0();
int sub_404C30();
int sub_405430();
int sub_4055A0();
char sub_406100();
int sub_406330();
unsigned int __cdecl sub_406410(int a1, int a2, const char *a3);
signed int __cdecl sub_4064A0(int a1);
signed int __cdecl sub_4069D0(char a1);
void __cdecl sub_406BE0(char a1);
int __cdecl sub_406D30(int a1);
unsigned int __cdecl sub_4072C0(int a1, const char *a2);
int sub_407330();
void __noreturn exitCtrlAltDel();
int sub_4092B0();
int sub_409460();
int sub_409A90();
signed int sub_409BF0();
unsigned __int64 __cdecl sub_409E50(int a1, float a2, float a3, float a4);
int *sub_409F90();
int sub_40A360();
int sub_40A880();
int sub_40A9A0();
int sub_40AFC0();
int sub_40B920();
void sub_40BAB0();
int sub_40CD10();
int sub_40D560();
void sub_40D6B0();
int sub_40D7B0();
int sub_40D920();
int sub_40E180();
int sub_40E960();
int sub_40EBC0();
// int __usercall sub_40F070@<eax>(int result@<eax>);
int sub_40F450();
int sub_40F6A0();
int sub_40FE20();
void sub_410050();
int sub_410220();
char sub_410B90();
int sub_410FA0();
char sub_4111F0();
int sub_411530();
int __cdecl sub_4115C0(int a1, int a2);
void sub_4116D0();
int sub_411D10();
int sub_412DF0();
void sub_413300();
int sub_413380();
int sub_413500();
signed int sub_4136C0();
void sub_4138A0();
// int __usercall sub_413C90@<eax>(int a1@<ebx>);
// int __usercall sub_414110@<eax>(int a1@<ebx>);
int sub_414220();
int sub_414FC0();
void sub_4151C0();
int sub_415280();
int sub_4156B0();
void __cdecl sub_415710(int a1, int a2);
int __cdecl getFileSizeFromBpa(char *Filename, int); // idb
int __cdecl getSizeMusic(int a1);
void *__cdecl getMusicStream(int a1);
int configJoystick(void); // weak
char eventDetected();
char sub_418090();
int sub_418150();
void sub_4181B0();
unsigned int sub_4181E0();
void decryptAnimFrame();
void __cdecl openAnimation(const char *a1, int a2, int a3, int a4, int a5, char a6, char a7);
int __cdecl setPaletteValueWithFloats(float, float, float); // idb
int __cdecl sub_418B00(float, float, float); // idb

void loadGraphics2();
int __cdecl loadPaletteMenu();
void freeMemoryGraphics2();
signed int isVesaCompatible();
void refreshBottomScreen();
void refreshAllScreen();
unsigned int __cdecl drawTextWithFont(int a1, int a2, const char *a3, int a4);
unsigned int __cdecl sub_41A370(const char *a1, int a2);
int __cdecl writeTextInScreen(const char *a1, int a2);
signed int __cdecl createPopup(int a1, int a2, int a3, int a4, int a5);
int __cdecl drawTransparentBlock(int a1, int a2, int a3, int a4);
int __cdecl drawMenu(int a1, int a2);
int __cdecl drawKeyCursor(signed int a1, const void *a2, unsigned int a3, int a4);
int __cdecl updateCursor(int a1);
int __cdecl drawCursor(int a1, int a2);
int __cdecl sub_41ACF0(int a1);
int __cdecl refreshMenuUp(int a1);
int __cdecl refreshMenuDown(int a1);
unsigned int lappedPopUp();
unsigned int winStreakPopUp();
unsigned int noPaintJobPopUp();
unsigned int allCarsCrashPopUp();
int steriodsNotFoundPopup();
int killOnePopup();
unsigned int welcomeShopPopup();
unsigned int endGamePopup();
int payBackTimePopup();
unsigned int undergroundMarketPopup();
unsigned int welcomePopup();

int __cdecl sub_41C9F0(const char *a1);
unsigned int sub_41CA40();
char sub_41E3B0();
int __cdecl drawRecordByCircuit(int a1);
char drawBottomMenuText();
char sub_41E8D0();
char sub_41E9A0();
void __cdecl sub_41EA70(int a1, int a2, char a3);
signed int __cdecl sub_41EB80(int a1, int a2);
int __cdecl sub_41ED20(float, float, float); // idb
void loadGraphics3();
void freeMemoryGraphics3();
int __cdecl sub_41FA50(const char *a1);
int __cdecl sub_41FAB0(const char *a1);
int __cdecl sub_41FB20(const char *a1);
int __cdecl getNamePositionRight(const char *a1);
int __cdecl sub_41FBD0(const char *a1);
int drawCarRightSide();
int __cdecl drawMenuAnimation(int a1, int a2, int a3, int a4, int a5);
int reloadCarAnimation2();
int reloadEngineAnimation2();
int reloadTireAnimation2();
int reloadArmourAnimation2();
int reloadRepairAnimation();
int loadAcceptedText();
int showCarBought();
int reloadEngineAnimation();
int reloadTireAnimation();
int reloadArmourAnimation();
int __cdecl sub_421980(int a1, int a2, int a3, int a4);
int __cdecl drawBorder(int a1, int a2, int a3, int a4);
int __cdecl drawBorder2(int a1, int a2, unsigned int a3, int a4);
void sub_421D90();
void sub_421DF0();
signed int __cdecl hasInsuficientMoneyToBuy(int a1);
signed int setUndergroundMarketPrices();
int sub_4220D0();
signed int autoLoadSave();
int sub_4224E0();
int copyPalette1toPalette(void); // weak
int getReapirCostByCarType();
int __cdecl getBlackMarketElementText(int a1);
int __cdecl getBlackMarketElementPurchasedText(int a1);
int sub_422930();
int sub_4229B0();
int drawLoanShark();
int loanDeniedVagabondPopUp();
int sub_422D80();
int drawBlackMarketElement0();
int drawBlackMarketElement1();
int drawBlackMarketElement2();
int drawBlackMarketElement3();
int sub_423350();
void underGroundMenuLeft();
void underGroundMenuRight();
int sub_4236D0(void); // weak
int drawBlackMarketScreen();

void __cdecl addParticipantToRace(signed int a1);
int __cdecl sub_423C90(int a1, int a2);
void __cdecl sub_423E20(int a1);
int drawSelectRaceScreen();
int calculateNextRaces();
int __cdecl sub_424240(int, float, float, float); // idb
int sub_424420();
int __cdecl sub_424510(int a1, int a2, int a3);
unsigned int drawStadistics();
int __cdecl writeDriverList(int a1);
int __cdecl drawRightPositions(int a1, int a2);
signed int sub_426080();
int sub_4260D0();
signed int sub_426180();
int sub_4261D0();
int sub_426280();
int __cdecl sub_426460(unsigned __int8 a1, unsigned __int8 a2);


int __cdecl openPalFromBpa(int a1);
int transitionToCurrentImage();
int transitionToBlack();
int apogeeScreen(void); // weak
int showCredits();
int showEndScreen();
int showStartScreen();
FILE *checkAndOpenAnimation();
char sub_4279C0();
int sub_427BC0();
int checkIntro(void); // weak
void __cdecl sub_428070(int a1);
signed int sub_4284E0();
signed int sub_428740();
int initDrivers(void); // weak
int reloadContinueAnimation();
int drawShopAnimationAndRightSide();
int sub_4291D0();
void __fastcall easyRaceResults(int ecx0, int a2, int a1);
void __fastcall mediumRaceResults(int ecx0, int a2, int a1);
void __fastcall hardRaceResults(int ecx0, int a2, int a1);
int __cdecl sub_429CF0(unsigned __int8 *a1, signed int a2);
int sub_429DC0();
void __noreturn exitGame();

void sub_42A300();
int sub_42A480();
void sub_42A570();
void __cdecl selectRaceWarningPopup(int a1);
int __cdecl main(int argc, const char **argv, const char **envp);
char sub_42BD10();
char sub_42C4A0();
char __cdecl sub_42C560(int a1);
int __cdecl sub_42C670(int a1);
char sub_42C780();
int __cdecl sub_42C7F0(int a1, int a2, int a3, int a4, int a5, int a6);
char sub_42C940();
char sub_42CBF0();
int sub_42CCF0(void); // weak
int sub_42D780();
void sub_42D8C0();
void sub_42DAB0();
char __cdecl confirmationPopup(const char *a1);
int sabotageScreen();
signed int __cdecl readEventInMenu(int a1);
bool __cdecl drawYesNoMenu(int a1, int a2, int a3, signed int *a4);
char sub_42E6F0();
signed int __cdecl readKeyboard(const char *a1, int a2, int a3, int a4, unsigned int a5, signed int a6, int a7, int a8, int a9);
signed int loadGame();
__int16 savegameWithName();
signed int redefineControls();
signed int defineGamepadJoystickMenu();
int showAdjustOptions(void); // weak
char sub_430FA0();
void sub_4312D0();
int seeHallOfFame(void); // weak
int showHitmanScreen();
void __cdecl previewRaceScreen(signed int a1);
int __cdecl licenseScreen(int a1);
// int __usercall adversaryPreviewScreen@<eax>(const char **a1@<ebx>);
void selectRaceScreen();
void __thiscall underGroundMenuEnter(void *this);
void enterBlackMarketScreen();
void enterShop();
char postLoadedOrLicense();
void startRacingMenu();
int mainMenu(void); // weak


void __noreturn sub_43ACB0();

void *__cdecl sub_43AD80(int a1);
void __cdecl sub_43ADD0(void *Memory);
int __cdecl sub_43ADF0(void *a1, unsigned int a2, int a3);
int __cdecl sub_43AE30(int a1, int a2, char a3);
int __cdecl sub_43AE70(int a1);
int __cdecl sub_43AE80(int a1, int a2, int a3, int a4);
char __cdecl sub_43AEC0(int a1, int a2, int a3);
char __cdecl sub_43AF30(int a1, int a2, int a3);

char __cdecl sub_43AFC0(int a1, int a2, int a3);
int __cdecl sub_43B030(int a1, int a2);
int __cdecl sub_43B050(int a1, signed int a2);
int __cdecl sub_43B080(int a1, int a2, int a3, int a4, int a5);
void __cdecl copyBuffer2Screen(void *a1, const void *a2, int a3);
int __cdecl sub_43B0F0(int a1, signed int a2, int a3);
int __cdecl sub_43B160(int a1, int a2, int a3, int a4);
int __cdecl sub_43B1A0(int a1, int a2, int a3, int a4);
int __cdecl sub_43B1F0(int a1, int a2, int a3, int a4);
int __cdecl sub_43B240(int a1, int a2, int a3, int a4);
int __cdecl sub_43B290(int a1, signed int a2);
 int __cdecl convertColorToPaletteColor(int a1, int a2);
int sub_43B2D0();
int sub_43B2E0();
int __cdecl sub_43B2F0(int a1, int a2, int a3);
int __cdecl sub_43B370(int a1, int a2, int a3);
int __cdecl sub_43B3A0(int a1, int a2, int a3, char a4);
void __cdecl SetVideoMode(int a1);
int __cdecl sub_43B580(int a1);
int __cdecl setWindowCaption3(int a1);
int setWindowCaption2();
int setWindowCaption();
int sub_43BEE0();
 int  sub_43BEF0(int a1, void *a2, unsigned int a3, int a4, char a5);
int __cdecl drawImageWithPosition2(int a1, int a2, int a3, int a4);
int __cdecl drawImageWithPosition(int a1, int a2, int a3, int a4);
int __cdecl sub_43BFE0(int a1, int a2);
int __cdecl setPaletteValue(int a1, int a2, int a3, int a4);
int __cdecl setPaletteAndGetValue(unsigned __int8 a1, unsigned __int8 a2, char a3, unsigned __int8 a4);
int __cdecl sub_43C0F0(int a1);
int __cdecl sub_43C160(int a1);
int __cdecl sub_43C1B0(unsigned __int8 a1, int a2, signed int a3);
int sub_43C1F0();
char __stdcall sub_43C220(int a1, int a2, signed int a3, int a4);
int __cdecl musicSetVolume(signed int a1);
int __cdecl musicSetMasterVolume(signed int a1);
int __cdecl setMusicVolume(signed int a1);
char __cdecl musicSetOrder(signed int a1);

int musicPlayMusic();
int __cdecl loadMenuSoundEffect(unsigned __int8 a1, char a2, int a3, int a4, int a5);
int stopSong();
int __cdecl sub_43C3E0(unsigned __int8 a1);
int stopAndOpenMusic();
int __cdecl sub_43C450(int a1);
__int16 __cdecl sub_43C470(int a1, int a2);
__int16 __cdecl sub_43C490(int a1, int a2);
int sub_43C4B0();
//void __cdecl operator delete(size_t Size); 
int freeMusic();
void __cdecl free(void *Memory);
void __cdecl logJoystickClose();
// int __usercall inicializeScreen@<eax>(double a1@<st0>);
signed int SDLCheckJoystick();
void __cdecl nullsub_1();
void sub_43C730();
signed __int64 sub_43C740();
int waitWithDelay();
int (*__cdecl sub_43C7B0(int (*a1)(void)))(void);
int __cdecl updateScreenPtr(int a1);
int __cdecl sub_43C7E0(int a1, int a2, int a3, signed int a4, char a5);
int sub_43C850(void); // weak
int sub_43C8F0();
int SDLConfigureJoystick();
void __cdecl decryptTexture(int a1, int a2, int a3, int a4);
void __cdecl copyImageToBuffer(int a1, int a2);
unsigned int sub_43CBB0();
void __cdecl loadMusic(int a1, char* music1, int a3, char* music2);
int __cdecl sub_43CD50(int a1, int a2, int a3, int a4, int a5, int a6, char a7);
int __cdecl sub_43D050(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9);
int __cdecl sub_43D530(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
int wait();
unsigned __int64 __cdecl sub_43D8A0(int a1, signed int a2);
char __cdecl sub_43D8E0(int a1);
char __cdecl freeStreamMemory(void *Memory);
char __cdecl sub_43DA40(int a1);
int __cdecl sub_43DC50(int a1, int a2);
int __cdecl sub_43DCB0(signed int a1, int a2);
int __cdecl sub_43DE30(int a1, int a2, int a3);
// int __usercall sub_43DEA0@<eax>(int a1@<ebp>);
char __cdecl sub_43E550(int a1, int a2);
char __cdecl sub_43E670(int a1, int a2, int a3, char a4, int a5, int a6, unsigned __int8 a7, unsigned __int8 a8, unsigned __int8 a9, int a10, int a11, int a12, int a13, char a14);
char __cdecl sub_43E7A0(int a1, unsigned __int8 a2);
int __cdecl sub_43E8C0(signed int a1, int a2, int a3);
int __cdecl sub_43EB10(int a1, int a2);
char __cdecl sub_43EBB0(int a1, unsigned __int8 a2);
unsigned __int64 __cdecl sub_43EBD0(int a1, signed int a2);
int __cdecl sub_43EC40(int a1, int a2, unsigned __int8 a3, int a4, char a5);
int __cdecl sub_43EDC0(int a1);
int __cdecl sub_43EF50(int); // weak
char __cdecl sub_43EF60(int a1, int a2);
int (__cdecl *__cdecl sub_43F6B0(int (__cdecl *a1)(_DWORD), int (__cdecl *a2)(_DWORD), int (__cdecl *a3)(_DWORD, _DWORD, _DWORD), int (__cdecl *a4)(_DWORD), int (__cdecl *a5)(_DWORD)))(_DWORD);
void *__cdecl sub_43F720(int a1, char a2, int a3);
void __cdecl sub_43F770(void *Memory);
int __cdecl sub_43F790(int a1, int a2, int a3);
int __cdecl sub_43F7B0(int a1);
int __cdecl sub_43F7D0(int a1);

void sub_43FC72();
void __cdecl sub_43FCB6();
int sub_43FD12();
// int __usercall initSystem@<eax>(double st7_0@<st0>, int a1, const char **a2);
int __cdecl logError(int a1, int a2);
int outOfMemoryError(void); // weak
void __cdecl SDL_Quit();
void __cdecl generateExitError();
int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd);
int __cdecl sub_43FF90(int *a1, int a2);


//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_43414A; // weak
  FILE iob[1024];
  const unsigned __int16 pctype[256];
  int _mb_cur_max;
int dword_441250 = 1162564932; // weak
_UNKNOWN unk_4429C0; // weak
byte byte_4429E0[28] =
{
  68,  114,  111,  112,  32,  77,  105,  110,  101,  32,  32,  32,  32,  250,  250,  250,
  250,  250,  250,  250,  250,  250,  250,  250,  0,  0,  0,  0
}; // idb
_WORD word_4429FC[14] =
{
  24909,  26723,  28265,  8293,  30023,  8302,  64032,  64250,  64250,  64250,  64250,  64250,  250,  0
}; // idb
_WORD word_442A18[14] =
{
  30036,  25202,  8303,  28482,  29551,  8308,  64032,  64250,  64250,  64250,  64250,  64250,  250,  0
}; // idb
_UNKNOWN unk_4433D4; // weak
char a12000[7] = "$12000"; // weak
char a750[5] = "$750"; // weak
//int dword_443798 = 1768841587; // weak
char dword_443798[10] = "SANIM.haf\0"; // weak //cambiado porque es este el nombre del fichero
char aStartANewGame[17] = "Start A New Game"; // weak
char aIswaitingForYo[43] = " is waiting for you to join the next race.";
int dword_443C34 = 1633971813; // weak
byte unk_443C40[] = { 0x7f,0,0,0 }; // weak
//_UNKNOWN unk_443C40; // weak

int dword_443D18 = 1953525061; // weak
int dword_443FB8 = 1633971813; // weak
_UNKNOWN unk_444160; // weak
char aCRemedyEnterta[57] = "    (c)Remedy Entertainment - http://www.remedygames.com"; // weak
char byte_4444F8[] = { 'E' }; // weak
_UNKNOWN unk_444540; // weak
_UNKNOWN unk_444548; // weak
int dword_445010 = 320; // weak
int dword_445014 = 100; // weak
int dword_445018 = 200; // weak
int dword_44501C = 100; // weak
int dword_445020 = 1; // weak
int dword_445024 = 1; // weak
int dword_445028 = 1; // weak
int dword_44502C = 1; // weak
int dword_445030 = 1; // weak
int dword_445034 = 163840; // weak
char aKupla[6] = "KUPLA"; // weak
int dword_44509C = 1063675494; // weak
int dword_4450A0 = 1065353216; // weak
_UNKNOWN unk_4450A8; // weak


char byte_44512A = '\x03'; // weak
int dword_445184 = 163840; // weak
int dword_445188 = 163840; // weak
int dword_44518C = 152832; // weak
int dword_445190 = 163840; // weak
int dword_445194 = 163840; // weak
int dword_445198 = 163840; // weak
int dword_4451A0 = 163840; // weak
int dword_4451A4 = 163840; // weak
int dword_4451AC = 163840; // weak

byte unk_4455B0[] = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };

//_UNKNOWN unk_4455B0; // weak
int dword_4456B0[] = { 0,1,3,7,0xf,0x1f,0x3f,0x7f,0xff,0x1ff,0x3ff,0x7ff,0xfff }; // weak
int useWeapons = 1; // weak
int dword_4456E8 = 10000; // weak

/*menus sizes*///la entrada 9 es para el menu de continuar
int dword_4456F0[] = { 6,6,8,6,5,8,9,8,8   }; // weak  //entradas del menu
int dword_4456F4[] = { 145,0x6d,0x67,0x5f,0xa8,0xe7,0x32,0xd3,0x32   }; // weak
int dword_4456F8[] = { 124,0xab,0x76,0x92,0xc8,0x72,0x5d,0x74,0x71  }; // weak
int dword_4456FC[] = { 28,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c,0x1c   }; // weak
int dword_445700[] = { 349,0x1a5,0x1af,0x1e5,0x12f,0x17f,0x214,0x14f ,0x214  }; // weak
int dword_445704[] = { 192,0xc0,0xaf,0xc0,0xa10,0xfa,0x160,0xfa,0xfa  }; // weak
int dword_445708[] = { 0,0,2,0,0,0,0,0,0 }; // weak


int dword_44570C = 6; // weak
int dword_445724 = 0; // weak
int dword_445740 = 2; // weak
int dword_445744 = 6; // weak
int dword_44575C = 0; // weak
int dword_445798 = 9; // weak
int dword_4457B0 = 0; // weak

int dword_4457D0 = 8; // weak
int dword_4457E8 = 0; // weak


//contiene para cada menu de 9 posiciones si esta activa o no la entrada
char byte_4457EF[] = { '\0' }; // weak
char menuActive_4457F0[] = { '\x01','\x0','\x01','\x01','\x01','\x01','\x01','\x0','\x0',
						'\x01','\x0','\x0','\x01','\x0','\x01','\x0','\x0','\x0',
						'\x0','\x0','\x01','\x01','\x1','\x01','\x1','\x1','\x0',
						'\x1','\x1','\x01','\x01','\x1','\x01','\x0','\x0','\x0',
						'\x1','\x1','\x01','\x01','\x1','\x0','\x0','\x0','\x0',
						'\x1','\x1','\x01','\x01','\x1','\x1','\x1','\x1','\x0',
						'\x1','\x1','\x01','\x01','\x1','\x1','\x1','\x1','\x1',
						'\x1','\x1','\x01','\x01','\x1','\x1','\x1','\x1','\x0',
						'\x1','\x1','\x01','\x01','\x1','\x1','\x1','\x1','\x1'
	
						}; // weak
//char menuActive_4457F0[] = { '\x01' }; // weak

//todo esto sobra pero hay referencias que tunear
//char byte_4457F1 = '\0'; // weak
//char byte_4457F9[] = { '\x01' }; // weak
//char byte_4457FA = '\0'; // weak
//char byte_4457FB = '\0'; // weak
//char byte_4457FD = '\0'; // weak
//char byte_445802 = '\0'; // weak 18
//char byte_445803 = '\0'; // weak
//char byte_445804 = '\x01'; // weak 20
///char byte_445805 = '\x01'; // weak
//char byte_445806 = '\x01'; // weak
//char byte_445807 = '\x01'; // weak
//char byte_445808 = '\x01'; // weak//24
//char byte_44580B[] = { '\x01' }; // weak ///27  10 es 32, 1a 42,1d 45
//char byte_44581D[] = { '\x01' }; // weak 
//char byte_445826[] = { '\x01' }; // weak 20 es 48  26 54
char byte_44582A[] = { '\x01' }; // weak //2a es 58
//char byte_445838[] = { '\x01' }; // weak //38 es 72

_UNKNOWN unk_445848[] ={ '\x20','\x20','\x14','\x9','\x0E','\x14','\x15','\x18','\x15','\x0A','\x0C','\x0B','\x10','\x15','\x9','\x14','\x8','\x13',
						'\x15','\x0A','\x14','\x13','\x14','\x14','\x13','\x12','\x13','\x12','\x8','\x9','\x10',
                         '\x15','\x10','\x0F','\x16','\x16','\x15','\x14','\x16','\x13','\x12','\x16','\x16','\x0A','\x11','\x15','\x13','\x1B','\x15','\x16','\x14',
						'\x16','\x15','\x14','\x14','\x16','\x18','\x1F','\x16','\x17',
	                    '\x13','\x0C','\x14','\x0C','\x14','\x13','\x9','\x14','\x12','\x11','\x12','\x10','\x0F','\x13',
						'\x12','\x8','\x0E','\x13','\x10','\x16','\x12','\x12','\x10','\x12','\x12','\x11','\x10','\x12','\x13','\x1A','\x12','\x13',
						'\x10','\x0B','\x6','\x0B','\x0F','\x14','\x0','\x0','\x0','\x0','\x0','\x0','\x10','\x10','\x0A','\x5','\x8','\x0B',
						'\x0B','\x0D','\x0B','\x5','\x6','\x6','\x9','\x0B','\x5','\x0B','\x4','\x0A','\x0B','\x5','\x9','\x0A','\x0A',
						'\x0A','\x0A','\x0A','\x0A','\x0A','\x4','\x5','\x9','\x0B','\x8','\x8','\x0C','\x0B','\x0B','\x0A','\x0B','\x0A',
						'\x0A','\x0C','\x0B','\x5','\x9','\x0B','\x0A','\x0E','\x0B','\x0B','\x0A','\x0B','\x0B','\x0A','\x0A','\x0B',
						'\x0C','\x0F','\x0B','\x0B','\x0A','\x7','\x0A','\x6','\x0A','\x0A','\x5','\x0B','\x0A','\x9','\x0A','\x9','\x9',
						'\x0A','\x0A','\x5','\x8','\x0A','\x9','\x0C','\x0A','\x0A','\x9','\x0A','\x0A','\x9','\x9','\x0A','\x0A','\x0E',
						'\x0A','\x0A','\x9','\x7','\x4','\x7','\x9','\x0B','\x10','\x0D','\x0E','\x0D','\x9','\x0D','\x0D','\x0D','\x0D',
						'\x0D','\x0C','\x0D','\x0D','\x0','\x0','\x0','\x0','\x0','\x0','\x0','\x9' }; // weak
char byte_445892[] = { '\x12','\x8','\x0E','\x13','\x10','\x16','\x12','\x12','\x20','\x12','\x12','\x11','\x10','\x12','\x13','\x1A','\x12','\x13','\x10','\x0B','\x6','\x0B','\x0F','\x14'}; // weak
//char byte_445892[] = { '\x12','\x8','\x0E','\x13','\x10','\x16','\x12','\x12','\x10','\x12','\x12','\x11','\x10','\x12','\x13','\x1A','\x12','\x13','\x10','\x0B','\x6','\x0B','\x0F','\x14','\x0','\x0','\x0','\x0','\x0','\x0' }; // weak
char byte_4458B0[] = { '\x10', '\x10', '\x0A', '\x5', '\x8', '\x0B', '\x0B', '\x0D', '\x0B', '\x5', '\x6', '\x6', '\x9', '\x0B', '\x5', '\x0B', '\x4', '\x0A', '\x0B', '\x5', '\x9', '\x0A', '\x0A', '\x0A', '\x0A', '\x0A', '\x0A', '\x0A', '\x4', '\x5', '\x9', '\x0B', '\x8', '\x8', '\x0C', '\x0B', '\x0B', '\x0A', '\x0B', '\x0A', '\x0A', '\x0C', '\x0B', '\x5', '\x9', '\x0B', '\x0A', '\x0E', '\x0B', '\x0B', '\x0A', '\x0B', '\x0B', '\x0A', '\x0A', '\x0B', '\x0C', '\x0F', '\x0B', '\x0B', '\x0A', '\x7', '\x0A', '\x6', '\x0A', '\x0A', '\x5', '\x0B', '\x0A', '\x9', '\x0A', '\x9', '\x9', '\x0A', '\x0A', '\x5', '\x8', '\x0A', '\x9', '\x0C', '\x0A', '\x0A', '\x9', '\x0A', '\x0A', '\x9', '\x9', '\x0A', '\x0A', '\x0E', '\x0A', '\x0A', '\x9', '\x7', '\x4', '\x7', '\x9', '\x0B', '\x10', '\x0D', '\x0E', '\x0D', '\x9', '\x0D', '\x0D', '\x0D', '\x0D', '\x0D', '\x0C', '\x0D', '\x0D', '\x0', '\x0', '\x0', '\x0', '\x0', '\x0', '\x0', '\x9', '\x0C', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9', '\x9' };
//char byte_4458B0 = '\x10'; // weak
char byte_4458B1 = '\x10'; // weak
char byte_4458E7[] = { '\v' }; // weak
char byte_44590A[] = { '\n' }; // weak
char byte_445911 = '\v'; // weak
char byte_445914 = '\x10'; // weak
char byte_445915 = '\r'; // weak
char byte_445916 = '\x0E'; // weak

char  unk_445928[] = {9,0xc,
					  9,9,9,9,9,9,9,9,9,9, 
					  9,9,9,9,9,9,9,9,9,9, 
					  9,9,9,9,9,9,9,9,9,9, 
					  9,9,9,9,9,9,9,9,9,9, 
					  9,9,9,9,9,9,9,9,9,9,
					  9,9,9,9,9,9,9,9,9,9, 
					  9,9 };
// esto sirve para hall of fame_UNKNOWN unk_445928; // weak
//esto es la duracion de los frames para los coches!!!!!

int carAnimFrameSize_45FBA0[6*64] = { 0x6A7,0x6B5,0x6D3,0x6E1,0x6DE,0x6CA,0x6D6,0x6B5,0x6C6,0x6AD,0x6AA,0x6BB,0x6AB,0x6C0,0x6A5,0x6B6,0x6A2,0x6AD,0x6B1,0x6C3,0x6C3,0x6D1,0x6C1,0x6B8,0x6BC,0x6BB,0x6BD,0x6C3,0x6B8,0x6B0,0x695,0x668,0x694,0x697,0x6A7,0x6C6,0x6D5,0x6C1,0x6AD,0x686,0x697,0x681,0x689,0x68C,0x676,0x684,0x69F,0x69C,0x69E,0x6D7,0x6D2,0x6F8,0x702,0x6FF,0x701,0x70D,0x70D,0x6FE,0x710,0x6FE,0x6E4,0x6CC,0x690,0x689,
									  0x676,0x694,0x6C0,0x71F,0x73C,0x759,0x76D,0x771,0x777,0x744,0x70D,0x705,0x709,0x6CA,0x681,0x65C,0x65C,0x676,0x695,0x68C,0x6A2,0x6B8,0x6AA,0x6AB,0x694,0x67B,0x66F,0x659,0x621,0x5E3,0x5A5,0x53F,0x51A,0x54D,0x579,0x5C4,0x5EF,0x616,0x617,0x63B,0x653,0x665,0x672,0x65D,0x670,0x658,0x65A,0x64D,0x65A,0x674,0x688,0x6C3,0x710,0x720,0x734,0x75D,0x7C4,0x7B8,0x7A8,0x787,0x765,0x736,0x6B5,0x67B, 
									  0x611,0x61E,0x642,0x690,0x6AD,0x6C3,0x6BB,0x6CB,0x6AB,0x6B5,0x693,0x67B,0x65D,0x65A,0x66B,0x664,0x64D,0x63F,0x63F,0x643,0x648,0x663,0x664,0x65C,0x651,0x639,0x61B,0x5E5,0x5E1,0x5CE,0x59A,0x566,0x580,0x5B4,0x5CA,0x5D8,0x5E3,0x5D6,0x5C2,0x5BE,0x5E1,0x5DF,0x5F2,0x5F5,0x5E4,0x61A,0x631,0x621,0x63D,0x660,0x673,0x66B,0x66E,0x6A2,0x6B1,0x6A6,0x69E,0x68A,0x6A7,0x697,0x6A0,0x660,0x632,0x5F7,
									  0x660,0x64A,0x673,0x697,0x6D9,0x715,0x726,0x710,0x701,0x6D7,0x6B6,0x66F,0x64D,0x634,0x63C,0x629,0x62D,0x637,0x644,0x63D,0x642,0x64F,0x63B,0x623,0x61E,0x5FA,0x5C9,0x5A9,0x598,0x566,0x530,0x4F2,0x4ED,0x505,0x545,0x55D,0x59A,0x5BB,0x5D8,0x5DA,0x5F5,0x610,0x623,0x630,0x626,0x616,0x629,0x629,0x62E,0x62E,0x658,0x63F,0x676,0x690,0x6D6,0x6E9,0x705,0x702,0x715,0x717,0x6FA,0x6C3,0x67F,0x670,
									  0x6CC,0x6E0,0x70A,0x731,0x743,0x747,0x736,0x71F,0x722,0x6E7,0x6D9,0x679,0x64A,0x62D,0x61E,0x622,0x604,0x608,0x61B,0x629,0x647,0x651,0x660,0x672,0x673,0x673,0x66F,0x66B,0x655,0x623,0x606,0x604,0x622,0x621,0x62D,0x652,0x664,0x659,0x65E,0x653,0x65D,0x63B,0x653,0x63F,0x63D,0x63D,0x627,0x61A,0x60C,0x616,0x613,0x63C,0x658,0x6A9,0x6D1,0x701,0x71B,0x72A,0x720,0x71B,0x709,0x6F3,0x6DC,0x6C7,
									  0x76B,0x757,0x76B,0x76C,0x77E,0x777,0x76B,0x77A,0x74F,0x756,0x760,0x72D,0x73A,0x722,0x710,0x708,0x703,0x6FA,0x6FA,0x6EF,0x6F8,0x6D9,0x6CE,0x6C8,0x6A5,0x6B1,0x68A,0x67E,0x64E,0x63D,0x61E,0x634,0x648,0x627,0x652,0x63C,0x64D,0x64A,0x65C,0x679,0x69B,0x6A5,0x6C1,0x6BD,0x6AA,0x6C7,0x6E8,0x701,0x702,0x715,0x710,0x743,0x74E,0x77C,0x770,0x781,0x798,0x7BA,0x7BA,0x7A4,0x792,0x75B,0x761,0x75D };
//= { 0x6A7,0x6B5,0x6D3,0x6E1,0x6DE,0x6CA,0x6D6,0x6B5,0x6C6,0x6AD,0x6AA,0x6BB,0x6AB,0x6C0,0x6A5,0x6B6,0x6A2,0x6AD,0x6B1,0x6C3,0x6C3,0x6D1,0x6C1,0x6B8,0x6BC,0x6BB,0x6BD,0x6C3,0x6B8,0x6B0,0x695,0x668,0x694,0x697,0x6A7,0x6C6,0x6D5,0x6C1,0x6AD,0x686,0x697,0x681,0x689,0x68C,0x676,0x684,0x69F,0x69C,0x69E,0x6D7,0x6D2,0x6F8,0x702,0x6FF,0x701,0x70D,0x70D,0x6FE,0x710,0x6FE,0x6E4,0x6CC,0x690,0x689,0x676,0x694,0x6C0,0x71F,0x73C,0x759,0x76D,0x771,0x777,0x744,0x70D,0x705,0x709,0x6CA,0x681,0x65C,0x65C,0x676,0x695,0x68C,0x6A2,0x6B8,0x6AA,0x6AB,0x694,0x67B,0x66F,0x659,0x621,0x5E3,0x5A5,0x53F,0x51A,0x54D,0x579,0x5C4,0x5EF,0x616,0x617,0x63B,0x653,0x665,0x672,0x65D,0x670,0x658,0x65A,0x64D,0x65A,0x674,0x688,0x6C3,0x710,0x720,0x734,0x75D,0x7C4,0x7B8,0x7A8,0x787,0x765,0x736,0x6B5,0x67B,0x611,0x61E,0x642,0x690,0x6AD,0x6C3,0x6BB,0x6CB,0x6AB,0x6B5,0x693,0x67B,0x65D,0x65A,0x66B,0x664,0x64D,0x63F,0x63F,0x643,0x648,0x663,0x664,0x65C,0x651,0x639,0x61B,0x5E5,0x5E1,0x5CE,0x59A,0x566,0x580,0x5B4,0x5CA,0x5D8,0x5E3,0x5D6,0x5C2,0x5BE,0x5E1,0x5DF,0x5F2,0x5F5,0x5E4,0x61A,0x631,0x621,0x63D,0x660,0x673,0x66B,0x66E,0x6A2,0x6B1,0x6A6,0x69E,0x68A,0x6A7,0x697,0x6A0,0x660,0x632,0x5F7,0x660,0x64A,0x673,0x697,0x6D9,0x715,0x726,0x710,0x701,0x6D7,0x6B6,0x66F,0x64D,0x634,0x63C,0x629,0x62D,0x637,0x644,0x63D,0x642,0x64F,0x63B,0x623,0x61E,0x5FA,0x5C9,0x5A9,0x598,0x566,0x530,0x4F2,0x4ED,0x505,0x545,0x55D,0x59A,0x5BB,0x5D8,0x5DA,0x5F5,0x610,0x623,0x630,0x626,0x616,0x629,0x629,0x62E,0x62E,0x658,0x63F,0x676,0x690,0x6D6,0x6E9,0x705,0x702,0x715,0x717,0x6FA,0x6C3,0x67F,0x670,0x6CC,0x6E0,0x70A,0x731,0x743,0x747,0x736,0x71F,0x722,0x6E7,0x6D9,0x679,0x64A,0x62D,0x61E,0x622,0x604,0x608,0x61B,0x629,0x647,0x651,0x660,0x672,0x673,0x673,0x66F,0x66B,0x655,0x623,0x606,0x604,0x622,0x621,0x62D,0x652,0x664,0x659,0x65E,0x653,0x65D,0x63B,0x653,0x63F,0x63D,0x63D,0x627,0x61A,0x60C,0x616,0x613,0x63C,0x658,0x6A9,0x6D1,0x701,0x71B,0x72A,0x720,0x71B,0x709,0x6F3,0x6DC,0x6C7,0x76B,0x757,0x76B,0x76C,0x77E,0x777,0x76B,0x77A,0x74F,0x756,0x760,0x72D,0x73A,0x722,0x710,0x708,0x703,0x6FA,0x6FA,0x6EF,0x6F8,0x6D9,0x6CE,0x6C8,0x6A5,0x6B1,0x68A,0x67E,0x64E,0x63D,0x61E,0x634,0x648,0x627,0x652,0x63C,0x64D,0x64A,0x65C,0x679,0x69B,0x6A5,0x6C1,0x6BD,0x6AA,0x6C7,0x6E8,0x701,0x702,0x715,0x710,0x743,0x74E,0x77C,0x770,0x781,0x798,0x7BA,0x7BA,0x7A4,0x792,0x75B,0x761,0x75D };
int engineAnimFrameSize_445F68[] = {0x6b4,0x6b1,0x6bc,0x6b2,0x6a5,0x6bf,0x6a6,0x6b2,0x6b2,0x6c8,0x6cb,0x6e0,0x6d9,0x6ef,0x6cc,0x6c3,0x6c1,0x6d2,0x6ce,0x6de,0x6d1,0x6b2,0x6b2,0x6b6,0x75d,0x76d,0x76d,0x771,0x76d,0x77b,0x76c,0x764,0x74e,0x73c,0x731,0x739,0x71b,0x701,0x710,0x709,0x70c,0x71b,0x71e,0x72a,0x740,0x756,0x73f,0x760,0x800,0x7e8,0x7c7,0x7b5,0x79f,0x7a3,0x768,0x76b,0x764,0x752,0x755,0x74f,0x74c,0x74a,0x747,0x752,0x747,0x747,0x759,0x762,0x785,0x7a3,0x7bc,0x7e4,0x93e,0x92c,0x92c,0x923,0x93b,0x91e,0x915,0x902,0x8fc,0x8e9,0x8e1,0x8cb,0x8c5,0x8c0,0x8bd,0x8d0,0x8d6,0x8cc,0x8d8,0x8e9,0x908,0x90a,0x91e,0x929 }; // weak
int tireAnimFrameSize_4460E8[] = {0x6c3,0x6c1,0x6c3,0x6c1,0x6c3,0x6bd,0x6bc,0x6ce,0x6bc,0x6d2,0x6c0,0x6bc,0x6e4,0x6e9,0x6e2,0x6ed,0x6e9,0x6eb,0x6ef,0x6dd,0x6d3,0x6e1,0x6e4,0x6e4,0x72e,0x750,0x734,0x74f,0x73c,0x747,0x74b,0x745,0x738,0x741,0x74c,0x74b,0x7df,0x7df,0x7f1,0x7f7,0x7e9,0x7f3,0x7ea,0x7ec,0x7f3,0x802,0x7f0,0x7e1 }; // weak
int armourAnimFrameSize_4461A8[] = {0x64e,0x637,0x629,0x62e,0x61c,0x60f,0x604,0x5e0,0x5ef,0x5f2,0x5e4,0x5ee,0x5e0,0x5e3,0x5cf,0x5cb,0x705,0x713,0x718,0x705,0x701,0x6ec,0x6ec,0x6ec,0x6f3,0x6f8,0x6d3,0x6ce,0x6d3,0x6ad,0x681,0x652,0x77e,0x7ad,0x7c4,0x7c7,0x7ce,0x7e1,0x7cb,0x7c8,0x7c3,0x7c8,0x7a4,0x786,0x75b,0x747,0x6e7,0x6ec,0x7d2,0xcf,0x7e9,0x7d9,0x7d9,0x7d0,0x799,0x787,0x75b,0x782,0x768,0x74a,0x717,0x72f,0x715,0x6eb }; // weak
int continueAnimFramesSize_4611D0[] = { 0x602,0x577,0x622,0x613,0x608,0x601,0x5ee,0x5dc,0x5d5,0x5dc,0x5da,0x5ec,0x5f7,0x5fd,0x60c,0x651,0x639,0x62e,0x61e,0x630,0x627,0x629,0x61b }; // weak
int repairAnimFrameSize_446308[] =    {0x5b3,0x5bb,0x5aa,0x5ad,0x598,0x597,0x5a9,0x593,0x5a5,0x5b0,0x5aa,0x593,0x597,0x580,0x580,0x5a9,0x5bb,0x5b8,0x5b3,0x5bf,0x5bb,0x5a9,0x9d,0x5a3}; // weak
char aStartRacing[13] = "Start Racing"; // weak

char aStartANewGam_0[17] = "Start A New Game"; // weak
int dword_4466EC = 1953066569; // weak
int dword_4466F0 = 1768710505; // weak
int dword_4466F4 = 1092642170; // weak
int dword_4466F8 = 2003127840; // weak
int dword_4466FC = 1835091744; // weak
__int16 word_446700 = 101; // weak
int dword_44671E = 1852403530; // weak
int dword_446722 = 544096544; // weak
int dword_446726 = 1936291909; // weak
int dword_44672A = 1735289204; // weak
int dword_44672E = 1835091744; // weak
__int16 word_446732 = 101; // weak
int dword_446782 = 1769104723; // weak
int dword_446786 = 1126198369; // weak
int dword_44678A = 1701736047; // weak
int dword_44678E = 1869182051; // weak
__int16 word_446792 = 110; // weak
int dword_4467B4 = 1818323268; // weak
int dword_4467B8 = 1685015840; // weak
__int16 word_4467BC = 28005; // weak
char byte_4467BE = '\0'; // weak
int dword_4467E6 = 2004053569; // weak
int dword_4467EA = 1293972069; // weak
int dword_4467EE = 1835361391; // weak
char byte_4467F2 = '\0'; // weak
char aGamepadDisable[17] = "Gamepad Disabled"; // weak
_UNKNOWN unk_446C32; // weak

_UNKNOWN unk_446DC2; // weak
int dword_446DF4 = 1701012289; // weak
int dword_446DF8 = 1634887020; // weak
int dword_446DFC = 538994036; // weak
__int16 word_446E00 = 8224; // weak
char byte_446E02 = 'a'; // weak
int dword_446E26 = 1801548354; // weak
int dword_446E2A = 538976357; // weak
int dword_446E2E = 538976288; // weak
__int16 word_446E32 = 31264; // weak
int dword_446E58 = 1701147731; // weak
int dword_446E5C = 1699487858; // weak
int dword_446E60 = 538997862; // weak
int dword_446E64 = 4210696224; // weak
char byte_446E68 = 'l'; // weak
int dword_446E8A = 1701147731; // weak
int dword_446E8E = 1766989938; // weak
int dword_446E92 = 544499815; // weak
int dword_446E96 = 4210696224; // weak
int dword_446E9A = 4210752250; // weak
char byte_446E9E = 'r'; // weak
_UNKNOWN unk_446EBC; // weak
_UNKNOWN unk_446EEE; // weak
byte byte_446F20[50] =  //Drop mine
{
  68,
  114,
  111,
  112,
  32,
  77,
  105,
  110,
  101,
  32,
  32,
  32,
  32,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  108,
  101,
  102,
  116,
  32,
  97,
  108,
  116,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
_UNKNOWN unk_446F52; // weak
int dword_4470E2 = 1701736276; // weak
int dword_4470E6 = 1634288672; // weak
int dword_4470EA = 1735289196; // weak
__int16 word_4470EE = 0; // weak
int dword_447178 = 1701012289; // weak
int dword_44717C = 1634887020; // weak
int dword_447180 = 538994036; // weak
__int16 word_447184 = 8224; // weak
char byte_447186 = 'a'; // weak
int dword_4471AA = 1801548354; // weak
int dword_4471AE = 538976357; // weak
int dword_4471B2 = 538976288; // weak
__int16 word_4471B6 = 31264; // weak
int dword_4471DC = 1701147731; // weak
int dword_4471E0 = 1699487858; // weak
int dword_4471E4 = 538997862; // weak
int dword_4471E8 = 4210696224; // weak
char byte_4471EC = 'l'; // weak
int dword_44720E = 1701147731; // weak
int dword_447212 = 1766989938; // weak
int dword_447216 = 544499815; // weak
int dword_44721A = 4210696224; // weak
int dword_44721E = 4210752250; // weak
char byte_447222 = 'r'; // weak
_UNKNOWN unk_447240; // weak
_UNKNOWN unk_447272; // weak
byte byte_4472A4[156] =
{
  68,
  114,
  111,
  112,
  32,
  77,
  105,
  110,
  101,
  32,
  32,
  32,
  32,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  250,
  108,
  101,
  102,
  116,
  32,
  97,
  108,
  116,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  80,
  114,
  101,
  118,
  105,
  111,
  117,
  115,
  32,
  77,
  101,
  110,
  117,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
char aSpeedMakesMeDi[21] = "speed makes me dizzy"; // weak
char aILiveToRide[15] = "i live to ride"; // weak
char aPetrolInMyVein[19] = "petrol in my veins"; // weak
char byte_447388[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char byte_4473D8[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aNotTooShabbyDr[25] = "[Not too shabby, driver."; // weak
char byte_447478[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aYourWildWinnin[37] = "[Your wild winning streak has earned"; // weak
char aYouAnExtra600B[36] = "[you an extra 600 bucks.{ But don't"; // weak
char aGetCockyThoseO[31] = "get cocky, those other wannabe"; // weak
char aVictoryHoundsA[33] = "victory hounds are going to zero"; // weak
char aRightIntoYourB[36] = "right into your blazing taillights."; // weak
char aAndTheyWantToG[30] = "And they want to get you bad."; // weak
char byte_448648[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char byte_448698[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aInconceivableD[24] = "[Inconceivable, driver!"; // weak
char byte_448738[80] =
{
  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aItWasASnowball[36] = "It was a snowball's chance in hell."; // weak
char aThroughThatBli[36] = "Through that blitzkrieg battle, and"; // weak
char aNotAShadowOfAS[35] = "[not a shadow of a scratch on your"; // weak
char aPaintJob_MyBet[36] = "[paint job.{ My bet was on you, and"; // weak
char aItPaidMeBackBi[38] = "it paid me back big time. Here, [your"; // weak
char aShare350_GoKno[40] = "[share{, [$350{. Go knock yourself out."; // weak
char byte_449908[80] =
{
  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char byte_449958[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aIAmOneGrateful[35] = "[I am one grateful reaper, driver."; // weak
char byte_4499F8[80] =
{
	'\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0'
}; // idb
char aMoreCarCorpses[38] = "[More car corpses{ for my domain. You"; // weak
char aAreMySweetestM[35] = "are my sweetest minion. Your dead-"; // weak
char aSeriousDedicat[34] = "serious dedication has earned you"; // weak
char aAParkingSpaceA[35] = "a parking space among my horsemen."; // weak
char aABonusOf600ToY[33] = "[A bonus of $600 to you{, horse-"; // weak
char aPoweredSerialA[28] = "powered serial-auto-killer."; // weak
char aWhatMotorizedS[34] = "[What motorized steroid peddling!"; // weak
_UNKNOWN unk_44AC18; // weak
char aWowMyMainMan_I[32] = "Wow, my main man. I didn't know"; // weak
char aThereWasThatMu[33] = "there was that much smoke in the"; // weak
char aWholeBurningHe[32] = "whole burning hell, and through"; // weak
char aItAllBearingGi[32] = "it all, bearing gifts like some"; // weak
char aBlessedBeastYo[35] = "blessed beast, you came. And [this"; // weak
char byte_44ADF8[] = { '[' }; // weak
_UNKNOWN unk_44AE48; // weak
_UNKNOWN unk_44AE98; // weak
char aWhereReMyStero[23] = "[Where're my steroids?"; // weak
_UNKNOWN unk_44AF38; // weak
char aTheWholeDealWe[35] = "[The whole deal went sour{ because"; // weak
char aOfYourIncompet[34] = "of your incompetence. A few slick"; // weak
char aTurnsOfTheWhee[34] = "turns of the wheel, but no, nope!"; // weak
char aIMNotHappyAndW[32] = "I'm not happy, and when I'm not"; // weak
char aHappyIAmMadAnd[30] = "happy I am mad, and when I am"; // weak
char aMadBadThingsHa[33] = "mad [bad things happen - to you!"; // weak
_UNKNOWN unk_44B168; // weak
_UNKNOWN unk_44B1B8; // weak
char aYouTotallySlew[28] = "[You totally slew that car."; // weak
_UNKNOWN unk_44B258; // weak
char aAKillerRaceThe[36] = "A killer race! The bullets took the"; // weak
char aSkyLikeCloudsO[32] = "sky like clouds of locusts, and"; // weak
char aTheScreamsOfMo[29] = "the screams of motors were a"; // weak
char aBansheeWail_De[32] = "banshee wail. [Death!{ You were"; // weak
char byte_44B3E8[] = { 'b' }; // weak
char byte_44B438[] = { '[' }; // weak
_UNKNOWN unk_44B488; // weak
_UNKNOWN unk_44B4D8; // weak
char aYourHitMissed[18] = "[Your hit missed!"; // weak
_UNKNOWN unk_44B578; // weak
char aYouSissySunday[30] = "You sissy Sunday driver. [The"; // weak
char aSimplestJobAnd[36] = "[simplest job, and you screw it up!"; // weak
char aIBetYouAreAfra[36] = "I bet you are afraid of the dark as"; // weak
char aWell_ILlShowYo[33] = "well. I'll show you what happens"; // weak
char aWhenYouBreakYo[36] = "when you break your promises to me."; // weak
char aIMGonnaMakeYou[25] = "[I'm gonna make you pay!"; // weak
_UNKNOWN unk_44B7A8; // weak
_UNKNOWN unk_44B7F8; // weak
_UNKNOWN unk_44B848; // weak
char aWelcomeToTheSh[21] = "[Welcome to The Shop"; // weak
_UNKNOWN unk_44B8E8; // weak
char aZillionsMoreMi[46] = "Zillions more miles to go. That junk of yours"; // weak
char aIsNoJuggernaut[41] = "is no juggernaut, she won't take you all"; // weak
char aTheWay_YouNeed[44] = "the way. [You need to gear up{, to upgrade,"; // weak
char aMakeHeadlongHe[41] = "make headlong headway, strive to stride,"; // weak
char aStrideToStrive[43] = "stride to strive, evolve, improve, better,"; // weak
char aBest_BuyBeOneS[41] = "best. [Buy & be one shining perfection.{"; // weak
_UNKNOWN unk_44BB18; // weak
_UNKNOWN unk_44BE88; // weak
char aPsst___yeahYou[26] = "[Psst...yeah you, driver."; // weak
_UNKNOWN unk_44BF28; // weak
char aJealousyBurnsY[45] = "Jealousy burns you like a dragon inside, you"; // weak
char aWantThatRoadAl[42] = "[want that road all to yourself?{ So jinx"; // weak
char aThoseRivalSuck[42] = "those rival suckers, let them go out in a"; // weak
char aBlazeYouTakeTh[43] = "blaze; you take the glory. [Welcome to the"; // weak
char aUndergroundM_0[45] = "[Underground Market.{ What you want, we got."; // weak
char aDigOutTheDough[40] = "Dig out the dough, this gonna cost you."; // weak
_UNKNOWN unk_44C158; // weak
_UNKNOWN unk_44C1A8; // weak
char aWelcomeToDea_0[25] = "[Welcome to Death Rally."; // weak
_UNKNOWN unk_44C248; // weak
char aTheRaceIsOnInD[48] = "The race is on, in [Death Rally{, where life is"; // weak
char aShortHotFastDe[44] = "short & hot, fast & deadly. Watch the road,"; // weak
char aHearTheRumble_[43] = "hear the rumble. [Start out easy{, get the"; // weak
char aFeelOfIt_ButRe[42] = "feel of it. But remember: by the rules or"; // weak
char aFryTheRulesPla[46] = "fry the rules, [play to win{. 'nuff said. Now"; // weak
char aRideYourMachin[45] = "[ride your machine{, your motor-war-chariot."; // weak
_UNKNOWN unk_44C478; // weak
_UNKNOWN unk_44C4C8; // weak
char aItSPayBackTime[34] = "     [It's pay-back time, driver."; // weak
_UNKNOWN unk_44C568; // weak
char aThisIsWhatILik[39] = "     This is what I like to see, a guy"; // weak
char aWhoKeepsHisPar[40] = "     who keeps his part of the bargain."; // weak
char aAhTheSweetSmel[40] = "     Ah, the sweet smell of money. Come"; // weak
char aToPapaMyBabies[42] = "     to papa, my babies. [Real nice doing"; // weak
char aBusinessWithYo[39] = "     [business with you{, thunderboy.{"; // weak
char aThanksAndGoodR[39] = "     Thanks, and good racing riddance."; // weak
_UNKNOWN unk_44C798; // weak
_UNKNOWN unk_44C7E8; // weak
char aItSPayBackTi_0[34] = "     [It's pay-back time, driver."; // weak
_UNKNOWN unk_44C888; // weak
char aTutTutHotshotI[39] = "     Tut tut, hotshot, [I can't see my"; // weak
char aMoneyAnywhere_[39] = "     [money anywhere.{ I ain't amused,"; // weak
char aJoker_ADealIsA[38] = "     joker. A deal is a deal. I got a"; // weak
char aReputationToLo[40] = "     reputation to look after. Too bad."; // weak
char aNothingPersona[42] = "     Nothing personal, but [I got to hurt"; // weak
char aYouSomeNow_Hur[37] = "     [you some now.{ Hurt 'im, boyz."; // weak
_UNKNOWN unk_44CAB8; // weak
_UNKNOWN unk_44CB08; // weak
_UNKNOWN unk_44CB58; // weak
char aYouWereLappedY[29] = "[You were lapped, you loser!"; // weak
_UNKNOWN unk_44CBF8; // weak
char aThePainTheHumi[38] = "The pain, the humiliation! Your stunt"; // weak
char aMadeMeTheLaugh[34] = "made me the laughing stock of the"; // weak
char aRaces_WhatWere[35] = "races. What were you trying to do,"; // weak
char aMimicSlowMotio[35] = "mimic slow-motion? No one is going"; // weak
char aToTakeMeSeriou[33] = "to take me seriously after this."; // weak
char aNoMoneyOrPoint[29] = "[No money or points awarded."; // weak
_UNKNOWN unk_44CE28; // weak
_UNKNOWN unk_44CE78; // weak
char aTooSlowNoDough[21] = "[Too slow, no dough!"; // weak
_UNKNOWN unk_44CF18; // weak
char aDeathRallyIsFo[32] = "Death Rally is for winners. You"; // weak
char aTotallyLostThi[33] = "totally lost this race. [All the"; // weak
char aBonusYouCollec[35] = "[bonus $$ you collected on the way"; // weak
char aAreNullAndVoid[38] = "[are null and void.{ You get nothing,"; // weak
char aGetIt_ZeroNone[33] = "get it? Zero, none, naught, nix,"; // weak
char aNadaZilch_Next[35] = "nada, zilch. Next time, be better."; // weak

char *circuits[18] = { "Suburbia","Downtown", "Utopia","Rock Zone", "Snake Alley", "Oasis", "Velodrome", "Holocaust", "Bogota","West End", "Newark", "Complex", "Hell Mountain","Desert Run","Palm Side","Eidolon","Toxic Dump", "Borneo" };
char aSuburbia[9] = "Suburbia"; // weak

//aqui empiezan los datos de los coches :)

int initialVelocity = 55; // idb



//datos de los coches
char aVagabond[9] = "Vagabond"; // weak
//int dword_44DF5C[440 * 6];
int dword_44DF5C = 500; // idb
char aVagabondSpee_0[25] = "[Vagabond - Speed 55 mph"; // weak
_UNKNOWN unk_44DF88; // weak
char aSpeedCanBeBo_0[34] = "Speed can be boosted to [60{ mph."; // weak
char aOnly2TireAnd1A[28] = "Only [2{ tire and [1{ armor"; // weak
char aUpgrades_[10] = "upgrades."; // weak
_UNKNOWN unk_44E028; // weak
char aVagabondSpeed5[25] = "[Vagabond - Speed 55 mph"; // weak
_UNKNOWN unk_44E078; // weak
char aSpeedCanBeBoos[34] = "Speed can be boosted to [60{ mph."; // weak
char aASingleRevolve[33] = "A single revolver. Only [2{ tire"; // weak
char aAnd1ArmorUpgra[24] = "and [1{ armor upgrades."; // weak
_UNKNOWN unk_44E118; // weak
char aVagabondBought[17] = "[Vagabond bought"; // weak
_UNKNOWN unk_44E168; // weak
char aFaceItNotTheHo[31] = "Face it, not the hottest thing"; // weak
char aAroundButSheLl[33] = "around, but she'll get you there"; // weak
char aOnHerOwnSweetT[33] = "- on her own sweet time, is all."; // weak
_UNKNOWN unk_44E208; // weak
char a4CylinderMotor[35] = "[4 cylinder motor - Speed: [60 mph"; // weak
_UNKNOWN unk_44E258; // weak
char aSickOfHearingY[33] = "Sick of hearing your old spirit-"; // weak
char aBurnerMoanInCo[34] = "burner moan in constant over-rev?"; // weak
char aThisMotorIsThe[34] = "This motor is the sweet solution."; // weak
_UNKNOWN unk_44E2F8; // weak
int dword_44E5F0[] = { 1 }; // weak
int dword_44E5F4[] = { 2 }; // weak
int dword_44E5F8[] = { 1 }; // weak
int dword_44E5FC = 1000; // idb
int dword_44E600 = 0; // idb
int dword_44E60C = 500; // idb
int dword_44E610 = 1000; // idb
int dword_44E61C = 200; // idb
int dword_44E620 = 0; // idb
int dword_44E62C[] = { 45 }; // weak
char aDeliverator[12] = "Deliverator"; // weak



///hasta aqui son datos de los coches :)

char aNoMoreEngineUp[25] = "[NO MORE ENGINE UPGRADES"; // weak
_UNKNOWN unk_450B10; // weak
char aYouVeGotTheMos[34] = "You've got the most beastly motor"; // weak
char aMonsterThisVeh[32] = "monster this vehicle can carry."; // weak
char aHearItsPowerfu[35] = "Hear its powerful & sublime sound."; // weak
_UNKNOWN unk_450BB0; // weak
char aNoMoreTireUpgr[23] = "[NO MORE TIRE UPGRADES"; // weak
_UNKNOWN unk_450C00; // weak
char aYouVeGotTheBes[32] = "You've got the best fat, sticky"; // weak
char aTiresThisVehic[34] = "tires this vehicle can boast. You"; // weak
char aAreInCloseTouc[34] = "are in close touch with the road."; // weak
_UNKNOWN unk_450CA0; // weak
char aNoMoreArmorUpg[24] = "[NO MORE ARMOR UPGRADES"; // weak
_UNKNOWN unk_450CF0; // weak
char aYouGotTheBestS[34] = "You got the best shining knight's"; // weak
char aArmorThisWarho[33] = "armor this warhorsepower chariot"; // weak
char aCanCarryToAnyR[30] = "can carry to any road battle."; // weak
_UNKNOWN unk_450D90; // weak
char a4CylinderMot_0[28] = "[4 cylinder motor installed"; // weak
_UNKNOWN unk_450DE0; // weak
char aThisEngineGeni[31] = "This engine genie will let you"; // weak
char aWin_ItWillGran[34] = "win. It will grant your boy racer"; // weak
char aWishes_[8] = "wishes."; // weak
char byte_450E80[720] =
{
  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '[',  'E',  'n',  'h',  'a',  'n',  'c',  'e',  'd',  ' ',  '4',  ' ',  'c',  'y',  'l',  'i',  'n',  'd','e',  'r',  ' ',  'i',  'n',  's',  't',  'a',  'l',  'l',  'e',  'd',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  'N',  'o',  'w',  ' ',  'a',  'n',  'y',  ' ',  'b',  'i',  't',  't',  'e',  'r',  ' ',  'r',  'e',  'g',  'r',  'e',  't',  's',  ' ',  'a',  'r','e',  ' ',  'i',  'n',  ' ',  't',  'h',  'e',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  'p',  'a',  's',  't',  ',',  ' ',  'j',  'u',  's',  't',  ' ',  'b',  'l',  'u',  'r','r',  'e',  'd',  ',',  ' ',  's',  'w',  'e',  'e',  't',  ' ',  's',  't',  'r',  'e',  'e',  't',  '-',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  'l',  'i',  'g',  'h',  't','s',  ' ',  's',  'p',  'e',  'e',  'd',  'i',  'n',  'g',  ' ',  'p',  'a',  's',  't',  ' ',  'f',  'a',  's',  't',  '.',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '[',  'V',  '6',  ' ',  'I',  'n',  'j',  'e',  'c',  't','i',  'o',  'n',  ' ',  'm',  'o',  't',  'o',  'r',  ' ',  'i',  'n',  's',  't',  'a',  'l',  'l',  'e',  'd',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0',  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','I','f',' ','s','p','e','e','d','i','n','g',' ','i','s',' ','t','h','e',' ','8','t','h',' ','d','e','a','d','l','y',' ','s','i','n',',','\0','\0','\0','\0','\0','\0','w','i','t','h',' ','t','h','i','s',' ','b','a','b','e',' ','u','n','d','e','r',' ','y','o','u','r',' ','h','o','o','d',',','\0','\0','\0','\0','\0','\0','\0','\0','\0','y','o','u',' ','a','r','e',' ','n','o','w',' ','p','a','s','t',' ','r','e','d','e','m','p','t','i','o','n','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','V','8',' ','T','u','r','b','o',' ','I','n','j','e','c','t','i','o','n','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','G','l','e','a','m','i','n','g',' ','p','i','s','t','o','n','s',' ','p','u','m','p','i','n','g',' ','i','n',' ','c','h','o','r','u','s','\0','\0','\0','\0','\0','\0','w','i','t','h',' ','y','o','u','r',' ','h','u','n','g','r','y',' ','h','e','a','r','t','.',' ','T','h','i','s',' ','s','w','e','e','t','\0','\0','\0','\0','\0','\0','s','y','m','b','i','o','s','i','s',' ','c','a','n',' ','c','a','u','s','e',' ','a','d','d','i','c','t','i','o','n','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aTrackmaster155[17] = "[Trackmaster 155"; // weak
_UNKNOWN unk_4511A0; // weak
char aTheseWheelsWil[34] = "These wheels will let you do some"; // weak
char aRapidFireCorne[30] = "rapid fire cornerings on that"; // weak
char aShimmeringSilv[26] = "shimmering silver street."; // weak
char byte_451240[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','o','a','d','r','u','n','n','e','r',' ','N','S',' ','1','7','5','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','i','t','h',' ','t','h','e','s','e',' ','f','a','t',' ','t','i','r','e','s',',',' ','y','o','u','\'','l','l',' ','s','h','o','o','t','\0','\0','\0','\0','\0','\0','f','r','o','m',' ','t','h','e',' ','s','t','a','r','t','i','n','g','-','l','i','n','e',' ','l','i','k','e',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','l','o','o','d',' ','l','u','s','t','i','n','g',' ','b','u','l','l','e','t','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','l','i','d','e','s','t','o','p',' ','2','0','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','T','h','e','s','e',' ','f','a','t',' ','b','o','t','t','o','m','e','d',' ','t','i','r','e','s','\'','l','l',' ','k','i','s','s','\0','\0','\0','\0','\0','\0','\0','\0','t','h','e',' ','r','o','a','d',' ','l','i','k','e',' ','c','r','a','z','y',',',' ','t','h','e','y',' ','j','u','s','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','c','a','n','\'','t',' ','g','e','t',' ','e','n','o','u','g','h','.',' ','T','h','e','y','\'','r','e',' ','h','o','t','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','a','c','e','r','-','X','2','3','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','Z','o','r','r','o','\'','s',' ','Z','s',' ','w','e','r','e',' ','n','o','t','h','i','n','g','.',' ','C','a','r','v','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','y','o','u','r',' ','w','h','o','l','e',' ','s','i','g','n','a','t','u','r','e',',',' ','t','o',' ','t','h','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','r','a','i','n','b','o','w','-','o','i','l','e','d',' ','r','o','a','d',',',' ','d','o','i','n','g',' ','1','6','0','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aTrackmaster1_0[24] = "[Trackmaster 155 bought"; // weak
_UNKNOWN unk_451560; // weak
char aWarp9Captain_N[34] = "Warp 9, Captain. No problems with"; // weak
char aTractionNow_Th[31] = "traction now. The finish line,"; // weak
char aSheSClosingFas[20] = "she's closing fast."; // weak
char byte_451600[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','o','a','d','r','u','n','n','e','r',' ','N','S',' ','1','7','5',' ','b','o','u','g','h','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','O','n',' ','t','h','e','s','e',' ','w','h','e','e','l','s',',',' ','y','o','u','r',' ','v','e','h','i','c','l','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','t','a','r','t','s',' ','l','i','k','e',' ','a',' ','n','u','c','l','e','a','r',' ','b','l','a','s','t',',',' ','a','n','d','\0','\0','\0','\0','\0','\0','\0','\0','s','t','o','p','s',' ','y','o','u',' ','l','i','k','e',' ','a',' ','c','a','r','d','i','a','c',' ','a','r','r','e','s','t','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','l','i','d','e','s','t','o','p',' ','2','0','0',' ','b','o','u','g','h','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','N','o','w',' ','f','a','s','t',' ','t','a','l','k',' ','t','o',' ','t','h','a','t',' ','a','s','p','h','a','l','t',',','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','m','o','t','o','r','m','o','u','t','h','.',' ','T','i','m','e',' ','t','o',' ','m','a','k','e',' ','s','o','m','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','e','a','u','t','i','f','u','l',' ','a','u','t','o','m','o','b','i','l','e',' ','p','o','e','t','r','y','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','a','c','e','r','-','X','2','3','0',' ','b','o','u','g','h','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','m','a','r','t',' ','m','o','v','e',',',' ','m','o','t','o','r','m','a','n','.',' ','N','o','w',' ','g','e','t',' ','o','u','t','\0','\0','\0','\0','\0','\0','\0','t','h','e','r','e',',',' ','a','n','d',' ','d','o',' ','s','o','m','e',' ','d','a','s','h','i','n','g',',',' ','d','a','r','e','-','\0','\0','\0','\0','\0','\0','\0','d','e','v','i','l','i','s','h',' ','d','a','m','a','g','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aSteelTriumphPl[23] = "[Steel Triumph Plating"; // weak
_UNKNOWN unk_451920; // weak
char aSteelTriumphWo[35] = "Steel Triumph won't stop the hurt,"; // weak
char aButItJustMight[34] = "but it just might keep you in one"; // weak
char aPieceToTheFini[26] = "piece to the finish line."; // weak
char byte_4519C0[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','F','e','r','r','o','C','h','r','o','m','i','u','m',' ','A','r','m','o','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','h','a','t',' ','t','h','e',' ','r','i','v','a','l',' ','g','u','n','s',' ','g','i','v','e',',',' ','t','h','i','s','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','a','r','m','o','r',' ','c','a','n',' ','t','a','k','e',',',' ','b','u','t',' ','y','o','u','\'','d',' ','b','e','t','t','e','r','\0','\0','\0','\0','\0','\0','\0','\0','s','h','o','o','t',' ','b','a','c','k',',',' ','t','h','e','r','e','\'','s',' ','a',' ','l','i','m','i','t','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','T','i','t','a','n','i','u','m',' ','P','l','a','t','i','n','g','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','e','e',' ','t','h','i','s',' ','b','i','g',' ','g','u','n',';',' ','s','e','e',' ','t','h','i','s',' ','a','r','m','o','r','.','\0','\0','\0','\0','\0','\0','\0','[','B','A','N','G','!','{',' ','N','o','w',' ','s','e','e',' ','t','h','e',' ','a','r','m','o','r','.',' ','S','m','i','l','e',' ','t','o','\0','\0','\0','\0','\0','y','o','u','r',' ','r','e','f','l','e','c','t','i','o','n','.',' ','L','o','o','k','i','n','g',' ','g','o','o','d','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','A','c','c','e','s','t','e','e','l',' ','A','r','m','o','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','A','l','l',' ','b','u','t',' ','t','h','e',' ','m','o','s','t',' ','e','x','t','r','e','m','e',' ','s','h','o','t','s','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','o','u','n','c','e',' ','o','f','f',' ','l','i','k','e',' ','h','a','i','l',' ','o','n',' ','h','a','r','d','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','c','o','n','c','r','e','t','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aSteelTriumphBo[22] = "[Steel Triumph bought"; // weak
_UNKNOWN unk_451CE0; // weak
char aStraightFromTh[33] = "Straight from the best R&D Labs,"; // weak
char aShieldingSteel[34] = "shielding Steel Triumph gives you"; // weak
char aThatExtraEdgeY[27] = "that extra edge you crave."; // weak
char byte_451D80[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','F','e','r','r','o','C','h','r','o','m','i','u','m',' ','A','r','m','o','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','D','e','f','l','e','c','t','s',' ','b','u','l','l','e','t','s',',',' ','a','n','d',' ','m','o','s','t',' ','o','t','h','e','r','\0','\0','\0','\0','\0','\0','\0','\0','b','a','d',' ','s','t','u','f','f',' ','t','h','a','t',' ','g','o','e','s',' ','b','a','n','g',' ','i','n',' ','t','h','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','n','i','g','h','t',',',' ','t','o','o','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','T','i','t','a','n','i','u','m',' ','P','l','a','t','e','s',' ','i','n','s','t','a','l','l','e','d','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','h','i','n','y',' ','h','a','r','d',' ','s','t','u','f','f','.',' ','N','o',' ','e','x','p','l','o','s','i','v','e',' ','c','a','n','\0','\0','\0','\0','\0','\0','s','h','a','d','o','w',' ','i','t','s',' ','t','a','n','n','i','n','g',' ','r','a','d','i','a','n','c','e','.',' ','D','o','n','\'','t','\0','\0','\0','\0','\0','\0','f','o','r','g','e','t',' ','y','o','u','r',' ','s','h','a','d','e','s','!','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','A','c','c','e','s','t','e','e','l',' ','A','r','m','o','r',' ','i','n','s','t','a','l','l','e','d','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','N','o','t',' ','e','v','e','n',' ','a',' ','s','h','e','l','l','-','s','h','o','c','k',' ','s','e','r','i','o','u','s','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','a','z','o','o','k','a',' ','c','a','n',' ','f','a','z','e',' ','t','h','e',' ','c','o','o','l',' ','m','i','r','r','o','r','\0','\0','\0','\0','\0','\0','\0','\0','b','e','a','u','t','y',' ','o','f',' ','A','c','c','e','s','t','e','e','l','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aBorrow12000Pay[30] = "[Borrow $12,000 - Pay $18,000"; // weak
char byte_4520A0[40] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aWithBetterGear[34] = "With better gear you'd already be"; // weak
char aOnTheTopEh_SoH[30] = "on the top, eh? So how does a"; // weak
char aShortTermLoanO[36] = "short-term loan of [$12,000{ sound?"; // weak
char byte_452140[1000] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','B','o','r','r','o','w',' ','$','9',',','0','0','0',' ','-',' ','P','a','y',' ','$','1','3',',','5','0','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','i','t','h',' ','b','e','t','t','e','r',' ','g','e','a','r',' ','y','o','u','\'','d',' ','a','l','r','e','a','d','y',' ','b','e','\0','\0','\0','\0','\0','\0','\0','o','n',' ','t','h','e',' ','t','o','p',',',' ','e','h','?',' ','S','o',' ','h','o','w',' ','d','o','e','s',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','h','o','r','t','-','t','e','r','m',' ','l','o','a','n',' ','o','f',' ','[','$','9',',','0','0','0','{',' ','s','o','u','n','d','?','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','B','o','r','r','o','w',' ','$','6',',','0','0','0',' ','-',' ','P','a','y',' ','$','9',',','0','0','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','i','t','h',' ','b','e','t','t','e','r',' ','g','e','a','r',' ','y','o','u','\'','d',' ','a','l','r','e','a','d','y',' ','b','e','\0','\0','\0','\0','\0','\0','\0','o','n',' ','t','h','e',' ','t','o','p',',',' ','e','h','?',' ','S','o',' ','h','o','w',' ','d','o','e','s',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','h','o','r','t','-','t','e','r','m',' ','l','o','a','n',' ','o','f',' ','[','$','6',',','0','0','0','{',' ','s','o','u','n','d','?','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','B','o','r','r','o','w',' ','$','3',',','0','0','0',' ','-',' ','P','a','y',' ','$','4',',','5','0','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','i','t','h',' ','b','e','t','t','e','r',' ','g','e','a','r',' ','y','o','u','\'','d',' ','a','l','r','e','a','d','y',' ','b','e','\0','\0','\0','\0','\0','\0','\0','o','n',' ','t','h','e',' ','t','o','p',',',' ','e','h','?',' ','S','o',' ','h','o','w',' ','d','o','e','s',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','h','o','r','t','-','t','e','r','m',' ','l','o','a','n',' ','o','f',' ','[','$','3',',','0','0','0','{',' ','s','o','u','n','d','?','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','B','o','r','r','o','w',' ','$','1',',','5','0','0',' ','-',' ','P','a','y',' ','$','2',',','2','5','0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','i','t','h',' ','b','e','t','t','e','r',' ','g','e','a','r',' ','y','o','u','\'','d',' ','a','l','r','e','a','d','y',' ','b','e','\0','\0','\0','\0','\0','\0','\0','o','n',' ','t','h','e',' ','t','o','p',',',' ','e','h','?',' ','S','o',' ','h','o','w',' ','d','o','e','s',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','h','o','r','t','-','t','e','r','m',' ','l','o','a','n',' ','o','f',' ','[','$','1',',','5','0','0','{',' ','s','o','u','n','d','?','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aLoanOf12000Gra[26] = "[Loan of $12,000 granted."; // weak
char byte_452550[40] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aYouHave3RacesT[36] = "You have 3 races to pay me back the"; // weak
char a18000_FairIsFa[34] = "[$18,000{. Fair is fair [<GRIN>{."; // weak
char byte_4525C8[40] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aPressEscToGoBa[36] = "Press [ESC{ to go back to the shop."; // weak
char aLoanDeniedVaga[31] = "[Loan denied, Vagabond driver."; // weak
_UNKNOWN unk_452A00; // weak
char aThisIsABusines[35] = "This is a business, not a charity."; // weak
char aWeDonTInvestIn[33] = "We don't invest in unproven wild"; // weak
char aCards_SoBuzzOf[25] = "cards. So buzz off, bug."; // weak
_UNKNOWN unk_452AA0; // weak
char byte_452AC8[] = { '[' }; // weak
_UNKNOWN unk_452AF0; // weak
char aPetrolBrainYou[32] = "Petrol brain, you owe me. You'd"; // weak
char aBetterBeHereTo[34] = "better be here to pay me back, or"; // weak
char aElseWeHaveNoth[33] = "else we have nothing to discuss."; // weak
_UNKNOWN unk_452B90; // weak
char aLoanPaidBack_[17] = "[Loan paid back."; // weak
_UNKNOWN unk_452BE0; // weak
char aItSAllHere_IKn[33] = "It's all here. I knew right from"; // weak
char aTheStartThatIC[34] = "the start that I could trust you."; // weak
char aLetSDoThisAgai[29] = "Let's do this again anytime."; // weak
_UNKNOWN unk_452C80; // weak
char aMoneyTalksAndT[32] = "Money talks, and [the damage is"; // weak
char byte_452CD0[] = { '[' }; // weak
char byte_452CF8[] = { '[' }; // weak
char aDown_ThatSDoug[34] = "down. That's dough baked luck for"; // weak
char aYou_AndLuckShe[34] = "you. And luck, she ain't no lady."; // weak
_UNKNOWN unk_452D70; // weak
char aASlickSteroidR[30] = "[A slick steroid run, anyone?"; // weak
_UNKNOWN unk_452DE8; // weak
char byte_452E38[] = { '[' }; // weak
char aEasyAsShifting[30] = "easy as shifting gears 1-2-3."; // weak
char aJustPickUpSome[35] = "[Just pick up some pills along the"; // weak
char aWayAndGetThemT[33] = "[way, and get them to the finish"; // weak
char aLineBeforeThin[37] = "[line before things get crowded{, be"; // weak
char aFirstLikeFloor[29] = "first, like, floor it, like."; // weak
_UNKNOWN unk_453018; // weak
_UNKNOWN unk_453068; // weak
char aWannaBeMyHitma[29] = "[Wanna be my hitman, driver?"; // weak
_UNKNOWN unk_453108; // weak
char aWannaGetRichTo[31] = "Wanna get rich, tough guy? OK."; // weak
char aHereSTheDeal_I[35] = "[Here's the deal{. I have put some"; // weak
char aMajorFundsOnTh[34] = "major funds on this race, betting"; // weak
char byte_453248[] = { 't' }; // weak
char aFinishLine_Mak[34] = "[finish line{. Make me right, and"; // weak
char byte_4532E8[] = { '[' }; // weak
_UNKNOWN unk_453338; // weak
_UNKNOWN unk_453388; // weak
char aMines[7] = "[Mines"; // weak
_UNKNOWN unk_453400; // weak
char aSowTheseSeedsO[31] = "Sow these seeds of destruction"; // weak
char aAfterABlindBen[35] = "after a blind bend where headlight"; // weak
char aEyesAreTireSmo[27] = "eyes are tire-smoke tired."; // weak
char byte_4534A0[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','p','i','k','e','d',' ','B','u','m','p','e','r','s','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','N','o','t','h','i','n','g',' ','w','a','k','e','s',' ','y','o','u',' ','u','p',' ','l','i','k','e',' ','a','n',' ','e','n','e','m','y','\0','\0','\0','\0','\0','\0','c','a','r',',',' ','c','l','o','s','i','n','g',' ','i','n',' ','t','o',' ','g','i','v','e',' ','y','o','u','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','a',' ','s','h','a','r','p',' ','k','i','s','s',' ','w','i','t','h',' ','s','p','i','k','e','d',' ','b','u','m','p','e','r','s','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','o','c','k','e','t',' ','F','u','e','l','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','T','h','i','s',' ','n','e','c','t','a','r',' ','i','n',' ','t','h','e',' ','v','e','i','n','s',' ','o','f',' ','y','o','u','r','\0','\0','\0','\0','\0','\0','\0','\0','v','e','h','i','c','l','e',' ','t','a','k','e','s',' ','y','o','u',' ','r','i','g','h','t',' ','i','n','t','o','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','o','r','b','i','t',',',' ','r','e','a','l',' ','s','p','e','e','d','y',' ','l','i','k','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','a','b','o','t','a','g','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','D','o',' ','y','o','u',' ','h','a','v','e',' ','b','a','d',' ','l','u','c','k',' ','a','l','w','a','y','s',' ','r','i','d','i','n','g','\0','\0','\0','\0','\0','\0','s','h','o','t','g','u','n','?',' ','T','i','m','e',' ','f','o','r',' ','t','h','a','t',' ','g','o','l','d','e','n','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','r','a','c','e','r',' ','b','o','y',' ','t','o',' ','g','e','t',' ','s','o','m','e','.',' ','R','i','g','h','t','?','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aNoSabotage_NoW[22] = "[No sabotage. No way."; // weak
_UNKNOWN unk_4537C0; // weak
char aWhat_YouCrazyM[29] = "What? You crazy, man? Nobody"; // weak
char aTouchesTheAdve[30] = "touches the Adversary's auto-"; // weak
char aMobileAndLives[26] = "mobile and lives, nobody."; // weak
_UNKNOWN unk_453860; // weak
char aOutOfStock[14] = "[OUT OF STOCK"; // weak
_UNKNOWN unk_4538B0; // weak
char aSorryNoCanDo_T[32] = "Sorry, no can do. That's out of"; // weak
char aStock_HoldYour[31] = "stock. Hold your horse(power)s"; // weak
char aTillAfterTheNe[26] = "till after the next race."; // weak
_UNKNOWN unk_453950; // weak
char aHeldFromThisRa[21] = "[HELD FROM THIS RACE"; // weak
_UNKNOWN unk_4539A0; // weak
char aThisItemIsAlwa[37] = "This item is always available in the"; // weak
char aFullVersion_Re[38] = "full version. Register now to get all"; // weak
char aTheDirtyStuffI[31] = "the dirty stuff in every race."; // weak
_UNKNOWN unk_453A40; // weak
char a8MinesLoadedIn[30] = "[8 Mines loaded into your car"; // weak
_UNKNOWN unk_453A90; // weak
char aNowThoseRivalW[33] = "Now those rival wheels will reap"; // weak
char aOnlyBurningEng[31] = "only burning engine death, and"; // weak
char aThatRoadWillBe[29] = "that road will be all yours."; // weak
char byte_453B30[720] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','p','i','k','e','d',' ','b','u','m','p','e','r','s',' ','i','n','s','t','a','l','l','e','d','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','N','o','w',' ','y','o','u',' ','a','r','e',' ','s','a','y','i','n','g',':',' ','\'','S','t','a','y',' ','b','a','c','k',' ','o','r','\0','\0','\0','\0','\0','\0','\0','y','o','u',' ','s','o','r','r','y',',',' ','y','o','u',' ','d','e','a','d','.','\'',' ','N','o','w',' ','t','h','a','t','\'','s','\0','\0','\0','\0','\0','\0','\0','\0','t','h','e',' ','a','t','t','i','t','u','d','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','o','c','k','e','t',' ','F','u','e','l',' ','b','o','u','g','h','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','a','r','n','i','n','g','!',' ','W','e','\'','r','e',' ','t','a','l','k','i','n','g',' ','\'','b','o','u','t',' ','a','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','a','c','k','d','r','a','f','t',' ','b','a','r','b','e','c','u','e',' ','p','a','r','t','y',' ','h','e','r','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','U','s','i','n','g',' ','t','h','e',' ','f','u','e','l',' ','c','a','u','s','e','s',' ','d','a','m','a','g','e','!','{','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','S','a','b','o','t','a','g','e',' ','i','n',' ','p','r','o','g','r','e','s','s','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','w','e','e','t',' ','d','e','a','l','.',' ','N','o','w',' ','y','o','u','r',' ','a','r','c','h','-','r','a','c','i','n','g','-','\0','\0','\0','\0','\0','\0','\0','r','i','v','a','l',' ','w','i','l','l',' ','t','a','i','l','s','l','i','d','e',' ','d','o','w','n',' ','t','h','a','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','v','i','l','e',' ','r','o','a','d',' ','t','o',' ','w','r','e','c','k','h','o','o','d',' ','o','b','l','i','v','i','o','n','.','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aRepair[8] = "[Repair"; // weak
char byte_453E50[40] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aThisUsedToBeAC[34] = "This used to be a car, huh? Carry"; // weak
char aTheRestOfItInH[35] = "the rest of it in here & we'll see"; // weak
char aWhatCanBeDone_[18] = "what can be done."; // weak
char byte_453EF0[2680] =
{
  '\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','o','r','r','y',',',' ','t','h','i','s',' ','v','e','h','i','c','l','e',' ','i','s',' ','g','o','n','e',' ','f','o','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','g','o','o','d','.','.','.',' ','J','u','s','t',' ','k','i','d','d','i','n','g','.',' ','M','e','d','i','c',',',' ','f','a','s','t','!','\0','\0','\0','\0','\0','\0','W','e','\'','v','e',' ','g','o','t',' ','a',' ','d','r','i','v','e','r',' ','i','n',' ','s','h','o','c','k','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','D','o','n','\'','t',' ','t','e','l','l',' ','m','e','.',' ','Y','o','u',' ','p','a','r','k','e','d',' ','y','o','u','r',' ','c','a','r','\0','\0','\0','\0','\0','\0','i','n',' ','a',' ','n','u','c','l','e','a','r',' ','t','e','s','t',' ','z','o','n','e','?',' ','T','h','e','s','e','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','h','o','l','e','s',' ','n','e','e','d',' ','s','o','m','e',' ','g','u','m',',',' ','s','t','a','r','t',' ','c','h','e','w','i','n','g','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','W','h','o',' ','h','e','l','p','e','d',' ','y','o','u',' ','t','o','w',' ','t','h','i','s',' ','p','i','e','c','e',' ','o','f','\0','\0','\0','\0','\0','\0','\0','\0','j','u','n','k',' ','o','v','e','r',' ','t','h','e',' ','f','i','n','i','s','h',' ','l','i','n','e','?',' ','N','o','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','w','e','a','t',',',' ','t','h','i','s',' ','c','a','n',' ','b','e',' ','f','i','x','e','d','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','S','o','.',' ','Y','o','u','r',' ','c','a','r','\'','s',' ','s','o','r','r','y',' ','a','s','s',' ','g','o','t',' ','b','l','o','w','n','\0','\0','\0','\0','\0','\0','c','l','e','a','n',' ','o','f','f','.',' ','A','c','m','e',' ','g','l','u','e',' ','w','i','l','l',' ','f','i','x',' ','y','o','u','r','\0','\0','\0','\0','\0','\0','m','i','s','h','a','p','-','r','i','d','d','e','n',' ','d','a','y',' ','a','t',' ','t','h','e',' ','r','a','c','e','s','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','A','s',' ','M','r','.',' ','N','u','k','e','m',' ','s','o','m','e','t','i','m','e','s',' ','p','u','t','s',' ','i','t',':','\0','\0','\0','\0','\0','\0','\0','\0','\0','\'','U','h','-','o','h',',',' ','t','h','a','t','\'','s',' ','g','o','t','t','a',' ','h','u','r','t','.','\'',' ','T','h','i','s','\0','\0','\0','\0','\0','\0','\0','\0','c','a','l','l','s',' ','f','o','r',' ','a',' ','s','c','r','e','w','d','r','i','v','e','r',' ','&',' ','a','s','p','i','r','i','n','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','Y','o','u','r',' ','c','o','n','v','e','y','a','n','c','e','\'','s',' ','m','e','t','h','y','l','a','t','e','d','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','p','i','r','i','t',' ','r','e','c','e','p','t','a','c','l','e',' ','h','a','s',' ','d','e','v','e','l','o','p','e','d',' ','a','\0','\0','\0','\0','\0','\0','\0','c','h','r','o','n','i','c',' ','h','e','r','n','i','a',',',' ','o','r',' ','s','o','m','e','t','h','i','n','g','.','.','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','T','h','i','s',' ','i','s',' ','n','o',' ','t','i','m','e',' ','t','o',' ','r','e','s','t',' ','i','n',' ','p','i','e','c','e','s','.','\0','\0','\0','\0','\0','\0','T','h','e',' ','r','a','c','e',' ','a','w','a','i','t','s','!',' ','S','h','e','\'','l','l',' ','b','e',' ','b','a','c','k',' ','o','n','\0','\0','\0','\0','\0','\0','h','e','r',' ','w','h','e','e','l','s',' ','i','n',' ','n','o',' ','t','i','m','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','T','a','k','e',' ','f','i','v','e',',',' ','d','r','i','v','e','r','.',' ','A',' ','s','t','r','a','i','g','h','t',' ','&','\0','\0','\0','\0','\0','\0','\0','\0','\0','s','i','m','p','l','e',' ','s','l','e','d','g','e','h','a','m','m','e','r',' ','j','o','b',' ','h','e','r','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','T','h','e','s','e',' ','p','e','r','c','u','s','s','i','o','n','s',',',' ','g','o','t','t','a',' ','l','o','v','e',' ','\'','e','m','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','N','o','t','h','i','n','g',' ','a',' ','f','r','e','s','h',' ','p','a','i','n','t','-','j','o','b',' ','c','a','n','\'','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','f','i','x','.',' ','Y','o','u','\'','l','l',' ','b','e',' ','b','a','c','k',' ','o','n',' ','t','h','e',' ','t','r','a','c','k','\0','\0','\0','\0','\0','\0','\0','\0','i','n',' ','a',' ','p','i','t','-','s','t','o','p',' ','m','i','n','u','t','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','G','o','t',' ','y','o','u','r',' ','w','a','x',' ','c','o','a','t',' ','s','c','r','a','t','c','h','e','d','?',' ','W','a','n','t','\0','\0','\0','\0','\0','\0','\0','t','o',' ','b','e',' ','y','o','u','r',' ','s','h','i','n','i','n','g',' ','b','e','s','t','?',' ','H','e','y',',',' ','w','h','a','t','-','\0','\0','\0','\0','\0','e','v','e','r',' ','l','i','g','h','t','s',' ','u','p',' ','y','o','u','r',' ','d','a','s','h','b','o','a','r','d','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','[','R','e','p','a','i','r','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','P','e','r','f','e','c','t',' ','i','s',' ','p','e','r','f','e','c','t','.',' ','W','h','a','t',' ','a','i','n','\'','t','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','b','r','o','k','e','n',',',' ','c','a','n','\'','t',' ','b','e',' ','f','i','x','e','d','.',' ','C','o','m','e',' ','b','a','c','k','\0','\0','\0','\0','\0','\0','\0','a','f','t','e','r',' ','y','o','u','\'','v','e',' ','t','a','k','e','n',' ','i','n',' ','s','o','m','e','.','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0','\0'
}; // idb
char aContinue_0[10] = "[CONTINUE"; // weak
_UNKNOWN unk_454990; // weak
char aExitTheShopA_0[33] = "Exit the Shop and enter the Race"; // weak
char aSignUp_[9] = "Sign-Up."; // weak
_UNKNOWN unk_454A08; // weak
char aPressEscForP_0[30] = "Press [Esc{ for previous menu"; // weak
char aContinue[10] = "[CONTINUE"; // weak
_UNKNOWN unk_454A80; // weak
char aExitTheShopAnd[28] = "Exit the Shop and enter the"; // weak
char aUndergroundMar[20] = "Underground Market."; // weak
_UNKNOWN unk_454AF8; // weak
char aPressEscForPre[30] = "Press [Esc{ for previous menu"; // weak
char aContinue_2[10] = "[CONTINUE"; // weak
_UNKNOWN unk_454B70; // weak
char aExitTheUndergr[32] = "Exit the Underground Market and"; // weak
char aEnterTheRaceSi[24] = "enter the Race Sign-Up."; // weak
_UNKNOWN unk_454BE8; // weak
char aPressEscForP_1[30] = "Press [Esc{ for previous menu"; // weak
_UNKNOWN unk_454C38; // weak
char aEndOfTheRoadDr[26] = "[End of the road, driver."; // weak
_UNKNOWN unk_454CD8; // weak
char aThisThenIsHowI[49] = "[This then is how it ends{, not with a bang, but"; // weak
char aWithAWhimper_Y[43] = "with a whimper. You had your shot at glory"; // weak
char aRoadButYouBlew[46] = "road, but [you blew it{. Life is hard and all"; // weak
char aThat_InDeathRa[50] = "that. In [Death Rally{, you get only one go, only"; // weak
char aTheBestCanMake[45] = "the best can make it. But look at the bright"; // weak
char aSideAtLeastYou[43] = "side, at least you lived to tell the tale."; // weak
_UNKNOWN unk_454F08; // weak
_UNKNOWN unk_454F58; // weak
_UNKNOWN unk_454F8A; // weak
char aItAinTOverTill[30] = "[It ain't over till I say so!"; // weak
_UNKNOWN unk_454FEE; // weak
char aSoTheyThinkThe[35] = "So they think they got you beaten,"; // weak
char aEh_IThinkThatT[36] = "eh? I think that this car-wreck has"; // weak
char aOnlyMadeYouStr[29] = "only made you stronger, iron"; // weak
char aTemperedWicked[35] = "tempered, wicked. So [get back out"; // weak
char aThereAndLetThe[33] = "[there{ and let them find out to"; // weak
char aTheirCost_This[31] = "their cost. [This one's on me."; // weak
char aThisIsIt_Here_[68] = "This is it. Here. Now. In Death Rally, where life is short and hot,"; // weak
char aFastAndDeadly_[58] = "fast and deadly. The race is on. Watch the road. Hear the"; // weak
char aRumble_WannaPl[62] = "rumble. Wanna play it sweet or play it dirty, by the rules or"; // weak
char aFryTheRulesThe[59] = "fry the rules, there's only one way to do it, play to win."; // weak
char byte_456618[] = { 'A' }; // weak
char byte_45665E[] = { 'S' }; // weak
char byte_4566A4[] = { 'f' }; // weak
char byte_4566EA[] = { 'k' }; // weak
int dword_456730 = 1; // weak

//orden de los circuitos
byte circuitOrder_45673C[] = { 0,7,5,3,4,2,8,1,6,9,16,14,12,13,11,17,10,15,16,17,18,0,0,0 }; // weak
char byte_45673D = '\a'; // weak
char byte_45673E[] = { '\x05' }; // weak
char byte_45673F = '\x03'; // weak
char byte_456741[] = { '\x02' }; // weak
int dword_456754 = 511; // weak
int dword_456758 = 2; // idb
int dword_456780 = 4294967295; // weak
int dword_456784 = 4294967295; // weak
int dword_456788 = 4294967295; // weak
int dword_45678C = 5; // weak
char aTshape01[9] = "TSHAPE01"; // weak

char *tShape[] = { "TSHAPE01" ,"TSHAPE02" ,"TSHAPE03","TSHAPE04" ,"TSHAPE05" ,"TSHAPE06","TSHAPE07" ,"TSHAPE08" ,"TSHAPE09","TSHAPE10" ,"TSHAPE11" ,"TSHAPE12","TSHAPE13" ,"TSHAPE14" ,"TSHAPE15","TSHAPE16" ,"TSHAPE17" ,"TSHAPE18","TSHAPE19" };

_UNKNOWN unk_456848; // weak
_UNKNOWN unk_4568D8; // weak
char aSanim_haf[10] = "SANIM.HAF"; // weak
_UNKNOWN unk_4569F0; // weak
int dword_456A1C = 1; // weak
int dword_456A2C = 255; // weak
int dword_456A30 = 255; // weak
int dword_456A34 = 255; // weak
GLfloat x =  1.0; // idb
GLfloat y =  1.0; // idb
int dword_456A40 = 44100; // weak
int dword_456A44 = 1000; // weak
char aWinmainError[16] = "WinMain() error"; // weak
char aSS[] = "%s: %s\n"; // idb
char aFatalError[12] = "Fatal Error"; // weak
char aOutOfMemoryAbo[25] = "Out of memory - aborting"; // weak
CHAR LibFileName[] = "DDRAW.DLL"; // idb
int dword_456AA0 = 0; // weak
int dword_456AA4 = 0; // weak
int dword_456AA8 = 0; // weak
int dword_456AAC = 0; // weak
int dword_456AB0 = 0; // weak
int dword_456AB4 = 0; // weak
int dword_456AB8 = 0; // weak
int dword_456ABC = 0; // weak
int dword_456AC0 = 0; // weak
int dword_456AC4 = 0; // weak
int dword_456AC8 = 0; // weak
int dword_456ACC = 0; // weak
int dword_456AD0 = 0; // weak
int dword_456AD4 = 0; // weak
int dword_456AD8 = 0; // weak
int dword_456ADC = 0; // weak
int dword_456AE0 = 0; // weak
int dword_456AE4 = 0; // weak
int dword_456AE8 = 0; // weak
int dword_456AEC = 0; // weak
int dword_456AF0 = 0; // weak
int dword_456AF4 = 0; // weak
int dword_456AF8 = 0; // weak
int dword_456AFC = 0; // weak
char byte_456B00 = '\0'; // weak
char byte_456B01 = '\0'; // weak
int dword_456B04 = 0; // weak
int dword_456B08 = 0; // weak
int dword_456B0C = 0; // weak
int dword_456B10 = 0; // weak
int dword_456B1C = 0; // weak
int dword_456B28 = 0; // weak
int dword_456B2C = 0; // weak
int dword_456B30 = 0; // weak
int dword_456B34 = 0; // weak
int dword_456B38 = 0; // weak
int dword_456B3C = 0; // weak
int dword_456B40 = 0; // weak
int dword_456B44 = 0; // weak
int dword_456B50 = 0; // weak
int dword_456B54 = 0; // weak
int dword_456B58 = 0; // weak
int gameStarted_456B5C = 0; // weak
int dword_456B60 = 0; // weak
int dword_456B64 = 0; // weak
int dword_456B68 = 0; // weak
int dword_456B6C = 0; // weak
int dword_456B70 = 0; // weak
int dword_456B74 = 0; // weak
int dword_456B78 = 0; // weak
int showMediumWarningRace = 0; // weak
int showHardWarningRace = 0; // weak
int dword_456B84 = 0; // weak

//circuito seleccionado de los tres
int selectedRaceId = 0; // weak
int dword_456B8C = 0; // weak
int dword_456B90 = 0; // weak
int dword_456B94 = 0; // weak
int dword_456B98 = 0; // weak
int dword_456B9C = 0; // weak
int dword_456BA0 = 0; // weak
int dword_456BA4 = 0; // weak
int consecutiveWins_456BA8 = 0; // weak
int noPaintJob_456BAC = 0; // weak
int allCarsCrash_456BB0 = 0; // weak
int drugQuest_456BB4 = 0; // weak
int killOneQuest_456BB8 = 0; // weak
int dword_456BBC = 0; // weak
int lapped_456BC0 = 0; // weak
int dword_456BC4 = 0; // weak
int dword_456BC8 = 0; // idb
int dword_456BCC = 0; // weak
int dword_456BD0 = 0; // weak
int dword_456BD4 = 0; // weak
int dword_456BD8 = 0; // weak
int dword_456BDC = 0; // weak
int dword_456BE0 = 0; // weak
int dword_456BE4 = 0; // weak
int dword_456BE8 = 0; // weak
int screenPtr = 0; // weak
int dword_456BF4 = 0; // weak
int dword_456BF8 = 0; // weak
int dword_456BFC = 0; // weak
int (*dword_456C00)(void) = NULL; // weak

FMUSIC_MODULE * musicModule = NULL; // weak
FSOUND_STREAM * soundStream = NULL; // weak
int dword_456C10 = 0; // weak
int dword_456C14 = 0; // weak
int dword_456C18 = 0; // weak
GLvoid *pixels = NULL; // idb
int dword_456C20 = 0; // weak
void *dword_456C24 = NULL; // idb
int dword_456C28 = 0; // weak
int sdlTicks14 = 0; // weak
int dword_456C30 = 0; // weak
char byte_456C35 = '\0'; // weak
int dword_456C3C = 0; // weak
int dword_456C44 = 0; // weak
int dword_456C48 = 0; // weak
int dword_456C4C = 0; // weak
int dword_456C50 = 0; // weak
int dword_456C54 = 0; // weak
int dword_456C58 = 0; // weak
int dword_456C5C = 0; // weak
int dword_456C60 = 0; // weak
int dword_456C64 = 0; // weak
int dword_456C68 = 0; // weak
int dword_456C6C = 0; // weak
float flt_456C70 =  0.0; // weak
float flt_456C74 =  0.0; // weak
int dword_456C78 = 0; // weak
int dword_456C7C = 0; // weak
float flt_456C80 =  0.0; // weak
float flt_456C84 =  0.0; // weak
int dword_456C88 = 0; // weak
int dword_456C8C = 0; // weak
int dword_456C90 = 0; // weak
int dword_456C94 = 0; // weak
float flt_456C98 =  0.0; // weak
int (__cdecl *dword_456C9C)(_DWORD) = NULL; // weak
int (__cdecl *dword_456CA0)(_DWORD) = NULL; // weak
int (__cdecl *dword_456CA4)(_DWORD, _DWORD, _DWORD) = NULL; // weak
int (__cdecl *dword_456CA8)(_DWORD) = NULL; // weak
int (__cdecl *dword_456CAC)(_DWORD) = NULL; // weak
_UNKNOWN unk_456CC0; // weak
_UNKNOWN unk_456CF4; // weak
_UNKNOWN unk_4582C0; // weak
int dword_45C4C0; // weak
int dword_45C4C4; // weak
_UNKNOWN unk_45C4E0; // weak
int dword_45C4E4[256]; // weak
_UNKNOWN unk_45C4F4; // weak
_UNKNOWN unk_45C546; // weak
int dword_45DA60; // weak
void *dword_45DA64; // idb
int dword_45DA68; // weak
int dword_45DA80; // weak
void *dword_45DAB0; // idb
float flt_45DAB4; // weak
_UNKNOWN unk_45DAC0; // weak


int dword_45DC20; // weak
int dword_45DC24; // weak
int screenColors; // weak
int dword_45DC30[256]; // weak
int dword_45DC34; // weak
int dword_45DC38; // weak
int dword_45DC3C; // weak

int dword_45DC60[400u]; // weak
int screenHeight; // weak
int dword_45E064; // weak
int screenWidth; // weak
int dword_45E080; // weak
int dword_45E084; // weak
__int16 word_45E088; // weak
int dword_45E08A; // weak
int dword_45E08E; // weak
__int16 word_45E092; // weak
int dword_45E094; // weak
int dword_45E098; // weak
__int16 word_45E09C; // weak
int dword_45E09E; // weak
int dword_45E0A2; // weak
__int16 word_45E0A6; // weak
int dword_45E0A8; // weak

char byte_45E0C0[256]; // weak
char byte_45E0C1[256]; // weak
char byte_45E0C2[256]; // weak
char byte_45E0C3[256]; // weak
char byte_45E0CF; // weak
char byte_45E0D5; // weak
char byte_45E0D9; // weak
char byte_45E0DC; // weak
char byte_45E0F1; // weak
char byte_45E0FB; // weak
char byte_45E0FC; // weak
char byte_45E0FD; // weak
char byte_45E0FE; // weak
char byte_45E0FF; // weak
char byte_45E108; // weak
char byte_45E10B; // weak
char byte_45E10D; // weak
char byte_45E110; // weak
char byte_45E118; // weak
char byte_45E15C; // weak
char byte_45E188; // weak
char byte_45E18B; // weak
char byte_45E18D; // weak
char byte_45E190; // weak
int dword_45E1C0; // weak

//esto es para la muscia
int dword_45E1E0[400u]; // weak
int dword_45E5E0; // weak
int dword_45E5E4; // weak

//creo que define si es multiplayer o no
int isMultiplayerGame; // weak
//dword_45EA04

int dword_45EA08; // weak
int dword_45EA0C; // weak
char *Str2; // idb
int dword_45EA24; // weak
int dword_45EA28; // weak
int dword_45EA2C; // weak
int dword_45EA30; // weak
int dword_45EA34; // weak
int dword_45EA38; // weak
int dword_45EA3C; // weak
int dword_45EA40; // weak
int dword_45EA44; // weak
int dword_45EA50[256]; // weak
void *slidcop2Bpk; // idb
int dword_45EA64; // weak

void *fasesel1Bpk; // idb
int dword_45EA80; // weak
int dword_45EA84; // weak
int dword_45EA88; // weak
int dword_45EA8C; // weak
int dword_45EA90; // weak

size_t Size; // idb
void *chatlin1Bpk; // idb
void *enterx2Bpk; // idb
int dword_45EAA4; // weak
_UNKNOWN unk_45EAC0; // weak
int dword_45EB48; // idb
void *Str; // idb

int racePositions[3][4];//para cada carrera 4 participantes ordenados por posicion 

int dword_45EB50[256]; // weak
int dword_45EB54; // weak
int dword_45EB58; // weak
void *dword_45EB5C; // idb


byte animPalette[768];

void *dword_45EEA4; // idb
void *repaaniBpk; // idb
int repairAnimCurrentFrame_45EEAC=0; // weak
void *reaperxBpk; // idb
void *carbas2Bpk; // idb
void *slidmus2Bpk; // idb
int dword_45EEBC; // weak
int dword_45EEC0; // weak
char byte_45EEE0[256]; // weak
char byte_45EEE2; // weak
char byte_45EEE3; // weak
char byte_45EEE4; // weak
char byte_45EEE5; // weak
char byte_45EEE6; // weak
char byte_45EEE7; // weak
char byte_45EEE8; // weak
char byte_45EEE9; // weak
char byte_45EEEA; // weak
char byte_45EEEB; // weak
char byte_45EEEC; // weak
char byte_45EEED; // weak
char byte_45EEF0; // weak
char byte_45EEF1; // weak
char byte_45EEF2; // weak
char byte_45EEF3; // weak
char byte_45EEF4; // weak
char byte_45EEF5; // weak
char byte_45EEF6; // weak
char byte_45EEF7; // weak
char byte_45EEF8; // weak
char byte_45EEF9; // weak
char byte_45EEFE; // weak
char byte_45EEFF; // weak
char byte_45EF00; // weak
char byte_45EF01; // weak
char byte_45EF02; // weak
char byte_45EF03; // weak
char byte_45EF04; // weak
char byte_45EF05; // weak
char byte_45EF06; // weak
char byte_45EF0C; // weak
char byte_45EF0D; // weak
char byte_45EF0E; // weak
char byte_45EF0F; // weak
char byte_45EF10; // weak
char byte_45EF11; // weak
char byte_45EF12; // weak
char byte_45EF13; // weak
char byte_45EF14; // weak
char byte_45EF15; // weak
char byte_45EF19; // weak


int minesAvailable_45EFF0; // weak
int spikesAvailable_45EFF4; // weak
int rocketAvailable_45EFF8; // weak
int sabotageAvailable_45EFFC; // weak
int dword_45F000; // weak
int dword_45F004; // weak
int dword_45F008; // weak
int dword_45F00C; // weak
__int16 word_45F010; // weak
char byte_45F012; // weak


void *fbig3dBpk; // idb

void *bases42Bpk; // idb
int dword_45F028; // weak
void *statbas7Bpk; // idb
int armourAnimFrameDirection_45F034; // weak
void *screenBuffer; // idb


int dword_45F04C; // idb



int dword_45F110; // weak
int dword_45F114; // weak



_UNKNOWN unk_45F8B0; // weak
_UNKNOWN unk_45F8BC; // weak


void *engi1Bpk; // idb
void *engi2Bpk; // idb
void *engi3Bpk; // idb
void *engi4Bpk; // idb

int dword_45FA74; // weak
int dword_45FA78; // weak

void *blacktx2Bpk; // idb
int tireAnimCurrentFrame_45F034; // weak
char byte_45FAA0[256]; // weak


void *fsma3fBpk; // idb

FILE *File; // idb
void *arrows1dBpk; // idb
char byte_45FB84; // weak




int carAnimCurrentFrame_45FBA0; // weak
void *scenecar1Bpk; // idb
void *scenecar2Bpk; // idb
void *scenecar3Bpk; // idb
void *scenecar4Bpk; // idb
void *scenecar5Bpk; // idb
void *scenecar6Bpk; // idb
_UNKNOWN unk_45FBE0; // weak



int cursorBpkFrame; // weak
void *shoptxt1Bpk; // idb
int dword_45FC00; // weak
void *bases45Bpk; // idb
char byte_45FC0F[256]; // weak
char byte_45FC10[256]; // weak
char byte_45FC11; // weak
char byte_45FC12; // weak
char byte_45FC13; // weak
int dword_45FC1C; // weak
int dword_45FC20; // weak

int dword_45FC28; // weak
void *linlin1Bpk; // idb
//coche seleccionado
int actualCarSelected; // weak
///todo estos son paletas!!!!!!!
int palette1[768];

int palette2[768];//trasformo esos datos separados por colores en una paleta continua
int palette3[768];
/*int dword_45FC40[768]; // weak
int dword_45FC44[768]; // weak
int dword_45FC48[768]; // weak*/
/*int dword_45FD00[256]; // weak
int dword_45FD04[256]; // weak
int dword_45FD08[256]; // weak*/
_UNKNOWN unk_45FDC4; // weak
_UNKNOWN unk_45FF44; // weak
_UNKNOWN unk_460000; // weak
_UNKNOWN unk_460004; // weak
_UNKNOWN unk_4600C4; // weak
_UNKNOWN unk_460244; // weak

//paleta
_UNKNOWN unk_460484; // weak
_UNKNOWN unk_4604D8; // weak
_UNKNOWN unk_460544; // weak
_UNKNOWN unk_4606C4; // weak

int maxPaletteEntries=768; // weak

char byte_460840[256]; // weak
int dword_46084C[256]; // weak
int dword_460850[256]; // weak
int dword_460854[256]; // weak
int dword_460858[256]; // weak
int dword_46085C[256]; // weak
int dword_46086C[256]; // weak
int dword_460870[256]; // weak
int dword_460874[256]; // weak
int dword_460878[256]; // weak
int dword_46087C[256]; // weak
int dword_460880[256]; // weak
int dword_460884[256]; // weak
int dword_460888[256]; // weak
int dword_46088C[256]; // weak
int dword_460890[256]; // weak
int dword_460894[256]; // weak
int dword_460898[256]; // weak
int dword_46089C[256]; // weak
int dword_4608A0[256]; // weak
int dword_4608A4[256]; // weak
int dword_4608A8[256]; // weak
int dword_4608C8; // weak
int dword_4608F0[256]; // weak
int dword_460904[256]; // weak
int dword_460934; // weak
int dword_4609A0; // weak
int dword_460A0C; // weak
int dword_460A78; // weak
int dword_460AE4; // weak
int dword_460B50; // weak
int dword_460BBC; // weak
int dword_460C28; // weak
int dword_460C94; // weak
int dword_460D00; // weak
int dword_460D6C; // weak
int dword_460DD8; // weak
int dword_460E44; // weak
int dword_460EB0; // weak
int dword_460F1C; // weak
int dword_460F88; // weak
int dword_460FF4; // weak
int dword_461060; // weak
_UNKNOWN unk_461094; // weak
void *cursorBpk; // idb
_UNKNOWN unk_4610BC; // weak
char byte_4610C0[256]; // weak
_UNKNOWN unk_461110; // weak
void *prepw1Bpk; // idb

void *statpop4Bpk; // idb
int continueAnimCurrentFrame_4611D0; // weak
_UNKNOWN unk_4611E0; // weak

int dword_461250; // weak
void *bases44Bpk; // idb

int dword_46125C; // weak

void *recotxtBpk; // idb
void *facearr1Bpk; // idb
char byte_46126C[3]; // weak

//estos dos no se usan
char byte_46126D; // weak
char byte_46126E; // weak


int undergroundOptionSelected_dword_461278; // weak
void *contaniBpk; // idb

void *chattextBpk; // idb
int armourAnimCurrentFrame_461288; // weak
void *anim_currentFrameData; // idb
void *mseletx1Bpk; // idb
//todo estos son paleta!!!!
int dword_4612A0[768]; // weak
int dword_4612A4[768]; // weak
int dword_4612A8[768]; // weak
int dword_461360[256]; // weak
int dword_461364[256]; // weak
int dword_461368[256]; // weak
_UNKNOWN unk_461424; // weak
void *dealer2bBpk; // idb
void *dword_461EA4; // idb


int dword_461EB0; // weak
int participantsRace[3];
//__int16 word_461EB4; // weak
//char byte_461EB6; // weak
char unk_461EC0[256]; // idb
_UNKNOWN unk_461EC1; // weak
_UNKNOWN unk_461EC2; // weak
_UNKNOWN unk_461EC3; // weak
__int16 word_461EC4; // weak
_UNKNOWN unk_461EC6; // weak
_UNKNOWN unk_461EC7; // weak
__int16 word_461EC8; // weak
_UNKNOWN unk_461ECA; // weak
_UNKNOWN unk_461ECB; // weak
__int16 word_461ECC; // weak
_UNKNOWN unk_461ECE; // weak
_UNKNOWN unk_461ECF; // weak
__int16 word_461ED0; // weak
_UNKNOWN unk_461ED2; // weak
_UNKNOWN unk_461ED3; // weak
__int16 word_461ED4; // weak
void *dword_461ED8; // idb


void *trarr1Bpk; // idb

int dword_461EEC; // weak
void *tire1Bpk; // idb
void *tire2Bpk; // idb
void *tire3Bpk; // idb
void *tire4Bpk; // idb
char byte_461F00[256]; // weak
void *slidcur3Bpk; // idb

char byte_461F18; // weak





int dword_461FEC; // idb
void *bases43Bpk; // idb
void *event2Bpk; // idb

_UNKNOWN unk_462000; // weak
_UNKNOWN unk_462096; // weak
_UNKNOWN unk_462960; // weak
char byte_4629F6[256]; // weak
char byte_462A8C[256]; // weak
char byte_462B22[256]; // weak
char byte_462BB8[256]; // weak
int dword_462C4E; // weak
int dword_462C52; // weak
int dword_462C56; // weak
int dword_462C5A; // weak
int dword_462C5E; // weak
__int16 word_462C62; // weak
void *blacktx1Bpk; // idb
int selectedRace_462CE8; // weak
int dword_462CEC; // weak
void *volcur2Bpk; // idb

void *maxi1fBpk; // idb

void *maret1eBpk; // idb

void *kuplaBpk; // idb
void *pickupBpk; // idb
void *sedanBpk; // idb
void *camaroBpk; // idb
void *porscheBpk; // idb
void *lotusBpk; // idb
int minesCost_462D40; // idb
int spikesCost_dword_462D44; // idb
int rocket_462D48; // idb
int sabotage_462D4C; // idb
char byte_462D50=2; // weak

void *shoptxt2Bpk; // idb
int dword_462D5C; // weak


void *carnameBpk; // idb


int dword_462D74; // weak

int dword_462D7C; // weak
int engineAnimCurrentFrame_462D80; // weak
void *drugdealBpk; // idb
_UNKNOWN unk_462DA0; // weak
int dword_462DAF; // weak
int dword_462DB3; // weak
int dword_462DB7; // weak
char byte_462DBB; // weak
int dword_462DBE; // weak
int dword_462DC2; // weak
int dword_462DC6; // weak
char byte_462DCA; // weak
int dword_462DCD; // weak
int dword_462DD1; // weak
int dword_462DD5; // weak
char byte_462DD9; // weak
int dword_462DDC; // weak
int dword_462DE0; // weak
int dword_462DE4; // weak
char byte_462DE8; // weak
int dword_462DEB; // weak
int dword_462DEF; // weak
int dword_462DF3; // weak
char byte_462DF7; // weak
int dword_462DFA; // weak
int dword_462DFE; // weak
int dword_462E02; // weak
char byte_462E06; // weak
int dword_462E09; // weak
int dword_462E0D; // weak
int dword_462E11; // weak
char byte_462E15; // weak
int dword_462E18; // weak
int dword_462E1C; // weak
int dword_462E20; // weak
char byte_462E24; // weak
int dword_462E27; // weak
int dword_462E2B; // weak
int dword_462E2F; // weak
char byte_462E33; // weak
int dword_462E36; // weak
int dword_462E3A; // weak
int dword_462E3E; // weak
char byte_462E42; // weak
int dword_462E45; // weak
int dword_462E49; // weak
int dword_462E4D; // weak
char byte_462E51; // weak
int dword_462E54; // weak
int dword_462E58; // weak
int dword_462E5C; // weak
char byte_462E60; // weak
int dword_462E63; // weak
int dword_462E67; // weak
int dword_462E6B; // weak
char byte_462E6F; // weak
int dword_462E72; // weak
int dword_462E76; // weak
int dword_462E7A; // weak
char byte_462E7E; // weak
int dword_462E81; // weak
int dword_462E85; // weak
int dword_462E89; // weak
char byte_462E8D; // weak
int dword_462E90; // weak
int dword_462E94; // weak
int dword_462E98; // weak
char byte_462E9C; // weak
int dword_462E9F; // weak
int dword_462EA3; // weak
int dword_462EA7; // weak
char byte_462EAB; // weak
int dword_462EAE; // weak
int dword_462EB2; // weak
int dword_462EB6; // weak
char byte_462EBA; // weak
int dword_462EBD; // weak
int dword_462EC1; // weak
int dword_462EC5; // weak
char byte_462EC9; // weak
int dword_462ECC; // weak
int dword_462ED0; // weak
int dword_462ED4; // weak
char byte_462ED8; // weak
int dword_462EDB; // weak
int dword_462EDF; // weak
int dword_462EE3; // weak
char byte_462EE7; // weak
int dword_462EEA; // weak
int dword_462EEE; // weak
int dword_462EF2; // weak
char byte_462EF6; // weak
int dword_462EF9; // weak
int dword_462EFD; // weak
int dword_462F01; // weak
char byte_462F05; // weak
int dword_462F08; // weak
int dword_462F0C; // weak
int dword_462F10; // weak
char byte_462F14; // weak
int dword_462F17; // weak
int dword_462F1B; // weak
int dword_462F1F; // weak
char byte_462F23; // weak
int dword_462F26; // weak
int dword_462F2A; // weak
int dword_462F2E; // weak
char byte_462F32; // weak
int dword_462F35; // weak
int dword_462F39; // weak
int dword_462F3D; // weak
__int16 word_462F41; // weak
int dword_462F44; // weak
int dword_462F48; // weak
int dword_462F4C; // weak
char byte_462F50; // weak
int dword_462F53; // weak
int dword_462F57; // weak
int dword_462F5B; // weak
char byte_462F5F; // weak
int dword_462F62; // weak
int dword_462F66; // weak
int dword_462F6A; // weak
char byte_462F6E; // weak
int dword_462F71; // weak
int dword_462F75; // weak
int dword_462F79; // weak
char byte_462F7D; // weak
int dword_462F80; // weak
int dword_462F84; // weak
int dword_462F88; // weak
char byte_462F8C; // weak
int dword_462F8F; // weak
int dword_462F93; // weak
int dword_462F97; // weak
char byte_462F9B; // weak
int dword_462F9E; // weak
int dword_462FA2; // weak
int dword_462FA6; // weak
char byte_462FAA; // weak
int dword_462FAD; // weak
int dword_462FB1; // weak
int dword_462FB5; // weak
char byte_462FB9; // weak
int dword_462FBC; // weak
int dword_462FC0; // weak
int dword_462FC4; // weak
char byte_462FC8; // weak
int dword_462FCB; // weak
int dword_462FCF; // weak
int dword_462FD3; // weak
char byte_462FD7; // weak
int dword_462FDA; // weak
int dword_462FDE; // weak
int dword_462FE2; // weak
char byte_462FE6; // weak
int dword_462FE9; // weak
int dword_462FED; // weak
int dword_462FF1; // weak
char byte_462FF5; // weak
int dword_462FF8; // weak
int dword_462FFC; // weak
int dword_463000; // weak
char byte_463004; // weak
int dword_463007; // weak
int dword_46300B; // weak
int dword_46300F; // weak
char byte_463013; // weak
int dword_463016; // weak
int dword_46301A; // weak
int dword_46301E; // weak
char byte_463022; // weak
int dword_463025; // weak
int dword_463029; // weak
int dword_46302D; // weak
char byte_463031; // weak
int dword_463034; // weak
int dword_463038; // weak
int dword_46303C; // weak
char byte_463040; // weak
int dword_463043; // weak
int dword_463047; // weak
int dword_46304B; // weak
char byte_46304F; // weak
int dword_463052; // weak
int dword_463056; // weak
int dword_46305A; // weak
char byte_46305E; // weak
int dword_463061; // weak
int dword_463065; // weak
int dword_463069; // weak
char byte_46306D; // weak
int dword_463070; // weak
int dword_463074; // weak
int dword_463078; // weak
char byte_46307C; // weak
int dword_46307F; // weak
int dword_463083; // weak
int dword_463087; // weak
char byte_46308B; // weak
int dword_46308E; // weak
int dword_463092; // weak
int dword_463096; // weak
char byte_46309A; // weak
int dword_46309D; // weak
int dword_4630A1; // weak
int dword_4630A5; // weak
char byte_4630A9; // weak
int dword_4630AC; // weak
int dword_4630B0; // weak
int dword_4630B4; // weak
char byte_4630B8; // weak
int dword_4630BB; // weak
int dword_4630BF; // weak
int dword_4630C3; // weak
char byte_4630C7; // weak
int dword_4630CA; // weak
int dword_4630CE; // weak
int dword_4630D2; // weak
char byte_4630D6; // weak
int dword_4630D9; // weak
int dword_4630DD; // weak
int dword_4630E1; // weak
char byte_4630E5; // weak
int dword_4630E8; // weak
int dword_4630EC; // weak
int dword_4630F0; // weak
char byte_4630F4; // weak
int dword_4630F7; // weak
int dword_4630FB; // weak
int dword_4630FF; // weak
char byte_463103; // weak
int dword_463106; // weak
int dword_46310A; // weak
int dword_46310E; // weak
char byte_463112; // weak
int dword_463115; // weak
int dword_463119; // weak
int dword_46311D; // weak
char byte_463121; // weak
int dword_463124; // weak
int dword_463128; // weak
int dword_46312C; // weak
char byte_463130; // weak
int dword_463133; // weak
int dword_463137; // weak
int dword_46313B; // weak
char byte_46313F; // weak
int dword_463142; // weak
int dword_463146; // weak
int dword_46314A; // weak
char byte_46314E; // weak
int dword_463151; // weak
int dword_463155; // weak
int dword_463159; // weak
char byte_46315D; // weak
int dword_463160; // weak
int dword_463164; // weak
int dword_463168; // weak
char byte_46316C; // weak
int dword_46316F; // weak
int dword_463173; // weak
int dword_463177; // weak
char byte_46317B; // weak
int dword_46317E; // weak
int dword_463182; // weak
int dword_463186; // weak
char byte_46318A; // weak
int dword_46318D; // weak
int dword_463191; // weak
int dword_463195; // weak
char byte_463199; // weak
int dword_46319C; // weak
int dword_4631A0; // weak
int dword_4631A4; // weak
char byte_4631A8; // weak
int dword_4631AB; // weak
int dword_4631AF; // weak
int dword_4631B3; // weak
char byte_4631B7; // weak
int dword_4631BA; // weak
int dword_4631BE; // weak
int dword_4631C2; // weak
char byte_4631C6; // weak
int dword_4631C9; // weak
int dword_4631CD; // weak
int dword_4631D1; // weak
char byte_4631D5; // weak
int dword_4631D8; // weak
int dword_4631DC; // weak
int dword_4631E0; // weak
char byte_4631E4; // weak
int dword_4631E7; // weak
int dword_4631EB; // weak
int dword_4631EF; // weak
char byte_4631F3; // weak
int dword_4631F6; // weak
int dword_4631FA; // weak
int dword_4631FE; // weak
char byte_463202; // weak
int dword_463205; // weak
int dword_463209; // weak
int dword_46320D; // weak
char byte_463211; // weak
int dword_463214; // weak
int dword_463218; // weak
int dword_46321C; // weak
char byte_463220; // weak
int dword_463223; // weak
int dword_463227; // weak
int dword_46322B; // weak
char byte_46322F; // weak
int dword_463232; // weak
int dword_463236; // weak
int dword_46323A; // weak
char byte_46323E; // weak
int dword_463241; // weak
int dword_463245; // weak
int dword_463249; // weak
char byte_46324D; // weak
int dword_463250; // weak
int dword_463254; // weak
int dword_463258; // weak
char byte_46325C; // weak
int dword_46325F; // weak
int dword_463263; // weak
int dword_463267; // weak
char byte_46326B; // weak
int dword_46326E; // weak
int dword_463272; // weak
int dword_463276; // weak
char byte_46327A; // weak
int dword_46327D; // weak
int dword_463281; // weak
int dword_463285; // weak
char byte_463289; // weak
int dword_46328C; // weak
int dword_463290; // weak
int dword_463294; // weak
char byte_463298; // weak
int dword_4632B9; // weak
int dword_4632BD; // weak
int dword_4632C1; // weak
char byte_4632C5; // weak
int dword_4632C8; // weak
int dword_4632CC; // weak
int dword_4632D0; // weak
char byte_4632D4; // weak
int dword_4636C4; // weak
int dword_4636C8; // weak
int dword_4636CC; // weak
char byte_4636D0; // weak
int dword_4636D3; // weak
int dword_4636D7; // weak
int dword_4636DB; // weak
__int16 word_4636DF; // weak
int dword_46383B; // weak
int dword_46383F; // weak
int dword_463843; // weak
char byte_463847; // weak
int dword_463859; // weak
int dword_46385D; // weak
int dword_463861; // weak
char byte_463865; // weak
int dword_463868; // weak
int dword_46386C; // weak
int dword_463870; // weak
char byte_463874; // weak
int dword_463949; // weak
int dword_46394D; // weak
int dword_463951; // weak
char byte_463955; // weak
int dword_463958; // weak
int dword_46395C; // weak
int dword_463960; // weak
char byte_463964; // weak
int dword_463967; // weak
int dword_46396B; // weak
int dword_46396F; // weak
char byte_463973; // weak
int dword_463985; // weak
int dword_463989; // weak
int dword_46398D; // weak
char byte_463991; // weak
int dword_4639A3; // weak
int dword_4639A7; // weak
int dword_4639AB; // weak
char byte_4639AF; // weak
int dword_4639C1; // weak
int dword_4639C5; // weak
int dword_4639C9; // weak
char byte_4639CD; // weak
int dword_4639D0; // weak
int dword_4639D4; // weak
int dword_4639D8; // weak
char byte_4639DC; // weak
int dword_4639DF; // weak
int dword_4639E3; // weak
int dword_4639E7; // weak
char byte_4639EB; // weak
int dword_4639EE; // weak
int dword_4639F2; // weak
int dword_4639F6; // weak
char byte_4639FA; // weak
int dword_4639FD; // weak
int dword_463A01; // weak
int dword_463A05; // weak
char byte_463A09; // weak
int numberOfLaps; // idb


int dword_463CAC; // idb

void *fametxtBpk; // idb
void *armor1Bpk; // idb
void *armor2Bpk; // idb
void *armor3Bpk; // idb
void *armor4Bpk; // idb
int dword_463CD0; // weak
int dword_463CD4; // weak
void *recobarBpk; // idb
void *DstBuf; // idb


int dword_463CE8; // weak
int driverId; // weak


int* trsnap2m1Bpk[20]; // idb


void *bases41Bpk; // idb
void *fbig3bBpk; // idb
void *spons1bBpk; // idb






int menuOptionSelected_463DF0; // weak
void *choo2Bpk; // idb
char byte_463DF8; // weak
char byte_463E00[256]; // weak
int dword_463E08; // weak
_UNKNOWN unk_463E20; // weak
int dword_463E2D; // weak
int dword_464F10; // weak
int dword_464F14; // weak
int dword_464F18; // weak
int dword_464F1C; // weak
int dword_464F20; // weak
int dword_464F30[256]; // weak
int dword_464F40; // weak
int dword_464F44; // weak
char byte_464F50; // idb
int dword_464F60; // weak
int dword_464F64; // weak
int dword_464F68; // weak
int dword_464F6C; // weak
float flt_464F70; // weak
void *pedestrBpk; // idb
void *dword_464F78; // idb
_UNKNOWN unk_464F80; // weak
_UNKNOWN unk_4669C0; // weak
_UNKNOWN unk_466F00; // weak
int dword_467000; // weak
int dword_467020[256]; // weak
_UNKNOWN unk_46E560; // weak
_UNKNOWN unk_46E880; // weak
int dword_46E8D0[256]; // weak
int dword_46E8D4; // weak
int dword_46E8D8; // weak
int dword_46E8DC; // weak
int dword_46E8E0[256]; // weak
void *mines1aBpk; // idb
int dword_46ECE4; // weak
int dword_46ECE8; // weak
_UNKNOWN unk_46ED00; // weak
int dword_46EE00[256]; // weak
int dword_46F200; // weak
void *dword_46F204; // idb
int dword_46F208; // weak
int dword_46F21C[256]; // weak
int dword_46F220[256]; // weak
_UNKNOWN unk_478E60; // weak
void *rocket1Bpk; // idb
void *rocket2Bpk; // idb
int dword_479268; // weak
void *dword_47926C; // idb
int dword_479270; // weak
int dword_479280[256]; // weak
void *genlamBpk; // idb
int dword_479684; // weak
void *genmesBpk; // idb
int dword_47968C; // weak
void *dword_479690; // idb
float flt_4796A0[256]; // weak
_UNKNOWN unk_479AA0; // weak
_UNKNOWN unk_479AA4; // weak
_UNKNOWN unk_479AAC; // weak
_UNKNOWN unk_479AB8; // weak
int dword_479D20; // weak
_UNKNOWN unk_479D24; // weak
_UNKNOWN unk_479D2C; // weak
_UNKNOWN unk_479D38; // weak
char byte_479D40[256]; // weak
_UNKNOWN unk_479E40; // weak
_UNKNOWN unk_479EE0; // weak
_UNKNOWN unk_479EE8; // weak
_UNKNOWN unk_479EEC; // weak
_UNKNOWN unk_479F00; // weak
_UNKNOWN unk_481BC9; // weak
int dword_481BD0[256]; // weak
int dword_481BD4; // weak
int dword_481BD8; // weak
int dword_481BDC; // weak
int dword_481BE0; // weak
float flt_481BE4; // weak
int dword_481BE8; // weak
int dword_481C00[256]; // weak
int dword_481C04[256]; // weak
_UNKNOWN unk_481C08; // weak
_UNKNOWN unk_481C0C; // weak
int dword_481E00; // weak
void *dword_481E04; // idb
int dword_481E08; // weak
int dword_481E0C; // weak
void *smokeBpk; // idb
int dword_481E14; // weak

int dword_481E24[256]; // weak
int dword_481E28; // weak
int dword_481E2C; // weak
int dword_481E30; // weak
int dword_481E34; // weak
int dword_481E38; // weak
int dword_481E3C; // weak
int dword_481E40; // weak
int dword_481E44; // weak
int dword_481E48; // weak
int dword_481E4C; // weak
int dword_481E50; // weak
int dword_481E54; // weak
int dword_481E58; // weak
_UNKNOWN unk_481F20; // weak
_UNKNOWN unk_488020; // weak
_UNKNOWN unk_48E420; // weak
_UNKNOWN unk_48E620; // weak
_UNKNOWN unk_48E720; // weak
_UNKNOWN unk_48E760; // weak
_UNKNOWN unk_491820; // weak
_UNKNOWN unk_491920; // weak
char byte_4A6820[256]; // weak
char byte_4A6822; // weak
char byte_4A6823; // weak
char byte_4A6824; // weak
char byte_4A6825; // weak
char byte_4A6826; // weak
char byte_4A6827; // weak
char byte_4A6828; // weak
char byte_4A6829; // weak
char byte_4A682A; // weak
char byte_4A682B; // weak
char byte_4A682C; // weak
char byte_4A682D; // weak
char byte_4A682E; // weak
char byte_4A682F; // weak
char byte_4A6830; // weak
char byte_4A6831; // weak
char byte_4A6832; // weak
void *dword_4A6854; // idb
int dword_4A6858; // weak
int dword_4A685C; // weak
void *genflaBpk; // idb
int dword_4A6880[256]; // weak
int dword_4A6884[256]; // weak
int dword_4A6888; // weak
int dword_4A688C[256]; // weak
int dword_4A6890[256]; // weak
float flt_4A6894[256]; // weak
int dword_4A6898[256]; // weak
int dword_4A689C[256]; // weak
int dword_4A68A0[256]; // weak
int dword_4A68A4[256]; // weak
int dword_4A68A8[256]; // weak
int dword_4A68AC[256]; // weak
int dword_4A68B0[256]; // weak
int dword_4A68B4[256]; // weak
int dword_4A68B8; // weak
int dword_4A68BC; // weak
int dword_4A68C0; // weak
char byte_4A68C4[256]; // weak
int dword_4A68D0[256]; // weak
_UNKNOWN unk_4A68D4; // weak
int dword_4A68D8[256]; // weak
int dword_4A68DC[256]; // weak
int dword_4A68E0[256]; // weak
int dword_4A68E4[256]; // weak
int dword_4A68E8; // weak
int dword_4A68F4[256]; // weak
int dword_4A68F8; // weak
int dword_4A6904[256]; // weak
int dword_4A6908; // weak
int dword_4A694C; // weak
int dword_4A6950; // weak
int dword_4A6954; // weak
char byte_4A6958[256]; // weak
int dword_4A69E0; // weak
int dword_4A69E4; // weak
int dword_4A69E8; // weak
char byte_4A69EC[256]; // weak
int dword_4A6A74; // weak
int dword_4A6A78; // weak
int dword_4A6A7C; // weak
char byte_4A6A80[256]; // weak
int dword_4A6AD0; // weak
int dword_4A6AD4; // weak
int dword_4A6AD8; // weak
int dword_4A6AE0[256]; // weak
int dword_4A6AE4; // weak
int dword_4A6AE8; // weak
int dword_4A6AEC; // weak
int dword_4A6AF0; // weak
int dword_4A6AF4; // weak
int dword_4A6AF8; // weak
int dword_4A6AFC; // weak
int dword_4A6B00; // weak
int dword_4A6B04; // weak
_UNKNOWN unk_4A6B20; // weak
_UNKNOWN unk_4A6B24; // weak
int dword_4A6B2F; // weak
int dword_4A6B33; // weak
int dword_4A6B37; // weak
__int16 word_4A6B3B; // weak
int dword_4A6B3E; // weak
int dword_4A6B42; // weak
int dword_4A6B46; // weak
__int16 word_4A6B4A; // weak
int dword_4A6B4D; // weak
int dword_4A6B51; // weak
int dword_4A6B55; // weak
__int16 word_4A6B59; // weak
int dword_4A6B5C; // weak
int dword_4A6B60; // weak
int dword_4A6B64; // weak
__int16 word_4A6B68; // weak
int dword_4A6B6B; // weak
int dword_4A6B6F; // weak
int dword_4A6B73; // weak
__int16 word_4A6B77; // weak
int dword_4A6B7A; // weak
int dword_4A6B7E; // weak
int dword_4A6B82; // weak
__int16 word_4A6B86; // weak
int dword_4A6B89; // weak
int dword_4A6B8D; // weak
int dword_4A6B91; // weak
__int16 word_4A6B95; // weak
int dword_4A6B98; // weak
int dword_4A6B9C; // weak
int dword_4A6BA0; // weak
__int16 word_4A6BA4; // weak
int dword_4A6BA7; // weak
int dword_4A6BAB; // weak
int dword_4A6BAF; // weak
__int16 word_4A6BB3; // weak
int dword_4A6BB6; // weak
int dword_4A6BBA; // weak
int dword_4A6BBE; // weak
__int16 word_4A6BC2; // weak
int dword_4A6BC5; // weak
int dword_4A6BC9; // weak
int dword_4A6BCD; // weak
__int16 word_4A6BD1; // weak
int dword_4A6BD4; // weak
int dword_4A6BD8; // weak
int dword_4A6BDC; // weak
__int16 word_4A6BE0; // weak
int dword_4A6BE3; // weak
int dword_4A6BE7; // weak
int dword_4A6BEB; // weak
__int16 word_4A6BEF; // weak
int dword_4A6BF2; // weak
int dword_4A6BF6; // weak
int dword_4A6BFA; // weak
__int16 word_4A6BFE; // weak
int dword_4A6C01; // weak
int dword_4A6C05; // weak
int dword_4A6C09; // weak
__int16 word_4A6C0D; // weak
int dword_4A6C10; // weak
int dword_4A6C14; // weak
int dword_4A6C18; // weak
__int16 word_4A6C1C; // weak
int dword_4A6C1F; // weak
int dword_4A6C23; // weak
int dword_4A6C27; // weak
__int16 word_4A6C2B; // weak
int dword_4A6C2E; // weak
int dword_4A6C32; // weak
int dword_4A6C36; // weak
__int16 word_4A6C3A; // weak
int dword_4A6C3D; // weak
int dword_4A6C41; // weak
int dword_4A6C45; // weak
__int16 word_4A6C49; // weak
int dword_4A6C4C; // weak
int dword_4A6C50; // weak
int dword_4A6C54; // weak
__int16 word_4A6C58; // weak
int dword_4A6C5B; // weak
int dword_4A6C5F; // weak
int dword_4A6C63; // weak
__int16 word_4A6C67; // weak
int dword_4A6C6A; // weak
int dword_4A6C6E; // weak
int dword_4A6C72; // weak
__int16 word_4A6C76; // weak
int dword_4A6C79; // weak
int dword_4A6C7D; // weak
int dword_4A6C81; // weak
__int16 word_4A6C85; // weak
int dword_4A6C88; // weak
int dword_4A6C8C; // weak
int dword_4A6C90; // weak
__int16 word_4A6C94; // weak
int dword_4A6C97; // weak
int dword_4A6C9B; // weak
int dword_4A6C9F; // weak
__int16 word_4A6CA3; // weak
int dword_4A6CA6; // weak
int dword_4A6CAA; // weak
int dword_4A6CAE; // weak
__int16 word_4A6CB2; // weak
int dword_4A6CB5; // weak
int dword_4A6CB9; // weak
int dword_4A6CBD; // weak
__int16 word_4A6CC1; // weak
int dword_4A6CC4; // weak
int dword_4A6CC8; // weak
int dword_4A6CCC; // weak
__int16 word_4A6CD0; // weak
int dword_4A6CD3; // weak
int dword_4A6CD7; // weak
int dword_4A6CDB; // weak
__int16 word_4A6CDF; // weak
int dword_4A6CE2; // weak
int dword_4A6CE6; // weak
int dword_4A6CEA; // weak
__int16 word_4A6CEE; // weak
int dword_4A6CF1; // weak
int dword_4A6CF5; // weak
int dword_4A6CF9; // weak
__int16 word_4A6CFD; // weak
int dword_4A6D00; // weak
int dword_4A6D04; // weak
int dword_4A6D08; // weak
__int16 word_4A6D0C; // weak
int dword_4A6D0F; // weak
int dword_4A6D13; // weak
int dword_4A6D17; // weak
__int16 word_4A6D1B; // weak
int dword_4A6D1E; // weak
int dword_4A6D22; // weak
int dword_4A6D26; // weak
__int16 word_4A6D2A; // weak
int dword_4A6D2D; // weak
int dword_4A6D31; // weak
int dword_4A6D35; // weak
__int16 word_4A6D39; // weak
int dword_4A6D3C; // weak
int dword_4A6D40; // weak
int dword_4A6D44; // weak
__int16 word_4A6D48; // weak
int dword_4A6D4B; // weak
int dword_4A6D4F; // weak
int dword_4A6D53; // weak
__int16 word_4A6D57; // weak
int dword_4A6D5A; // weak
int dword_4A6D5E; // weak
int dword_4A6D62; // weak
__int16 word_4A6D66; // weak
int dword_4A6D69; // weak
int dword_4A6D6D; // weak
int dword_4A6D71; // weak
__int16 word_4A6D75; // weak
int dword_4A6D78; // weak
int dword_4A6D7C; // weak
int dword_4A6D80; // weak
__int16 word_4A6D84; // weak
int dword_4A6D87; // weak
int dword_4A6D8B; // weak
int dword_4A6D8F; // weak
__int16 word_4A6D93; // weak
int dword_4A6D96; // weak
int dword_4A6D9A; // weak
int dword_4A6D9E; // weak
__int16 word_4A6DA2; // weak
int dword_4A6DA5; // weak
int dword_4A6DA9; // weak
int dword_4A6DAD; // weak
__int16 word_4A6DB1; // weak
int dword_4A6DB4; // weak
int dword_4A6DB8; // weak
int dword_4A6DBC; // weak
__int16 word_4A6DC0; // weak
int dword_4A6DC3; // weak
int dword_4A6DC7; // weak
int dword_4A6DCB; // weak
__int16 word_4A6DCF; // weak
int dword_4A6DD2; // weak
int dword_4A6DD6; // weak
int dword_4A6DDA; // weak
__int16 word_4A6DDE; // weak
int dword_4A6DE1; // weak
int dword_4A6DE5; // weak
int dword_4A6DE9; // weak
__int16 word_4A6DED; // weak
int dword_4A6DF0; // weak
int dword_4A6DF4; // weak
int dword_4A6DF8; // weak
__int16 word_4A6DFC; // weak
int dword_4A6DFF; // weak
int dword_4A6E03; // weak
int dword_4A6E07; // weak
__int16 word_4A6E0B; // weak
int dword_4A6E0E; // weak
int dword_4A6E12; // weak
int dword_4A6E16; // weak
__int16 word_4A6E1A; // weak
int dword_4A6E1D; // weak
int dword_4A6E21; // weak
int dword_4A6E25; // weak
__int16 word_4A6E29; // weak
int dword_4A6E2C; // weak
int dword_4A6E30; // weak
int dword_4A6E34; // weak
__int16 word_4A6E38; // weak
int dword_4A6E3B; // weak
int dword_4A6E3F; // weak
int dword_4A6E43; // weak
__int16 word_4A6E47; // weak
int dword_4A6E4A; // weak
int dword_4A6E4E; // weak
int dword_4A6E52; // weak
__int16 word_4A6E56; // weak
int dword_4A6E59; // weak
int dword_4A6E5D; // weak
int dword_4A6E61; // weak
__int16 word_4A6E65; // weak
int dword_4A6E68; // weak
int dword_4A6E6C; // weak
int dword_4A6E70; // weak
__int16 word_4A6E74; // weak
int dword_4A6E77; // weak
int dword_4A6E7B; // weak
int dword_4A6E7F; // weak
__int16 word_4A6E83; // weak
int dword_4A6E86; // weak
int dword_4A6E8A; // weak
int dword_4A6E8E; // weak
__int16 word_4A6E92; // weak
int dword_4A6E95; // weak
int dword_4A6E99; // weak
int dword_4A6E9D; // weak
__int16 word_4A6EA1; // weak
int dword_4A6EA4; // weak
int dword_4A6EA8; // weak
int dword_4A6EAC; // weak
__int16 word_4A6EB0; // weak
int dword_4A6EB3; // weak
int dword_4A6EB7; // weak
int dword_4A6EBB; // weak
__int16 word_4A6EBF; // weak
int dword_4A6EC2; // weak
int dword_4A6EC6; // weak
int dword_4A6ECA; // weak
__int16 word_4A6ECE; // weak
int dword_4A6ED1; // weak
int dword_4A6ED5; // weak
int dword_4A6ED9; // weak
__int16 word_4A6EDD; // weak
int dword_4A6EE0; // weak
int dword_4A6EE4; // weak
int dword_4A6EE8; // weak
__int16 word_4A6EEC; // weak
int dword_4A6EEF; // weak
int dword_4A6EF3; // weak
int dword_4A6EF7; // weak
__int16 word_4A6EFB; // weak
int dword_4A6EFE; // weak
int dword_4A6F02; // weak
int dword_4A6F06; // weak
__int16 word_4A6F0A; // weak
int dword_4A6F0D; // weak
int dword_4A6F11; // weak
int dword_4A6F15; // weak
__int16 word_4A6F19; // weak
int dword_4A6F1C; // weak
int dword_4A6F20; // weak
int dword_4A6F24; // weak
__int16 word_4A6F28; // weak
int dword_4A6F2B; // weak
int dword_4A6F2F; // weak
int dword_4A6F33; // weak
__int16 word_4A6F37; // weak
int dword_4A6F3A; // weak
int dword_4A6F3E; // weak
int dword_4A6F42; // weak
__int16 word_4A6F46; // weak
int dword_4A6F49; // weak
int dword_4A6F4D; // weak
int dword_4A6F51; // weak
__int16 word_4A6F55; // weak
int dword_4A6F58; // weak
int dword_4A6F5C; // weak
int dword_4A6F60; // weak
__int16 word_4A6F64; // weak
int dword_4A6F67; // weak
int dword_4A6F6B; // weak
int dword_4A6F6F; // weak
__int16 word_4A6F73; // weak
int dword_4A6F76; // weak
int dword_4A6F7A; // weak
int dword_4A6F7E; // weak
__int16 word_4A6F82; // weak
int dword_4A6F85; // weak
int dword_4A6F89; // weak
int dword_4A6F8D; // weak
__int16 word_4A6F91; // weak
int dword_4A6F94; // weak
int dword_4A6F98; // weak
int dword_4A6F9C; // weak
__int16 word_4A6FA0; // weak
int dword_4A6FA3; // weak
int dword_4A6FA7; // weak
int dword_4A6FAB; // weak
__int16 word_4A6FAF; // weak
int dword_4A6FB2; // weak
int dword_4A6FB6; // weak
int dword_4A6FBA; // weak
__int16 word_4A6FBE; // weak
int dword_4A6FC1; // weak
int dword_4A6FC5; // weak
int dword_4A6FC9; // weak
__int16 word_4A6FCD; // weak
int dword_4A6FD0; // weak
int dword_4A6FD4; // weak
int dword_4A6FD8; // weak
__int16 word_4A6FDC; // weak
int dword_4A6FDF; // weak
int dword_4A6FE3; // weak
int dword_4A6FE7; // weak
__int16 word_4A6FEB; // weak
int dword_4A6FEE; // weak
int dword_4A6FF2; // weak
int dword_4A6FF6; // weak
__int16 word_4A6FFA; // weak
int dword_4A6FFD; // weak
int dword_4A7001; // weak
int dword_4A7005; // weak
__int16 word_4A7009; // weak
int dword_4A700C; // weak
int dword_4A7010; // weak
int dword_4A7014; // weak
__int16 word_4A7018; // weak
int dword_4A7039; // weak
int dword_4A703D; // weak
int dword_4A7041; // weak
__int16 word_4A7045; // weak
int dword_4A7048; // weak
int dword_4A704C; // weak
int dword_4A7050; // weak
__int16 word_4A7054; // weak
int dword_4A7444; // weak
int dword_4A7448; // weak
int dword_4A744C; // weak
__int16 word_4A7450; // weak
int dword_4A7453; // weak
int dword_4A7457; // weak
int dword_4A745B; // weak
__int16 word_4A745F; // weak
int dword_4A75BB; // weak
int dword_4A75BF; // weak
int dword_4A75C3; // weak
__int16 word_4A75C7; // weak
int dword_4A75D9; // weak
int dword_4A75DD; // weak
int dword_4A75E1; // weak
__int16 word_4A75E5; // weak
int dword_4A75E8; // weak
int dword_4A75EC; // weak
int dword_4A75F0; // weak
__int16 word_4A75F4; // weak
int dword_4A76C9; // weak
int dword_4A76CD; // weak
int dword_4A76D1; // weak
__int16 word_4A76D5; // weak
int dword_4A76D8; // weak
int dword_4A76DC; // weak
int dword_4A76E0; // weak
__int16 word_4A76E4; // weak
int dword_4A76E7; // weak
int dword_4A76EB; // weak
int dword_4A76EF; // weak
__int16 word_4A76F3; // weak
int dword_4A7705; // weak
int dword_4A7709; // weak
int dword_4A770D; // weak
__int16 word_4A7711; // weak
int dword_4A7723; // weak
int dword_4A7727; // weak
int dword_4A772B; // weak
__int16 word_4A772F; // weak
int dword_4A7741; // weak
int dword_4A7745; // weak
int dword_4A7749; // weak
__int16 word_4A774D; // weak
int dword_4A7750; // weak
int dword_4A7754; // weak
int dword_4A7758; // weak
__int16 word_4A775C; // weak
int dword_4A775F; // weak
int dword_4A7763; // weak
int dword_4A7767; // weak
__int16 word_4A776B; // weak
int dword_4A776E; // weak
int dword_4A7772; // weak
int dword_4A7776; // weak
__int16 word_4A777A; // weak
int dword_4A777D; // weak
int dword_4A7781; // weak
int dword_4A7785; // weak
__int16 word_4A7789; // weak
int dword_4A7A20; // weak
int dword_4A7A24; // weak
void *dword_4A7A28; // idb
void *splat3Bpk; // idb
void *splat4Bpk; // idb
int dword_4A7A38; // weak
int dword_4A7A3C; // weak
int dword_4A7A40; // weak
int dword_4A7A44; // weak
int dword_4A7A48; // weak
int dword_4A7A4C; // weak
char dword_4A7A60[256];
int dword_4A7A64; // weak
__int16 word_4A7A68; // weak
int dword_4A7A6C; // weak
int dword_4A7A70[256]; // weak
_UNKNOWN unk_4A7A74; // weak
int dword_4A7A80; // weak
int dword_4A7A84; // weak
int dword_4A7A88; // weak
int dword_4A7A8C; // weak
int dword_4A7A90; // weak
int dword_4A7A94; // weak
int dword_4A7A98[256]; // weak
int dword_4A7A9C; // weak
int dword_4A7AA0[256]; // weak
int dword_4A7AA4; // weak
int dword_4A7AA8; // weak
int dword_4A7AAC; // weak
int Val; // idb
char byte_4A7AB4[256]; // weak
int dword_4A7AC4; // weak
int dword_4A7AC8; // weak
int dword_4A7AE8; // weak
int dword_4A7AEC; // weak
int dword_4A7AF0; // weak
int dword_4A7AF4; // weak
int dword_4A7AF8; // weak
char byte_4A7B08[256]; // weak
int dword_4A7B3C; // weak
int dword_4A7B40; // weak
int dword_4A7B44; // weak
int dword_4A7B48; // weak
char byte_4A7B5C[256]; // weak
int dword_4A7B90; // weak
int dword_4A7B94; // weak
int dword_4A7B98; // weak
int dword_4A7B9C; // weak
_UNKNOWN unk_4A7BBC; // weak
_UNKNOWN unk_4A7BC0; // weak
_UNKNOWN unk_4A7BC4; // weak
_UNKNOWN unk_4A7BE8; // weak
_UNKNOWN unk_4A7BF0; // weak
_UNKNOWN unk_4A7BF4; // weak
int dword_4A7CC0[256]; // weak
int dword_4A7CC4; // weak
int dword_4A7CC8; // weak
int dword_4A7CCC; // weak
int dword_4A7CD0; // weak
int dword_4A7CE0[256]; // weak
int dword_4A7CE4; // weak
int dword_4A7CE8; // weak
int dword_4A7CEC; // weak
int dword_4A7CF0; // weak
int dword_4A7CF4; // weak
int dword_4A7CF8; // weak
int dword_4A7CFC; // weak
int dword_4A7D00[256]; // weak
int dword_4A7D04[256]; // weak
int dword_4A7D08[256]; // weak
int dword_4A7D0C[256]; // weak
int dword_4A7D10[256]; // weak
int dword_4A7D14[256]; // weak
int dword_4A7D18[256]; // weak
int dword_4A7D1C[256]; // weak
byte dword_4A7D20[64]; // idb
int dword_4A7D60[256]; // weak
int dword_4A7DA0[256]; // weak
int dword_4A7DA4[256]; // weak
_UNKNOWN unk_4A7DA8; // weak
float flt_4A7DAC[256]; // weak
int dword_4A7DB0[256]; // weak
int dword_4A7DB4[256]; // weak
int dword_4A7DB8[256]; // weak
_UNKNOWN unk_4A7DFC; // weak
_UNKNOWN unk_4A7E00; // weak
_UNKNOWN unk_4A7E04; // weak
char byte_4A7E08[256]; // weak
char byte_4A7E09[256]; // weak
int dword_4A7E0C[256]; // weak
int dword_4A7E10[256]; // weak
int dword_4A7E14[256]; // weak
int dword_4A7E18[256]; // weak
int dword_4A7E1C[256]; // weak
int dword_4A7E20[256]; // weak
int dword_4A7E24[256]; // weak
int dword_4A7E28[256]; // weak
int dword_4A7E2C[256]; // weak
int dword_4A7E30[256]; // weak
int dword_4A7E34[256]; // weak
int dword_4A7E38[256]; // weak
int dword_4A7E3C[256]; // weak
int dword_4A7E40[256]; // weak
int dword_4A7E44[256]; // weak
int dword_4A7E48[256]; // weak
int dword_4A7E4C[256]; // weak
int dword_4A7E50[256]; // weak
int dword_4A7E54[256]; // weak
float flt_4A7E58; // weak
int dword_4A7E5C[256]; // weak
int dword_4A7E60[256]; // weak
_UNKNOWN unk_4A7E64; // weak
int dword_4A7E6C[256]; // weak
int dword_4A7E70[256]; // weak
int dword_4A7E74[256]; // weak
int dword_4A7E78[256]; // weak
int dword_4A7E80[256]; // weak
int dword_4A7E84[256]; // weak
int dword_4A7E88[256]; // weak
int dword_4A7E90[256]; // weak
int dword_4A7E94[256]; // weak
int dword_4A7E98[256]; // weak
int dword_4A7E9C[256]; // weak
int dword_4A7EA0[256]; // weak
int dword_4A7EA4[256]; // weak
int dword_4A7EA8[256]; // weak
int dword_4A7EAC[256]; // weak
int dword_4A7EB0[256]; // weak
int dword_4A7EB4[256]; // weak
int dword_4A7EB8[256]; // weak
int dword_4A7EBC[256]; // weak
int dword_4A7EC0[256]; // weak
int dword_4A7EC4[256]; // weak
int dword_4A7EC8[256]; // weak
int dword_4A7ECC[256]; // weak
int dword_4A7ED0[256]; // weak
int dword_4A7ED4[256]; // weak
int dword_4A7ED8[256]; // weak
int dword_4A7EDC[256]; // weak
int dword_4A7EE0[256]; // weak
int dword_4A7EE4[256]; // weak
int dword_4A7F20[256]; // weak
int dword_4A7F5C[256]; // weak
int dword_4A7F98[256]; // weak
int dword_4A7FD4[256]; // weak
int dword_4A8010[256]; // weak
int dword_4A804C[256]; // weak
int dword_4A8050[256]; // weak
int dword_4A8054[256]; // weak
int dword_4A8058[256]; // weak
int dword_4A805C[256]; // weak
int dword_4A806C; // weak
int dword_4A8070; // weak
float flt_4A810C; // weak
float flt_4A8114; // weak
float flt_4A8118; // weak
char byte_4A8168; // weak
char byte_4A8169; // weak
int dword_4A81B0; // weak
int dword_4A81B4; // weak
float flt_4A81B8; // weak
int dword_4A83AC; // weak
int dword_4A83CC; // weak
int dword_4A83D0; // weak
float flt_4A846C; // weak
float flt_4A8474; // weak
float flt_4A8478; // weak
char byte_4A84C8; // weak
char byte_4A84C9; // weak
int dword_4A8510; // weak
int dword_4A8514; // weak
float flt_4A8518; // weak
int dword_4A870C; // weak
int dword_4A872C; // weak
int dword_4A8730; // weak
float flt_4A87CC; // weak
float flt_4A87D4; // weak
float flt_4A87D8; // weak
char byte_4A8828; // weak
char byte_4A8829; // weak
int dword_4A8870; // weak
int dword_4A8874; // weak
float flt_4A8878; // weak
int dword_4A8A6C; // weak
int dword_4A8A80; // weak
_UNKNOWN unk_4A8A8C; // weak
int dword_4A8A90[256]; // weak
int dword_4A8A94; // weak
int dword_4A8A98; // weak
int dword_4A8A9C; // weak
int dword_4A8AA0; // weak
int dword_4A8AA4; // weak
float flt_4A8AC0[256]; // weak
float flt_4A8C00[256]; // weak
int dword_4A8D2C; // weak
int dword_4A8D40[256]; // weak
_UNKNOWN unk_4A8DD0; // weak
int dword_4A9140; // weak
_UNKNOWN unk_4A9160; // weak
float flt_4A9A60[256]; // weak
int dword_4A9B8C; // weak
int dword_4A9B90; // weak
char byte_4A9BA0[256]; // weak
char byte_4A9BA1[256]; // weak
char byte_4A9BA2[256]; // weak
int dword_4A9EA0; // weak
int dword_4A9EA4; // weak
int dword_4A9EA8; // weak
int dword_4A9EAC; // weak
int dword_4A9EB0; // weak
void *Memory; // idb
int dword_4A9EB8; // weak
char byte_4A9EC0; // weak
char byte_4A9EC1; // weak
char byte_4A9EC2; // weak
char byte_4A9EC3; // weak
char byte_4A9EC4; // weak
char byte_4A9EC5; // weak
char byte_4A9EC6; // weak
char byte_4A9EC7; // weak
char byte_4A9EC8; // weak
char byte_4A9EC9; // weak
char byte_4A9ECA; // weak
char byte_4A9ECB; // weak
char byte_4A9ECC; // weak
char byte_4A9ECD; // weak
char byte_4A9ECE; // weak
_UNKNOWN unk_4A9EE0; // weak
int dword_4A9FE0[256]; // weak
int dword_4AA3E0; // weak
int dword_4AA3E4; // weak
void *shotsBpk; // idb
int dword_4AA3F0[256]; // weak
int dword_4AA3F4; // weak
int dword_4AA3F8; // weak
int dword_4AA3FC; // weak
_UNKNOWN unk_4AA400; // weak
int dword_4AA500; // weak
int dword_4AA504; // weak
int dword_4AA508; // weak
void *dword_4AA50C; // idb
int dword_4AA520[256]; // weak
void *dword_4AA920; // idb
int dword_4AA924; // weak
int dword_4AA928; // weak
int dword_4AA92C; // weak
_UNKNOWN unk_4AA940; // weak
_UNKNOWN unk_4AC340; // weak
_UNKNOWN unk_4ACB40; // weak
_UNKNOWN unk_4AD340; // weak
_UNKNOWN unk_4ADB40; // weak
int dword_4B3140; // weak
int dword_4B3144; // weak
int dword_4B3160[256]; // weak
_UNKNOWN unk_4B3404; // weak
void *burn1aBpk; // idb
void *obstacleBpk; // idb
_UNKNOWN unk_4B4020; // weak
_UNKNOWN unk_4B4021; // weak
int dword_4B4320[256]; // weak
int dword_4B4324[256]; // weak
_WORD dword_4B4328[150]; // idb
int dword_4B4454[256]; // weak
int dword_4B4580[256]; // weak
int dword_4B46BC[256]; // weak
int dword_4B484C[256]; // weak
int dword_4B49DC[256]; // weak
byte dword_4B4B6C[404]; // idb
_UNKNOWN unk_4B4D00; // weak
int dword_4B4D04[256]; // weak
int dword_4B4D08[256]; // weak
int dword_4B4D0C[256]; // weak
int dword_4B4E38[256]; // weak
int dword_4B4F64[256]; // weak
int dword_4B4F68[256]; // weak
int dword_4B4F6C[256]; // weak
int dword_501260; // weak
int dword_501264; // weak
float flt_501280[256]; // weak
_UNKNOWN unk_501680; // weak
int dword_501A80; // weak
char byte_501AA0[256]; // weak
int dword_501BA0[256]; // weak
int dword_501BA4[256]; // weak
int dword_501BA8[256]; // weak
int dword_501BAC[256]; // weak
int dword_501BB0[256]; // weak
_UNKNOWN unk_501BB4; // weak
_UNKNOWN unk_501BB8; // weak
_UNKNOWN unk_501BBC; // weak
_UNKNOWN unk_501BD0; // weak
_UNKNOWN unk_501CC8; // weak
_UNKNOWN unk_502930; // weak
_UNKNOWN unk_502A48; // weak
_UNKNOWN unk_502C94; // weak
_UNKNOWN unk_502DA0; // weak
_UNKNOWN unk_502DA4; // weak
int dword_503220; // weak
int dword_503224; // weak
_UNKNOWN unk_503228; // weak
_UNKNOWN unk_50322C; // weak
_UNKNOWN unk_503230; // weak
_UNKNOWN unk_503234; // weak
_UNKNOWN unk_503238; // weak
_UNKNOWN unk_50323C; // weak
int dword_503240[256]; // weak
void *blowiBpk; // idb
void *dword_5034D0; // idb
char byte_5034E0[256]; // weak
int dword_5034F0; // weak
int dword_5034F4; // weak
void *dword_5034F8; // idb
void *dword_5034FC; // idb
int dword_503500; // weak
int dword_503504; // weak
int dword_503508; // weak
int dword_50350C; // weak
int dword_503510; // weak
int dword_503514; // weak
int dword_503518; // weak
int dword_50351C; // weak
_UNKNOWN unk_503520; // weak
int dword_508D20; // weak
int dword_508D24; // weak
int dword_508D44[256]; // weak
int dword_508D48; // weak
int dword_508D4C; // weak
int dword_508D50; // weak

int dword_508D6D; // weak
_UNKNOWN unk_509E60; // weak
_UNKNOWN unk_509E61; // weak
int dword_50A160; // weak
int dword_50A164; // weak
void *damslidBpk; // idb
void *dword_50A16C; // idb
int dword_50A170; // weak
int dword_50A180[256]; // weak
int dword_50A184[256]; // weak
int dword_50A18C[256]; // weak
int dword_50A190[256]; // weak
int dword_50A194[256]; // weak
int dword_50A198[256]; // weak
int dword_50A19C[256]; // weak
_UNKNOWN unk_50A1A8; // weak
int dword_50B2B0; // weak
_UNKNOWN unk_50B2C0; // weak
_UNKNOWN unk_50E440; // weak
int dword_50E540; // weak
int dword_50E560[256]; // weak
_UNKNOWN unk_50E6F0; // weak
void *flame1Bpk; // idb
void *flame2Bpk; // idb
void *flame3Bpk; // idb
void *flame4Bpk; // idb
void *flame5Bpk; // idb
void *flame6Bpk; // idb
int dword_50E718; // weak
int dword_50E71C; // weak
char byte_50E720[256]; // weak
char byte_50E721[256]; // weak
int dword_50EF20; // weak
_UNKNOWN unk_50EF44; // weak
int dword_50FB44; // weak


void __cdecl nullsub_1() {

}
int __cdecl sub_43EF50(int a1)
{
  return sub_43EDC0(a1);
}

int sub_43C8F0()
{
  return sub_43C850();
}
void __cdecl allocateMemoryPtr(void ** v1,size_t Size)
{
	*v1 = malloc(sizeof(Size));
	if (!*v1)
	{
		freeMusic();
		setWindowCaption();
		printf("DEATH RALLY Error: Cannot allocate memory!\n");
		printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
		if (isMultiplayerGame)
			nullsub_1();
		exit(112);
	}
}
//----- (00401000) --------------------------------------------------------
void __cdecl allocateMemory(size_t Size)
{
  int v1=1; // eax@1

//TODO correct this
 // operator delete(Size);
  if ( !v1 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
}
// 45EA04: using guessed type int isMultiplayerGame;

//----- (00401060) --------------------------------------------------------
int sub_401060()
{

  int v0; // ebp@2
  int *v1; // ebx@2
  int v2; // eax@3
  int v3; // ecx@3
  signed int v4; // edi@3
  int v5; // esi@3
  int v6; // ecx@3
  signed int v7; // ST14_4@3
  double v8; // st7@3
  int v9; // edi@3
  int v10; // edi@3
  double v11; // st7@3
  int v12; // ecx@3
  int v13; // eax@3
  bool v14; // zf@3
  int v15; // eax@9
  int v16; // edi@9
  double v17; // st7@36
  int v18; // ecx@36
  int v19; // ecx@36
  int v20; // eax@39
  char v21; // cl@40
  int v22; // eax@41
  char v23; // cl@42
  int v24; // eax@43
  char v25; // cl@44
  int result; // eax@45
  char v27; // cl@46
  int v28; // [sp+Ch] [bp-4F0h]@1
  int v29; // [sp+14h] [bp-4E8h]@1
  int v30; // [sp+18h] [bp-4E4h]@1
  int v31; // [sp+1Ch] [bp-4E0h]@1
  int v32; // [sp+20h] [bp-4DCh]@1
  int v33; // [sp+24h] [bp-4D8h]@1
  int v34; // [sp+28h] [bp-4D4h]@1
  int v35; // [sp+2Ch] [bp-4D0h]@1
  int v36; // [sp+30h] [bp-4CCh]@1
  int v37; // [sp+34h] [bp-4C8h]@1
  int v38; // [sp+38h] [bp-4C4h]@1
  int v39; // [sp+3Ch] [bp-4C0h]@1
  int v40; // [sp+40h] [bp-4BCh]@1
  int v41; // [sp+44h] [bp-4B8h]@1
  int v42; // [sp+48h] [bp-4B4h]@1
  int v43; // [sp+4Ch] [bp-4B0h]@1
  int v44; // [sp+50h] [bp-4ACh]@1
  int v45; // [sp+54h] [bp-4A8h]@1
  int v46; // [sp+58h] [bp-4A4h]@1
  int v47; // [sp+5Ch] [bp-4A0h]@1
  int v48; // [sp+60h] [bp-49Ch]@1
  int v49; // [sp+64h] [bp-498h]@1
  int v50; // [sp+68h] [bp-494h]@1
  int v51; // [sp+6Ch] [bp-490h]@1
  int v52; // [sp+70h] [bp-48Ch]@1
  int v53; // [sp+74h] [bp-488h]@1
  int v54; // [sp+78h] [bp-484h]@1
  int v55; // [sp+7Ch] [bp-480h]@1
  int v56; // [sp+80h] [bp-47Ch]@1
  int v57; // [sp+84h] [bp-478h]@1
  int v58; // [sp+88h] [bp-474h]@1
  int v59; // [sp+8Ch] [bp-470h]@1
  int v60; // [sp+90h] [bp-46Ch]@1
  int v61; // [sp+94h] [bp-468h]@1
  int v62; // [sp+98h] [bp-464h]@1
  int v63; // [sp+9Ch] [bp-460h]@1
  int v64; // [sp+A0h] [bp-45Ch]@1
  int v65; // [sp+A4h] [bp-458h]@1
  int v66; // [sp+A8h] [bp-454h]@1
  int v67; // [sp+ACh] [bp-450h]@1
  int v68; // [sp+B0h] [bp-44Ch]@1
  int v69; // [sp+B4h] [bp-448h]@1
  int v70; // [sp+B8h] [bp-444h]@1
  int v71; // [sp+BCh] [bp-440h]@1
  int v72; // [sp+C0h] [bp-43Ch]@1
  int v73; // [sp+C4h] [bp-438h]@1
  int v74; // [sp+C8h] [bp-434h]@1
  int v75; // [sp+CCh] [bp-430h]@1
  int v76; // [sp+D0h] [bp-42Ch]@1
  int v77; // [sp+D4h] [bp-428h]@1
  int v78; // [sp+D8h] [bp-424h]@1
  int v79; // [sp+DCh] [bp-420h]@1
  int v80; // [sp+E0h] [bp-41Ch]@1
  int v81; // [sp+E4h] [bp-418h]@1
  int v82; // [sp+E8h] [bp-414h]@1
  int v83; // [sp+ECh] [bp-410h]@1
  int v84; // [sp+F0h] [bp-40Ch]@1
  int v85; // [sp+F4h] [bp-408h]@1
  int v86; // [sp+F8h] [bp-404h]@1
  int v87; // [sp+FCh] [bp-400h]@1
  int v88; // [sp+100h] [bp-3FCh]@1
  int v89; // [sp+104h] [bp-3F8h]@1
  int v90; // [sp+108h] [bp-3F4h]@1
  int v91; // [sp+10Ch] [bp-3F0h]@1
  int v92; // [sp+110h] [bp-3ECh]@1
  int v93; // [sp+114h] [bp-3E8h]@1
  int v94; // [sp+118h] [bp-3E4h]@1
  int v95; // [sp+11Ch] [bp-3E0h]@1
  int v96; // [sp+120h] [bp-3DCh]@1
  int v97; // [sp+124h] [bp-3D8h]@1
  int v98; // [sp+128h] [bp-3D4h]@1
  int v99; // [sp+12Ch] [bp-3D0h]@1
  int v100; // [sp+130h] [bp-3CCh]@1
  int v101; // [sp+134h] [bp-3C8h]@1
  int v102; // [sp+138h] [bp-3C4h]@1
  int v103; // [sp+13Ch] [bp-3C0h]@1
  int v104; // [sp+140h] [bp-3BCh]@1
  int v105; // [sp+144h] [bp-3B8h]@1
  int v106; // [sp+148h] [bp-3B4h]@1
  int v107; // [sp+14Ch] [bp-3B0h]@1
  int v108; // [sp+150h] [bp-3ACh]@1
  int v109; // [sp+154h] [bp-3A8h]@1
  int v110; // [sp+158h] [bp-3A4h]@1
  int v111; // [sp+15Ch] [bp-3A0h]@1
  int v112; // [sp+160h] [bp-39Ch]@1
  int v113; // [sp+164h] [bp-398h]@1
  int v114; // [sp+168h] [bp-394h]@1
  int v115; // [sp+16Ch] [bp-390h]@1
  int v116; // [sp+170h] [bp-38Ch]@1
  int v117; // [sp+174h] [bp-388h]@1
  int v118; // [sp+178h] [bp-384h]@1
  int v119; // [sp+17Ch] [bp-380h]@1
  int v120; // [sp+180h] [bp-37Ch]@1
  int v121; // [sp+184h] [bp-378h]@1
  int v122; // [sp+188h] [bp-374h]@1
  int v123; // [sp+18Ch] [bp-370h]@1
  int v124; // [sp+190h] [bp-36Ch]@1
  int v125; // [sp+194h] [bp-368h]@1
  int v126; // [sp+198h] [bp-364h]@1
  int v127; // [sp+19Ch] [bp-360h]@1
  int v128; // [sp+1A0h] [bp-35Ch]@1
  int v129; // [sp+1A4h] [bp-358h]@1
  int v130; // [sp+1A8h] [bp-354h]@1
  int v131; // [sp+1ACh] [bp-350h]@1
  int v132; // [sp+1B0h] [bp-34Ch]@1
  int v133; // [sp+1B4h] [bp-348h]@1
  int v134; // [sp+1B8h] [bp-344h]@1
  int v135; // [sp+1BCh] [bp-340h]@1
  int v136; // [sp+1C0h] [bp-33Ch]@1
  int v137; // [sp+1C4h] [bp-338h]@1
  int v138; // [sp+1C8h] [bp-334h]@1
  int v139; // [sp+1CCh] [bp-330h]@1
  int v140; // [sp+1D0h] [bp-32Ch]@1
  int v141; // [sp+1D4h] [bp-328h]@1
  int v142; // [sp+1D8h] [bp-324h]@1
  int v143; // [sp+1DCh] [bp-320h]@1
  int v144; // [sp+1E0h] [bp-31Ch]@1
  int v145; // [sp+1E4h] [bp-318h]@1
  int v146; // [sp+1E8h] [bp-314h]@1
  int v147; // [sp+1ECh] [bp-310h]@1
  int v148; // [sp+1F0h] [bp-30Ch]@1
  int v149; // [sp+1F4h] [bp-308h]@1
  int v150; // [sp+1F8h] [bp-304h]@1
  int v151; // [sp+1FCh] [bp-300h]@1
  int v152; // [sp+200h] [bp-2FCh]@1
  int v153; // [sp+204h] [bp-2F8h]@1
  int v154; // [sp+208h] [bp-2F4h]@1
  int v155; // [sp+20Ch] [bp-2F0h]@1
  int v156; // [sp+210h] [bp-2ECh]@1
  int v157; // [sp+214h] [bp-2E8h]@1
  int v158; // [sp+218h] [bp-2E4h]@1
  int v159; // [sp+21Ch] [bp-2E0h]@1
  int v160; // [sp+220h] [bp-2DCh]@1
  int v161; // [sp+224h] [bp-2D8h]@1
  int v162; // [sp+228h] [bp-2D4h]@1
  int v163; // [sp+22Ch] [bp-2D0h]@1
  int v164; // [sp+230h] [bp-2CCh]@1
  int v165; // [sp+234h] [bp-2C8h]@1
  int v166; // [sp+238h] [bp-2C4h]@1
  int v167; // [sp+23Ch] [bp-2C0h]@1
  int v168; // [sp+240h] [bp-2BCh]@1
  int v169; // [sp+244h] [bp-2B8h]@1
  int v170; // [sp+248h] [bp-2B4h]@1
  int v171; // [sp+24Ch] [bp-2B0h]@1
  int v172; // [sp+250h] [bp-2ACh]@1
  int v173; // [sp+254h] [bp-2A8h]@1
  int v174; // [sp+258h] [bp-2A4h]@1
  int v175; // [sp+25Ch] [bp-2A0h]@1
  int v176; // [sp+260h] [bp-29Ch]@1
  int v177; // [sp+264h] [bp-298h]@1
  int v178; // [sp+268h] [bp-294h]@1
  int v179; // [sp+26Ch] [bp-290h]@1
  int v180; // [sp+270h] [bp-28Ch]@1
  int v181; // [sp+274h] [bp-288h]@1
  int v182; // [sp+278h] [bp-284h]@1
  int v183; // [sp+27Ch] [bp-280h]@1
  int v184; // [sp+280h] [bp-27Ch]@1
  int v185; // [sp+284h] [bp-278h]@1
  int v186; // [sp+288h] [bp-274h]@1
  int v187; // [sp+28Ch] [bp-270h]@1
  int v188; // [sp+290h] [bp-26Ch]@1
  int v189; // [sp+294h] [bp-268h]@1
  int v190; // [sp+298h] [bp-264h]@1
  int v191; // [sp+29Ch] [bp-260h]@1
  int v192; // [sp+2A0h] [bp-25Ch]@1
  int v193; // [sp+2A4h] [bp-258h]@1
  int v194; // [sp+2A8h] [bp-254h]@1
  int v195; // [sp+2ACh] [bp-250h]@1
  int v196; // [sp+2B0h] [bp-24Ch]@1
  int v197; // [sp+2B4h] [bp-248h]@1
  int v198; // [sp+2B8h] [bp-244h]@1
  int v199; // [sp+2BCh] [bp-240h]@1
  int v200; // [sp+2C0h] [bp-23Ch]@1
  int v201; // [sp+2C4h] [bp-238h]@1
  int v202; // [sp+2C8h] [bp-234h]@1
  int v203; // [sp+2CCh] [bp-230h]@1
  int v204; // [sp+2D0h] [bp-22Ch]@1
  int v205; // [sp+2D4h] [bp-228h]@1
  int v206; // [sp+2D8h] [bp-224h]@1
  int v207; // [sp+2DCh] [bp-220h]@1
  int v208; // [sp+2E0h] [bp-21Ch]@1
  int v209; // [sp+2E4h] [bp-218h]@1
  int v210; // [sp+2E8h] [bp-214h]@1
  int v211; // [sp+2ECh] [bp-210h]@1
  int v212; // [sp+2F0h] [bp-20Ch]@1
  int v213; // [sp+2F4h] [bp-208h]@1
  int v214; // [sp+2F8h] [bp-204h]@1
  int v215; // [sp+2FCh] [bp-200h]@1
  int v216; // [sp+300h] [bp-1FCh]@1
  int v217; // [sp+304h] [bp-1F8h]@1
  int v218; // [sp+308h] [bp-1F4h]@1
  int v219; // [sp+30Ch] [bp-1F0h]@1
  int v220; // [sp+310h] [bp-1ECh]@1
  int v221; // [sp+314h] [bp-1E8h]@1
  int v222; // [sp+318h] [bp-1E4h]@1
  int v223; // [sp+31Ch] [bp-1E0h]@1
  int v224; // [sp+320h] [bp-1DCh]@1
  int v225; // [sp+324h] [bp-1D8h]@1
  int v226; // [sp+328h] [bp-1D4h]@1
  int v227; // [sp+32Ch] [bp-1D0h]@1
  int v228; // [sp+330h] [bp-1CCh]@1
  int v229; // [sp+334h] [bp-1C8h]@1
  int v230; // [sp+338h] [bp-1C4h]@1
  int v231; // [sp+33Ch] [bp-1C0h]@1
  int v232; // [sp+340h] [bp-1BCh]@1
  int v233; // [sp+344h] [bp-1B8h]@1
  int v234; // [sp+348h] [bp-1B4h]@1
  int v235; // [sp+34Ch] [bp-1B0h]@1
  int v236; // [sp+350h] [bp-1ACh]@1
  int v237; // [sp+354h] [bp-1A8h]@1
  int v238; // [sp+358h] [bp-1A4h]@1
  int v239; // [sp+35Ch] [bp-1A0h]@1
  int v240; // [sp+360h] [bp-19Ch]@1
  int v241; // [sp+364h] [bp-198h]@1
  int v242; // [sp+368h] [bp-194h]@1
  int v243; // [sp+36Ch] [bp-190h]@1
  int v244; // [sp+370h] [bp-18Ch]@1
  int v245; // [sp+374h] [bp-188h]@1
  int v246; // [sp+378h] [bp-184h]@1
  int v247; // [sp+37Ch] [bp-180h]@1
  int v248; // [sp+380h] [bp-17Ch]@1
  int v249; // [sp+384h] [bp-178h]@1
  int v250; // [sp+388h] [bp-174h]@1
  int v251; // [sp+38Ch] [bp-170h]@1
  int v252; // [sp+390h] [bp-16Ch]@1
  int v253; // [sp+394h] [bp-168h]@1
  int v254; // [sp+398h] [bp-164h]@1
  int v255; // [sp+39Ch] [bp-160h]@1
  int v256; // [sp+3A0h] [bp-15Ch]@1
  int v257; // [sp+3A4h] [bp-158h]@1
  int v258; // [sp+3A8h] [bp-154h]@1
  int v259; // [sp+3ACh] [bp-150h]@1
  int v260; // [sp+3B0h] [bp-14Ch]@1
  int v261; // [sp+3B4h] [bp-148h]@1
  int v262; // [sp+3B8h] [bp-144h]@1
  int v263; // [sp+3BCh] [bp-140h]@1
  int v264; // [sp+3C0h] [bp-13Ch]@1
  int v265; // [sp+3C4h] [bp-138h]@1
  int v266; // [sp+3C8h] [bp-134h]@1
  int v267; // [sp+3CCh] [bp-130h]@1
  int v268; // [sp+3D0h] [bp-12Ch]@1
  int v269; // [sp+3D4h] [bp-128h]@1
  int v270; // [sp+3D8h] [bp-124h]@1
  int v271; // [sp+3DCh] [bp-120h]@1
  int v272; // [sp+3E0h] [bp-11Ch]@1
  int v273; // [sp+3E4h] [bp-118h]@1
  int v274; // [sp+3E8h] [bp-114h]@1
  int v275; // [sp+3ECh] [bp-110h]@1
  int v276; // [sp+3F0h] [bp-10Ch]@1
  int v277; // [sp+3F4h] [bp-108h]@1
  int v278; // [sp+3F8h] [bp-104h]@1
  int v279; // [sp+3FCh] [bp-100h]@1
  int v280; // [sp+400h] [bp-FCh]@1
  int v281; // [sp+404h] [bp-F8h]@1
  int v282; // [sp+408h] [bp-F4h]@1
  int v283; // [sp+40Ch] [bp-F0h]@1
  int v284; // [sp+410h] [bp-ECh]@1
  int v285; // [sp+414h] [bp-E8h]@1
  int v286; // [sp+418h] [bp-E4h]@1
  int v287; // [sp+41Ch] [bp-E0h]@1
  int v288; // [sp+420h] [bp-DCh]@1
  int v289; // [sp+424h] [bp-D8h]@1
  int v290; // [sp+428h] [bp-D4h]@1
  int v291; // [sp+42Ch] [bp-D0h]@1
  int v292; // [sp+430h] [bp-CCh]@1
  int v293; // [sp+434h] [bp-C8h]@1
  int v294; // [sp+438h] [bp-C4h]@1
  int v295; // [sp+43Ch] [bp-C0h]@1
  int v296; // [sp+440h] [bp-BCh]@1
  int v297; // [sp+444h] [bp-B8h]@1
  int v298; // [sp+448h] [bp-B4h]@1
  int v299; // [sp+44Ch] [bp-B0h]@1
  int v300; // [sp+450h] [bp-ACh]@1
  int v301; // [sp+454h] [bp-A8h]@1
  int v302; // [sp+458h] [bp-A4h]@1
  int v303; // [sp+45Ch] [bp-A0h]@1
  int v304; // [sp+460h] [bp-9Ch]@1
  int v305; // [sp+464h] [bp-98h]@1
  int v306; // [sp+468h] [bp-94h]@1
  int v307; // [sp+46Ch] [bp-90h]@1
  int v308; // [sp+470h] [bp-8Ch]@1
  int v309; // [sp+474h] [bp-88h]@1
  int v310; // [sp+478h] [bp-84h]@1
  int v311; // [sp+47Ch] [bp-80h]@1
  int v312; // [sp+480h] [bp-7Ch]@1
  int v313; // [sp+484h] [bp-78h]@1
  int v314; // [sp+488h] [bp-74h]@1
  int v315; // [sp+48Ch] [bp-70h]@1
  int v316; // [sp+490h] [bp-6Ch]@1
  int v317; // [sp+494h] [bp-68h]@1
  int v318; // [sp+498h] [bp-64h]@1
  int v319; // [sp+49Ch] [bp-60h]@1
  int v320; // [sp+4A0h] [bp-5Ch]@1
  int v321; // [sp+4A4h] [bp-58h]@1
  int v322; // [sp+4A8h] [bp-54h]@1
  int v323; // [sp+4ACh] [bp-50h]@1
  int v324; // [sp+4B0h] [bp-4Ch]@1
  int v325; // [sp+4B4h] [bp-48h]@1
  int v326; // [sp+4B8h] [bp-44h]@1
  int v327; // [sp+4BCh] [bp-40h]@1
  int v328; // [sp+4C0h] [bp-3Ch]@1
  int v329; // [sp+4C4h] [bp-38h]@1
  int v330; // [sp+4C8h] [bp-34h]@1
  int v331; // [sp+4CCh] [bp-30h]@1
  int v332; // [sp+4D0h] [bp-2Ch]@1
  int v333; // [sp+4D4h] [bp-28h]@1
  int v334; // [sp+4D8h] [bp-24h]@1
  int v335; // [sp+4DCh] [bp-20h]@1
  int v336; // [sp+4E0h] [bp-1Ch]@1
  int v337; // [sp+4E4h] [bp-18h]@1
  int v338; // [sp+4E8h] [bp-14h]@1
  int v339; // [sp+4ECh] [bp-10h]@1
  int v340; // [sp+4F0h] [bp-Ch]@1
  int v341; // [sp+4F4h] [bp-8h]@1
  int v342; // [sp+4F8h] [bp-4h]@1

  v103 = 1076048691;
  v104 = 1076258406;
  v105 = 1065353216;
  v106 = 1065353216;
  v107 = 1065353216;
  v108 = 1076677837;
  v109 = 1076887552;
  v110 = 1077097267;
  v111 = 1065353216;
  v112 = 1065353216;
  v113 = 1077516698;
  v114 = 1077936128;
  v115 = 1078355558;
  v116 = 1065353216;
  v117 = 1065353216;
  v118 = 1078984704;
  v119 = 1079613850;
  v120 = 1080242995;
  v121 = 1080872141;
  v122 = 1065353216;
  v123 = 1080872141;
  v124 = 1081291571;
  v125 = 1081711002;
  v126 = 1082130432;
  v127 = 1065353216;
  v128 = 1082235290;
  v129 = 1082340147;
  v130 = 1082549862;
  v131 = 1082654720;
  v132 = 1082759578;
  v133 = 1076468122;
  v134 = 1076677837;
  v135 = 1065353216;
  v136 = 1065353216;
  v137 = 1065353216;
  v138 = 1076887552;
  v139 = 1077097267;
  v140 = 1077306982;
  v141 = 1065353216;
  v142 = 1065353216;
  v143 = 1077726413;
  v144 = 1078145843;
  v145 = 1078565274;
  v146 = 1065353216;
  v147 = 1065353216;
  v148 = 1079613850;
  v149 = 1080033280;
  v150 = 1080452710;
  v151 = 1080872141;
  v152 = 1065353216;
  v153 = 1080872141;
  v154 = 1081291571;
  v155 = 1081711002;
  v156 = 1082130432;
  v157 = 1065353216;
  v158 = 1082340147;
  v159 = 1082549862;
  v160 = 1082759578;
  v161 = 1082864435;
  v162 = 1082969293;
  v163 = 1077097267;
  v164 = 1077306982;
  v165 = 1065353216;
  v166 = 1065353216;
  v167 = 1065353216;
  v168 = 1077726413;
  v169 = 1077936128;
  v170 = 1078145843;
  v171 = 1065353216;
  v172 = 1065353216;
  v173 = 1078565274;
  v174 = 1078984704;
  v175 = 1079404134;
  v176 = 1065353216;
  v177 = 1065353216;
  v178 = 1080242995;
  v179 = 1080662426;
  v180 = 1081081856;
  v181 = 1081291571;
  v182 = 1065353216;
  v183 = 1081291571;
  v184 = 1081711002;
  v185 = 1082130432;
  v186 = 1082340147;
  v187 = 1065353216;
  v188 = 1082549862;
  v189 = 1082759578;
  v190 = 1082969293;
  v191 = 1083179008;
  v192 = 1083388723;
  v193 = 1075838976;
  v194 = 1076048691;
  v195 = 1065353216;
  v196 = 1065353216;
  v197 = 1065353216;
  v198 = 1076468122;
  v199 = 1076677837;
  v200 = 1076887552;
  v201 = 1065353216;
  v202 = 1065353216;
  v203 = 1077097267;
  v204 = 1077306982;
  v205 = 1077516698;
  v206 = 1065353216;
  v207 = 1065353216;
  v208 = 1078355558;
  v209 = 1078774989;
  v210 = 1079194419;
  v211 = 1079613850;
  v212 = 1065353216;
  v213 = 1080033280;
  v214 = 1080242995;
  v215 = 1080452710;
  v216 = 1080872141;
  v217 = 1065353216;
  v218 = 1081291571;
  v219 = 1081711002;
  v220 = 1082130432;
  v221 = 1082340147;
  v222 = 1082549862;
  v223 = 1056964608;
  v224 = 1050253722;
  v225 = 1036831949;
  v226 = 1065353216;
  v227 = 1065353216;
  v228 = 1056964608;
  v229 = 1050253722;
  v230 = 1036831949;
  v231 = 1065353216;
  v232 = 1065353216;
  v233 = 1061997773;
  v234 = 1058642330;
  v235 = 1053609165;
  v236 = 1045220557;
  v237 = 1065353216;
  v238 = 1061997773;
  v239 = 1058642330;
  v240 = 1053609165;
  v241 = 1045220557;
  v242 = 1065353216;
  v243 = 1061997773;
  v244 = 1058642330;
  v245 = 1053609165;
  v246 = 1045220557;
  v247 = 0;
  v248 = 1061997773;
  v249 = 1058642330;
  v250 = 1053609165;
  v251 = 1045220557;
  v252 = 0;
  v253 = 1056964608;
  v254 = 1050253722;
  v255 = 1036831949;
  v256 = 1065353216;
  v257 = 1065353216;
  v258 = 1056964608;
  v259 = 1050253722;
  v260 = 1036831949;
  v261 = 1065353216;
  v262 = 1065353216;
  v263 = 1061997773;
  v264 = 1058642330;
  v265 = 1053609165;
  v266 = 1045220557;
  v267 = 1065353216;
  v268 = 1061997773;
  v269 = 1058642330;
  v270 = 1053609165;
  v271 = 1045220557;
  v272 = 1065353216;
  v273 = 1061997773;
  v274 = 1058642330;
  v275 = 1053609165;
  v276 = 1045220557;
  v277 = 0;
  v278 = 1061997773;
  v279 = 1058642330;
  v280 = 1053609165;
  v281 = 1045220557;
  v282 = 0;
  v283 = 1056964608;
  v284 = 1050253722;
  v285 = 1036831949;
  v286 = 1065353216;
  v287 = 1065353216;
  v288 = 1056964608;
  v289 = 1050253722;
  v290 = 1036831949;
  v291 = 1065353216;
  v292 = 1065353216;
  v293 = 1061997773;
  v294 = 1058642330;
  v295 = 1053609165;
  v296 = 1045220557;
  v297 = 1065353216;
  v298 = 1061997773;
  v299 = 1058642330;
  v300 = 1053609165;
  v301 = 1045220557;
  v302 = 1065353216;
  v303 = 1061997773;
  v304 = 1058642330;
  v305 = 1053609165;
  v306 = 1045220557;
  v307 = 0;
  v308 = 1061997773;
  v309 = 1058642330;
  v310 = 1053609165;
  v311 = 1045220557;
  v312 = 0;
  v313 = 1056964608;
  v314 = 1050253722;
  v315 = 1036831949;
  v316 = 1065353216;
  v317 = 1065353216;
  v318 = 1057803469;
  v319 = 1050253722;
  v320 = 1036831949;
  v321 = 1065353216;
  v322 = 1065353216;
  v323 = 1058642330;
  v324 = 1056964608;
  v325 = 1051931443;
  v326 = 1045220557;
  v327 = 1065353216;
  v328 = 1059481190;
  v329 = 1057803469;
  v330 = 1053609165;
  v331 = 1045220557;
  v332 = 1065353216;
  v333 = 1061158912;
  v334 = 1058642330;
  v335 = 1053609165;
  v336 = 1045220557;
  v337 = 0;
  v338 = 1061158912;
  v339 = 1058642330;
  v340 = 1053609165;
  v341 = 1045220557;
  v342 = 0;
  v60 = 350;
  v66 = 350;
  v72 = 350;
  v57 = 140;
  v63 = 140;
  v77 = 360;
  v35 = 360;
  v58 = 230;
  v59 = 300;
  v64 = 230;
  v65 = 300;
  v67 = 150;
  v70 = 230;
  v71 = 300;
  v73 = 150;
  v38 = 460;
  v42 = 460;
  v79 = 1072064102;
  v80 = 1071225242;
  v81 = 1070386381;
  v82 = 1069966950;
  v83 = 1069128090;
  v84 = 1068708659;
  v85 = 1072064102;
  v86 = 1071225242;
  v87 = 1070386381;
  v88 = 1069966950;
  v89 = 1069128090;
  v90 = 1068708659;
  v91 = 1070386381;
  v92 = 1069547520;
  v93 = 1068708659;
  v94 = 1067869798;
  v95 = 1067450368;
  v96 = 1067030938;
  v97 = 1071644672;
  v98 = 1070805811;
  v99 = 1069966950;
  v100 = 1069547520;
  v101 = 1068708659;
  v102 = 1068289229;
  v55 = 120;
  v56 = 130;
  v61 = 130;
  v62 = 135;
  v68 = 155;
  v69 = 160;
  v74 = 190;
  v75 = 240;
  v76 = 290;
  v78 = 400;
  v36 = 370;
  v37 = 430;
  v39 = 510;
  v40 = 440;
  v41 = 450;
  v43 = 470;
  v44 = 520;
  v45 = 510;
  v46 = 520;
  v47 = 530;
  v48 = 580;
  v49 = 600;
  v50 = 240;
  v51 = 280;
  v52 = 330;
  v53 = 380;
  v54 = 440;
  v29 = 1090833613;
  dword_456AA8 = dword_4A7AA8;
  v30 = 1092301619;
  v31 = 1091567616;
  v32 = 1093140480;
  v33 = 1091043328;
  v34 = 1091777331;
  dword_4A6AE0[0] = 1045220557;
  dword_4A6AE4 = 1051931443;
  dword_4A6AE8 = 1056964608;
  dword_4A6AEC = 1059481190;
  dword_4A6AF0 = 1061997773;
  dword_4A6AF4 = 1064514355;
  dword_4A6AF8 = 1064514355;
  v28 = 0;
  if ( dword_508D24 > 0 )
  {
    v0 = (int)dword_4A689C;
    v1 = &dword_4A7AA4;
    do
    {
      v2 = *v1;
      v3 = *(v1 - 5);
      v4 = *(v1 - 12);
      v5 = 3 * *v1;
      *(_DWORD *)(v0 - 28) = v3;
      v6 = v3 + 2 * v5;
      v7 = v4;
      v8 = *((float *)&v103 + 5 * v6 + v4);
      v9 = *(v1 - 11);
      *(float *)(v0 - 24) = v8;
      v10 = 5 * v6 + v9;
      *(float *)(v0 - 20) = v8;
      v11 = *((float *)&v79 + v6);
      v12 = *(&v55 + v6);
      *(_DWORD *)(v0 - 16) = *(&v223 + v10);
      v13 = v12 + *(&v35 + 5 * v2 + *(v1 - 10));
      v14 = v28 == dword_4A9EA8;
      *(_DWORD *)v0 = v13;
      *(float *)(v0 - 8) = 3.75 / (v11 - (double)v7 * 0.05);
      if ( v14 )
        *(_DWORD *)v0 = v13 + 100;
      if ( !memcmp(v1 - 17, &dword_441250, 0xBu) )
        *(_DWORD *)v0 = (unsigned __int64)((double)*(signed int *)v0 * 2.2);
      if ( *(_DWORD *)v0 > 900 )
        *(_DWORD *)v0 = 900;
      v15 = *(v1 - 5);
      v16 = *(v1 - 13);
      *(_DWORD *)(v0 - 12) = *(&v29 + v15);
      *(_DWORD *)(v0 - 4) = (100 - v16) << 10;
      *(_DWORD *)(v0 + 4) = *(v1 - 9);
      *(_DWORD *)(v0 + 8) = *(v1 - 8);
      *(_DWORD *)(v0 + 12) = *(v1 - 7);
      *(_DWORD *)(v0 + 16) = *(v1 - 6);
      *(_DWORD *)(v0 + 20) = 102400;
      *(_DWORD *)(v0 + 24) = 102400;
      *(_DWORD *)(v0 + 52) = 0;
      *(_DWORD *)(v0 + 60) = 0;
      *(_DWORD *)(v0 + 68) = 0;
      if ( !v15 )
      {
        *(_DWORD *)(v0 + 64) = 1;
        *(_DWORD *)(v0 + 72) = 22;
        *(_DWORD *)(v0 + 88) = 8;
        *(_DWORD *)(v0 + 104) = 0;
      }
      if ( v15 == 1 )
      {
        *(_DWORD *)(v0 + 64) = 1;
        *(_DWORD *)(v0 + 72) = -18;
        *(_DWORD *)(v0 + 88) = 17;
        *(_DWORD *)(v0 + 104) = 1;
      }
      if ( v15 == 2 )
      {
        *(_DWORD *)(v0 + 64) = 1;
        *(_DWORD *)(v0 + 72) = -40;
        *(_DWORD *)(v0 + 88) = 7;
        *(_DWORD *)(v0 + 104) = 2;
      }
      if ( v15 == 3 )
      {
        *(_DWORD *)(v0 + 64) = 2;
        *(_DWORD *)(v0 + 72) = 16;
        *(_DWORD *)(v0 + 88) = 20;
        *(_DWORD *)(v0 + 104) = 3;
        *(_DWORD *)(v0 + 76) = -17;
        *(_DWORD *)(v0 + 92) = 20;
        *(_DWORD *)(v0 + 108) = 3;
      }
      if ( v15 == 4 )
      {
        *(_DWORD *)(v0 + 64) = 2;
        *(_DWORD *)(v0 + 72) = 16;
        *(_DWORD *)(v0 + 88) = 19;
        *(_DWORD *)(v0 + 104) = 4;
        *(_DWORD *)(v0 + 76) = -17;
        *(_DWORD *)(v0 + 92) = 19;
        *(_DWORD *)(v0 + 108) = 4;
      }
      if ( v15 == 5 )
      {
        *(_DWORD *)(v0 + 64) = 2;
        *(_DWORD *)(v0 + 72) = 16;
        *(_DWORD *)(v0 + 88) = 20;
        *(_DWORD *)(v0 + 104) = 5;
        *(_DWORD *)(v0 + 76) = -17;
        *(_DWORD *)(v0 + 92) = 20;
        *(_DWORD *)(v0 + 108) = 5;
      }
      v1 += 21;
      v0 += 148;
      ++v28;
    }
    while ( v28 < dword_508D24 );
  }
  if ( dword_4A6880[0] == 6 && !isMultiplayerGame )
  {
    if ( dword_4A68AC[37 * dword_4A9EA8] )
    {
      if ( dword_4A7AA4 )
      {
        if ( dword_4A7AA4 == 1 )
        {
          dword_4A6884[0] = 1083388723;
        }
        else if ( dword_4A7AA4 == 2 )
        {
          dword_4A6884[0] = 1083598438;
        }
        goto LABEL_36;
      }
      goto LABEL_35;
    }
    if ( dword_4A7AA4 )
    {
      if ( dword_4A7AA4 == 1 )
      {
        dword_4A6884[0] = 1082969293;
      }
      else if ( dword_4A7AA4 == 2 )
      {
LABEL_35:
        dword_4A6884[0] = 1083179008;
        goto LABEL_36;
      }
    }
    else
    {
      dword_4A6884[0] = 1082759578;
    }
LABEL_36:
    dword_4A6888 = dword_4A6884[0];
    v17 = *((float *)&v80 + 6 * dword_4A7AF8);
    v18 = *(&v39 + 5 * dword_4A7AF8);
    dword_4A6898[0] = (100 - dword_4A7A70[0]) << 10;
    v19 = *(&v60 + 6 * dword_4A7AF8) + v18;
    dword_4A688C[0] = 0;
    dword_4A689C[0] = v19;
    flt_4A6894[0] = 3.75 / (v17 - (double)dword_4A7AC8 * 0.05);
    if ( v19 > 900 )
      dword_4A689C[0] = 900;
    dword_4A68A0[0] = dword_4A7A80;
    dword_4A68A4[0] = dword_4A7A84;
    dword_4A68A8[0] = dword_4A7A88;
    dword_4A68AC[0] = dword_4A7A8C;
    dword_4A68B0[0] = 102400;
    dword_4A68B4[0] = 102400;
    dword_4A6890[0] = 1093140480;
    dword_4A68D0[0] = 0;
    dword_4A68DC[0] = 2;
    dword_4A68E4[0] = 30;
    dword_4A68F4[0] = 19;
    dword_4A6904[0] = 4;
    dword_4A68E8 = -30;
    dword_4A68F8 = 19;
    dword_4A6908 = 4;
  }
  dword_4A68B8 = dword_4A7A94;
  dword_4A68BC = dword_4A7A98[0];
  dword_4A68C0 = dword_4A7A9C;
  dword_4A694C = dword_4A7AE8;
  dword_4A6950 = dword_4A7AEC;
  dword_4A6954 = dword_4A7AF0;
  dword_4A69E0 = dword_4A7B3C;
  dword_4A69E4 = dword_4A7B40;
  dword_4A69E8 = dword_4A7B44;
  dword_4A6A74 = dword_4A7B90;
  dword_4A6A78 = dword_4A7B94;
  dword_4A6A7C = dword_4A7B98;
  v20 = 0;
  do
  {
    v21 = dword_4A7A60[v20];
    byte_4A68C4[v20++] = v21;
  }
  while ( v21 );
  v22 = 0;
  do
  {
    v23 = byte_4A7AB4[v22];
    byte_4A6958[v22++] = v23;
  }
  while ( v23 );
  v24 = 0;
  do
  {
    v25 = byte_4A7B08[v24];
    byte_4A69EC[v24++] = v25;
  }
  while ( v25 );
  result = 0;
  do
  {
    v27 = byte_4A7B5C[result];
    byte_4A6A80[result++] = v27;
  }
  while ( v27 );
  return result;
}

//----- (00402240) --------------------------------------------------------
int sub_402240()
{
  int v0; // edi@1
  signed int v1; // esi@1
  unsigned __int64 v2; // rax@2
  int v3; // ecx@2
  int result; // eax@2

  v0 = (int)dword_4A7AA0;
  v1 = (signed int)&unk_4A68D4;
  do
  {
    v2 = (unsigned __int64)(100.0 - ceil((double)*(signed int *)(v1 - 60) * 0.0009765625));
    v3 = *(_DWORD *)(v1 - 4);
    *(_DWORD *)(v0 - 48) = v2;
    result = *(_DWORD *)v1;
    *(_DWORD *)v0 = *(_DWORD *)v1;
    *(_DWORD *)(v0 - 52) = v3;
    v1 += 148;
    v0 += 84;
  }
  while ( v1 < (signed int)&unk_4A6B24 );
  return result;
}
// 4A7AA0: using guessed type int dword_4A7AA0[];

//----- (004022A0) --------------------------------------------------------
int sub_4022A0()
{
  int v0; // esi@1
  signed int v1; // ebx@1
  long double v2; // st7@2
  long double v3; // st6@2
  long double v4; // st7@2
  long double v5; // st6@2
  unsigned __int64 v6; // rax@3
  unsigned __int64 v7; // rax@6
  signed int v8; // eax@9
  int v9; // edx@11
  int v10; // eax@11
  int v11; // esi@13
  int v12; // eax@13
  int v13; // ecx@15
  int v14; // edx@15
  int v15; // eax@15
  int v16; // eax@15
  int result; // eax@15
  signed int v18; // [sp+10h] [bp-10h]@1
  double v19; // [sp+18h] [bp-8h]@2

  v18 = 11;
  v0 = 0;
  v1 = 162;
  do
  {
    v2 = (double)v18 * 0.01745329251994444;
    v3 = cos(v2);
    v19 = v3;
    v4 = sin(v2);
    v5 = v3 * -26.0 - v4;
    if ( v5 - (double)(signed int)(unsigned __int64)v5 < 0.5 )
      LODWORD(v6) = (unsigned __int64)v5;
    else
      v6 = (unsigned __int64)(1.0 - (v19 * 26.0 + v4));
    dword_503240[v0] = v6 + 30;
    if ( -25.0 * v4 - (double)(signed int)(unsigned __int64)(-25.0 * v4) < 0.5 )
      LODWORD(v7) = (unsigned __int64)(-25.0 * v4);
    else
      v7 = (unsigned __int64)(1.0 - v4 * 25.0);
    dword_4B3160[v0] = v7 + 27;
    ++v0;
    --v1;
    ++v18;
  }
  while ( v1 );
  v8 = 0;
  dword_508D44[0] = dword_4A9EA8;
  if ( !dword_4A9EA8 )
    v8 = 1;
  v9 = v8;
  v10 = v8 + 1;
  dword_508D48 = v9;
  if ( v10 == dword_4A9EA8 )
    ++v10;
  v11 = v10;
  v12 = v10 + 1;
  dword_508D4C = v11;
  if ( v12 == dword_4A9EA8 )
    ++v12;
  dword_508D50 = v12;
  v13 = (unsigned __int8)byte_4A7E09[864 * dword_4A9EA8];
  v14 = (unsigned __int8)byte_4A7E09[864 * v9];
  v15 = (unsigned __int8)byte_4A7E09[864 * v12];
  dword_46E8D8 = (unsigned __int8)byte_4A7E09[864 * v11];
  dword_46E8D0[0] = v13;
  dword_46E8D4 = v14;
  dword_46E8DC = v15;
  v16 = 7 * v15 - 7;
  dword_4AA3F8 = 7 * dword_46E8D8 - 7;
  dword_4AA3F0[0] = 7 * v13 - 7;
  dword_4AA3F4 = 7 * v14 - 7;
  dword_4AA3FC = v16;
  dword_4A7CCC = 0;
  dword_4A7CC8 = 0;
  dword_4A7CC4 = 0;
  dword_4A7CC0[0] = 0;
  dword_4A9EA4 = 0;
  dword_4A8A98 = dword_4AA3F8 << 16;
  dword_4A8A9C = v16 << 16;
  result = dword_503500;
  dword_4A8A90[0] = dword_4AA3F0[0] << 16;
  dword_4A8A94 = dword_4AA3F4 << 16;
  dword_4A7CFC = dword_503500;
  return result;
}

//----- (00402490) --------------------------------------------------------
unsigned int sub_402490()
{
  int v0; // eax@1
  unsigned int result; // eax@1

  dword_4B3140 = dword_4B3140 - dword_4A9EA4 <= 0 ? 0 : dword_4B3140 - dword_4A9EA4;
  sub_43B160(
    (int)((char *)genflaBpk + 4800 * ((dword_481BE0 + 0x8000) >> 16)),
    80,
    60,
    dword_464F14 + dword_4B3140 + 336);
  v0 = dword_4AA500 + dword_481BE0;
  dword_481BE0 = v0;
  result = (v0 + 0x8000) & 0xFFFF0000;
  if ( (signed int)result > 4128768 )
    dword_481BE0 = 0;
  return result;
}
// 464F14: using guessed type int dword_464F14;
// 481BE0: using guessed type int dword_481BE0;
// 4A9EA4: using guessed type int dword_4A9EA4;
// 4AA500: using guessed type int dword_4AA500;
// 4B3140: using guessed type int dword_4B3140;

//----- (00402510) --------------------------------------------------------
unsigned int __cdecl sub_402510(int a1, const char *a2)
{
  unsigned int v2; // esi@1
  unsigned int result; // eax@1
  int v4; // edi@2

  v2 = 0;
  result = strlen(a2);
  if ( result )
  {
    v4 = 0;
    do
    {
      sub_43B240(36 * (a2[v2++] - 32) + 4886880, 6, 6, a1 + v4 + dword_464F14);
      v4 += 6;
      result = strlen(a2);
    }
    while ( v2 < result );
  }
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (00402590) --------------------------------------------------------
int __cdecl sub_402590(int a1, int a2, int a3, signed int a4, int a5, int a6, int a7, int a8)
{
  signed int v8; // eax@1
  int v9; // ebx@1
  int v10; // esi@4
  int v11; // esi@6
  int v12; // esi@12
  int v13; // esi@12
  int v14; // esi@15
  int v15; // esi@15
  int v16; // esi@15
  int v18; // [sp+20h] [bp+10h]@15
  int v19; // [sp+28h] [bp+18h]@12

  v8 = a4;
  v9 = a3 * a2;
  if ( a4 >= 0 )
  {
    if ( a4 >= 10 )
    {
      v11 = a6;
      goto LABEL_8;
    }
  }
  else
  {
    a4 = 0;
    v8 = 0;
  }
  v10 = a6;
  if ( a7 > 0 )
  {
    sub_43B240(a1 + a5 * v9, a2, a3, a6 - a7 + dword_464F14);
    v8 = a4;
    v10 = a2 + a6 - a7;
  }
  sub_43B240(a1 + v9 * (a5 + v8), a2, a3, v10 + dword_464F14);
  v8 = a4;
  v11 = a2 + v10;
LABEL_8:
  if ( v8 > 9 && v8 < 100 )
  {
    if ( a7 > 0 )
      v11 += -2 * a7;
    v12 = a7 + v11;
    v19 = v8 % 10;
    sub_43B240(a1 + v9 * (a5 + v8 / 10), a2, a3, v12 + dword_464F14);
    v13 = a2 + v12;
    sub_43B240(a1 + v9 * (a5 + v19), a2, a3, v13 + dword_464F14);
    v8 = a4;
    v11 = a2 + v13;
  }
  if ( v8 > 99 && v8 < 1000 )
  {
    v14 = a8 + v11;
    v18 = v8 % 100;
    sub_43B240(a1 + v9 * (a5 + v8 / 100), a2, a3, v14 + dword_464F14);
    v15 = a2 + v14;
    sub_43B240(a1 + v9 * (a5 + v18 / 10), a2, a3, v15 + dword_464F14);
    v16 = a2 + v15;
    sub_43B240(a1 + v9 * (a5 + v18 % 10), a2, a3, v16 + dword_464F14);
    v11 = a2 + v16;
  }
  return v11;
}
// 464F14: using guessed type int dword_464F14;



//----- (00402780) --------------------------------------------------------
void __cdecl  errorExitScreen(int a1)
{
  setWindowCaption();
  printf("DEATH RALLY Error: %s\n", a1);
  printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
  nullsub_1();
  exit(112);
}

//----- (004027B0) --------------------------------------------------------
int __cdecl extractFromBpa(char *bpaFilename, void *dest, char * filename)
{
  int v3; // ebx@1
  FILE *bpafile; // esi@1
  char *v5; // eax@1
  unsigned int v6; // ecx@1
  char v7; // dl@2
  int fileOrder; // ebp@5
  int fatPointer; // edi@6
  int fileDataPointer = 0;
  int fileSize = 0;
  unsigned int v10; // eax@11
  char *v11; // edi@11
  char v12; // cl@12
  char *v13; // edi@13
  char v14; // al@14
  unsigned int v15; // eax@15
  char *v16; // edi@15
  char v17; // cl@16
  char *v18; // edi@17
  char v19; // al@18
  FILE *v20; // esi@20
  __int32 v21; // eax@20
  int *v22; // ecx@21
  int v23; // edx@21
  char buffer[4]; // [sp+10h] [bp-68h]@1
  int v26; // [sp+14h] [bp-64h]@3
  char Str[16]; // [sp+18h] [bp-60h]@1
  int v28; // [sp+28h] [bp-50h]@11
  int v29; // [sp+2Ch] [bp-4Ch]@11
  int v30; // [sp+30h] [bp-48h]@11
  int v31; // [sp+34h] [bp-44h]@11
  char fat[0x10EF];//cabecera del fichero
  

  v3 = filename;
  strcpy(Str, filename);
  bpafile = fopen(bpaFilename, "rb");
  fread(buffer, 4, 1, bpafile);
  fread(fat, 0x10EF, 1, bpafile);
  fclose(bpafile);
  strupr(Str);
  v5 = Str;
  v6 = 0;
  do
    v7 = *v5++;
  while ( v7 );
  v26 = v5 - &Str[1];
  if ( v5 != &Str[1] )
  {
    do
    {
      Str[v6] += 3 * (39 - v6);
      ++v6;
    }
    while ( v6 < strlen(Str) );
  }
  fileOrder = 0;
  if (buffer <= 0 )
  {
LABEL_11:
    v28 = 1651470928;
    v31 = 5972072;
    v30 = 1953068832;
    v29 = 1936549228;
    v10 = strlen(bpaFilename) + 1;
    v11 = &Str[15];
    do
      v12 = (v11++)[1];
    while ( v12 );
    memcpy(v11, bpaFilename, v10);
    v13 = &Str[15];
    do
      v14 = (v13++)[1];
    while ( v14 );
    *(_WORD *)v13 = 8285;
    v13[2] = 0;
    v15 = strlen((const char *)v3) + 1;
    v16 = &Str[15];
    do
      v17 = (v16++)[1];
    while ( v17 );
    memcpy(v16, (const void *)v3, v15);
    v18 = &Str[15];
    do
      v19 = (v18++)[1];
    while ( v19 );
    *(_DWORD *)v18 = 1818846752;
    *((_WORD *)v18 + 2) = 8549;
    v18[6] = 0;
    errorExitScreen((int)&v28);
  }
  fatPointer = 0;
  while ( strcmp((char *)&fat+fatPointer, Str) || fileOrder == -1 )
  {
    ++fileOrder;
	fatPointer += 17; //cada entrada son 17
    if (fileOrder >= buffer)
    {
      v3 = filename;
      goto LABEL_11;
    }
  }
  v20 = fopen(bpaFilename, "rb");
  fseek(v20, 4339, 0);
  v21 = 0;
  fileDataPointer = 0;
  if (fileOrder > 0)
  {
	  //v19 = &dword_463E2D; -> apunta a la primera posicion de tamao de la cabecera deberia ser 18
	  fileDataPointer = 4339;
	  v21 += 17;
	  v23 = fileOrder;
	  do
	  {  
		  
		  
		  fseek(v20, v21, 0);
		  fread(&fileSize, 4u, 1u, v20);
		  fileDataPointer += fileSize;
		  
		  v21 += 17;
		  --v23;
	  } while (v23);
	  fseek(v20, v21, 0);
	  fread(&fileSize, 4u, 1u, v20);
  }
  

 
  char *destStream = malloc(fileSize * sizeof(char));
  fseek(v20, fileDataPointer, SEEK_SET);
  
  fread(dest, fileSize, 1u, v20);
 // dest = destStream;
  
  
	return fclose(v20);
}
// 508D6D: using guessed type int dword_508D6D;
// 4027B0: using guessed type char Str[16];

//----- (00402CF0) --------------------------------------------------------
signed int sub_402CF0()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  void *v4; // ST1C_4@5
  signed int v5; // eax@5
  char v6; // dl@6
  char v7; // cl@6
  signed int result; // eax@7
  int v9; // eax@8
  char v10; // cl@9
  char *v11; // edi@10
  char v12; // al@11
  int v13; // eax@12
  char v14; // cl@13
  char *v15; // edi@14
  char v16; // al@15
  FILE *v17; // eax@16
  FILE *v18; // esi@16
  char v19; // dl@19
  char v20; // cl@19
  char v21; // [sp-1h] [bp-311h]@3
  char Filename[16]; // [sp+0h] [bp-310h]@2
  char DstBuf; // [sp+10h] [bp-300h]@5
  char v24; // [sp+11h] [bp-2FFh]@6
  char v25[766]; // [sp+12h] [bp-2FEh]@6

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);//poner aqui racePositions[][]	
    Filename[v0++] = v1;
  }
  while ( v1 );
  v2 = &v21;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1095584045;
  *((_DWORD *)v2 + 1) = 1263551022;
  v4 = dword_50A16C;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, v4, (int)Filename);
  decryptTexture((int)dword_50A16C, (int)&DstBuf, 10, 768);
  v5 = 0;
  dword_481BE8 = 256;
  do
  {
    v6 = *(&v24 + v5);
    byte_4A9BA0[v5] = *(&DstBuf + v5);
    v7 = v25[v5];
    byte_4A9BA1[v5] = v6;
    byte_4A9BA2[v5] = v7;
    v5 += 3;
  }
  while ( v5 < 768 );
  decryptTexture((int)dword_50A16C, (int)dword_5034F8, 778, dword_464F40 * dword_4A7CF8);
  result = dword_456AA8;
  if ( dword_456AA8 )
  {
    v9 = 0;
    do
    {
      v10 = *((byte *)dword_45EA50 + v9);
      Filename[v9++] = v10;
    }
    while ( v10 );
    v11 = &v21;
    do
      v12 = (v11++)[1];
    while ( v12 );
    *(_DWORD *)v11 = 1229735469;
    *((_DWORD *)v11 + 1) = 1095773776;
    *((_WORD *)v11 + 4) = 76;
    extractFromBpa(&byte_464F50, &DstBuf, (int)Filename);
    v13 = 0;
    do
    {
      v14 = *((byte *)dword_45EA50 + v13);
      Filename[v13++] = v14;
    }
    while ( v14 );
    v15 = &v21;
    do
      v16 = (v15++)[1];
    while ( v16 );
    *(_DWORD *)v15 = 1229735469;
    *((_DWORD *)v15 + 1) = 1129524816;
    *((_WORD *)v15 + 4) = 88;
    v17 = fopen(Filename, "rb");
    v18 = v17;
    if ( v17 )
    {
      fseek(v17, 10, 0);
      fread(&DstBuf, 1u, 0x300u, v18);
      fclose(v18);
    }
    result = 0;
    dword_481BE8 = 256;
    do
    {
      v19 = *(&v24 + result);
      byte_4A9BA0[result] = *(&DstBuf + result);
      v20 = v25[result];
      byte_4A9BA1[result] = v19;
      byte_4A9BA2[result] = v20;
      result += 3;
    }
    while ( result < 768 );
  }
  return result;
}
// 456AA8: using guessed type int dword_456AA8;
// 45EA50: using guessed type int dword_45EA50[];
// 464F40: using guessed type int dword_464F40;
// 481BE8: using guessed type int dword_481BE8;
// 4A7CF8: using guessed type int dword_4A7CF8;
// 402CF0: using guessed type char Filename[16];
// 402CF0: using guessed type char var_2FE[766];

//----- (00402EE0) --------------------------------------------------------
void sub_402EE0()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  int v4; // eax@5
  char v5; // cl@6
  char *v6; // edi@7
  char v7; // al@8
  int v8; // eax@9
  char v9; // cl@10
  char *v10; // edi@11
  char v11; // al@12
  char v12; // [sp-1h] [bp-11h]@3
  byte v13[16]; // [sp+0h] [bp-10h]@2

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    v13[v0++] = v1;
  }
  while ( v1 );
  v2 = &v12;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1396788525;
  *((_DWORD *)v2 + 1) = 1263551022;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)v13);
  decryptTexture((int)textureTemp, (int)dword_50A16C, 778, dword_464F40 * dword_4A7CF8);
  v4 = 0;
  do
  {
    v5 = *((byte *)dword_45EA50 + v4);
    v13[v4++] = v5;
  }
  while ( v5 );
  v6 = &v12;
  do
    v7 = (v6++)[1];
  while ( v7 );
  *(_DWORD *)v6 = 1229018669;
  *((_DWORD *)v6 + 1) = 1263551022;
  v6[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)v13);
  decryptTexture((int)textureTemp, (int)dword_5034D0, 778, dword_4A6858 * dword_503508);
  v8 = 0;
  do
  {
    v9 = *((byte *)dword_45EA50 + v8);
    v13[v8++] = v9;
  }
  while ( v9 );
  v10 = &v12;
  do
    v11 = (v10++)[1];
  while ( v11 );
  *(_DWORD *)v10 = 827477037;
  *((_DWORD *)v10 + 1) = 1263551022;
  v10[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)v13);
  decryptTexture((int)textureTemp, (int)dword_4AA920, 778, dword_4A9B90 * dword_467000);
}


//----- (00403050) --------------------------------------------------------
int sub_403050()
{
  int result; // eax@1
  int v1; // ebx@1
  int v2; // ebp@2
  signed int v3; // esi@3
  char *v4; // eax@3
  char *v5; // edx@3
  char v6; // cl@4
  char *v7; // edi@7
  char v8; // al@8
  char *v9; // edi@10
  char v10; // al@11
  int v11; // ecx@13
  void *v12; // esi@14
  unsigned __int8 v13; // al@15
  int *v14; // [sp+4h] [bp-18h]@2
  signed int *v15; // [sp+8h] [bp-14h]@2
  int v16; // [sp+Ch] [bp-10h]@3

  result = dword_508D24;
  v1 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = 0;
    v15 = dword_4A6880;
    v14 = &dword_4A7A84;
    do
    {
      v3 = *v15;
      v4 = &aKupla[14 * *v15];
      v5 = (char *)((char *)&v16 - v4);
      do
      {
        v6 = *v4;
        v4[(_DWORD)v5] = *v4;
        ++v4;
      }
      while ( v6 );
      if ( *v14 != 1 || v3 >= 6 )
      {
        v9 = (char *)&v15 + 3;
        do
          v10 = (v9++)[1];
        while ( v10 );
        *(_DWORD *)v9 = 1263551022;
        v9[4] = 0;
      }
      else
      {
        v7 = (char *)&v15 + 3;
        do
          v8 = (v7++)[1];
        while ( v8 );
        *(_DWORD *)v7 = 1110332205;
        *((_WORD *)v7 + 2) = 19280;
        v7[6] = 0;
      }
      extractFromBpa("ENGINE.BPA", textureTemp, (int)&v16);
      copyImageToBuffer((int)textureTemp, (int)((char *)dword_5034FC + v2));
      v11 = v2;
      if ( __OFSUB__(v2, v2 + 153600) ^ 1 )
      {
        v12 = dword_5034FC;
        do
        {
          v13 = *((byte *)v12 + v11);
          if ( v13 >= 0xFu && v13 <= 0x18u )
          {
            *((byte *)v12 + v11) += 10 * v1;
            v12 = dword_5034FC;
          }
          ++v11;
        }
        while ( v11 < v2 + 153600 );
      }
      result = dword_508D24;
      ++v1;
      v2 += 153600;
      v14 += 21;
      v15 += 37;
    }
    while ( v1 < dword_508D24 );
  }
  return result;
}
// 481E20: using guessed type int textureTemp[];
// 4A6880: using guessed type int dword_4A6880[];
// 4A7A84: using guessed type int dword_4A7A84;
// 508D24: using guessed type int dword_508D24;

//----- (00403190) --------------------------------------------------------
void sub_403190()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  int v4; // eax@5
  signed int v5; // [sp-4h] [bp-14h]@8
  signed int v6; // [sp-4h] [bp-14h]@9
  int v7; // [sp-4h] [bp-14h]@10
  byte v8[16]; // [sp+0h] [bp-10h]@2

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    v8[v0++] = v1;
  }
  while ( v1 );
  v2 = (char *)&v5 + 3;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1162040109;
  *((_DWORD *)v2 + 1) = 1263551022;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)v8);
  decryptTexture((int)textureTemp, (int)&dword_479D20, 0, 1);
  decryptTexture((int)textureTemp, (int)dword_4B4320, 1, 3152 * dword_479D20 + 1);
  decryptTexture((int)textureTemp, (int)&dword_464F10, 3152 * dword_479D20 + 1, 1);
  v4 = dword_464F10;
  if ( 44 * dword_464F10 )
  {
    decryptTexture((int)textureTemp, (int)dword_50A180, 3152 * dword_479D20 + 2, 44 * dword_464F10);
    v4 = dword_464F10;
  }
  switch ( BYTE2(dword_45EA50[0]) )
  {
    case 0x31u:
    case 0x32u:
      v5 = 390000;
      goto LABEL_10;
    case 0x30u:
    case 0x33u:
    case 0x34u:
    case 0x35u:
    case 0x36u:
    case 0x37u:
    case 0x38u:
    case 0x39u:
      v6 = 300000;
LABEL_10:
      decryptTexture((int)textureTemp, (int)dword_4A7A28, 3152 * dword_479D20 + 44 * v4 + 2, v7);
      break;
    default:
      return;
  }
}
// 45EA50: using guessed type int dword_45EA50[];
// 464F10: using guessed type int dword_464F10;
// 479D20: using guessed type int dword_479D20;
// 481E20: using guessed type int textureTemp[];
// 4B4320: using guessed type int dword_4B4320[];
// 50A180: using guessed type int dword_50A180[];

//----- (004032F0) --------------------------------------------------------
int sub_4032F0()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  int v4; // eax@5
  char v5; // cl@6
  char *v6; // edi@7
  char v7; // al@8
  int v8; // eax@9
  char v9; // cl@10
  char *v10; // edi@11
  char v11; // al@12
  char v13; // [sp-1h] [bp-11h]@3
  byte v14[16]; // [sp+0h] [bp-10h]@2

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    v14[v0++] = v1;
  }
  while ( v1 );
  v2 = &v13;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1229673261;
  *((_DWORD *)v2 + 1) = 1111577646;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, byte_501AA0, (int)v14);
  v4 = 0;
  do
  {
    v5 = *((byte *)dword_45EA50 + v4);
    v14[v4++] = v5;
  }
  while ( v5 );
  v6 = &v13;
  do
    v7 = (v6++)[1];
  while ( v7 );
  *(_DWORD *)v6 = 1330397741;
  *((_DWORD *)v6 + 1) = 1111577646;
  v6[8] = 0;
  extractFromBpa(&byte_464F50, byte_479D40, (int)v14);
  v8 = 0;
  do
  {
    v9 = *((byte *)dword_45EA50 + v8);
    v14[v8++] = v9;
  }
  while ( v9 );
  v10 = &v13;
  do
    v11 = (v10++)[1];
  while ( v11 );
  *(_DWORD *)v10 = 1414089773;
  *((_DWORD *)v10 + 1) = 1111577646;
  v10[8] = 0;
  extractFromBpa(&byte_464F50, &unk_4A9EE0, (int)v14);
  return extractFromBpa("ENGINE.BPA", &unk_466F00, (int)"VARJO.TAB");
}
// 45EA50: using guessed type int dword_45EA50[];

//----- (00403410) --------------------------------------------------------
int sub_403410()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  int v4; // eax@5
  char v5; // cl@6
  char *v6; // edi@7
  char v7; // al@8
  char v9; // [sp-1h] [bp-11h]@3
  byte v10[16]; // [sp+0h] [bp-10h]@2

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    v10[v0++] = v1;
  }
  while ( v1 );
  v2 = &v9;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1448231981;
  *((_DWORD *)v2 + 1) = 1413563438;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, flt_501280, (int)v10);
  memcpy(flt_4796A0, &unk_501680, 0x400u);
  dword_481BE8 = 256;
  v4 = 0;
  do
  {
    v5 = *((byte *)dword_45EA50 + v4);
    v10[v4++] = v5;
  }
  while ( v5 );
  v6 = &v9;
  do
    v7 = (v6++)[1];
  while ( v7 );
  *(_DWORD *)v6 = 1229475629;
  *((_DWORD *)v6 + 1) = 1413563438;
  v6[8] = 0;
  return extractFromBpa(&byte_464F50, dword_46EE00, (int)v10);
}


//----- (004034F0) --------------------------------------------------------
void sub_4034F0()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  char v4; // [sp-1h] [bp-11h]@3
  byte v5[16]; // [sp+0h] [bp-10h]@2

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    v5[v0++] = v1;
  }
  while ( v1 );
  v2 = &v4;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1095258925;
  *((_DWORD *)v2 + 1) = 1263551022;
  v2[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)v5);
  decryptTexture((int)textureTemp, (int)&dword_50E718, 0, 4);
  decryptTexture((int)textureTemp, (int)&dword_501A80, 4, 4);
  decryptTexture((int)textureTemp, (int)dword_479280, 8, 4 * dword_50E718);
  decryptTexture((int)textureTemp, (int)dword_4A9FE0, 4 * dword_50E718 + 8, 4 * dword_50E718);
  decryptTexture((int)textureTemp, (int)&unk_478E60, 8 * dword_50E718 + 8, 4 * dword_50E718);
  decryptTexture((int)textureTemp, (int)dword_4AA520, 12 * dword_50E718 + 8, 4 * dword_501A80);
  decryptTexture(
    (int)textureTemp,
    (int)dword_4A8D40,
    4 * (dword_50E718 + dword_501A80 + 2 * dword_50E718) + 8,
    4 * dword_501A80);
  decryptTexture((int)textureTemp, (int)dword_46E8E0, 12 * dword_50E718 + 8 * dword_501A80 + 8, 4 * dword_501A80);
}


//----- (00403670) --------------------------------------------------------
void loadEngineGraphics()
{
  extractFromBpa("ENGINE.BPA", textureTemp, "MINES1A.BPK");
  copyImageToBuffer((int)textureTemp, (int)mines1aBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "BLOWI.BPK");
  copyImageToBuffer((int)textureTemp, (int)blowiBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME1.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame1Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME2.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame2Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME3.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame3Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME4.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame4Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME5.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame5Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "FLAME6.BPK");
  copyImageToBuffer((int)textureTemp, (int)flame6Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp,"SHOTS.BPK");
  copyImageToBuffer((int)textureTemp, (int)shotsBpk);
  if ( dword_456AA8 )
    extractFromBpa("ENGINE.BPA", textureTemp,"OBST_REV.BPK");
  else
    extractFromBpa("ENGINE.BPA", textureTemp, "OBSTACLE.BPK");
  copyImageToBuffer((int)textureTemp, (int)obstacleBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "PEDESTR.BPK");
  copyImageToBuffer((int)textureTemp, (int)pedestrBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "SPLAT3.BPK");
  copyImageToBuffer((int)textureTemp, (int)splat3Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "SPLAT4.BPK");
  copyImageToBuffer((int)textureTemp, (int)splat4Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "ROCKET1.BPK");
  copyImageToBuffer((int)textureTemp, (int)rocket1Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "ROCKET2.BPK");
  copyImageToBuffer((int)textureTemp, (int)rocket2Bpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "BURN1A.BPK");
  copyImageToBuffer((int)textureTemp, (int)burn1aBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "SMOKE.BPK");
  copyImageToBuffer((int)textureTemp, (int)smokeBpk);
}


//----- (00403910) --------------------------------------------------------
void loadEngineGraphics2()
{
  extractFromBpa("ENGINE.BPA", textureTemp, (int)"GEN-MES.BPK");
  copyImageToBuffer((int)textureTemp, (int)genmesBpk);
  extractFromBpa("IBFILES.BPA", textureTemp, (int)"DAMSLID.BPK");
  copyImageToBuffer((int)textureTemp, (int)damslidBpk);
}
// 481E20: using guessed type int textureTemp[];

//----- (00403960) --------------------------------------------------------
void sub_403960()
{
  nullsub_1();
  do
    nullsub_1();
  while ( (unsigned __int8)sub_43C4B0() != -1 );
  sub_43C4B0();
  nullsub_1();
  dword_503510 = 0;
  dword_4A9EAC = 0;
  dword_503500 = 0;
  dword_4A8D2C = 0;
  dword_4A7CFC = 0;
}


//----- (004039D0) --------------------------------------------------------
int sub_4039D0()
{
  int result; // eax@3
  __int64 v1; // [sp+4h] [bp-10h]@1
  __int64 v2; // [sp+Ch] [bp-8h]@1

  dword_45E080 = 0;
  dword_45E084 = 0;
  word_45E088 = 0;
  dword_45E09E = 0;
  dword_45E08A = 0;
  dword_45E0A2 = 0;
  dword_45E08E = 0;
  dword_45E094 = 0;
  dword_45E098 = 0;
  word_45E0A6 = 0;
  word_45E092 = 0;
  word_45E09C = 0;
  *(_WORD *)dword_45DC24 = 0;
  *(_WORD *)(dword_45DC24 + 2) = 0;
  LODWORD(v1) = 10 * (unsigned __int8)dword_45FA74 + 4579456;
  LODWORD(v2) = 10 * BYTE2(dword_45FA74) + 4579456;
  HIDWORD(v1) = 10 * BYTE1(dword_45FA74) + 4579456;
  HIDWORD(v2) = 10 * BYTE3(dword_45FA74) + 4579456;
  nullsub_1();
  do
    nullsub_1();
  while ( sub_43C4B0() != 255 );
  sub_43C4B0();
  *(_WORD *)dword_45DC24 = 0;
  *(_WORD *)(dword_45DC24 + 2) = 0;
  *(_WORD *)dword_45DC30[0] = 0;
  *(_WORD *)(dword_45DC30[0] + 2) = 0;
  *(_WORD *)dword_45DC34 = 0;
  *(_WORD *)(dword_45DC34 + 2) = 0;
  *(_WORD *)dword_45DC38 = 0;
  *(_WORD *)(dword_45DC38 + 2) = 0;
  *(_WORD *)dword_45DC3C = 0;
  result = dword_45DC3C;
  *(_WORD *)(dword_45DC3C + 2) = 0;
  return result;
}


//----- (00403B30) --------------------------------------------------------
int sub_403B30()
{
  int v0; // ecx@1
  signed int v1; // eax@1
  signed int v2; // ecx@3
  int result; // eax@4

  v0 = dword_45DC30[dword_46F208];
  v1 = 0;
  do
  {
    byte_4A6820[v1] = *(byte *)((((_WORD)v1 + *(_WORD *)(v0 + 2)) & 0xFFF) + v0 + 4);
    ++v1;
  }
  while ( v1 < 19 );
  v2 = 19;
  do
  {
    *(byte *)((*(_WORD *)(dword_45DC30[dword_46F208] + 2) & 0xFFF) + dword_45DC30[dword_46F208] + 4) = 0;
    result = dword_45DC30[dword_46F208];
    ++*(_WORD *)(result + 2);
    --v2;
  }
  while ( v2 );
  dword_456AEC = 1;
  return result;
}


//----- (00403BB0) --------------------------------------------------------
int sub_403BB0()
{
  int result; // eax@1
  unsigned int v1; // ecx@3
  int v2; // esi@3
  int v3; // edx@3
  int v4; // ecx@3
  signed int v5; // edx@3
  double v6; // st7@3
  signed int v7; // ecx@3
  signed int v8; // ST08_4@3
  signed int v9; // edx@3
  double v10; // st7@3
  signed int v11; // ST08_4@3
  signed int v12; // ecx@3
  double v13; // st7@3
  signed int v14; // ST08_4@3
  signed int v15; // edx@3
  double v16; // st7@3
  signed int v17; // ST08_4@3
  signed int v18; // ecx@3
  signed int v19; // ST08_4@3
  int v20; // ecx@3
  double v21; // st7@3
  signed int v22; // ST08_4@3

  result = dword_456AEC;
  if ( dword_456AEC )
  {
    if ( byte_4A6832 == -1 )
    {
      v1 = (unsigned __int8)byte_4A6827;
      v2 = dword_503518;
      result = 864 * dword_503518;
      byte_4A7E08[result] = (unsigned __int8)byte_4A6827 >> 4;
      v3 = (unsigned __int8)byte_4A6823;
      *(int *)((char *)dword_4A7E0C + result) = (v1 >> 3) & 1;
      v4 = 37 * v2;
      dword_4A6898[v4] = 16 * ((unsigned __int8)byte_4A6822 + (v3 << 8));
      dword_4A68B4[v4] = (unsigned __int8)byte_4A6824 << 10;
      dword_4A68B0[v4] = (unsigned __int8)byte_4A6825 << 10;
      dword_4A68D0[v4] = (unsigned __int8)byte_4A6826;
      v5 = (unsigned __int8)byte_4A6829;
      *(int *)((char *)dword_4A7D00 + result) = (unsigned __int8)byte_4A6828;
      v6 = (double)v5;
      v7 = (unsigned __int8)byte_4A682C;
      v8 = (unsigned __int8)byte_4A682B;
      v9 = (unsigned __int8)byte_4A682D;
      *(float *)(result + 4881844) = v6 * 256.0 + (double)(unsigned __int8)byte_4A682A;
      v10 = (double)v8;
      v11 = v7;
      v12 = (unsigned __int8)byte_4A682E;
      v13 = v10 * 256.0 + (double)v11;
      v14 = v9;
      v15 = (unsigned __int8)byte_4A682F;
      *(float *)(result + 4881848) = v13;
      v16 = (double)v14;
      v17 = v12;
      v18 = (unsigned __int8)byte_4A6830;
      *(float *)(result + 4882000) = v16 * 256.0 + (double)v17;
      v19 = v18;
      v20 = (unsigned __int8)byte_4A6831;
      v21 = (double)v15 * 256.0 + (double)v19;
      v22 = (unsigned __int8)byte_4A6831;
      *(float *)(result + 4882004) = v21;
      *(int *)((char *)dword_4A7D0C + result) = v20;
      *(float *)(result + 4881836) = (double)v22 * 3.75;
      *(int *)((char *)dword_4A7D10 + result) = 1600 * (*(int *)((char *)dword_4A7D0C + result) + 96 * v2);
    }
    dword_456AEC = 0;
  }
  return result;
}


//----- (00403D50) --------------------------------------------------------
int sub_403D50()
{
  int result; // eax@1

  nullsub_1();
  result = 0;
  *(_WORD *)dword_45DC24 = 0;
  *(_WORD *)(dword_45DC24 + 2) = 0;
  *(_WORD *)dword_45E064 = 0;
  *(_WORD *)(dword_45E064 + 2) = 0;
  *(_WORD *)dword_45DC30[0] = 0;
  *(_WORD *)(dword_45DC30[0] + 2) = 0;
  *(_WORD *)dword_45DC34 = 0;
  *(_WORD *)(dword_45DC34 + 2) = 0;
  *(_WORD *)dword_45DC38 = 0;
  *(_WORD *)(dword_45DC38 + 2) = 0;
  *(_WORD *)dword_45DC3C = 0;
  *(_WORD *)(dword_45DC3C + 2) = 0;
  memset((void *)(dword_45DC24 + 4), 0, 0x1000u);
  memset((void *)(dword_45DC30[0] + 4), 0, 0x1000u);
  memset((void *)(dword_45DC34 + 4), 0, 0x1000u);
  memset((void *)(dword_45DC38 + 4), 0, 0x1000u);
  memset((void *)(dword_45DC3C + 4), 0, 0x1000u);
  memset((void *)(dword_45E064 + 4), 0, 0x1000u);
  return result;
}


//----- (00403E30) --------------------------------------------------------
int sub_403E30()
{
  int v0; // ecx@1
  int v1; // edi@1
  int v2; // eax@2
  int v3; // esi@3
  byte *v4; // eax@8
  signed int v5; // eax@8
  int v6; // ecx@14
  int v7; // eax@14
  int v8; // eax@16
  int v9; // ebp@16
  signed int v10; // edi@16
  int v11; // eax@23
  int v12; // eax@25
  int v13; // ebp@25
  signed int v14; // edi@25
  int v15; // eax@32
  int v16; // eax@34
  int v17; // esi@36
  signed int v18; // esi@37
  int v19; // eax@42
  int v20; // eax@44
  int v21; // ebp@44
  signed int v22; // edi@44
  int v23; // eax@51
  int v24; // esi@54
  int v25; // eax@57
  int v26; // eax@59
  int v27; // ebp@59
  signed int v28; // edi@59
  int v29; // edx@66
  int v30; // ecx@66
  int result; // eax@78

  v0 = dword_508D24;
  v1 = 0;
  dword_50E540 = 0;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = dword_45E0A8;
    do
    {
      v3 = v1;
      dword_46F208 = v1;
      if ( v2 == 1 || v2 == 3 || v2 == 4 )
      {
        v3 = 0;
        dword_46F208 = 0;
      }
      if ( v1 != dword_4A9EA8 )
      {
        v4 = &dword_4A7D20[864 * v1];
        *(_DWORD *)v4 = 0;
        *((_DWORD *)v4 + 1) = 0;
        *((_DWORD *)v4 + 2) = 0;
        *((_DWORD *)v4 + 3) = 0;
        *((_DWORD *)v4 + 4) = 0;
        *((_DWORD *)v4 + 5) = 0;
        *((_DWORD *)v4 + 6) = 0;
        *((_DWORD *)v4 + 7) = 0;
        *((_DWORD *)v4 + 8) = 0;
        *((_DWORD *)v4 + 9) = 0;
        *((_DWORD *)v4 + 10) = 0;
        *((_DWORD *)v4 + 11) = 0;
        *((_DWORD *)v4 + 12) = 0;
        *((_DWORD *)v4 + 13) = 0;
        *((_DWORD *)v4 + 14) = 0;
        *((_DWORD *)v4 + 15) = 0;
        v5 = 0;
        dword_456AEC = 0;
        dword_481BE8 = 0;
        dword_4A7A38 = 16;
        dword_456AF0 = 0;
        while ( dword_481BE8 < dword_503510 )
        {
          if ( v5 >= 16 || dword_47968C || dword_4A7A38 <= 0 || dword_4A6B04 )
            break;
          --dword_4A7A38;
          nullsub_1();
          v3 = dword_46F208;
          if ( *(_WORD *)(dword_45DC30[dword_46F208] + 2) == *(_WORD *)dword_45DC30[dword_46F208] )
          {
            v18 = 4;
            do
            {
              nullsub_1();
              --v18;
            }
            while ( v18 );
          }
          else
          {
            v6 = dword_503518;
            dword_464F30[dword_503518] = dword_503500;
            v7 = dword_45DC30[v3];
            if ( *(byte *)((*(_WORD *)(v7 + 2) & 0xFFF) + v7 + 4) <= 0x7Fu )
            {
              v17 = dword_45DC30[v3];
              *(_DWORD *)&dword_4A7D20[4 * (dword_481BE8 + 216 * v6)] = *(byte *)((*(_WORD *)(v17 + 2) & 0xFFF)
                                                                                 + v17
                                                                                 + 4);
              *(byte *)((*(_WORD *)(v17 + 2) & 0xFFF) + v17 + 4) = 0;
              ++*(_WORD *)(dword_45DC30[dword_46F208] + 2);
              dword_456AF0 = dword_481BE8++;
            }
            else
            {
              if ( *(byte *)((*(_WORD *)(v7 + 2) & 0xFFF) + v7 + 4) == -2 )
              {
                v8 = waitWithDelay();
                v3 = dword_46F208;
                v9 = v8;
                v10 = 0;
                if ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 18) & 0xFFF)
                              + dword_45DC30[dword_46F208]
                              + 4) == -1 )
                  goto LABEL_86;
                do
                {
                  if ( v10 )
                    break;
                  nullsub_1();
                  if ( waitWithDelay() > (unsigned int)(v9 + 2) )
                  {
                    v10 = 1;
                    *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2))++ & 0xFFF) + dword_45DC30[dword_46F208] + 4) = 0;
                  }
                  v3 = dword_46F208;
                }
                while ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 18) & 0xFFF)
                                 + dword_45DC30[dword_46F208]
                                 + 4) != -1 );
                if ( v10 != 1 )
                {
LABEL_86:
                  sub_403B30();
                  v3 = dword_46F208;
                }
              }
              v11 = dword_45DC30[v3];
              if ( *(byte *)((*(_WORD *)(v11 + 2) & 0xFFF) + v11 + 4) == -45
                || *(byte *)((*(_WORD *)(v11 + 2) & 0xFFF) + v11 + 4) == -59 )
              {
                v12 = waitWithDelay();
                v3 = dword_46F208;
                v13 = v12;
                v14 = 0;
                if ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 7) & 0xFFF)
                              + dword_45DC30[dword_46F208]
                              + 4) == -1 )
                  goto LABEL_87;
                do
                {
                  if ( v14 )
                    break;
                  nullsub_1();
                  if ( waitWithDelay() > (unsigned int)(v13 + 2) )
                  {
                    v14 = 1;
                    *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2))++ & 0xFFF) + dword_45DC30[dword_46F208] + 4) = 0;
                  }
                  v3 = dword_46F208;
                }
                while ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 7) & 0xFFF)
                                 + dword_45DC30[dword_46F208]
                                 + 4) != -1 );
                if ( v14 != 1 )
                {
LABEL_87:
                  *(_WORD *)(dword_45DC30[v3] + 2) += 8;
                  v3 = dword_46F208;
                }
              }
              v15 = dword_45DC30[v3];
              if ( *(byte *)((*(_WORD *)(v15 + 2) & 0xFFF) + v15 + 4) == -3 )
              {
                dword_47968C = 1;
                *(byte *)((*(_WORD *)(v15 + 2) & 0xFFF) + v15 + 4) = 0;
                ++*(_WORD *)(dword_45DC30[dword_46F208] + 2);
                v3 = dword_46F208;
              }
              v16 = dword_45DC30[v3];
              if ( *(byte *)((*(_WORD *)(v16 + 2) & 0xFFF) + v16 + 4) != -4 )
                goto LABEL_40;
              dword_4A6B04 = 1;
              *(byte *)((*(_WORD *)(v16 + 2) & 0xFFF) + v16 + 4) = 0;
              ++*(_WORD *)(dword_45DC30[dword_46F208] + 2);
            }
          }
          v3 = dword_46F208;
LABEL_40:
          v5 = dword_481BE8;
        }
        if ( *(_WORD *)(dword_45DC30[v3] + 2) != *(_WORD *)dword_45DC30[v3] )
        {
          while ( 1 )
          {
            v19 = dword_45DC30[v3];
            if ( *(byte *)((*(_WORD *)(v19 + 2) & 0xFFF) + v19 + 4) <= 0x7Fu )
              break;
            if ( *(byte *)((*(_WORD *)(v19 + 2) & 0xFFF) + v19 + 4) != -2 )
            {
              v23 = dword_45DC30[v3];
              if ( *(byte *)((*(_WORD *)(v23 + 2) & 0xFFF) + v23 + 4) == -45
                || *(byte *)((*(_WORD *)(v23 + 2) & 0xFFF) + v23 + 4) == -59 )
              {
                v26 = waitWithDelay();
                v3 = dword_46F208;
                v27 = v26;
                v28 = 0;
                if ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 7) & 0xFFF)
                              + dword_45DC30[dword_46F208]
                              + 4) != -1 )
                {
                  do
                  {
                    if ( v28 )
                      break;
                    nullsub_1();
                    if ( waitWithDelay() > (unsigned int)(v27 + 2) )
                    {
                      v28 = 1;
                      *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2))++ & 0xFFF)
                               + dword_45DC30[dword_46F208]
                               + 4) = 0;
                    }
                    v3 = dword_46F208;
                  }
                  while ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 7) & 0xFFF)
                                   + dword_45DC30[dword_46F208]
                                   + 4) != -1 );
                  if ( v28 == 1 )
                    goto LABEL_75;
                }
                *(_WORD *)(dword_45DC30[v3] + 2) += 8;
                goto LABEL_74;
              }
              if ( *(byte *)((*(_WORD *)(v23 + 2) & 0xFFF) + v23 + 4) == -3 )
              {
                dword_47968C = 1;
                v24 = v23;
                goto LABEL_57;
              }
              v24 = dword_45DC30[v3];
              if ( *(byte *)((*(_WORD *)(v24 + 2) & 0xFFF) + v24 + 4) == -4 )
              {
                dword_4A6B04 = 1;
LABEL_57:
                *(byte *)((*(_WORD *)(v24 + 2) & 0xFFF) + v24 + 4) = 0;
                v25 = dword_45DC30[dword_46F208];
              }
              else
              {
                *(byte *)((*(_WORD *)(v24 + 2) & 0xFFF) + v24 + 4) = 0;
                v25 = dword_45DC30[dword_46F208];
              }
LABEL_73:
              ++*(_WORD *)(v25 + 2);
              goto LABEL_74;
            }
            v20 = waitWithDelay();
            v3 = dword_46F208;
            v21 = v20;
            v22 = 0;
            if ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 18) & 0xFFF) + dword_45DC30[dword_46F208] + 4) != -1 )
            {
              do
              {
                if ( v22 )
                  break;
                nullsub_1();
                if ( waitWithDelay() > (unsigned int)(v21 + 2) )
                {
                  v22 = 1;
                  *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2))++ & 0xFFF) + dword_45DC30[dword_46F208] + 4) = 0;
                }
                v3 = dword_46F208;
              }
              while ( *(byte *)(((*(_WORD *)(dword_45DC30[dword_46F208] + 2) + 18) & 0xFFF)
                               + dword_45DC30[dword_46F208]
                               + 4) != -1 );
              if ( v22 == 1 )
                goto LABEL_75;
            }
            sub_403B30();
LABEL_74:
            v3 = dword_46F208;
LABEL_75:
            if ( *(_WORD *)(dword_45DC30[v3] + 2) == *(_WORD *)dword_45DC30[v3] )
              goto LABEL_76;
          }
          v29 = dword_456AF0;
          v30 = dword_503518;
          if ( *(byte *)((*(_WORD *)(v19 + 2) & 0xFFF) + v19 + 4) & 0x10 )
            *(_DWORD *)&dword_4A7D20[4 * (dword_456AF0 + 216 * dword_503518)] |= 0x10u;
          if ( *(byte *)((*(_WORD *)(dword_45DC30[v3] + 2) & 0xFFF) + dword_45DC30[v3] + 4) & 0x20 )
            *(_DWORD *)&dword_4A7D20[4 * (v29 + 216 * v30)] |= 0x20u;
          if ( *(byte *)((*(_WORD *)(dword_45DC30[v3] + 2) & 0xFFF) + dword_45DC30[v3] + 4) & 0x40 )
            *(_DWORD *)&dword_4A7D20[4 * (v29 + 216 * v30)] |= 0x40u;
          *(byte *)((*(_WORD *)(dword_45DC30[v3] + 2) & 0xFFF) + dword_45DC30[v3] + 4) = 0;
          v25 = dword_45DC30[dword_46F208];
          goto LABEL_73;
        }
LABEL_76:
        sub_403BB0();
        *(_WORD *)(dword_45DC30[v3] + 2) = *(_WORD *)dword_45DC30[v3];
        v0 = dword_508D24;
        v2 = dword_45E0A8;
      }
      v1 = dword_503518++ + 1;
    }
    while ( dword_503518 < v0 );
  }
  result = 0;
  for ( dword_503518 = 0; result < v0; dword_503518 = result )
  {
    if ( result != dword_4A9EA8 && dword_464F30[result] + 700 < dword_503500 )
      dword_4A6B04 = 1;
    ++result;
  }
  dword_50E540 = 1;
  return result;
}


//----- (00404610) --------------------------------------------------------
int noMemExitScreen()
{
  void *v0; // eax@1
  void *v1; // eax@5
  signed int v2; // esi@9
  signed int v3; // esi@11
  unsigned __int64 v4; // rax@12
  signed int v6; // [sp+0h] [bp-4h]@9
  signed int v7; // [sp+0h] [bp-4h]@11

	//TODO correct
  //operator delete(0x3844u);
  if ( !v0 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  dword_4A6854 = v0;
  	//TODO correct
  //operator delete(0x3844u);
  if ( !v1 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  v2 = 0;
  dword_46F204 = v1;
  v6 = 0;
  do
  {
    *((_DWORD *)dword_4A6854 + v2++) = (unsigned __int64)(sin((double)v6 * 0.0175) * 1024.0);
    v6 = v2;
  }
  while ( v2 < 3600 );
  v3 = 0;
  v7 = 0;
  do
  {
    v4 = (unsigned __int64)(cos((double)v7 * 0.0175) * 1024.0);
    *((_DWORD *)dword_46F204 + v3++) = v4;
    v7 = v3;
  }
  while ( v3 < 3600 );
  return v4;
}
// 45EA04: using guessed type int isMultiplayerGame;

//----- (00404730) --------------------------------------------------------
char *sub_404730()
{
  int v0; // eax@1
  bool v1; // sf@1
  unsigned __int8 v2; // of@1
  int v3; // ebx@3
  int v4; // edx@3
  signed int v5; // eax@3
  char v6; // bp@4
  unsigned int v7; // ecx@4
  int v8; // edi@4
  const void *v9; // esi@4
  char *result; // eax@5
  signed int v11; // edi@5
  int v12; // ebp@5
  int v13; // edx@5
  int v14; // ecx@6
  int v15; // esi@8
  int v16; // ebx@8
  signed int v17; // esi@8
  int v18; // ebp@8
  signed int v19; // edx@13
  signed int v20; // ecx@13
  int v21; // edx@13
  signed int v22; // ecx@13
  int v23; // eax@17
  signed int v24; // [sp+0h] [bp-14h]@3
  int v25; // [sp+4h] [bp-10h]@5
  int v26; // [sp+8h] [bp-Ch]@1
  int v27; // [sp+8h] [bp-Ch]@8
  int v28; // [sp+Ch] [bp-8h]@3
  int v29; // [sp+10h] [bp-4h]@3

  v26 = screenPtr;
  v0 = dword_456AF4 + 3;
  v2 = __OFSUB__(dword_456AF4 + 3, 360);
  v1 = dword_456AF4 - 357 < 0;
  dword_456AF4 += 3;
  if ( !(v1 ^ v2) )
  {
    v0 -= 360;
    dword_456AF4 = v0;
  }
  v28 = 2 * *((_DWORD *)dword_4A6854 + 2 * v0) + 4000;
  v29 = 2 * *((_DWORD *)dword_4A6854 + v0 + 125) + 4000;
  v24 = v0;
  v3 = 2 * v0;
  v4 = 0;
  v5 = 0;
  do
  {
    v6 = dword_456AA0;
    v7 = (unsigned int)dword_456AA0 >> 2;
    v8 = v4 + screenPtr;
    v9 = (const void *)(v5 + dword_464F14 + 96);
    memcpy((void *)(v4 + screenPtr), v9, 4 * ((unsigned int)dword_456AA0 >> 2));
    v5 += 512;
    v4 += 320;
    memcpy((void *)(v8 + 4 * v7), (char *)v9 + 4 * v7, v6 & 3);
  }
  while ( v5 < 102400 );
  result = (char *)dword_4A6854;
  v11 = dword_456AA0;
  v12 = v26;
  v25 = 0;
  v13 = 4 * v3;
  do
  {
    v14 = v28 + v24;
    v24 += v28;
    if ( v24 >= 368640 )
    {
      v14 -= 368640;
      v24 = v14;
    }
    v15 = *(_DWORD *)&result[v13 + 4];
    v13 += 4;
    v16 = dword_456AF4 + 75;
    v17 = v15 << 8;
    v18 = v11 + v12;
    v27 = v13;
    if ( v11 < 320 )
    {
      while ( 1 )
      {
        ++v16;
        if ( v16 >= 360 )
          v16 -= 360;
        v19 = v14 + (*(_DWORD *)&result[4 * v16] << 8);
        v20 = *(_DWORD *)&result[4 * (v17 >> 10) + 1440];
        v17 += v29;
        v21 = *(_DWORD *)&result[4 * (v19 >> 10) + 1440] >> 7;
        v22 = v20 >> 8;
        if ( v17 >= 368640 )
          v17 -= 368640;
        if ( v22 + v11 < dword_456AA0 || v22 + v11 >= 319 || (v23 = v21 + v25, v21 + v25 < 0) || v23 >= 199 )
          sub_43C450(v18);
        else
          sub_43C490(v18, v22 + dword_464F14 + (v23 << 9) + v11 + 96);
        result = (char *)dword_4A6854;
        v11 += 2;
        v18 += 2;
        if ( v11 >= 320 )
          break;
        v14 = v24;
      }
      v11 = dword_456AA0;
      v13 = v27;
    }
    v12 = v18 + 320;
    v2 = __OFSUB__(v25 + 2, 200);
    v1 = v25 - 198 < 0;
    v25 += 2;
  }
  while ( v1 ^ v2 );
  return result;
}
// 456AA0: using guessed type int dword_456AA0;
// 456AF4: using guessed type int dword_456AF4;
// 456BF0: using guessed type int screenPtr;
// 464F14: using guessed type int dword_464F14;

//----- (00404920) --------------------------------------------------------
int sub_404920()
{
  unsigned __int8 v0; // di@2
  signed int v1; // esi@2
  int result; // eax@4
  signed int v3; // [sp+8h] [bp-18h]@1
  double v4; // [sp+18h] [bp-8h]@2

  sub_43C0F0((int)&unk_4B4020);
  v3 = 40;
  do
  {
    v0 = 0;
    v1 = (signed int)&unk_4B4021;
    v4 = (double)v3;
    do
    {
      setPaletteAndGetValue(
        v0,
        (unsigned __int64)((double)*(byte *)(v1 - 1) * (v4 * 0.025)),
        (unsigned __int64)((double)*(byte *)v1 * (v4 * 0.025)),
        (unsigned __int64)((double)*(byte *)(v1 + 1) * (v4 * 0.025)));
      v1 += 3;
      ++v0;
    }
    while ( v1 < (signed int)((char *)dword_4B4320 + 1) );
    wait();
    setMusicVolume((unsigned __int64)(v4 * 1638.4));
    result = v3-- - 1;
  }
  while ( v3 >= 0 );
  return result;
}
// 4B4320: using guessed type int dword_4B4320[];

//----- (004049F0) --------------------------------------------------------
int sub_4049F0()
{
  unsigned __int8 v0; // bl@1
  _UNKNOWN *v1; // edi@1
  signed int v2; // esi@1
  int v3; // eax@2
  int v4; // ST08_4@2
  int v5; // eax@2
  int v6; // ST00_4@2
  int result; // eax@2

  v0 = 0;
  v1 = &unk_50EF44;
  v2 = (signed int)&unk_4B4021;
  do
  {
    setPaletteAndGetValue(v0, 0, 0, 0);
    v3 = sub_43B290(*(byte *)(v2 - 1) << 16, 4128768);
    v4 = *(byte *)v2 << 16;
    *((_DWORD *)v1 - 1) = v3;
    v5 = sub_43B290(v4, 4128768);
    v6 = *(byte *)(v2 + 1) << 16;
    *(_DWORD *)v1 = v5;
    result = sub_43B290(v6, 4128768);
    *((_DWORD *)v1 + 1) = result;
    v2 += 3;
    ++v0;
    v1 = (char *)v1 + 12;
  }
  while ( v2 < (signed int)((char *)dword_4B4320 + 1) );
  return result;
}
// 4B4320: using guessed type int dword_4B4320[];

//----- (00404A60) --------------------------------------------------------
int sub_404A60()
{
  _UNKNOWN *v0; // edi@1
  signed int v1; // esi@1
  int v2; // eax@2
  int v3; // ST08_4@2
  int v4; // eax@2
  int v5; // ST00_4@2
  int result; // eax@2

  v0 = &unk_50EF44;
  v1 = (signed int)&unk_4B4021;
  do
  {
    v2 = sub_43B290(*(byte *)(v1 - 1) << 16, 4128768);
    v3 = *(byte *)v1 << 16;
    *((_DWORD *)v0 - 1) = v2;
    v4 = sub_43B290(v3, 4128768);
    v5 = *(byte *)(v1 + 1) << 16;
    *(_DWORD *)v0 = v4;
    result = sub_43B290(v5, 4128768);
    *((_DWORD *)v0 + 1) = result;
    v1 += 3;
    v0 = (char *)v0 + 12;
  }
  while ( v1 < (signed int)((char *)dword_4B4320 + 1) );
  return result;
}
// 4B4320: using guessed type int dword_4B4320[];

//----- (00404AD0) --------------------------------------------------------
int sub_404AD0()
{
  int v0; // eax@1
  _UNKNOWN *v1; // ebp@1
  signed int v2; // ebx@1
  int v3; // esi@3
  int v4; // edi@3
  int v5; // eax@3
  int result; // eax@3
  int v7; // [sp+10h] [bp-4h]@1

  v0 = dword_456AF8++ + 1;
  v7 = 0;
  v1 = &unk_4B4021;
  v2 = (signed int)&unk_50EF44;
  while ( 1 )
  {
    v3 = ((*((byte *)v1 - 1) << 16) - convertColorToPaletteColor(*(_DWORD *)(v2 - 4), v0 << 16) + 0x8000) >> 16;
    v4 = ((*(byte *)v1 << 16) - convertColorToPaletteColor(*(_DWORD *)v2, dword_456AF8 << 16) + 0x8000) >> 16;
    v5 = convertColorToPaletteColor(*(_DWORD *)(v2 + 4), dword_456AF8 << 16);
    result = setPaletteAndGetValue(v7, v3, v4, ((*((byte *)v1 + 1) << 16) - v5 + 0x8000) >> 16);
    v2 += 12;
    v1 = (char *)v1 + 3;
    ++v7;
    if ( v2 >= (signed int)&dword_50FB44 )
      break;
    v0 = dword_456AF8;
  }
  return result;
}
// 456AF8: using guessed type int dword_456AF8;
// 50FB44: using guessed type int dword_50FB44;

//----- (00404BA0) --------------------------------------------------------
int sub_404BA0()
{
  int v0; // eax@1
  unsigned __int8 v1; // bp@1
  signed int v2; // esi@1
  int v3; // edi@3
  int v4; // ebx@3
  int v5; // eax@3
  int result; // eax@3

  v0 = dword_456AF8++ + 1;
  v1 = 0;
  v2 = 0;
  //v2 = (signed int)&unk_50EF44;
  while ( 1 )
  {
    v3 = (convertColorToPaletteColor(*(_DWORD *)(v2 - 4), v0 << 16) + 0x8000) >> 16;
    v4 = (convertColorToPaletteColor(*(_DWORD *)v2, dword_456AF8 << 16) + 0x8000) >> 16;
    v5 = convertColorToPaletteColor(*(_DWORD *)(v2 + 4), dword_456AF8 << 16);
    result = setPaletteAndGetValue(v1, v3, v4, (v5 + 0x8000) >> 16);
    v2 += 12;
    ++v1;
    if ( v2 >= (signed int)&dword_50FB44 )
      break;
    v0 = dword_456AF8;
  }
  return result;
}
// 456AF8: using guessed type int dword_456AF8;
// 50FB44: using guessed type int dword_50FB44;

//----- (00404C30) --------------------------------------------------------
int sub_404C30()
{
  signed int v0; // ebx@1
  int v1; // ecx@1
  int v2; // ebp@2
  _UNKNOWN *v3; // edi@2
  signed int v4; // esi@2
  int v5; // edx@5
  int v6; // ST34_4@5
  int v7; // edx@5
  double v8; // st7@6
  int v9; // ebx@9
  signed int v10; // eax@9
  int v11; // edx@9
  void *v12; // edi@10
  const void *v13; // esi@10
  signed int v14; // eax@11
  int v15; // edx@11
  void *v16; // edi@12
  const void *v17; // esi@12
  unsigned __int8 v18; // di@14
  signed int v19; // esi@14
  signed int v20; // eax@16
  long double v21; // st7@18
  int v22; // ebp@18
  signed int v23; // ebx@18
  unsigned __int64 v24; // rax@19
  char *v25; // esi@19
  int v26; // edi@19
  int v27; // eax@20
  signed int v28; // esi@20
  unsigned int v29; // eax@21
  double v30; // st7@25
  int v31; // eax@25
  double v32; // st7@28
  signed int v33; // esi@31
  signed int v34; // ebp@34
  signed int v35; // esi@35
  signed int v36; // edi@35
  signed int v37; // ebx@35
  int v38; // ecx@41
  bool v39; // zf@45
  bool v40; // sf@45
  unsigned __int8 v41; // of@45
  signed int v42; // ebp@46
  signed int v43; // ebx@47
  signed int v44; // esi@48
  signed int v45; // edi@48
  signed int v46; // eax@48
  signed int v47; // esi@59
  int v48; // edx@62
  int v49; // ecx@62
  signed int v50; // ebp@62
  signed int v51; // ST40_4@65
  signed int v52; // ST44_4@65
  unsigned __int64 v53; // rax@65
  int result; // eax@68
  int v55; // [sp+14h] [bp-1Ch]@34
  int v56; // [sp+14h] [bp-1Ch]@47
  int v57; // [sp+14h] [bp-1Ch]@62
  signed int v58; // [sp+18h] [bp-18h]@33
  signed int v59; // [sp+18h] [bp-18h]@46
  int v60; // [sp+18h] [bp-18h]@61
  int v61; // [sp+1Ch] [bp-14h]@1
  signed int v62; // [sp+1Ch] [bp-14h]@33
  signed int v63; // [sp+1Ch] [bp-14h]@61
  double v64; // [sp+28h] [bp-8h]@34
  double v65; // [sp+28h] [bp-8h]@47

  memcpy(&unk_509E60, byte_4A9BA0, 0x300u);
  v0 = 0;
  v1 = 10 * dword_4A9EA8;
  v61 = 10 * dword_4A9EA8;
  do
  {
    v2 = 0;
    v3 = &unk_4B3404;
    v4 = (signed int)&unk_509E61;
    do
    {
      if ( v2 < v1 + 15
        || v2 > v1 + 24
        || (v5 = v0 * *(byte *)v4,
            *((float *)v3 - 1) = (double)((v0 * *(byte *)(v4 - 1) + 128) >> 8) * 0.011111111,
            v6 = (v5 + 128) >> 8,
            v7 = v0 * *(byte *)(v4 + 1),
            *(float *)v3 = (double)v6 * 0.011111111,
            *((float *)v3 + 1) = (double)((v7 + 128) >> 8) * 0.011111111,
            v2 > v1 + 24) )
      {
        v1 = v61;
        v8 = (double)((signed int)(v0
                                 * (unsigned __int64)(((double)*(byte *)(v4 + 1) * 11.3
                                                     + (double)*(byte *)(v4 - 1) * 29.9
                                                     + (double)*(byte *)v4 * 58.8)
                                                    * 0.01)
                                 + 128) >> 8)
           * 0.011111111;
        *((float *)v3 - 1) = v8;
        *(float *)v3 = v8;
        *((float *)v3 + 1) = v8;
      }
      v4 += 3;
      ++v2;
      v3 = (char *)v3 + 12;
    }
    while ( v4 < (signed int)((char *)&dword_50A160 + 1) );
    v0 += 8;
  }
  while ( v0 < 256 );
  memset((void *)screenPtr, 0, 0xFA00u);
  v9 = dword_464F14;
  v10 = (signed int)textureTemp;
  v11 = dword_464F14 + 160;
  do
  {
    v12 = (void *)v10;
    v13 = (const void *)v11;
    v10 += 256;
    v11 += 512;
    memcpy(v12, v13, 0x100u);
  }
  while ( v10 < (signed int)&unk_48E620 );
  v14 = (signed int)&unk_48E720;
  v15 = v9 + 96;
  do
  {
    v16 = (void *)v14;
    v17 = (const void *)v15;
    v14 += 64;
    v15 += 512;
    memcpy(v16, v17, 0x40u);
  }
  while ( v14 < (signed int)&unk_491920 );
  memset(&unk_48E620, 0, 0x100u);
  dword_4A9EAC = 0;
  dword_44509C = 1063675494;
  dword_4450A0 = 1065353216;
  while ( 1 )
  {
    v18 = 0;
    v19 = (signed int)&unk_4B3404;
    do
    {
      setPaletteAndGetValue(
        v18,
        (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)(v19 - 4)),
        (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)v19),
        (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)(v19 + 4)));
      v19 += 12;
      ++v18;
    }
    while ( v19 < (signed int)&obstacleBpk );
    v20 = 728 * (unsigned __int64)*(float *)&dword_4450A0;
    if ( v20 > 0xFFFF )
      v20 = 0xFFFF;
    setMusicVolume(v20);
    v21 = *(float *)&dword_4450A0 * 0.01745329251994444;
    dword_50A170 = screenPtr + 64;
    dword_481E00 = (unsigned __int64)(51200.0 / (sin(v21) * 200.0));
    v22 = 0;
    dword_503514 = (unsigned __int64)(cos(v21) * 170.0);
    dword_4A7CD0 = 0;
    v23 = 0;
    do
    {
      v24 = (unsigned __int64)(*(float *)&dword_4450A0 * 0.7142857142857143);
      v25 = (char *)&unk_48E760 + v23 - v24;
      v26 = screenPtr + v22;
      memcpy((void *)(screenPtr + v22), v25, 4 * ((unsigned int)v24 >> 2));
      v23 += 64;
      v22 += 320;
      memcpy((void *)(v26 + 4 * ((unsigned int)v24 >> 2)), &v25[4 * ((unsigned int)v24 >> 2)], v24 & 3);
    }
    while ( v23 < 12800 );
    v27 = dword_4A7CD0;
    v28 = 200;
    do
    {
      v29 = v27 & 0xFFFFFF00;
      dword_464F20 = v29;
      if ( (signed int)v29 > 51200 )
      {
        v29 = 51200;
        dword_464F20 = 51200;
      }
      dword_4A7A24 = (signed int)(dword_503514 * v29) >> 16;
      sub_43B030(dword_50A170, ((signed int)(dword_503514 * v29) >> 17) - 10);
      sub_43B370(
        dword_50A170 + (dword_4A7A24 >> 1),
        (int)((char *)&textureTemp[0] + dword_464F20 - 1),
        255 - dword_4A7A24);
      sub_43B050(dword_50A170, (dword_4A7A24 >> 1) - dword_4A7A24 + 255);
      v27 = dword_481E00 + dword_4A7CD0;
      --v28;
      dword_50A170 += 320;
      dword_4A7CD0 += dword_481E00;
    }
    while ( v28 );
    if ( *(float *)&dword_4450A0 == 90.0 )
      break;
    v30 = *(float *)&dword_44509C;
    v31 = 0;
    if ( dword_4A9EAC >= 0 )
    {
      do
      {
        v30 = v30 * 1.02;
        ++v31;
      }
      while ( v31 <= dword_4A9EAC );
      *(float *)&dword_44509C = v30;
    }
    v32 = v30 + *(float *)&dword_4450A0;
    *(float *)&dword_4450A0 = v32;
    if ( v32 > 90.0 )
      dword_4450A0 = 1119092736;
    dword_4A9EAC = 0;
    wait();
  }
  v33 = 20;
  do
  {
    wait();
    --v33;
  }
  while ( v33 );
  v58 = 256;
  v62 = 0;
  do
  {
    v55 = 0;
    v34 = (signed int)&unk_509E61;
    v64 = (double)v62;
    do
    {
      v35 = (signed int)(v58 * *(byte *)(v34 - 1) - (unsigned __int64)((double)*(byte *)(v34 - 1) * v64 * -1.7) + 128) >> 8;
      v36 = (signed int)(v58 * *(byte *)v34 - (unsigned __int64)((double)*(byte *)v34 * v64 * -1.7) + 128) >> 8;
      v37 = (signed int)(v58 * *(byte *)(v34 + 1) - (unsigned __int64)((double)*(byte *)(v34 + 1) * v64 * -1.7) + 128) >> 8;
      if ( v35 > 63 )
        LOBYTE(v35) = 63;
      if ( v36 > 63 )
        LOBYTE(v36) = 63;
      if ( v37 > 63 )
        LOBYTE(v37) = 63;
      v38 = v55;
      if ( v55 >= 10 * dword_4A9EA8 + 15 && v55 <= 10 * dword_4A9EA8 + 24 )
      {
        setPaletteAndGetValue(v55, v35, v36, v37);
        v38 = v55;
      }
      v34 += 3;
      v55 = v38 + 1;
    }
    while ( v34 < (signed int)((char *)&dword_50A160 + 1) );
    wait();
    v41 = __OFSUB__(v62 + 50, 256);
    v39 = v62 == 206;
    v40 = v62 - 206 < 0;
    v58 -= 50;
    v62 += 50;
  }
  while ( (unsigned __int8)(v40 ^ v41) | v39 );
  v59 = 256;
  v42 = 0;
  do
  {
    v56 = 0;
    v43 = (signed int)&unk_509E61;
    v65 = (double)v59;
    do
    {
      v44 = (signed int)(*(byte *)(v43 - 1) * v42 - (unsigned __int64)((double)*(byte *)(v43 - 1) * v65 * -1.7) + 128) >> 8;
      v45 = (signed int)(*(byte *)v43 * v42 - (unsigned __int64)((double)*(byte *)v43 * v65 * -1.7) + 128) >> 8;
      v46 = (signed int)(*(byte *)(v43 + 1) * v42 - (unsigned __int64)((double)*(byte *)(v43 + 1) * v65 * -1.7) + 128) >> 8;
      if ( v44 > 63 )
        LOBYTE(v44) = 63;
      if ( v45 > 63 )
        LOBYTE(v45) = 63;
      if ( v46 > 63 )
        LOBYTE(v46) = 63;
      if ( v56 >= 10 * dword_4A9EA8 + 15 && v56 <= 10 * dword_4A9EA8 + 24 )
        setPaletteAndGetValue(v56, v44, v45, v46);
      v43 += 3;
      ++v56;
    }
    while ( v43 < (signed int)((char *)&dword_50A160 + 1) );
    wait();
    v42 += 10;
    v59 -= 10;
  }
  while ( v42 <= 256 );
  v47 = 50;
  do
  {
    wait();
    --v47;
  }
  while ( v47 );
  v60 = 0;
  v63 = 256;
  do
  {
    v48 = dword_4A9EA8;
    v49 = 0;
    v57 = 0;
    v50 = (signed int)&unk_509E61;
    do
    {
      if ( v49 < 10 * v48 + 15 || v49 > 10 * v48 + 24 )
      {
        v51 = *(byte *)(v50 - 1);
        v52 = *(byte *)v50;
        v53 = (unsigned __int64)(((double)*(byte *)(v50 + 1) * 11.3 + (double)v51 * 29.9 + (double)v52 * 58.8) * 0.01);
        HIDWORD(v53) = v60 * v52 + v53 * v63 + 128;
        setPaletteAndGetValue(
          v57,
          (unsigned __int16)(v60 * v51 + v53 * v63 + 128) >> 8,
          SBYTE5(v53),
          (unsigned __int16)(v60 * *(byte *)(v50 + 1) + v53 * v63 + 128) >> 8);
        v48 = dword_4A9EA8;
        v49 = v57;
      }
      ++v49;
      v50 += 3;
      v57 = v49;
    }
    while ( v50 < (signed int)((char *)&dword_50A160 + 1) );
    wait();
    v39 = v63 == 8;
    v40 = v63 - 8 < 0;
    v60 += 8;
    v63 -= 8;
  }
  while ( !v40 && !v39 );
  dword_4A9EAC = 0;
  dword_503510 = 0;
  result = dword_4A8D2C;
  dword_503500 = dword_4A8D2C;
  dword_456AF8 = 63;
  dword_4A7CFC = dword_4A8D2C;
  return result;
}
// 44509C: using guessed type int dword_44509C;
// 4450A0: using guessed type int dword_4450A0;
// 456AF8: using guessed type int dword_456AF8;
// 456BF0: using guessed type int screenPtr;
// 464F14: using guessed type int dword_464F14;
// 464F20: using guessed type int dword_464F20;
// 481E00: using guessed type int dword_481E00;
// 481E20: using guessed type int textureTemp[];
// 4A7A24: using guessed type int dword_4A7A24;
// 4A7CD0: using guessed type int dword_4A7CD0;
// 4A7CFC: using guessed type int dword_4A7CFC;
// 4A8D2C: using guessed type int dword_4A8D2C;
// 4A9EA8: using guessed type int dword_4A9EA8;
// 4A9EAC: using guessed type int dword_4A9EAC;
// 503500: using guessed type int dword_503500;
// 503510: using guessed type int dword_503510;
// 503514: using guessed type int dword_503514;
// 50A160: using guessed type int dword_50A160;
// 50A170: using guessed type int dword_50A170;

//----- (00405430) --------------------------------------------------------
int sub_405430()
{
  int v0; // edx@1
  signed int v1; // eax@1
  char *v2; // edi@2
  const void *v3; // esi@2
  long double v4; // st7@3
  unsigned __int64 v5; // rax@3
  int v6; // esi@3
  int result; // eax@3
  unsigned int v8; // eax@4
  bool v9; // sf@6
  unsigned __int8 v10; // of@6

  v0 = dword_464F14;
  v1 = 0;
  dword_481BE8 = 0;
  do
  {
    v2 = (char *)&unk_481F20 + 256 * v1;
    v3 = (const void *)((v1++ << 9) + v0 + 160);
    memcpy(v2, v3, 0x100u);
    dword_481BE8 = v1;
  }
  while ( v1 < 200 );
  v4 = *(float *)&dword_4450A0 * 0.01745329251994444;
  dword_50A170 = screenPtr + 32;
  v5 = (unsigned __int64)(51200.0 / (sin(v4) * 200.0));
  v6 = v5;
  dword_481E00 = v5;
  dword_503514 = (unsigned __int64)(cos(v4) * 170.0);
  result = 200 * v5;
  dword_4A7CD0 = 200 * v6;
  dword_481BE8 = 0;
  do
  {
    v8 = result & 0xFFFFFF00;
    dword_464F20 = v8;
    if ( (signed int)v8 > 51456 )
    {
      v8 = 51456;
      dword_464F20 = 51456;
    }
    dword_4A7A24 = (signed int)(dword_503514 * v8) >> 16;
    sub_43B030(dword_50A170, ((signed int)(dword_503514 * v8) >> 17) - 10);
    sub_43B370(dword_50A170 + (dword_4A7A24 >> 1), (int)((char *)&unk_48E720 - dword_464F20), 255 - dword_4A7A24);
    sub_43B050(dword_50A170, (dword_4A7A24 >> 1) - dword_4A7A24 + 255);
    dword_50A170 += 320;
    result = dword_4A7CD0 - dword_481E00;
    v10 = __OFSUB__(dword_481BE8 + 1, 200);
    v9 = dword_481BE8 - 199 < 0;
    dword_4A7CD0 -= dword_481E00;
    ++dword_481BE8;
  }
  while ( v9 ^ v10 );
  return result;
}
// 4450A0: using guessed type int dword_4450A0;
// 456BF0: using guessed type int screenPtr;
// 464F14: using guessed type int dword_464F14;
// 464F20: using guessed type int dword_464F20;
// 481BE8: using guessed type int dword_481BE8;
// 481E00: using guessed type int dword_481E00;
// 4A7A24: using guessed type int dword_4A7A24;
// 4A7CD0: using guessed type int dword_4A7CD0;
// 503514: using guessed type int dword_503514;
// 50A170: using guessed type int dword_50A170;

//----- (004055A0) --------------------------------------------------------
int sub_4055A0()
{
  _UNKNOWN *v0; // ecx@1
  signed int v1; // eax@1
  signed int v2; // ST3C_4@2
  signed int v3; // edx@2
  double v4; // st7@2
  signed int v5; // ST3C_4@2
  signed int v6; // edx@2
  double v7; // st7@2
  signed int v8; // ST3C_4@2
  signed int v9; // edx@2
  double v10; // st7@2
  signed int v11; // ST3C_4@2
  signed int v12; // edx@2
  double v13; // st7@2
  signed int v14; // ST3C_4@2
  signed int v15; // edx@2
  double v16; // st7@2
  signed int v17; // ST3C_4@2
  signed int v18; // edx@2
  double v19; // st7@2
  signed int v20; // ST3C_4@2
  signed int v21; // edx@2
  double v22; // st7@2
  signed int v23; // ST3C_4@2
  signed int v24; // edx@2
  double v25; // st7@2
  signed int v26; // ST3C_4@2
  signed int v27; // edx@2
  double v28; // st7@2
  signed int v29; // ST3C_4@2
  signed int v30; // edx@2
  double v31; // st7@2
  signed int v32; // ST3C_4@2
  signed int v33; // edx@2
  double v34; // st7@2
  signed int v35; // ST3C_4@2
  signed int v36; // edx@2
  double v37; // st7@2
  signed int v38; // ST3C_4@2
  signed int v39; // edx@2
  double v40; // st7@2
  signed int v41; // ST3C_4@2
  signed int v42; // edx@2
  double v43; // st7@2
  signed int v44; // ST3C_4@2
  signed int v45; // edx@2
  double v46; // st7@2
  signed int v47; // ST3C_4@2
  signed int v48; // edx@2
  double v49; // st7@2
  signed int v50; // ST3C_4@2
  signed int v51; // edx@2
  double v52; // st7@2
  signed int v53; // ST3C_4@2
  signed int v54; // edx@2
  double v55; // st7@2
  signed int v56; // ST3C_4@2
  signed int v57; // edx@2
  double v58; // st7@2
  signed int v59; // ST3C_4@2
  signed int v60; // edx@2
  double v61; // st7@2
  signed int v62; // ST3C_4@2
  signed int v63; // edx@2
  int v64; // ebx@3
  signed int v65; // eax@3
  int v66; // edx@3
  void *v67; // edi@4
  const void *v68; // esi@4
  signed int v69; // eax@5
  int v70; // edx@5
  void *v71; // edi@6
  const void *v72; // esi@6
  _UNKNOWN *v73; // edx@7
  signed int v74; // eax@7
  void *v75; // ebp@8
  unsigned __int8 v76; // di@10
  signed int v77; // esi@10
  long double v78; // st7@12
  int v79; // ebp@12
  signed int v80; // ebx@12
  unsigned __int64 v81; // rax@13
  char *v82; // esi@13
  void *v83; // edi@13
  signed int v84; // esi@14
  unsigned int v85; // ebx@15
  void *v86; // edi@15
  int v87; // eax@16
  signed int v88; // esi@16
  unsigned int v89; // eax@17
  double v90; // st7@21
  int v91; // eax@21
  double v92; // st7@24
  signed int v93; // ST3C_4@27
  signed int v94; // edx@27
  double v95; // st7@27
  signed int v96; // ST3C_4@27
  signed int v97; // edx@27
  double v98; // st7@27
  signed int v99; // ST3C_4@27
  signed int v100; // edx@27
  double v101; // st7@27
  signed int v102; // ST3C_4@27
  signed int v103; // edx@27
  double v104; // st7@27
  signed int v105; // ST3C_4@27
  signed int v106; // edx@27
  double v107; // st7@27
  signed int v108; // ST3C_4@27
  signed int v109; // edx@27
  double v110; // st7@27
  signed int v111; // ST3C_4@27
  signed int v112; // edx@27
  double v113; // st7@27
  signed int v114; // ST3C_4@27
  signed int v115; // edx@27
  double v116; // st7@27
  signed int v117; // ST3C_4@27
  signed int v118; // edx@27
  double v119; // st7@27
  signed int v120; // ST3C_4@27
  signed int v121; // edx@27
  double v122; // st7@27
  signed int v123; // ST3C_4@27
  signed int v124; // edx@27
  double v125; // st7@27
  signed int v126; // ST3C_4@27
  signed int v127; // edx@27
  double v128; // st7@27
  signed int v129; // ST3C_4@27
  signed int v130; // edx@27
  double v131; // st7@27
  signed int v132; // ST3C_4@27
  signed int v133; // edx@27
  double v134; // st7@27
  signed int v135; // ST3C_4@27
  signed int v136; // edx@27
  double v137; // st7@27
  signed int v138; // ST3C_4@27
  signed int v139; // edx@27
  double v140; // st7@27
  signed int v141; // ST3C_4@27
  signed int v142; // edx@27
  double v143; // st7@27
  signed int v144; // ST3C_4@27
  signed int v145; // edx@27
  double v146; // st7@27
  signed int v147; // ST3C_4@27
  signed int v148; // edx@27
  double v149; // st7@27
  signed int v150; // ST3C_4@27
  signed int v151; // edx@27
  double v152; // st7@27
  signed int v153; // ST3C_4@27
  signed int v154; // edx@27
  signed int v155; // eax@28
  int v156; // edx@28
  void *v157; // edi@29
  const void *v158; // esi@29
  signed int v159; // esi@30
  long double v160; // st7@31
  unsigned __int8 v161; // di@33
  signed int v162; // esi@33
  int v163; // ecx@35
  int v164; // edi@35
  int v165; // esi@35
  int v166; // edx@35
  int v167; // ecx@35
  signed int v168; // eax@35
  signed int v169; // ebx@37
  int v170; // ebp@37
  signed int v171; // ecx@37
  int v172; // eax@39
  int v173; // ecx@39
  int v174; // ecx@45
  bool v175; // zf@45
  double v176; // st7@47
  int v177; // ecx@47
  int result; // eax@54
  int v179; // [sp+14h] [bp-2Ch]@35
  signed int v180; // [sp+18h] [bp-28h]@30
  float v181; // [sp+18h] [bp-28h]@32
  signed int v182; // [sp+1Ch] [bp-24h]@37
  signed int v183; // [sp+20h] [bp-20h]@35
  int v184; // [sp+24h] [bp-1Ch]@35
  int v185; // [sp+28h] [bp-18h]@37
  int v186; // [sp+2Ch] [bp-14h]@37
  int v187; // [sp+30h] [bp-10h]@35
  int v188; // [sp+34h] [bp-Ch]@39
  double v189; // [sp+38h] [bp-8h]@33
  int v190; // [sp+38h] [bp-8h]@39

  v0 = &unk_4B3404;
  v1 = (signed int)byte_4A9BA1;
  if ( dword_456AA0 == 64 )
  {
    do
    {
      v2 = *(byte *)v1;
      v3 = *(byte *)(v1 + 1);
      *((float *)v0 - 1) = (double)*(byte *)(v1 - 1) * 0.011111111;
      v4 = (double)v2;
      v5 = v3;
      v6 = *(byte *)(v1 + 2);
      *(float *)v0 = v4 * 0.011111111;
      v7 = (double)v5;
      v8 = v6;
      v9 = *(byte *)(v1 + 3);
      *((float *)v0 + 1) = v7 * 0.011111111;
      v10 = (double)v8;
      v11 = v9;
      v12 = *(byte *)(v1 + 4);
      *((float *)v0 + 2) = v10 * 0.011111111;
      v13 = (double)v11;
      v14 = v12;
      v15 = *(byte *)(v1 + 5);
      *((float *)v0 + 3) = v13 * 0.011111111;
      v16 = (double)v14;
      v17 = v15;
      v18 = *(byte *)(v1 + 6);
      *((float *)v0 + 4) = v16 * 0.011111111;
      v19 = (double)v17;
      v20 = v18;
      v21 = *(byte *)(v1 + 7);
      *((float *)v0 + 5) = v19 * 0.011111111;
      v22 = (double)v20;
      v23 = v21;
      v24 = *(byte *)(v1 + 8);
      *((float *)v0 + 6) = v22 * 0.011111111;
      v25 = (double)v23;
      v26 = v24;
      v27 = *(byte *)(v1 + 9);
      *((float *)v0 + 7) = v25 * 0.011111111;
      v28 = (double)v26;
      v29 = v27;
      v30 = *(byte *)(v1 + 10);
      *((float *)v0 + 8) = v28 * 0.011111111;
      v31 = (double)v29;
      v32 = v30;
      v33 = *(byte *)(v1 + 11);
      *((float *)v0 + 9) = v31 * 0.011111111;
      v34 = (double)v32;
      v35 = v33;
      v36 = *(byte *)(v1 + 12);
      *((float *)v0 + 10) = v34 * 0.011111111;
      v37 = (double)v35;
      v38 = v36;
      v39 = *(byte *)(v1 + 13);
      *((float *)v0 + 11) = v37 * 0.011111111;
      v40 = (double)v38;
      v41 = v39;
      v42 = *(byte *)(v1 + 14);
      *((float *)v0 + 12) = v40 * 0.011111111;
      v43 = (double)v41;
      v44 = v42;
      v45 = *(byte *)(v1 + 15);
      *((float *)v0 + 13) = v43 * 0.011111111;
      *((float *)v0 + 14) = (double)v44 * 0.011111111;
      v46 = (double)v45;
      v47 = *(byte *)(v1 + 16);
      v48 = *(byte *)(v1 + 17);
      v1 += 24;
      *((float *)v0 + 15) = v46 * 0.011111111;
      v0 = (char *)v0 + 96;
      v49 = (double)v47;
      v50 = v48;
      v51 = *(byte *)(v1 - 6);
      *((float *)v0 - 8) = v49 * 0.011111111;
      v52 = (double)v50;
      v53 = v51;
      v54 = *(byte *)(v1 - 5);
      *((float *)v0 - 7) = v52 * 0.011111111;
      v55 = (double)v53;
      v56 = v54;
      v57 = *(byte *)(v1 - 4);
      *((float *)v0 - 6) = v55 * 0.011111111;
      v58 = (double)v56;
      v59 = v57;
      v60 = *(byte *)(v1 - 3);
      *((float *)v0 - 5) = v58 * 0.011111111;
      v61 = (double)v59;
      v62 = v60;
      v63 = *(byte *)(v1 - 2);
      *((float *)v0 - 4) = v61 * 0.011111111;
      *((float *)v0 - 3) = (double)v62 * 0.011111111;
      *((float *)v0 - 2) = (double)v63 * 0.011111111;
    }
    while ( v1 < (signed int)((char *)&dword_4A9EA0 + 1) );
    v64 = dword_464F14;
    v65 = (signed int)textureTemp;
    v66 = dword_464F14 + 160;
    do
    {
      v67 = (void *)v65;
      v68 = (const void *)v66;
      v65 += 256;
      v66 += 512;
      memcpy(v67, v68, 0x100u);
    }
    while ( v65 < (signed int)&unk_48E620 );
    v69 = (signed int)&unk_48E720;
    v70 = v64 + 96;
    do
    {
      v71 = (void *)v69;
      v72 = (const void *)v70;
      v69 += 64;
      v70 += 512;
      memcpy(v71, v72, 0x40u);
    }
    while ( v69 < (signed int)&unk_491920 );
    v73 = &unk_481F20;
    v74 = (signed int)&unk_48E420;
    do
    {
      memcpy(&unk_48E620, (const void *)(v74 + 256), 0x100u);
      memcpy((void *)(v74 + 256), (char *)v73 - 256, 0x100u);
      memcpy((char *)v73 - 256, &unk_48E620, 0x100u);
      memcpy(&unk_48E620, (const void *)v74, 0x100u);
      memcpy((void *)v74, v73, 0x100u);
      memcpy(v73, &unk_48E620, 0x100u);
      memcpy(&unk_48E620, (const void *)(v74 - 256), 0x100u);
      memcpy((void *)(v74 - 256), (char *)v73 + 256, 0x100u);
      memcpy((char *)v73 + 256, &unk_48E620, 0x100u);
      memcpy(&unk_48E620, (const void *)(v74 - 512), 0x100u);
      memcpy((void *)(v74 - 512), (char *)v73 + 512, 0x100u);
      memcpy((char *)v73 + 512, &unk_48E620, 0x100u);
      v75 = (char *)v73 + 768;
      memcpy(&unk_48E620, (const void *)(v74 - 768), 0x100u);
      memcpy((void *)(v74 - 768), (char *)v73 + 768, 0x100u);
      v74 -= 1280;
      v73 = (char *)v73 + 1280;
      memcpy(v75, &unk_48E620, 0x100u);
    }
    while ( v74 > (signed int)&unk_488020 );
    memset(&unk_48E620, 0, 0x100u);
    dword_4A9EAC = 0;
    dword_44509C = 1063675494;
    dword_4450A0 = 1119092736;
    dword_4AA504 = 64;
    while ( 1 )
    {
      v76 = 0;
      v77 = (signed int)&unk_4B3404;
      do
      {
        setPaletteAndGetValue(
          v76,
          (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)(v77 - 4)),
          (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)v77),
          (unsigned __int64)(*(float *)&dword_4450A0 * *(float *)(v77 + 4)));
        v77 += 12;
        ++v76;
      }
      while ( v77 < (signed int)&obstacleBpk );
      setMusicVolume(728 * (unsigned __int64)*(float *)&dword_4450A0);
      v78 = *(float *)&dword_4450A0 * 0.01745329251994444;
      dword_50A170 = screenPtr + 64;
      dword_481E00 = (unsigned __int64)(51200.0 / (sin(v78) * 200.0));
      v79 = 0;
      dword_503514 = (unsigned __int64)(cos(v78) * 170.0);
      dword_4A7CD0 = 200 * dword_481E00;
      v80 = 0;
      do
      {
        v81 = (unsigned __int64)(*(float *)&dword_4450A0 * 0.7142857142857143);
        v82 = (char *)&unk_48E760 + v80 - v81;
        v83 = (void *)(dword_50A170 + v79 - 64);
        memcpy(v83, v82, 4 * ((unsigned int)v81 >> 2));
        v80 += 64;
        v79 += 320;
        memcpy((char *)v83 + 4 * ((unsigned int)v81 >> 2), &v82[4 * ((unsigned int)v81 >> 2)], v81 & 3);
      }
      while ( v80 < 12800 );
      v84 = 0;
      do
      {
        v85 = dword_4AA504 - (unsigned __int64)(0.7142857142857143 * *(float *)&dword_4450A0);
        v86 = (void *)(v84 - (unsigned __int64)(*(float *)&dword_4450A0 * -0.7142857142857143) + dword_50A170 - 64);
        memset(v86, 0, 4 * (v85 >> 2));
        v84 += 320;
        memset((char *)v86 + 4 * (v85 >> 2), 0, v85 & 3);
      }
      while ( v84 < 64000 );
      dword_4AA504 = (unsigned __int64)(*(float *)&dword_4450A0 * 0.7142857142857143);
      v87 = dword_4A7CD0;
      v88 = 200;
      do
      {
        v89 = v87 & 0xFFFFFF00;
        dword_464F20 = v89;
        if ( (signed int)v89 > 51200 )
        {
          v89 = 51200;
          dword_464F20 = 51200;
        }
        dword_4A7A24 = (signed int)(dword_503514 * v89) >> 16;
        sub_43B030(dword_50A170, ((signed int)(dword_503514 * v89) >> 17) - 10);
        sub_43B370(
          dword_50A170 + (dword_4A7A24 >> 1),
          (int)((char *)&textureTemp[0] + dword_464F20 - 1),
          255 - dword_4A7A24);
        sub_43B050(dword_50A170, (dword_4A7A24 >> 1) - dword_4A7A24 + 255);
        v87 = dword_4A7CD0 - dword_481E00;
        --v88;
        dword_50A170 += 320;
        dword_4A7CD0 -= dword_481E00;
      }
      while ( v88 );
      if ( *(float *)&dword_4450A0 == 1.0 )
        break;
      v90 = *(float *)&dword_44509C;
      v91 = 0;
      if ( dword_4A9EAC >= 0 )
      {
        do
        {
          v90 = v90 * 1.02;
          ++v91;
        }
        while ( v91 <= dword_4A9EAC );
        *(float *)&dword_44509C = v90;
      }
      v92 = *(float *)&dword_4450A0 - v90;
      *(float *)&dword_4450A0 = v92;
      if ( v92 < 1.0 )
        dword_4450A0 = 1065353216;
      dword_4A9EAC = 0;
      wait();
    }
  }
  else
  {
    do
    {
      v93 = *(byte *)v1;
      v94 = *(byte *)(v1 + 1);
      *((float *)v0 - 1) = (double)*(byte *)(v1 - 1) * 0.0066666668;
      v95 = (double)v93;
      v96 = v94;
      v97 = *(byte *)(v1 + 2);
      *(float *)v0 = v95 * 0.0066666668;
      v98 = (double)v96;
      v99 = v97;
      v100 = *(byte *)(v1 + 3);
      *((float *)v0 + 1) = v98 * 0.0066666668;
      v101 = (double)v99;
      v102 = v100;
      v103 = *(byte *)(v1 + 4);
      *((float *)v0 + 2) = v101 * 0.0066666668;
      v104 = (double)v102;
      v105 = v103;
      v106 = *(byte *)(v1 + 5);
      *((float *)v0 + 3) = v104 * 0.0066666668;
      v107 = (double)v105;
      v108 = v106;
      v109 = *(byte *)(v1 + 6);
      *((float *)v0 + 4) = v107 * 0.0066666668;
      v110 = (double)v108;
      v111 = v109;
      v112 = *(byte *)(v1 + 7);
      *((float *)v0 + 5) = v110 * 0.0066666668;
      v113 = (double)v111;
      v114 = v112;
      v115 = *(byte *)(v1 + 8);
      *((float *)v0 + 6) = v113 * 0.0066666668;
      v116 = (double)v114;
      v117 = v115;
      v118 = *(byte *)(v1 + 9);
      *((float *)v0 + 7) = v116 * 0.0066666668;
      v119 = (double)v117;
      v120 = v118;
      v121 = *(byte *)(v1 + 10);
      *((float *)v0 + 8) = v119 * 0.0066666668;
      v122 = (double)v120;
      v123 = v121;
      v124 = *(byte *)(v1 + 11);
      *((float *)v0 + 9) = v122 * 0.0066666668;
      v125 = (double)v123;
      v126 = v124;
      v127 = *(byte *)(v1 + 12);
      *((float *)v0 + 10) = v125 * 0.0066666668;
      v128 = (double)v126;
      v129 = v127;
      v130 = *(byte *)(v1 + 13);
      *((float *)v0 + 11) = v128 * 0.0066666668;
      v131 = (double)v129;
      v132 = v130;
      v133 = *(byte *)(v1 + 14);
      *((float *)v0 + 12) = v131 * 0.0066666668;
      v134 = (double)v132;
      v135 = v133;
      v136 = *(byte *)(v1 + 15);
      *((float *)v0 + 13) = v134 * 0.0066666668;
      *((float *)v0 + 14) = (double)v135 * 0.0066666668;
      v137 = (double)v136;
      v138 = *(byte *)(v1 + 16);
      v139 = *(byte *)(v1 + 17);
      v1 += 24;
      *((float *)v0 + 15) = v137 * 0.0066666668;
      v0 = (char *)v0 + 96;
      v140 = (double)v138;
      v141 = v139;
      v142 = *(byte *)(v1 - 6);
      *((float *)v0 - 8) = v140 * 0.0066666668;
      v143 = (double)v141;
      v144 = v142;
      v145 = *(byte *)(v1 - 5);
      *((float *)v0 - 7) = v143 * 0.0066666668;
      v146 = (double)v144;
      v147 = v145;
      v148 = *(byte *)(v1 - 4);
      *((float *)v0 - 6) = v146 * 0.0066666668;
      v149 = (double)v147;
      v150 = v148;
      v151 = *(byte *)(v1 - 3);
      *((float *)v0 - 5) = v149 * 0.0066666668;
      v152 = (double)v150;
      v153 = v151;
      v154 = *(byte *)(v1 - 2);
      *((float *)v0 - 4) = v152 * 0.0066666668;
      *((float *)v0 - 3) = (double)v153 * 0.0066666668;
      *((float *)v0 - 2) = (double)v154 * 0.0066666668;
    }
    while ( v1 < (signed int)((char *)&dword_4A9EA0 + 1) );
    v155 = (signed int)textureTemp;
    v156 = dword_464F14 + 96;
    do
    {
      v157 = (void *)v155;
      v158 = (const void *)v156;
      v155 += 320;
      v156 += 512;
      memcpy(v157, v158, 0x140u);
    }
    while ( v155 < (signed int)&unk_491820 );
    v159 = 0;
    v180 = 0;
    do
    {
      v160 = (double)v180 * 0.01046666666666667;
      *((_DWORD *)dword_46F204 + v159) = (unsigned __int64)(cos(v160) * 1024.0);
      *((_DWORD *)dword_4A6854 + v159++) = (unsigned __int64)(sin(v160) * 1024.0);
      v180 = v159;
    }
    while ( v159 < 600 );
    v181 = 8.0;
    do
    {
      v161 = 0;
      dword_4A9EAC = 0;
      dword_503510 = 0;
      wait();
      v162 = (signed int)&unk_4B3404;
      v189 = 150.0 - v181;
      do
      {
        setPaletteAndGetValue(
          v161,
          (unsigned __int64)(*(float *)(v162 - 4) * v189),
          (unsigned __int64)(*(float *)v162 * v189),
          (unsigned __int64)(*(float *)(v162 + 4) * v189));
        v162 += 12;
        ++v161;
      }
      while ( v162 < (signed int)&obstacleBpk );
      setMusicVolume(436 * (unsigned __int64)v189);
      v179 = screenPtr;
      v163 = 4 * (599 - ((unsigned __int64)v181 - 8));
      v164 = 2 * *(_DWORD *)((char *)dword_4A6854 + v163);
      v165 = 2 * *(_DWORD *)((char *)dword_46F204 + v163);
      v166 = 2 * *(_DWORD *)((char *)dword_4A6854 + v163) >> 1;
      v167 = 2 * *(_DWORD *)((char *)dword_46F204 + v163) >> 1;
      v184 = v166;
      v168 = v166;
      v187 = v167;
      v183 = 100;
      while ( 1 )
      {
        v169 = v168 >> 10;
        v170 = v167 >> 10;
        v186 = v165 + v167;
        v171 = v187;
        v185 = v164 + v168;
        v182 = 160;
        while ( 1 )
        {
          v188 = v165 + v171;
          v172 = (v171 >> 10) - v169;
          v173 = v170 + (v166 >> 10);
          v190 = v164 + v166;
          if ( v172 <= 0 || v172 >= 319 || v173 <= 0 || v173 >= 199 )
            sub_43C450(v179);
          else
            sub_43C470(v179, (int)((char *)&textureTemp[80 * v173] + v172));
          v174 = v179 + 2;
          v175 = v182 == 1;
          v179 += 2;
          --v182;
          if ( v175 )
            break;
          v166 = v190;
          v171 = v188;
        }
        v175 = v183 == 1;
        v179 = v174 + 320;
        --v183;
        if ( v175 )
          break;
        v166 = v184;
        v167 = v186;
        v168 = v185;
      }
      v176 = v181;
      v177 = 0;
      if ( dword_4A9EAC >= 0 )
      {
        do
        {
          if ( v176 < 150.0 )
            v176 = v176 * 1.04;
          ++v177;
        }
        while ( v177 <= dword_4A9EAC );
        v181 = v176;
      }
    }
    while ( v176 <= 150.0 && v176 != 150.0 );
  }
  dword_4A9EAC = 0;
  dword_503510 = 0;
  result = dword_4A8D2C;
  dword_503500 = dword_4A8D2C;
  dword_4A7CFC = dword_4A8D2C;
  return result;
}
// 44509C: using guessed type int dword_44509C;
// 4450A0: using guessed type int dword_4450A0;
// 456AA0: using guessed type int dword_456AA0;
// 456BF0: using guessed type int screenPtr;
// 464F14: using guessed type int dword_464F14;
// 464F20: using guessed type int dword_464F20;
// 481E00: using guessed type int dword_481E00;
// 481E20: using guessed type int textureTemp[];
// 4A7A24: using guessed type int dword_4A7A24;
// 4A7CD0: using guessed type int dword_4A7CD0;
// 4A7CFC: using guessed type int dword_4A7CFC;
// 4A8D2C: using guessed type int dword_4A8D2C;
// 4A9EA0: using guessed type int dword_4A9EA0;
// 4A9EAC: using guessed type int dword_4A9EAC;
// 4AA504: using guessed type int dword_4AA504;
// 503500: using guessed type int dword_503500;
// 503510: using guessed type int dword_503510;
// 503514: using guessed type int dword_503514;
// 50A170: using guessed type int dword_50A170;

//----- (00406100) --------------------------------------------------------
char sub_406100()
{
  signed int v0; // esi@1
  char v1; // al@2
  char result; // al@3
  int v3; // ecx@3
  int v4; // ecx@5
  int v5; // ST08_4@5
  int v6; // edi@5
  int v7; // eax@5
  bool v8; // zf@5
  bool v9; // sf@7
  unsigned __int8 v10; // of@7
  int v11; // edx@9
  int v12; // eax@11
  int v13; // [sp+0h] [bp-4h]@1

  v13 = 0;
  dword_479270 = 0;
  v0 = (signed int)&unk_479F00;
  do
  {
    v1 = *(byte *)v0;
    if ( *(byte *)v0 == 100 )
    {
      result = dword_481E08;
      v3 = v13++ + 1;
      if ( dword_481E08 < 3876 )
      {
        result = v3;
        if ( v3 < 20 )
        {
          sub_43AE80(v0 - 16, (int)((char *)dword_479690 + 204 * dword_464F18 + dword_503220), 4, 204);
          v4 = dword_50E560[dword_479268] << 16;
          v5 = (((dword_456AA0 >> 1) + dword_503220 + 57) << 16) - v4;
          v6 = dword_464F18 + 64;
          *(_DWORD *)(v0 - 32) = v4;
          *(_DWORD *)(v0 - 28) = 12845056;
          *(_DWORD *)(v0 - 24) = sub_43B290(v5, (signed int)&unk_460000);
          *(_DWORD *)(v0 - 20) = sub_43B290((v6 << 16) - *(_DWORD *)(v0 - 28), (signed int)&unk_460000);
          dword_481E08 += 4;
          v7 = dword_464F18 + 4;
          v8 = dword_464F18 == 72;
          *(byte *)v0 = 0;
          dword_464F18 = v7;
          if ( v8 )
          {
            dword_464F18 = 0;
            dword_503220 += 4;
          }
          result = dword_479268 + 1;
          v10 = __OFSUB__(dword_479268 + 1, 99);
          v8 = dword_479268 == 98;
          v9 = dword_479268++ - 98 < 0;
          if ( !((unsigned __int8)(v9 ^ v10) | v8) )
            dword_479268 = 0;
        }
      }
    }
    else
    {
      v11 = dword_5034F0;
      if ( (unsigned __int8)v1 + dword_5034F0 >= 70 )
      {
        if ( (signed int)(unsigned __int8)v1 < 70 )
        {
          *(_DWORD *)(v0 - 32) += *(_DWORD *)(v0 - 24) * (70 - (unsigned __int8)v1);
          if ( (signed int)(unsigned __int8)v1 < 70 )
            *(_DWORD *)(v0 - 28) += *(_DWORD *)(v0 - 20) * (70 - (unsigned __int8)v1);
        }
        *(byte *)v0 = 70;
LABEL_13:
        sub_43AE80(
          (int)((char *)Memory + 320 * ((*(_DWORD *)(v0 - 28) + 0x8000) >> 16) + ((*(_DWORD *)(v0 - 32) + 0x8000) >> 16)),
          v0 - 16,
          320,
          4);
        result = dword_479270++ + 1;
        goto LABEL_14;
      }
      *(byte *)v0 = dword_5034F0 + v1;
      if ( v11 > 0 )
      {
        v12 = *(_DWORD *)(v0 - 28);
        *(_DWORD *)(v0 - 32) += v11 * *(_DWORD *)(v0 - 24);
        *(_DWORD *)(v0 - 28) = v12 + v11 * *(_DWORD *)(v0 - 20);
      }
      sub_43AE80(
        (int)((char *)Memory + 320 * ((*(_DWORD *)(v0 - 28) + 0x8000) >> 16) + ((*(_DWORD *)(v0 - 32) + 0x8000) >> 16)),
        v0 - 16,
        320,
        4);
      result = *(byte *)v0;
      if ( *(byte *)v0 >= 0x46u )
        goto LABEL_13;
    }
LABEL_14:
    v0 += 33;
  }
  while ( v0 < 4725737 );
  return result;
}
// 456AA0: using guessed type int dword_456AA0;
// 464F18: using guessed type int dword_464F18;
// 479268: using guessed type int dword_479268;
// 479270: using guessed type int dword_479270;
// 481E08: using guessed type int dword_481E08;
// 503220: using guessed type int dword_503220;
// 5034F0: using guessed type int dword_5034F0;
// 50E560: using guessed type int dword_50E560[];

//----- (00406330) --------------------------------------------------------
int sub_406330()
{
  int v0; // edx@1
  int v1; // edi@1
  signed int v2; // esi@1
  int v3; // eax@4
  int v4; // ebp@4
  int v5; // ecx@4
  int v6; // ebp@4
  int v7; // ecx@4
  int v8; // eax@6
  int v9; // ecx@8
  int v10; // eax@9

  v0 = dword_5034F0;
  v1 = 0;
  v2 = (signed int)&unk_479EE8;
  do
  {
    if ( *(byte *)(v2 + 24) <= 0x46u )
    {
      if ( v0 > 0 )
      {
        v3 = v0 * dword_4A8AA0 + *(_DWORD *)(v2 + 4);
        v4 = v0 * *(_DWORD *)v2;
        v5 = *(_DWORD *)(v2 - 8);
        *(_DWORD *)(v2 + 4) = v3;
        v6 = v5 + v4;
        v7 = *(_DWORD *)(v2 - 4);
        *(_DWORD *)(v2 - 8) = v6;
        *(_DWORD *)(v2 - 4) = v7 + v0 * v3;
      }
      if ( *(_DWORD *)(v2 - 8) <= 0 )
      {
        v8 = -*(_DWORD *)v2;
        *(_DWORD *)(v2 - 8) = 0;
        *(_DWORD *)v2 = v8;
      }
      if ( *(_DWORD *)(v2 - 8) >= 20709376 )
      {
        v9 = -*(_DWORD *)v2;
        *(_DWORD *)(v2 - 8) = 20709376;
        *(_DWORD *)v2 = v9;
      }
      v10 = (*(_DWORD *)(v2 - 4) + 0x8000) >> 16;
      if ( v10 <= 196 )
      {
        sub_43AE80((int)((char *)Memory + 320 * v10 + ((*(_DWORD *)(v2 - 8) + 0x8000) >> 16)), v2 + 8, 320, 4);
        v0 = dword_5034F0;
      }
      else
      {
        *(byte *)(v2 + 24) = 70;
        ++v1;
      }
    }
    v2 += 33;
  }
  while ( v2 < (signed int)((char *)dword_481BD0 + 1) );
  return v1;
}
// 481BD0: using guessed type int dword_481BD0[];
// 4A8AA0: using guessed type int dword_4A8AA0;
// 5034F0: using guessed type int dword_5034F0;

//----- (00406410) --------------------------------------------------------
unsigned int __cdecl sub_406410(int a1, int a2, const char *a3)
{
  unsigned int v3; // esi@1
  unsigned int result; // eax@1
  int v5; // edi@2

  v3 = 0;
  result = strlen(a3);
  if ( result )
  {
    v5 = 6 * (272 * a2 + a1 + 205);
    do
    {
      sub_43B1F0(36 * (a3[v3++] - 32) + 4886880, 6, 6, (int)((char *)dword_479690 + v5));
      v5 += 6;
      result = strlen(a3);
    }
    while ( v3 < result );
  }
  return result;
}

//----- (004064A0) --------------------------------------------------------
signed int __cdecl sub_4064A0(int a1)
{
  void *v1; // eax@1
  void *v2; // eax@5
  signed int v3; // eax@9
  int v4; // edx@9
  const void *v5; // esi@10
  char *v6; // edi@10
  signed int v7; // eax@11
  signed int v8; // esi@13
  signed int v9; // eax@15
  signed int v10; // esi@15
  signed int v11; // edi@15
  signed int v12; // ecx@34
  signed int v13; // eax@36
  char *v14; // ecx@36
  int v15; // edi@38
  signed int v16; // esi@38
  int v17; // eax@41
  void *v18; // edx@41
  int v19; // ecx@41
  signed int result; // eax@48
  signed int v21; // [sp+8h] [bp-334h]@1
  int v22[102]; // [sp+Ch] [bp-330h]@35
  char v23; // [sp+1A4h] [bp-198h]@36

  v21 = 0;
  dword_503220 = 0;
  dword_464F18 = 0;
  dword_479268 = 0;
  dword_481E08 = 0;
  	//TODO correct
  //operator delete(0xFA00u);
  if ( !v1 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  Memory = v1;
  	//TODO correct
  //operator delete(0xFA00u);
  if ( !v2 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  dword_47926C = v2;
  v3 = 0;
  memset(Memory, 0, 0xFA00u);
  v4 = 0;
  do
  {
    v5 = (const void *)(dword_464F14 + v4 + 96);
    v6 = (char *)dword_47926C + v3;
    v3 += 320;
    v4 += 512;
    memcpy(v6, v5, 0x140u);
  }
  while ( v3 < 64000 );
  v7 = (signed int)&unk_479EE0;
  do
  {
    *(byte *)(v7 + 32) = 100;
    *(_DWORD *)v7 = 0;
    *(_DWORD *)(v7 + 4) = 0;
    *(_DWORD *)(v7 + 12) = 0;
    *(_DWORD *)(v7 + 8) = 0;
    v7 += 33;
  }
  while ( v7 < (signed int)&unk_481BC9 );
  v8 = (signed int)dword_50E560;
  do
  {
    v8 += 4;
    *(_DWORD *)(v8 - 4) = rand() % 316;
  }
  while ( v8 < (signed int)&unk_50E6F0 );
  copyBuffer2Screen(Memory, dword_47926C, 16000);
  copyBuffer2Screen((void *)screenPtr, Memory, 16000);
  sub_43C3E0(5u);
  loadMenuSoundEffect(5u, 17, 0, 0x10000, 163840);
  v9 = 0;
  memset(byte_45E0C0, 0, 0x100u);
  v10 = 0;
  dword_479270 = 0;
  v11 = 0;
  do
  {
    if ( v9 >= 968 && !v11 )
    {
      v11 = 1;
      sub_43C3E0(5u);
    }
    sub_418150();
    if ( byte_45E0DC || byte_45E15C || byte_45E0D5 || byte_45E0F1 )
      v10 = 1;
    if ( byte_45E0FB )
    {
      v10 = 1;
      v21 = 1;
    }
    if ( dword_464F68 == -1 && byte_45E0D5 == 1 )
      dword_464F68 = 1;
    dword_4A9EAC = 0;
    dword_503510 = 0;
    wait();
    copyBuffer2Screen((void *)(screenPtr + 20480), (char *)Memory + 20480, 10880);
    copyBuffer2Screen((char *)Memory + 20480, (char *)dword_47926C + 20480, 10880);
    sub_406100();
    dword_5034F0 = dword_4A9EAC;
    if ( dword_4A9EAC < 1 )
      dword_5034F0 = 1;
    v9 = dword_479270;
  }
  while ( (dword_479270 < 968 || !a1) && !v10 );
  memset(byte_45E0C0, 0, 0x100u);
  sub_43C3E0(5u);
  v12 = 0;
  do
  {
    v22[v12] = v12 / -25;
    ++v12;
  }
  while ( v12 < 102 );
  v13 = 102;
  v14 = &v23;
  do
  {
    v22[v13++] = *(_DWORD *)v14;
    v14 -= 4;
  }
  while ( v13 < 204 );
  dword_503220 = 0;
  dword_464F18 = 0;
  v15 = 0;
  dword_4A8AA0 = 13107;
  v16 = (signed int)&unk_479EEC;
  do
  {
    if ( *(byte *)(v16 + 20) != 100 )
      ++v15;
    *(_DWORD *)v16 = (v22[dword_503220] + rand() % 3) << 16;
    v17 = rand() % 4;
    v18 = dword_479690;
    v19 = 204 * dword_464F18;
    *(_DWORD *)(v16 - 4) = (v17 - 2) << 16;
    sub_43AE80(v16 + 4, (int)((char *)v18 + v19 + dword_503220), 4, 204);
    dword_464F18 += 4;
    if ( dword_464F18 == 76 )
    {
      dword_464F18 = 0;
      dword_503220 += 4;
    }
    v16 += 33;
  }
  while ( v16 < (signed int)((char *)&dword_481BD4 + 1) );
  loadMenuSoundEffect(5u, 21, 0, 0x10000, 163840);
  dword_4A9EAC = 0;
  dword_503510 = 0;
  wait();
  copyBuffer2Screen((void *)screenPtr, Memory, 16000);
  copyBuffer2Screen(Memory, dword_47926C, 16000);
  while ( sub_406330() < v15 )
  {
    dword_5034F0 = dword_4A9EAC;
    if ( dword_4A9EAC < 1 )
      dword_5034F0 = 1;
    dword_4A9EAC = 0;
    dword_503510 = 0;
    wait();
    copyBuffer2Screen((void *)screenPtr, Memory, 16000);
    copyBuffer2Screen(Memory, dword_47926C, 16000);
  }
  sub_43C3E0(5u);
  copyBuffer2Screen((void *)screenPtr, dword_47926C, 16000);
  free(Memory);
  free(dword_47926C);
  dword_4A9EAC = 0;
  dword_503510 = 0;
  dword_503500 = dword_4A8D2C;
  result = v21;
  dword_4A7CFC = dword_4A8D2C;
  if ( v21 )
    byte_45E0FB = 1;
  return result;
}


//----- (004069D0) --------------------------------------------------------
signed int __cdecl sub_4069D0(char a1)
{
  int v1; // edi@2
  int v2; // ecx@3
  __int16 v3; // si@3
  __int16 v4; // ax@3
  int v5; // ebp@4
  bool v6; // sf@17
  unsigned __int8 v7; // of@17
  __int16 v9; // ax@20
  int v10; // [sp+10h] [bp-8h]@3
  signed int v11; // [sp+14h] [bp-4h]@4

  if ( isMultiplayerGame )
  {
    nullsub_1();
    v1 = 0;
    if ( dword_508D24 > 0 )
    {
      while ( 2 )
      {
        v2 = dword_45DC30[v1];
        v3 = *(_WORD *)v2;
        v10 = 0;
        v4 = *(_WORD *)v2 - 2;
        do
        {
          v5 = 0;
          v11 = 2;
          do
          {
            if ( *(byte *)((v3 & 0xFFF) + v2 + 4) == a1 )
              ++v5;
            if ( *(byte *)(((v4 + 1) & 0xFFF) + v2 + 4) == a1 )
              ++v5;
            if ( *(byte *)((v4 & 0xFFF) + v2 + 4) == a1 )
              ++v5;
            if ( *(byte *)(((v4 - 1) & 0xFFF) + v2 + 4) == a1 )
              ++v5;
            if ( *(byte *)(((v4 - 2) & 0xFFF) + v2 + 4) == a1 )
              ++v5;
            v3 -= 5;
            v4 -= 5;
            --v11;
          }
          while ( v11 );
          if ( v5 == 9 )
          {
            v9 = 10 * v10;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - 10 * (_WORD)v10) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 1) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 2) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 3) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 4) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 5) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 6) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 7) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - v9 - 8) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            *(byte *)(((*(_WORD *)dword_45DC30[v1] - 10 * (_WORD)v10 - 9) & 0xFFF) + dword_45DC30[v1] + 4) = 0;
            return 1;
          }
          v7 = __OFSUB__(v10 + 1, 10);
          v6 = v10++ - 9 < 0;
        }
        while ( v6 ^ v7 );
        ++v1;
        if ( v1 < dword_508D24 )
          continue;
        break;
      }
    }
  }
  return 0;
}
// 45DC30: using guessed type int dword_45DC30[];
// 45EA04: using guessed type int isMultiplayerGame;
// 508D24: using guessed type int dword_508D24;

//----- (00406BE0) --------------------------------------------------------
void __cdecl sub_406BE0(char a1)
{
  if ( isMultiplayerGame )
  {
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a1;
    nullsub_1();
  }
}
// 45E064: using guessed type int dword_45E064;
// 45EA04: using guessed type int isMultiplayerGame;

//----- (00406D30) --------------------------------------------------------
int __cdecl sub_406D30(int a1)
{
  void *v1; // eax@1
  void *v2; // eax@5
  signed int v3; // eax@9
  int v4; // edx@9
  const void *v5; // esi@10
  char *v6; // edi@10
  signed int v7; // eax@11
  signed int v8; // esi@13
  int v9; // esi@15
  signed int v10; // edi@15
  signed int v11; // eax@20
  int v12; // ecx@21
  int v13; // edx@21
  char v14; // al@24
  signed int v15; // ecx@39
  signed int v16; // eax@41
  char *v17; // ecx@41
  int v18; // edi@43
  signed int v19; // esi@43
  int v20; // eax@46
  int v21; // ebp@46
  int v22; // ecx@46
  int result; // eax@53
  int v24[102]; // [sp+8h] [bp-330h]@40
  char v25; // [sp+1A0h] [bp-198h]@41

  dword_4A7CF4 = 0;
  dword_503220 = 0;
  dword_464F18 = 0;
  dword_479268 = 0;
  dword_481E08 = 0;
  	//TODO correct
  //operator delete(0xFA00u);
  if ( !v1 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  Memory = v1;
  	//TODO correct
  //operator delete(0xFA00u);
  if ( !v2 )
  {
    freeMusic();
    setWindowCaption();
    printf("DEATH RALLY Error: Cannot allocate memory!\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    if ( isMultiplayerGame )
      nullsub_1();
    exit(112);
  }
  dword_47926C = v2;
  v3 = 0;
  memset(Memory, 0, 0xFA00u);
  v4 = 0;
  do
  {
    v5 = (const void *)(dword_464F14 + v4 + 96);
    v6 = (char *)dword_47926C + v3;
    v3 += 320;
    v4 += 512;
    memcpy(v6, v5, 0x140u);
  }
  while ( v3 < 64000 );
  v7 = (signed int)&unk_479EE0;
  do
  {
    *(byte *)(v7 + 32) = 100;
    *(_DWORD *)v7 = 0;
    *(_DWORD *)(v7 + 4) = 0;
    *(_DWORD *)(v7 + 12) = 0;
    *(_DWORD *)(v7 + 8) = 0;
    v7 += 33;
  }
  while ( v7 < (signed int)&unk_481BC9 );
  v8 = (signed int)dword_50E560;
  do
  {
    v8 += 4;
    *(_DWORD *)(v8 - 4) = rand() % 316;
  }
  while ( v8 < (signed int)&unk_50E6F0 );
  copyBuffer2Screen(Memory, dword_47926C, 16000);
  copyBuffer2Screen((void *)screenPtr, Memory, 16000);
  sub_43C3E0(5u);
  loadMenuSoundEffect(5u, 17, 0, 0x10000, 163840);
  memset(byte_45E0C0, 0, 0x100u);
  v9 = 0;
  dword_479270 = 0;
  v10 = 0;
  do
  {
    if ( dword_479270 >= 968 )
    {
      if ( !v10 )
      {
        v10 = 1;
        sub_43C3E0(5u);
      }
      if ( a1 )
      {
        if ( a1 == 1 )
        {
          if ( sub_4069D0(99) )
            v9 = 1;
          if ( sub_4069D0(98) )
          {
            v9 = 1;
            dword_464F68 = 1;
            v14 = 98;
            goto LABEL_33;
          }
        }
      }
      else
      {
        sub_418150();
        v11 = 0;
        do
        {
          v12 = (unsigned __int8)byte_45E0C3[v11]
              + (unsigned __int8)byte_45E0C1[v11]
              + (unsigned __int8)byte_45E0C0[v11];
          v13 = v9 + (unsigned __int8)byte_45E0C2[v11];
          v11 += 4;
          v9 = v13 + v12;
        }
        while ( v11 < 256 );
        if ( dword_464F68 == -1 )
        {
          if ( byte_45E0D5 != 1 )
            goto LABEL_32;
          dword_464F68 = 1;
          v14 = 98;
          goto LABEL_33;
        }
      }
    }
    if ( dword_464F68 != 1 )
    {
LABEL_32:
      v14 = 99;
      goto LABEL_33;
    }
    v14 = 98;
LABEL_33:
    if ( !a1 && v9 )
      sub_406BE0(v14);
    dword_4A9EAC = 0;
    dword_503510 = 0;
    wait();
    copyBuffer2Screen((void *)(screenPtr + 20480), (char *)Memory + 20480, 10880);
    copyBuffer2Screen((char *)Memory + 20480, (char *)dword_47926C + 20480, 10880);
    sub_406100();
    dword_5034F0 = dword_4A9EAC;
    if ( dword_4A9EAC < 1 )
      dword_5034F0 = 1;
  }
  while ( !v9 );
  memset(byte_45E0C0, 0, 0x100u);
  sub_43C3E0(5u);
  v15 = 0;
  do
  {
    v24[v15] = v15 / -25;
    ++v15;
  }
  while ( v15 < 102 );
  v16 = 102;
  v17 = &v25;
  do
  {
    v24[v16++] = *(_DWORD *)v17;
    v17 -= 4;
  }
  while ( v16 < 204 );
  dword_503220 = 0;
  dword_464F18 = 0;
  v18 = 0;
  dword_4A8AA0 = 13107;
  v19 = (signed int)&unk_479EEC;
  do
  {
    if ( *(byte *)(v19 + 20) != 100 )
      ++v18;
    *(_DWORD *)v19 = (v24[dword_503220] + rand() % 3) << 16;
    v20 = rand() % 4;
    v21 = dword_503220;
    v22 = 204 * dword_464F18;
    *(_DWORD *)(v19 - 4) = (v20 - 2) << 16;
    sub_43AE80(v19 + 4, (int)((char *)dword_479690 + v22 + v21), 4, 204);
    dword_464F18 += 4;
    if ( dword_464F18 == 76 )
    {
      dword_464F18 = 0;
      dword_503220 += 4;
    }
    v19 += 33;
  }
  while ( v19 < 4725717 );
  loadMenuSoundEffect(5u, 21, 0, 0x10000, 163840);
  dword_4A9EAC = 0;
  dword_503510 = 0;
  wait();
  copyBuffer2Screen((void *)screenPtr, Memory, 16000);
  copyBuffer2Screen(Memory, dword_47926C, 16000);
  while ( sub_406330() < v18 )
  {
    dword_5034F0 = dword_4A9EAC;
    if ( dword_4A9EAC < 1 )
      dword_5034F0 = 1;
    dword_4A9EAC = 0;
    dword_503510 = 0;
    wait();
    copyBuffer2Screen((void *)screenPtr, Memory, 16000);
    copyBuffer2Screen(Memory, dword_47926C, 16000);
  }
  sub_43C3E0(5u);
  copyBuffer2Screen((void *)screenPtr, dword_47926C, 16000);
  free(Memory);
  free(dword_47926C);
  dword_503510 = 0;
  dword_503500 = dword_4A8D2C;
  dword_4A9EAC = 0;
  dword_4A7CFC = dword_4A8D2C;
  result = sub_403D50();
  dword_4A7CF4 = 1;
  return result;
}


//----- (004072C0) --------------------------------------------------------
unsigned int __cdecl sub_4072C0(int a1, const char *a2)
{
  unsigned int v2; // esi@1
  unsigned int result; // eax@1
  int v4; // edi@2

  v2 = 0;
  result = strlen(a2);
  if ( result )
  {
    v4 = a1;
    do
    {
      sub_43B1A0(36 * (a2[v2++] - 32) + 4886880, 6, 6, v4);
      v4 += 6;
      result = strlen(a2);
    }
    while ( v2 < result );
  }
  return result;
}

//----- (00407330) --------------------------------------------------------
int sub_407330()
{
  char *v0; // eax@1
  char *v1; // eax@1
  char *v2; // eax@1
  char *v3; // eax@1
  char *v4; // eax@1
  char *v5; // eax@1
  char *v6; // eax@1
  char *v7; // eax@1
  char *v8; // eax@1
  signed int v9; // esi@1
  char *v10; // eax@3
  char v11; // dl@4
  unsigned int v12; // eax@5
  char *v13; // esi@5
  void *v14; // edi@5
  char v15; // cl@6
  int v16; // ST38_4@7
  char *v17; // eax@7
  char v18; // dl@8
  unsigned int v19; // eax@9
  void *v20; // edi@9
  char v21; // cl@10
  char *v22; // eax@11
  char v23; // dl@12
  unsigned int v24; // eax@13
  void *v25; // edi@13
  char v26; // cl@14
  int v27; // edx@15
  char *v28; // eax@15
  char v29; // dl@16
  unsigned int v30; // eax@17
  char *v31; // esi@17
  void *v32; // edi@17
  char v33; // cl@18
  int v34; // ST38_4@19
  char *v35; // eax@19
  char v36; // dl@20
  unsigned int v37; // eax@21
  void *v38; // edi@21
  char v39; // cl@22
  char *v40; // eax@23
  char v41; // dl@24
  unsigned int v42; // eax@25
  void *v43; // edi@25
  char v44; // cl@26
  int v45; // edx@27
  char *v46; // eax@27
  char v47; // dl@28
  unsigned int v48; // eax@29
  char *v49; // esi@29
  void *v50; // edi@29
  char v51; // cl@30
  int v52; // ST38_4@31
  char *v53; // eax@31
  char v54; // dl@32
  unsigned int v55; // eax@33
  void *v56; // edi@33
  char v57; // cl@34
  char *v58; // eax@35
  char v59; // dl@36
  unsigned int v60; // eax@37
  char *v61; // esi@37
  void *v62; // edi@37
  char v63; // cl@38
  int v64; // ST38_4@39
  char *v65; // eax@39
  char v66; // dl@40
  unsigned int v67; // eax@41
  void *v68; // edi@41
  char v69; // cl@42
  char *v70; // eax@43
  char v71; // dl@44
  unsigned int v72; // eax@45
  void *v73; // edi@45
  char v74; // cl@46
  int v75; // edx@47
  char *v76; // eax@47
  char v77; // dl@48
  unsigned int v78; // eax@49
  char *v79; // esi@49
  void *v80; // edi@49
  char v81; // cl@50
  int v82; // ST38_4@51
  char *v83; // eax@51
  char v84; // dl@52
  unsigned int v85; // eax@53
  void *v86; // edi@53
  char v87; // cl@54
  char *v88; // eax@55
  char v89; // dl@56
  unsigned int v90; // eax@57
  void *v91; // edi@57
  char v92; // cl@58
  int v93; // edx@59
  char *v94; // eax@59
  char v95; // dl@60
  unsigned int v96; // eax@61
  char *v97; // esi@61
  void *v98; // edi@61
  char v99; // cl@62
  int v100; // ST38_4@63
  signed int v101; // esi@63
  int v102; // esi@65
  signed int v103; // eax@66
  int v104; // ecx@67
  int v105; // edx@67
  signed int v106; // esi@69
  signed int v107; // esi@71
  int v108; // esi@73
  signed int v109; // eax@74
  int v110; // ecx@75
  int v111; // edx@75
  signed int v112; // esi@77
  signed int v113; // esi@79
  int result; // eax@81
  char v115; // [sp+Bh] [bp-3Dh]@5
  int v116; // [sp+Ch] [bp-3Ch]@3
  int v117; // [sp+10h] [bp-38h]@3
  int v118; // [sp+14h] [bp-34h]@3
  int v119; // [sp+18h] [bp-30h]@3
  char v120; // [sp+1Ch] [bp-2Ch]@3

  v0 = (char *)&unk_479E40 + 15 * (unsigned __int8)byte_456B01;
  *(_DWORD *)v0 = 774778414;
  *((_DWORD *)v0 + 1) = 774778414;
  *((_DWORD *)v0 + 2) = 1313820206;
  *((_WORD *)v0 + 6) = 69;
  v1 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultLeftSteeringGamepad;
  *(_DWORD *)v1 = 774778414;
  *((_DWORD *)v1 + 1) = 774778414;
  *((_DWORD *)v1 + 2) = 1178946606;
  *((_WORD *)v1 + 6) = 84;
  v2 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultRightSteeringGamepad;
  *(_DWORD *)v2 = 774778414;
  *((_DWORD *)v2 + 1) = 774778414;
  *((_DWORD *)v2 + 2) = 1212631378;
  *((_WORD *)v2 + 6) = 84;
  v3 = (char *)&unk_479E40 + 15 * (unsigned __int8)byte_44512A;
  *(_DWORD *)v3 = 774778414;
  *((_DWORD *)v3 + 1) = 774778414;
  *((_DWORD *)v3 + 2) = 1429089838;
  *((_WORD *)v3 + 6) = 80;
  v4 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultBrakeGamepad;
  *(_DWORD *)v4 = 774778414;
  *((_DWORD *)v4 + 1) = 774778414;
  *((_DWORD *)v4 + 2) = 1464812590;
  *((_WORD *)v4 + 6) = 78;
  v5 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultAccelerateGamepad;
  *(_DWORD *)v5 = 774778414;
  *((_DWORD *)v5 + 1) = 1414873646;
  *((_DWORD *)v5 + 2) = 542003028;
  *((_WORD *)v5 + 6) = 49;
  v6 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultTurboGamepad;
  *(_DWORD *)v6 = 774778414;
  *((_DWORD *)v6 + 1) = 1414873646;
  *((_DWORD *)v6 + 2) = 542003028;
  *((_WORD *)v6 + 6) = 50;
  v7 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultGunGamepad;
  *(_DWORD *)v7 = 774778414;
  *((_DWORD *)v7 + 1) = 1414873646;
  *((_DWORD *)v7 + 2) = 542003028;
  *((_WORD *)v7 + 6) = 51;
  v8 = (char *)&unk_479E40 + 15 * (unsigned __int8)configuration.defaultMineGamepad;
  *(_DWORD *)v8 = 774778414;
  *((_DWORD *)v8 + 1) = 1414873646;
  *((_DWORD *)v8 + 2) = 542003028;
  *((_WORD *)v8 + 6) = 52;
  dword_4A6B2F = 774778414;
  dword_4A6B33 = 774778414;
  dword_4A6B37 = 1397042734;
  word_4A6B3B = 67;
  dword_4A6B3E = 774778414;
  dword_4A6B42 = 774778414;
  dword_4A6B46 = 774778414;
  word_4A6B4A = 49;
  dword_4A6B4D = 774778414;
  dword_4A6B51 = 774778414;
  dword_4A6B55 = 774778414;
  word_4A6B59 = 50;
  dword_4A6B5C = 774778414;
  dword_4A6B60 = 774778414;
  dword_4A6B64 = 774778414;
  word_4A6B68 = 51;
  dword_4A6B6B = 774778414;
  dword_4A6B6F = 774778414;
  dword_4A6B73 = 774778414;
  word_4A6B77 = 52;
  dword_4A6B7A = 774778414;
  dword_4A6B7E = 774778414;
  dword_4A6B82 = 774778414;
  word_4A6B86 = 53;
  dword_4A6B89 = 774778414;
  dword_4A6B8D = 774778414;
  dword_4A6B91 = 774778414;
  word_4A6B95 = 54;
  dword_4A6B98 = 774778414;
  dword_4A6B9C = 774778414;
  dword_4A6BA0 = 774778414;
  word_4A6BA4 = 55;
  dword_4A6BA7 = 774778414;
  dword_4A6BAB = 774778414;
  dword_4A6BAF = 774778414;
  word_4A6BB3 = 56;
  dword_4A6BB6 = 774778414;
  dword_4A6BBA = 774778414;
  dword_4A6BBE = 774778414;
  word_4A6BC2 = 57;
  dword_4A6BC5 = 774778414;
  dword_4A6BC9 = 774778414;
  dword_4A6BCD = 774778414;
  word_4A6BD1 = 48;
  dword_4A6BD4 = 774778414;
  dword_4A6BD8 = 774778414;
  dword_4A6BDC = 1431193933;
  word_4A6BE0 = 83;
  dword_4A6BE3 = 774778414;
  dword_4A6BE7 = 774778414;
  dword_4A6BEB = 1096110405;
  word_4A6BEF = 76;
  dword_4A6BF2 = 774778414;
  dword_4A6BF6 = 1262698818;
  dword_4A6BFA = 1128353875;
  word_4A6BFE = 69;
  dword_4A6C01 = 774778414;
  dword_4A6C05 = 774778414;
  dword_4A6C09 = 1096035886;
  word_4A6C0D = 66;
  dword_4A6C10 = 774778414;
  dword_4A6C14 = 774778414;
  dword_4A6C18 = 774778414;
  word_4A6C1C = 81;
  dword_4A6C1F = 774778414;
  dword_4A6C23 = 774778414;
  dword_4A6C27 = 774778414;
  word_4A6C2B = 87;
  dword_4A6C2E = 774778414;
  dword_4A6C32 = 774778414;
  dword_4A6C36 = 774778414;
  word_4A6C3A = 69;
  dword_4A6C3D = 774778414;
  dword_4A6C41 = 774778414;
  dword_4A6C45 = 774778414;
  word_4A6C49 = 82;
  dword_4A6C4C = 774778414;
  dword_4A6C50 = 774778414;
  dword_4A6C54 = 774778414;
  word_4A6C58 = 84;
  dword_4A6C5B = 774778414;
  dword_4A6C5F = 774778414;
  dword_4A6C63 = 774778414;
  word_4A6C67 = 89;
  dword_4A6C6A = 774778414;
  dword_4A6C6E = 774778414;
  dword_4A6C72 = 774778414;
  word_4A6C76 = 85;
  dword_4A6C79 = 774778414;
  dword_4A6C7D = 774778414;
  dword_4A6C81 = 774778414;
  word_4A6C85 = 73;
  dword_4A6C88 = 774778414;
  dword_4A6C8C = 774778414;
  dword_4A6C90 = 774778414;
  word_4A6C94 = 79;
  dword_4A6C97 = 774778414;
  dword_4A6C9B = 774778414;
  dword_4A6C9F = 774778414;
  word_4A6CA3 = 80;
  dword_4A6CA6 = 1178946606;
  dword_4A6CAA = 1380065364;
  dword_4A6CAE = 1162560321;
  word_4A6CB2 = 84;
  dword_4A6CB5 = 1212631378;
  dword_4A6CB9 = 1380065364;
  dword_4A6CBD = 1162560321;
  word_4A6CC1 = 84;
  dword_4A6CC4 = 774778414;
  dword_4A6CC8 = 774778414;
  dword_4A6CCC = 1163152965;
  word_4A6CD0 = 82;
  dword_4A6CD3 = 1178946606;
  dword_4A6CD7 = 1329799252;
  dword_4A6CDB = 1330795598;
  word_4A6CDF = 76;
  dword_4A6CE2 = 774778414;
  dword_4A6CE6 = 774778414;
  dword_4A6CEA = 774778414;
  word_4A6CEE = 65;
  dword_4A6CF1 = 774778414;
  dword_4A6CF5 = 774778414;
  dword_4A6CF9 = 774778414;
  word_4A6CFD = 83;
  dword_4A6D00 = 774778414;
  dword_4A6D04 = 774778414;
  dword_4A6D08 = 774778414;
  word_4A6D0C = 68;
  dword_4A6D0F = 774778414;
  dword_4A6D13 = 774778414;
  dword_4A6D17 = 774778414;
  word_4A6D1B = 70;
  dword_4A6D1E = 774778414;
  dword_4A6D22 = 774778414;
  dword_4A6D26 = 774778414;
  word_4A6D2A = 71;
  dword_4A6D2D = 774778414;
  dword_4A6D31 = 774778414;
  dword_4A6D35 = 774778414;
  word_4A6D39 = 72;
  dword_4A6D3C = 774778414;
  dword_4A6D40 = 774778414;
  dword_4A6D44 = 774778414;
  word_4A6D48 = 74;
  dword_4A6D4B = 774778414;
  dword_4A6D4F = 774778414;
  dword_4A6D53 = 774778414;
  word_4A6D57 = 75;
  dword_4A6D5A = 774778414;
  dword_4A6D5E = 774778414;
  dword_4A6D62 = 774778414;
  word_4A6D66 = 76;
  dword_4A6D69 = 774778414;
  dword_4A6D6D = 1229800787;
  dword_4A6D71 = 1330401091;
  word_4A6D75 = 78;
  dword_4A6D78 = 774778414;
  dword_4A6D7C = 774778414;
  dword_4A6D80 = 1128879150;
  word_4A6D84 = 75;
  dword_4A6D87 = 1093545518;
  dword_4A6D8B = 1414745936;
  dword_4A6D8F = 1213222738;
  word_4A6D93 = 69;
  dword_4A6D96 = 1278094894;
  dword_4A6D9A = 542393925;
  dword_4A6D9E = 1179207763;
  word_4A6DA2 = 84;
  dword_4A6DA5 = 774778414;
  dword_4A6DA9 = 1262698818;
  dword_4A6DAD = 1396788307;
  word_4A6DB1 = 72;
  dword_4A6DB4 = 774778414;
  dword_4A6DB8 = 774778414;
  dword_4A6DBC = 774778414;
  word_4A6DC0 = 90;
  dword_4A6DC3 = 774778414;
  dword_4A6DC7 = 774778414;
  dword_4A6DCB = 774778414;
  word_4A6DCF = 88;
  dword_4A6DD2 = 774778414;
  dword_4A6DD6 = 774778414;
  dword_4A6DDA = 774778414;
  word_4A6DDE = 67;
  dword_4A6DE1 = 774778414;
  dword_4A6DE5 = 774778414;
  dword_4A6DE9 = 774778414;
  word_4A6DED = 86;
  dword_4A6DF0 = 774778414;
  dword_4A6DF4 = 774778414;
  dword_4A6DF8 = 774778414;
  word_4A6DFC = 66;
  dword_4A6DFF = 774778414;
  dword_4A6E03 = 774778414;
  dword_4A6E07 = 774778414;
  word_4A6E0B = 78;
  dword_4A6E0E = 774778414;
  dword_4A6E12 = 774778414;
  dword_4A6E16 = 774778414;
  word_4A6E1A = 77;
  dword_4A6E1D = 774778414;
  dword_4A6E21 = 774778414;
  dword_4A6E25 = 1296912195;
  word_4A6E29 = 65;
  dword_4A6E2C = 774778414;
  dword_4A6E30 = 1345203758;
  dword_4A6E34 = 1330205253;
  word_4A6E38 = 68;
  dword_4A6E3B = 774778414;
  dword_4A6E3F = 774778414;
  dword_4A6E43 = 1396788307;
  word_4A6E47 = 72;
  dword_4A6E4A = 1230122542;
  dword_4A6E4E = 542394439;
  dword_4A6E52 = 1179207763;
  word_4A6E56 = 84;
  dword_4A6E59 = 1162554926;
  dword_4A6E5D = 1145131097;
  dword_4A6E61 = 1096045357;
  word_4A6E65 = 82;
  dword_4A6E68 = 774778414;
  dword_4A6E6C = 1178946606;
  dword_4A6E70 = 1279336532;
  word_4A6E74 = 84;
  dword_4A6E77 = 774778414;
  dword_4A6E7B = 774778414;
  dword_4A6E7F = 1128353875;
  word_4A6E83 = 69;
  dword_4A6E86 = 774778414;
  dword_4A6E8A = 1346454318;
  dword_4A6E8E = 1129270355;
  word_4A6E92 = 75;
  dword_4A6E95 = 774778414;
  dword_4A6E99 = 774778414;
  dword_4A6E9D = 1177431598;
  word_4A6EA1 = 49;
  dword_4A6EA4 = 774778414;
  dword_4A6EA8 = 774778414;
  dword_4A6EAC = 1177431598;
  word_4A6EB0 = 50;
  dword_4A6EB3 = 774778414;
  dword_4A6EB7 = 774778414;
  dword_4A6EBB = 1177431598;
  word_4A6EBF = 51;
  dword_4A6EC2 = 774778414;
  dword_4A6EC6 = 774778414;
  dword_4A6ECA = 1177431598;
  word_4A6ECE = 52;
  dword_4A6ED1 = 774778414;
  dword_4A6ED5 = 774778414;
  dword_4A6ED9 = 1177431598;
  word_4A6EDD = 53;
  dword_4A6EE0 = 774778414;
  dword_4A6EE4 = 774778414;
  dword_4A6EE8 = 1177431598;
  word_4A6EEC = 54;
  dword_4A6EEF = 774778414;
  dword_4A6EF3 = 774778414;
  dword_4A6EF7 = 1177431598;
  word_4A6EFB = 55;
  dword_4A6EFE = 774778414;
  dword_4A6F02 = 774778414;
  dword_4A6F06 = 1177431598;
  word_4A6F0A = 56;
  dword_4A6F0D = 774778414;
  dword_4A6F11 = 774778414;
  dword_4A6F15 = 1177431598;
  word_4A6F19 = 57;
  dword_4A6F1C = 774778414;
  dword_4A6F20 = 774778414;
  dword_4A6F24 = 826682926;
  word_4A6F28 = 48;
  dword_4A6F2B = 774778414;
  dword_4A6F2F = 1431186990;
  dword_4A6F33 = 1129270349;
  word_4A6F37 = 75;
  dword_4A6F3A = 1395535406;
  dword_4A6F3E = 1280266819;
  dword_4A6F42 = 1129270348;
  word_4A6F46 = 75;
  dword_4A6F49 = 774778414;
  dword_4A6F4D = 1497713454;
  dword_4A6F51 = 759447888;
  word_4A6F55 = 55;
  dword_4A6F58 = 774778414;
  dword_4A6F5C = 1497713454;
  dword_4A6F60 = 759447888;
  word_4A6F64 = 56;
  dword_4A6F67 = 774778414;
  dword_4A6F6B = 1497713454;
  dword_4A6F6F = 759447888;
  word_4A6F73 = 57;
  dword_4A6F76 = 1497713454;
  dword_4A6F7A = 759447888;
  dword_4A6F7E = 1431193933;
  word_4A6F82 = 83;
  dword_4A6F85 = 774778414;
  dword_4A6F89 = 1497713454;
  dword_4A6F8D = 759447888;
  word_4A6F91 = 52;
  dword_4A6F94 = 774778414;
  dword_4A6F98 = 1497713454;
  dword_4A6F9C = 759447888;
  word_4A6FA0 = 53;
  dword_4A6FA3 = 774778414;
  dword_4A6FA7 = 1497713454;
  dword_4A6FAB = 759447888;
  word_4A6FAF = 54;
  dword_4A6FB2 = 1162554926;
  dword_4A6FB6 = 1145131097;
  dword_4A6FBA = 1431064621;
  word_4A6FBE = 83;
  dword_4A6FC1 = 774778414;
  dword_4A6FC5 = 1497713454;
  dword_4A6FC9 = 759447888;
  word_4A6FCD = 49;
  dword_4A6FD0 = 774778414;
  dword_4A6FD4 = 1497713454;
  dword_4A6FD8 = 759447888;
  word_4A6FDC = 50;
  dword_4A6FDF = 774778414;
  dword_4A6FE3 = 1497713454;
  dword_4A6FE7 = 759447888;
  word_4A6FEB = 51;
  dword_4A6FEE = 774778414;
  dword_4A6FF2 = 1497713454;
  dword_4A6FF6 = 759447888;
  word_4A6FFA = 48;
  dword_4A6FFD = 1261317678;
  dword_4A7001 = 1095784773;
  dword_4A7005 = 1162095940;
  word_4A7009 = 76;
  dword_4A700C = 774778414;
  dword_4A7010 = 1395535406;
  dword_4A7014 = 1163023193;
  word_4A7018 = 81;
  dword_4A7039 = 774778414;
  dword_4A703D = 774778414;
  dword_4A7041 = 826682926;
  word_4A7045 = 49;
  dword_4A7048 = 774778414;
  dword_4A704C = 774778414;
  dword_4A7050 = 826682926;
  word_4A7054 = 50;
  dword_4A7444 = 1497713454;
  dword_4A7448 = 759447888;
  dword_4A744C = 1163152965;
  word_4A7450 = 82;
  dword_4A7453 = 1212631378;
  dword_4A7457 = 1329799252;
  dword_4A745B = 1330795598;
  word_4A745F = 76;
  dword_4A75BB = 1497713454;
  dword_4A75BF = 759447888;
  dword_4A75C3 = 1396788307;
  word_4A75C7 = 72;
  dword_4A75D9 = 774778414;
  dword_4A75DD = 1230131246;
  dword_4A75E1 = 1129534542;
  word_4A75E5 = 82;
  dword_4A75E8 = 774778414;
  dword_4A75EC = 1212631378;
  dword_4A75F0 = 1279336532;
  word_4A75F4 = 84;
  dword_4A76C9 = 774778414;
  dword_4A76CD = 774778414;
  dword_4A76D1 = 1297041454;
  word_4A76D5 = 69;
  dword_4A76D8 = 774778414;
  dword_4A76DC = 542135598;
  dword_4A76E0 = 1330795073;
  word_4A76E4 = 87;
  dword_4A76E7 = 774778414;
  dword_4A76EB = 1095773742;
  dword_4A76EF = 1428178247;
  word_4A76F3 = 80;
  dword_4A7705 = 1278094894;
  dword_4A7709 = 542393925;
  dword_4A770D = 1330795073;
  word_4A7711 = 87;
  dword_4A7723 = 1230122542;
  dword_4A7727 = 542394439;
  dword_4A772B = 1330795073;
  word_4A772F = 87;
  dword_4A7741 = 774778414;
  dword_4A7745 = 774778414;
  dword_4A7749 = 1313156654;
  word_4A774D = 68;
  dword_4A7750 = 1143877166;
  dword_4A7754 = 542005071;
  dword_4A7758 = 1330795073;
  word_4A775C = 87;
  dword_4A775F = 774778414;
  dword_4A7763 = 1162297680;
  dword_4A7767 = 1464812576;
  dword_4A7772 = 774778414;
  dword_4A777D = 774778414;
  word_4A776B = 78;
  dword_4A776E = 774778414;
  word_4A7789 = 76;
  dword_4A7776 = 1313418798;
  word_4A777A = 83;
  dword_4A7781 = 774778414;
  dword_4A7785 = 1162096174;
  memcpy(&unk_491820, (const void *)screenPtr, 0xFA00u);
  memcpy(&unk_4B4020, byte_4A9BA0, 0x300u);
  dword_456AF8 = 0;
  sub_404A60();
  v9 = 63;
  do
  {
    wait();
    sub_404AD0();
    --v9;
  }
  while ( v9 );
  extractFromBpa("ENGINE.BPA", textureTemp, (int)"KEYCOM3.BPK");
  copyImageToBuffer((int)textureTemp, screenPtr);
  extractFromBpa("ENGINE.BPA", &unk_4B4020, (int)"KEYCOM3.PAL");
  sub_4072C0(screenPtr + 2620, "     GLOBAL KEY-DEFINITIONS");
  sub_4072C0(screenPtr + 6460, "   TAB.............STATUS BAR");
  sub_4072C0(screenPtr + 8380, "   F1.............INFO SCREEN");
  sub_4072C0(screenPtr + 10300, "   F2............MUSIC ON/OFF");
  sub_4072C0(screenPtr + 12220, "   F3..............SFX ON/OFF");
  sub_4072C0(screenPtr + 14140, "   F4................TEXTURES");
  sub_4072C0(screenPtr + 16060, "   F5.................SHADOWS");
  sub_4072C0(screenPtr + 17980, "   P....................PAUSE");
  sub_4072C0(screenPtr + 23100, "      KEYBOARD DEFINITIONS");
  v116 = 1092624416;
  v119 = 774778437;
  v117 = 1279607619;
  v10 = (char *)&unk_4A6B20 + 15 * configuration.accelerateKey;
  v120 = 0;
  v118 = 1413567045;
  do
    v11 = *v10++;
  while ( v11 );
  v12 = v10 - ((char *)&unk_4A6B20 + 15 * configuration.accelerateKey);
  v13 = (char *)&unk_4A6B20 + 15 * configuration.accelerateKey;
  v14 = &v115;
  do
  {
    v15 = *((byte *)v14 + 1);
    v14 = (char *)v14 + 1;
  }
  while ( v15 );
  memcpy(v14, v13, 4 * (v12 >> 2));
  v16 = screenPtr + 26940;
  memcpy((char *)v14 + 4 * (v12 >> 2), &v13[4 * (v12 >> 2)], v12 & 3);
  sub_4072C0(v16, (const char *)&v116);
  v118 = 774778414;
  v116 = 1109401632;
  v117 = 1162559826;
  v17 = (char *)&unk_4A6B20 + 15 * configuration.brakeKey;
  v119 = 774778414;
  v120 = 0;
  do
    v18 = *v17++;
  while ( v18 );
  v19 = v17 - ((char *)&unk_4A6B20 + 15 * configuration.brakeKey);
  v20 = &v115;
  do
  {
    v21 = *((byte *)v20 + 1);
    v20 = (char *)v20 + 1;
  }
  while ( v21 );
  memcpy(v20, (char *)&unk_4A6B20 + 15 * configuration.brakeKey, v19);
  sub_4072C0(screenPtr + 28860, (const char *)&v116);
  v117 = 1380271444;
  v120 = 0;
  v116 = 1394614304;
  v22 = (char *)&unk_4A6B20 + 15 * configuration.leftSteeringKey;
  v118 = 1178946592;
  v119 = 774778452;
  do
    v23 = *v22++;
  while ( v23 );
  v24 = v22 - ((char *)&unk_4A6B20 + 15 * configuration.leftSteeringKey);
  v25 = &v115;
  do
  {
    v26 = *((byte *)v25 + 1);
    v25 = (char *)v25 + 1;
  }
  while ( v26 );
  v27 = screenPtr;
  memcpy(v25, (char *)&unk_4A6B20 + 15 * configuration.leftSteeringKey, v24);
  sub_4072C0(v27 + 30780, (const char *)&v116);
  v116 = 1394614304;
  v119 = 774788168;
  v117 = 1380271444;
  v28 = (char *)&unk_4A6B20 + 15 * configuration.rightSteeringKey;
  v120 = 0;
  v118 = 1195987488;
  do
    v29 = *v28++;
  while ( v29 );
  v30 = v28 - ((char *)&unk_4A6B20 + 15 * configuration.rightSteeringKey);
  v31 = (char *)&unk_4A6B20 + 15 * configuration.rightSteeringKey;
  v32 = &v115;
  do
  {
    v33 = *((byte *)v32 + 1);
    v32 = (char *)v32 + 1;
  }
  while ( v33 );
  memcpy(v32, v31, 4 * (v30 >> 2));
  v34 = screenPtr + 32700;
  memcpy((char *)v32 + 4 * (v30 >> 2), &v31[4 * (v30 >> 2)], v30 & 3);
  sub_4072C0(v34, (const char *)&v116);
  v118 = 1330594336;
  v116 = 1411391520;
  v117 = 1329746517;
  v35 = (char *)&unk_4A6B20 + 15 * configuration.turboKey;
  v119 = 774788179;
  v120 = 0;
  do
    v36 = *v35++;
  while ( v36 );
  v37 = v35 - ((char *)&unk_4A6B20 + 15 * configuration.turboKey);
  v38 = &v115;
  do
  {
    v39 = *((byte *)v38 + 1);
    v38 = (char *)v38 + 1;
  }
  while ( v39 );
  memcpy(v38, (char *)&unk_4A6B20 + 15 * configuration.turboKey, v37);
  sub_4072C0(screenPtr + 34620, (const char *)&v116);
  v117 = 1229472577;
  v120 = 0;
  v116 = 1293951008;
  v40 = (char *)&unk_4A6B20 + 15 * configuration.gunKey;
  v118 = 1193297230;
  v119 = 774786645;
  do
    v41 = *v40++;
  while ( v41 );
  v42 = v40 - ((char *)&unk_4A6B20 + 15 * configuration.gunKey);
  v43 = &v115;
  do
  {
    v44 = *((byte *)v43 + 1);
    v43 = (char *)v43 + 1;
  }
  while ( v44 );
  v45 = screenPtr;
  memcpy(v43, (char *)&unk_4A6B20 + 15 * configuration.gunKey, v42);
  sub_4072C0(v45 + 36540, (const char *)&v116);
  v116 = 1142956064;
  v119 = 774778414;
  v117 = 542134098;
  v46 = (char *)&unk_4A6B20 + 15 * configuration.mineKey;
  v120 = 0;
  v118 = 1162758477;
  do
    v47 = *v46++;
  while ( v47 );
  v48 = v46 - ((char *)&unk_4A6B20 + 15 * configuration.mineKey);
  v49 = (char *)&unk_4A6B20 + 15 * configuration.mineKey;
  v50 = &v115;
  do
  {
    v51 = *((byte *)v50 + 1);
    v50 = (char *)v50 + 1;
  }
  while ( v51 );
  memcpy(v50, v49, 4 * (v48 >> 2));
  v52 = screenPtr + 38460;
  memcpy((char *)v50 + 4 * (v48 >> 2), &v49[4 * (v48 >> 2)], v48 & 3);
  sub_4072C0(v52, (const char *)&v116);
  v118 = 774778414;
  v116 = 1210064928;
  v117 = 776884815;
  v53 = (char *)&unk_4A6B20 + 15 * configuration.hornKey;
  v119 = 774778414;
  v120 = 0;
  do
    v54 = *v53++;
  while ( v54 );
  v55 = v53 - ((char *)&unk_4A6B20 + 15 * configuration.hornKey);
  v56 = &v115;
  do
  {
    v57 = *((byte *)v56 + 1);
    v56 = (char *)v56 + 1;
  }
  while ( v57 );
  memcpy(v56, (char *)&unk_4A6B20 + 15 * configuration.hornKey, v55);
  sub_4072C0(screenPtr + 40380, (const char *)&v116);
  sub_4072C0(screenPtr + 45500, "      GAMEPAD DEFINITIONS");
  v116 = 1092624416;
  v119 = 774778437;
  v117 = 1279607619;
  v58 = (char *)&unk_479E40 + 15 * configuration.accelerateGamepad;
  v120 = 0;
  v118 = 1413567045;
  do
    v59 = *v58++;
  while ( v59 );
  v60 = v58 - ((char *)&unk_479E40 + 15 * configuration.accelerateGamepad);
  v61 = (char *)&unk_479E40 + 15 * configuration.accelerateGamepad;
  v62 = &v115;
  do
  {
    v63 = *((byte *)v62 + 1);
    v62 = (char *)v62 + 1;
  }
  while ( v63 );
  memcpy(v62, v61, 4 * (v60 >> 2));
  v64 = screenPtr + 49340;
  memcpy((char *)v62 + 4 * (v60 >> 2), &v61[4 * (v60 >> 2)], v60 & 3);
  sub_4072C0(v64, (const char *)&v116);
  v118 = 774778414;
  v116 = 1109401632;
  v117 = 1162559826;
  v65 = (char *)&unk_479E40 + 15 * configuration.brakeGamepad;
  v119 = 774778414;
  v120 = 0;
  do
    v66 = *v65++;
  while ( v66 );
  v67 = v65 - ((char *)&unk_479E40 + 15 * configuration.brakeGamepad);
  v68 = &v115;
  do
  {
    v69 = *((byte *)v68 + 1);
    v68 = (char *)v68 + 1;
  }
  while ( v69 );
  memcpy(v68, (char *)&unk_479E40 + 15 * configuration.brakeGamepad, v67);
  sub_4072C0(screenPtr + 51260, (const char *)&v116);
  v117 = 1380271444;
  v120 = 0;
  v116 = 1394614304;
  v70 = (char *)&unk_479E40 + 15 * configuration.leftSteeringGamepad;
  v118 = 1178946592;
  v119 = 774778452;
  do
    v71 = *v70++;
  while ( v71 );
  v72 = v70 - ((char *)&unk_479E40 + 15 * configuration.leftSteeringGamepad);
  v73 = &v115;
  do
  {
    v74 = *((byte *)v73 + 1);
    v73 = (char *)v73 + 1;
  }
  while ( v74 );
  v75 = screenPtr;
  memcpy(v73, (char *)&unk_479E40 + 15 * configuration.leftSteeringGamepad, v72);
  sub_4072C0(v75 + 53180, (const char *)&v116);
  v116 = 1394614304;
  v119 = 774788168;
  v117 = 1380271444;
  v76 = (char *)&unk_479E40 + 15 * configuration.rightSteeringGamepad;
  v120 = 0;
  v118 = 1195987488;
  do
    v77 = *v76++;
  while ( v77 );
  v78 = v76 - ((char *)&unk_479E40 + 15 * configuration.rightSteeringGamepad);
  v79 = (char *)&unk_479E40 + 15 * configuration.rightSteeringGamepad;
  v80 = &v115;
  do
  {
    v81 = *((byte *)v80 + 1);
    v80 = (char *)v80 + 1;
  }
  while ( v81 );
  memcpy(v80, v79, 4 * (v78 >> 2));
  v82 = screenPtr + 55100;
  memcpy((char *)v80 + 4 * (v78 >> 2), &v79[4 * (v78 >> 2)], v78 & 3);
  sub_4072C0(v82, (const char *)&v116);
  v118 = 1330594336;
  v116 = 1411391520;
  v117 = 1329746517;
  v83 = (char *)&unk_479E40 + 15 * configuration.turboGamepad;
  v119 = 774788179;
  v120 = 0;
  do
    v84 = *v83++;
  while ( v84 );
  v85 = v83 - ((char *)&unk_479E40 + 15 * configuration.turboGamepad);
  v86 = &v115;
  do
  {
    v87 = *((byte *)v86 + 1);
    v86 = (char *)v86 + 1;
  }
  while ( v87 );
  memcpy(v86, (char *)&unk_479E40 + 15 * configuration.turboGamepad, v85);
  sub_4072C0(screenPtr + 57020, (const char *)&v116);
  v117 = 1229472577;
  v120 = 0;
  v116 = 1293951008;
  v88 = (char *)&unk_479E40 + 15 * configuration.gunGamepad;
  v118 = 1193297230;
  v119 = 774786645;
  do
    v89 = *v88++;
  while ( v89 );
  v90 = v88 - ((char *)&unk_479E40 + 15 * configuration.gunGamepad);
  v91 = &v115;
  do
  {
    v92 = *((byte *)v91 + 1);
    v91 = (char *)v91 + 1;
  }
  while ( v92 );
  v93 = screenPtr;
  memcpy(v91, (char *)&unk_479E40 + 15 * configuration.gunGamepad, v90);
  sub_4072C0(v93 + 58940, (const char *)&v116);
  v116 = 1142956064;
  v119 = 774778414;
  v117 = 542134098;
  v94 = (char *)&unk_479E40 + 15 * configuration.mineGamepad;
  v120 = 0;
  v118 = 1162758477;
  do
    v95 = *v94++;
  while ( v95 );
  v96 = v94 - ((char *)&unk_479E40 + 15 * configuration.mineGamepad);
  v97 = (char *)&unk_479E40 + 15 * configuration.mineGamepad;
  v98 = &v115;
  do
  {
    v99 = *((byte *)v98 + 1);
    v98 = (char *)v98 + 1;
  }
  while ( v99 );
  memcpy(v98, v97, 4 * (v96 >> 2));
  v100 = screenPtr + 60860;
  memcpy((char *)v98 + 4 * (v96 >> 2), &v97[4 * (v96 >> 2)], v96 & 3);
  sub_4072C0(v100, (const char *)&v116);
  dword_456AF8 = 0;
  sub_404A60();
  v101 = 63;
  do
  {
    wait();
    sub_404BA0();
    --v101;
  }
  while ( v101 );
  memset(byte_45E0C0, 0, 0x100u);
  v102 = 0;
  do
  {
    sub_418150();
    v103 = 0;
    do
    {
      v104 = (unsigned __int8)byte_45E0C3[v103]
           + (unsigned __int8)byte_45E0C1[v103]
           + (unsigned __int8)byte_45E0C0[v103];
      v105 = v102 + (unsigned __int8)byte_45E0C2[v103];
      v103 += 4;
      v102 = v105 + v104;
    }
    while ( v103 < 256 );
    waitWithDelay();
  }
  while ( !v102 );
  dword_456AF8 = 0;
  sub_404A60();
  v106 = 63;
  do
  {
    wait();
    sub_404AD0();
    --v106;
  }
  while ( v106 );
  extractFromBpa("ENGINE.BPA", textureTemp, (int)"INFO2.BPK");
  copyImageToBuffer((int)textureTemp, screenPtr);
  extractFromBpa("ENGINE.BPA", &unk_4B4020, (int)"INFO2.PAL");
  dword_456AF8 = 0;
  sub_404A60();
  v107 = 63;
  do
  {
    wait();
    sub_404BA0();
    --v107;
  }
  while ( v107 );
  memset(byte_45E0C0, 0, 0x100u);
  v108 = 0;
  do
  {
    sub_418150();
    v109 = 0;
    do
    {
      v110 = (unsigned __int8)byte_45E0C3[v109]
           + (unsigned __int8)byte_45E0C1[v109]
           + (unsigned __int8)byte_45E0C0[v109];
      v111 = v108 + (unsigned __int8)byte_45E0C2[v109];
      v109 += 4;
      v108 = v111 + v110;
    }
    while ( v109 < 256 );
    waitWithDelay();
  }
  while ( !v108 );
  dword_456AF8 = 0;
  sub_404A60();
  v112 = 63;
  do
  {
    wait();
    sub_404AD0();
    --v112;
  }
  while ( v112 );
  memcpy((void *)screenPtr, &unk_491820, 0xFA00u);
  memcpy(&unk_4B4020, byte_4A9BA0, 0x300u);
  dword_456AF8 = 0;
  sub_404A60();
  v113 = 63;
  do
  {
    wait();
    sub_404BA0();
    --v113;
  }
  while ( v113 );
  result = 0;
  memset(byte_45E0C0, 0, 0x100u);
  if ( dword_456AA4 == 1 )
  {
    result = 0;
    memset((void *)screenPtr, 0, 0xFA00u);
  }
  return result;
}

//----- (00409270) --------------------------------------------------------
void __noreturn exitCtrlAltDel()
{
  nullsub_1();
  freeMusic();
  setWindowCaption();
  printf("DEATH RALLY Exit: CTRL+ALT+DEL pressed!\n");
  if ( isMultiplayerGame )
    nullsub_1();
  exit(112);
}


//----- (004092B0) --------------------------------------------------------
int sub_4092B0()
{
  unsigned int v0; // eax@4
  char *v1; // edi@4
  char v2; // cl@5
  char *v3; // edi@6
  char v4; // al@7
  FILE *v5; // eax@8
  FILE *v6; // esi@8
  __int32 v7; // edi@9
  bool v8; // sf@10
  unsigned __int8 v9; // of@10
  signed int v10; // esi@11
  char DstBuf; // [sp+Ch] [bp-318h]@2
  char v13; // [sp+Dh] [bp-317h]@3
  char v14; // [sp+Eh] [bp-316h]@3
  int Val; // [sp+10h] [bp-314h]@1
  char Filename[4]; // [sp+14h] [bp-310h]@4
  __int16 v17; // [sp+18h] [bp-30Ch]@4
  char v18; // [sp+1Ah] [bp-30Ah]@4
  char Str; // [sp+24h] [bp-300h]@13

  Val = 0;
  do
  {
    itoa(Val, &DstBuf, 10);
    if ( strlen(&DstBuf) != 2 )
    {
      v13 = DstBuf;
      DstBuf = 48;
      v14 = 0;
    }
    *(_DWORD *)Filename = 1345147720;
    v18 = 0;
    v17 = 17225;
    v0 = strlen(&DstBuf) + 1;
    v1 = (char *)&Val + 3;
    do
      v2 = (v1++)[1];
    while ( v2 );
    memcpy(v1, &DstBuf, v0);
    v3 = (char *)&Val + 3;
    do
      v4 = (v3++)[1];
    while ( v4 );
    *(_DWORD *)v3 = 1480806446;
    v3[4] = 0;
    v5 = fopen(Filename, "rb");
    v6 = v5;
    if ( !v5 )
      break;
    fseek(v5, 0, 2);
    v7 = ftell(v6);
    fclose(v6);
    if ( v7 < 1 )
      break;
    v9 = __OFSUB__(Val + 1, 100);
    v8 = Val++ - 99 < 0;
  }
  while ( v8 ^ v9 );
  File = fopen(Filename, "wb");
  fwrite(&unk_4450A8, 1u, 0x80u, File);
  v10 = 0;
  do
  {
    sub_429CF0((unsigned __int8 *)(v10 + screenPtr), 320);
    v10 += 320;
  }
  while ( v10 < 64000 );
  fputc(12, File);
  sub_43C160((int)&Str);
  fwrite(&Str, 1u, 0x300u, File);
  return fclose(File);
}
// 456BF0: using guessed type int screenPtr;

//----- (00409460) --------------------------------------------------------
int sub_409460()
{
  signed int v0; // eax@1
  signed int v1; // eax@3
  signed int v2; // eax@5
  signed int v3; // eax@7
  int (__cdecl *v4)(); // edi@9
  signed int v5; // esi@9
  signed int v6; // eax@11
  int result; // eax@13
  int v8; // esi@14
  int v9; // eax@15
  void *v10; // edi@15
  int v11; // ebp@15
  signed int v12; // eax@15
  int v13; // ecx@16
  int v14; // edx@16
  int v15; // edx@16
  int v16; // ecx@16
  int v17; // edx@16
  int v18; // edx@16
  int v19; // ecx@16
  signed int v20; // ecx@17
  char v21; // dl@19
  char v22; // dl@21
  char v23; // dl@23
  char v24; // dl@25
  void *v25; // edi@33
  int v26; // ebp@33
  signed int v27; // ecx@33
  int v28; // edx@34
  int v29; // esi@34
  int v30; // edx@34
  int v31; // edx@34
  int v32; // esi@34
  int v33; // edx@34
  int v34; // esi@34
  signed int v35; // esi@35
  signed int v36; // ecx@36
  char v37; // dl@37
  char v38; // dl@39
  char v39; // dl@41
  char v40; // dl@43
  char *v41; // [sp+0h] [bp-4h]@15
  char *v42; // [sp+0h] [bp-4h]@33

  v0 = (signed int)&unk_501BB4;
  do
  {
    *(_DWORD *)v0 = 0;
    v0 += 288;
  }
  while ( v0 < (signed int)&unk_503234 );
  v1 = (signed int)&unk_501BB8;
  do
  {
    *(_DWORD *)v1 = 0;
    v1 += 288;
  }
  while ( v1 < (signed int)&unk_503238 );
  v2 = (signed int)&unk_501BBC;
  do
  {
    *(_DWORD *)v2 = 0;
    v2 += 288;
  }
  while ( v2 < (signed int)&unk_50323C );
  v3 = (signed int)dword_501BA8;
  do
  {
    *(_DWORD *)v3 = 0;
    v3 += 288;
  }
  while ( v3 < (signed int)&unk_503228 );
  v4 = rand;
  v5 = (signed int)dword_501BAC;
  do
  {
    v5 += 288;
    *(_DWORD *)(v5 - 288) = rand() % 50 + 100;
  }
  while ( v5 < (signed int)&unk_50322C );
  v6 = (signed int)dword_501BB0;
  do
  {
    *(_DWORD *)v6 = 0;
    v6 += 288;
  }
  while ( v6 < (signed int)&unk_503230 );
  dword_456AC4 = 350;
  result = rand() % 4;
  if ( !result )
  {
    v8 = 72 * (rand() % 2 + 12);
    result = dword_501BA0[v8];
    if ( result > 0 )
    {
      v9 = rand() % 2;
      v10 = dword_5034F8;
      v11 = dword_464F40;
      dword_501BA8[v8] = v9 + 7;
      v12 = 0;
      v41 = (char *)&unk_501BD0 + v8 * 4;
      do
      {
        v13 = (int)((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v12 - 8) - 8);
        v14 = (int)(v41 - 16);
        *(_DWORD *)v14 = *(_DWORD *)v13;
        *(_DWORD *)(v14 + 4) = *(_DWORD *)(v13 + 4);
        *(_DWORD *)(v14 + 8) = *(_DWORD *)(v13 + 8);
        *(_DWORD *)(v14 + 12) = *(_DWORD *)(v13 + 12);
        v15 = (int)((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v12 - 7) - 8);
        *(_DWORD *)v41 = *(_DWORD *)v15;
        *((_DWORD *)v41 + 1) = *(_DWORD *)(v15 + 4);
        *((_DWORD *)v41 + 2) = *(_DWORD *)(v15 + 8);
        *((_DWORD *)v41 + 3) = *(_DWORD *)(v15 + 12);
        v16 = (int)((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v12 - 6) - 8);
        v17 = (int)(v41 + 16);
        *(_DWORD *)v17 = *(_DWORD *)v16;
        *(_DWORD *)(v17 + 4) = *(_DWORD *)(v16 + 4);
        *(_DWORD *)(v17 + 8) = *(_DWORD *)(v16 + 8);
        *(_DWORD *)(v17 + 12) = *(_DWORD *)(v16 + 12);
        v18 = (int)((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v12 - 5) - 8);
        v19 = (int)(v41 + 32);
        *(_DWORD *)v19 = *(_DWORD *)v18;
        *(_DWORD *)(v19 + 4) = *(_DWORD *)(v18 + 4);
        *(_DWORD *)(v19 + 8) = *(_DWORD *)(v18 + 8);
        *(_DWORD *)(v19 + 12) = *(_DWORD *)(v18 + 12);
        v12 += 4;
        v41 += 64;
      }
      while ( v12 < 16 );
      v20 = 0;
      do
      {
        result = 0;
        do
        {
          v21 = *((byte *)obstacleBpk + 16 * (16 * dword_501BA8[v8] + v20 - 16) + result);
          if ( v21 )
          {
            *((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v20 - 8) + result - 8) = v21;
            v10 = dword_5034F8;
            v11 = dword_464F40;
          }
          v22 = *((char *)obstacleBpk + 16 * (v20 + 16 * dword_501BA8[v8]) + result - 255);
          if ( v22 )
          {
            *((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v20 - 8) + result - 7) = v22;
            v10 = dword_5034F8;
            v11 = dword_464F40;
          }
          v23 = *((char *)obstacleBpk + 16 * (v20 + 16 * dword_501BA8[v8]) + result - 254);
          if ( v23 )
          {
            *((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v20 - 8) + result - 6) = v23;
            v10 = dword_5034F8;
            v11 = dword_464F40;
          }
          v24 = *((char *)obstacleBpk + 16 * (v20 + 16 * dword_501BA8[v8]) + result - 253);
          if ( v24 )
          {
            *((char *)v10 + dword_501BA0[v8] + v11 * (dword_501BA4[v8] + v20 - 8) + result - 5) = v24;
            v10 = dword_5034F8;
            v11 = dword_464F40;
          }
          result += 4;
        }
        while ( result < 16 );
        ++v20;
      }
      while ( v20 < 16 );
      v4 = rand;
    }
  }
  if ( dword_4A7AAC == 1 )
  {
    result = isMultiplayerGame;
    if ( !isMultiplayerGame )
    {
      result = 288 * (v4() % 2 + 14);
      if ( *(int *)((char *)dword_501BA0 + result) > 0 )
      {
        v25 = dword_5034F8;
        v26 = dword_464F40;
        *(int *)((char *)dword_501BA8 + result) = 6;
        v27 = 0;
        v42 = (char *)&unk_501BD0 + result;
        do
        {
          v28 = (int)((char *)v25
                    + *(int *)((char *)dword_501BA0 + result)
                    + v26 * (*(int *)((char *)dword_501BA4 + result) + v27 - 8)
                    - 8);
          v29 = (int)(v42 - 16);
          *(_DWORD *)v29 = *(_DWORD *)v28;
          *(_DWORD *)(v29 + 4) = *(_DWORD *)(v28 + 4);
          *(_DWORD *)(v29 + 8) = *(_DWORD *)(v28 + 8);
          *(_DWORD *)(v29 + 12) = *(_DWORD *)(v28 + 12);
          v30 = (int)((char *)v25
                    + *(int *)((char *)dword_501BA0 + result)
                    + v26 * (*(int *)((char *)dword_501BA4 + result) + v27 - 7)
                    - 8);
          *(_DWORD *)v42 = *(_DWORD *)v30;
          *((_DWORD *)v42 + 1) = *(_DWORD *)(v30 + 4);
          *((_DWORD *)v42 + 2) = *(_DWORD *)(v30 + 8);
          *((_DWORD *)v42 + 3) = *(_DWORD *)(v30 + 12);
          v31 = (int)((char *)v25
                    + *(int *)((char *)dword_501BA0 + result)
                    + v26 * (*(int *)((char *)dword_501BA4 + result) + v27 - 6)
                    - 8);
          v32 = (int)(v42 + 16);
          *(_DWORD *)v32 = *(_DWORD *)v31;
          *(_DWORD *)(v32 + 4) = *(_DWORD *)(v31 + 4);
          *(_DWORD *)(v32 + 8) = *(_DWORD *)(v31 + 8);
          *(_DWORD *)(v32 + 12) = *(_DWORD *)(v31 + 12);
          v33 = (int)((char *)v25
                    + *(int *)((char *)dword_501BA0 + result)
                    + v26 * (*(int *)((char *)dword_501BA4 + result) + v27 - 5)
                    - 8);
          v34 = (int)(v42 + 32);
          *(_DWORD *)v34 = *(_DWORD *)v33;
          *(_DWORD *)(v34 + 4) = *(_DWORD *)(v33 + 4);
          *(_DWORD *)(v34 + 8) = *(_DWORD *)(v33 + 8);
          *(_DWORD *)(v34 + 12) = *(_DWORD *)(v33 + 12);
          v27 += 4;
          v42 += 64;
        }
        while ( v27 < 16 );
        v35 = 0;
        do
        {
          v36 = 0;
          do
          {
            v37 = *((byte *)obstacleBpk + 16 * (16 * *(int *)((char *)dword_501BA8 + result) + v35 - 16) + v36);
            if ( v37 )
            {
              *((char *)v25
              + *(int *)((char *)dword_501BA0 + result)
              + v26 * (*(int *)((char *)dword_501BA4 + result) + v35 - 8)
              + v36
              - 8) = v37;
              v25 = dword_5034F8;
              v26 = dword_464F40;
            }
            v38 = *((char *)obstacleBpk + 16 * (v35 + 16 * *(int *)((char *)dword_501BA8 + result)) + v36 - 255);
            if ( v38 )
            {
              *((char *)v25
              + *(int *)((char *)dword_501BA0 + result)
              + v26 * (*(int *)((char *)dword_501BA4 + result) + v35 - 8)
              + v36
              - 7) = v38;
              v25 = dword_5034F8;
              v26 = dword_464F40;
            }
            v39 = *((char *)obstacleBpk + 16 * (v35 + 16 * *(int *)((char *)dword_501BA8 + result)) + v36 - 254);
            if ( v39 )
            {
              *((char *)v25
              + *(int *)((char *)dword_501BA0 + result)
              + v26 * (*(int *)((char *)dword_501BA4 + result) + v35 - 8)
              + v36
              - 6) = v39;
              v25 = dword_5034F8;
              v26 = dword_464F40;
            }
            v40 = *((char *)obstacleBpk + 16 * (v35 + 16 * *(int *)((char *)dword_501BA8 + result)) + v36 - 253);
            if ( v40 )
            {
              *((char *)v25
              + *(int *)((char *)dword_501BA0 + result)
              + v26 * (*(int *)((char *)dword_501BA4 + result) + v35 - 8)
              + v36
              - 5) = v40;
              v25 = dword_5034F8;
              v26 = dword_464F40;
            }
            v36 += 4;
          }
          while ( v36 < 16 );
          ++v35;
        }
        while ( v35 < 16 );
      }
      dword_4A7AAC = 0;
    }
  }
  return result;
}
// 456AC4: using guessed type int dword_456AC4;
// 45EA04: using guessed type int isMultiplayerGame;
// 464F40: using guessed type int dword_464F40;
// 4A7AAC: using guessed type int dword_4A7AAC;
// 501BA0: using guessed type int dword_501BA0[];
// 501BA4: using guessed type int dword_501BA4[];
// 501BA8: using guessed type int dword_501BA8[];
// 501BAC: using guessed type int dword_501BAC[];
// 501BB0: using guessed type int dword_501BB0[];

//----- (00409A90) --------------------------------------------------------
int sub_409A90()
{
  int result; // eax@1
  double v1; // st7@1
  signed int v2; // ecx@1
  signed int v3; // ecx@3

  result = 0;
  dword_464F68 = 0;
  v1 = flt_4A6894[37 * dword_4A9EA8];
  dword_445010 = 256;
  dword_445014 = 128;
  dword_445018 = 200;
  dword_44501C = 100;
  dword_456AA0 = 64;
  dword_456ABC = 0;
  dword_456AC0 = 0;
  dword_464F1C = 0;
  dword_4A7A3C = 0;
  dword_501264 = 0;
  dword_4A6B00 = 0;
  dword_503504 = 0;
  dword_46ECE8 = 0;
  dword_4A8AA4 = 0;
  dword_464F60 = 0;
  v2 = (signed int)&unk_481C08;
  flt_481BE4 = 3.75 / v1;
  do
  {
    *(_DWORD *)v2 = -1;
    v2 += 16;
  }
  while ( v2 < (signed int)&dword_481E08 );
  v3 = (signed int)&unk_481C0C;
  do
  {
    *(_DWORD *)v3 = 0;
    v3 += 16;
  }
  while ( v3 < (signed int)&dword_481E0C );
  dword_4A7CE0[0] = -1;
  dword_4A7CE4 = -1;
  dword_4A7CE8 = -1;
  dword_479684 = 0;
  dword_4A7CEC = -1;
  dword_481BE8 = 4;
  dword_456AE8 = 0;
  dword_456AB0 = 0;
  dword_456AB4 = 0;
  dword_456AB8 = 0;
  dword_456AAC = 0;
  dword_456AA4 = 0;
  dword_4AA508 = 0;
  dword_456AC8 = 0;
  dword_456ACC = 0;
  dword_456AD4 = 0;
  dword_456ADC = 0;
  dword_456AE0 = 0;
  dword_456AE4 = 0;
  dword_456AD8 = 0;
  dword_445034 = 163840;
  dword_464F6C = 0;
  dword_481E14 = 0;
  dword_4A9EB0 = 0;
  dword_481E0C = 0;
  dword_503224 = 0;
  dword_50A164 = 0;
  dword_503510 = 0;
  return result;
}


//----- (00409BF0) --------------------------------------------------------
signed int sub_409BF0()
{
  int v0; // eax@1
  char v1; // cl@2
  char *v2; // edi@3
  char v3; // al@4
  int v4; // eax@5
  char v5; // cl@6
  char *v6; // edi@7
  char v7; // al@8
  signed int v8; // edi@9
  signed int v9; // ebp@9
  signed int v10; // esi@9
  signed int v11; // eax@9
  int v12; // edx@10
  signed int v13; // eax@11
  int v14; // eax@13
  signed int v15; // ecx@13
  int v16; // edx@14
  int v17; // eax@14
  int v18; // edx@14
  int v19; // edx@14
  signed int result; // eax@15

  v0 = 0;
  do
  {
    v1 = *((byte *)dword_45EA50 + v0);
    *(&byte_464F50 + v0++) = v1;
  }
  while ( v1 );
  v2 = &byte_464F50 - 1;
  do
    v3 = (v2++)[1];
  while ( v3 );
  *(_DWORD *)v2 = 1095778862;
  v2[4] = 0;
  v4 = 0;
  do
  {
    v5 = *((byte *)dword_45EA50 + v4);
    byte_5034E0[v4++] = v5;
  }
  while ( v5 );
  v6 = &byte_5034E0[-1];
  do
    v7 = (v6++)[1];
  while ( v7 );
  *(_DWORD *)v6 = 1179535661;
  *((_DWORD *)v6 + 1) = 1313423918;
  v6[8] = 0;
  extractFromBpa(&byte_464F50, textureTemp, (int)byte_5034E0);
  v8 = textureTemp[0];
  v9 = dword_481E24[0];
  dword_4A685C = dword_481E28;
  *(float *)dword_4A7DB4 = (double)dword_481E2C;
  dword_464F40 = textureTemp[0];
  *(float *)dword_4A7DB8 = (double)dword_481E30;
  dword_4A7CF8 = dword_481E24[0];
  dword_4A7D0C[0] = (unsigned __int64)(double)dword_481E34;
  flt_4A8114 = (double)dword_481E38;
  flt_4A8118 = (double)dword_481E3C;
  dword_4A806C = (unsigned __int64)(double)dword_481E40;
  flt_4A8474 = (double)dword_481E44;
  flt_4A8478 = (double)dword_481E48;
  dword_4A83CC = (unsigned __int64)(double)dword_481E4C;
  v10 = 15;
  flt_4A87D4 = (double)dword_481E50;
  flt_4A87D8 = (double)dword_481E54;
  dword_4A872C = (unsigned __int64)(double)dword_481E58;
  v11 = (signed int)dword_501BA4;
  do
  {
    v12 = dword_481E24[v10];
    *(_DWORD *)(v11 - 4) = textureTemp[v10];
    *(_DWORD *)v11 = v12;
    v11 += 288;
    v10 += 2;
  }
  while ( v11 < (signed int)&unk_502DA4 );
  v13 = (signed int)&unk_479AAC;
  do
  {
    *(_DWORD *)(v13 + 16) = 0;
    *(_DWORD *)v13 = 0;
    *(_DWORD *)(v13 + 12) = 0;
    *(_DWORD *)(v13 + 8) = 0;
    v13 += 32;
  }
  while ( v13 < (signed int)&unk_479D2C );
  v14 = (int)&textureTemp[v10];
  v15 = (signed int)&unk_479AA4;
  do
  {
    v16 = *(_DWORD *)v14;
    v17 = v14 + 4;
    *(_DWORD *)(v15 - 4) = v16;
    v18 = *(_DWORD *)v17;
    v17 += 4;
    *(_DWORD *)v15 = v18;
    v19 = *(_DWORD *)v17;
    v17 += 4;
    *(_DWORD *)(v15 + 4) = v19;
    *(_DWORD *)(v15 + 12) = *(_DWORD *)v17;
    v15 += 32;
    v14 = v17 + 4;
  }
  while ( v15 < (signed int)&unk_479D24 );
  result = v8 >> 2;
  dword_4A6858 = v8 >> 2;
  dword_503508 = v9 >> 2;
  dword_4A9B90 = v8 >> 2;
  dword_467000 = v9 >> 2;
  return result;
}


//----- (00409E50) --------------------------------------------------------
unsigned __int64 __cdecl sub_409E50(int a1, float a2, float a3, float a4)
{
  signed int v4; // edi@1
  char *v5; // esi@1
  double v6; // st3@1
  float v7; // ST10_4@2
  double v8; // st2@2
  signed int v9; // edi@3
  char *v10; // esi@3
  double v11; // st4@4
  unsigned __int64 result; // rax@4
  signed int v13; // [sp+0h] [bp-Ch]@1
  signed int v14; // [sp+0h] [bp-Ch]@3

  v4 = 0;
  v5 = &byte_4A9BA1[3 * a1];
  v13 = 0;
  v6 = a4 * 0.1;
  do
  {
    v8 = (double)v13;
    *(v5 - 1) = (unsigned __int64)(v8 * ((a2 - a2 * 0.1) * 0.2) + a2 * 0.1);
    *v5 = (unsigned __int64)(v8 * ((a3 - a3 * 0.1) * 0.2) + a3 * 0.1);
    v7 = (a4 - v6) * 0.2;
    v5[1] = (unsigned __int64)(v8 * v7 + v6);
    v5 += 3;
    ++v4;
    v13 = v4;
  }
  while ( v4 < 5 );
  v9 = 0;
  v14 = 0;
  v10 = &byte_4A9BA1[3 * (a1 + 5)];
  do
  {
    v11 = (double)v14;
    *(v10 - 1) = (unsigned __int64)(v11 * ((63.0 - a2) * 0.2) + a2);
    *v10 = (unsigned __int64)(v11 * ((63.0 - a3) * 0.2) + a3);
    result = (unsigned __int64)(v11 * ((63.0 - a4) * 0.2) + a4);
    v10[1] = result;
    v10 += 3;
    ++v9;
    v14 = v9;
  }
  while ( v9 < 5 );
  return result;
}

//----- (00409F90) --------------------------------------------------------
int *sub_409F90()
{
  double v0; // st7@1
  float v1; // ST0C_4@2
  float v2; // ST08_4@2
  float v3; // ST04_4@2
  double v4; // st7@3
  float v5; // ST0C_4@3
  float v6; // ST08_4@3
  float v7; // ST04_4@3
  double v8; // st7@3
  float v9; // ST0C_4@3
  float v10; // ST08_4@3
  float v11; // ST04_4@3
  double v12; // st7@3
  float v13; // ST0C_4@3
  float v14; // ST08_4@3
  float v15; // ST04_4@3
  int v16; // edx@3
  int *result; // eax@3
  signed int v18; // ecx@3
  int *v19; // ebx@4
  int *v20; // ebx@4
  int *v21; // ebx@4
  int *v22; // ebx@4

  v0 = (double)dword_4A7D0C[0] * 3.75;
  flt_4A7DAC[0] = v0;
  flt_4A7E58 = v0;
  dword_4A7D10[0] = 1600 * dword_4A7D0C[0];
  dword_4A7E50[0] = dword_4A7DB4[0];
  dword_4A7E54[0] = dword_4A7DB8[0];
  byte_4A7E08[0] = 1;
  byte_4A7E09[0] = 1;
  dword_4A804C[0] = 0;
  if ( dword_4A6880[0] != 6 )
  {
    v1 = (double)dword_4A68C0;
    v2 = (double)dword_4A68BC;
    v3 = (double)dword_4A68B8;
    sub_409E50(15, v3, v2, v1);
  }
  v4 = (double)dword_4A806C * 3.75;
  flt_4A810C = v4;
  flt_4A81B8 = v4;
  v5 = (double)dword_4A6954;
  dword_4A8070 = 1600 * (dword_4A806C + 96);
  dword_4A81B0 = LODWORD(flt_4A8114);
  v6 = (double)dword_4A6950;
  dword_4A81B4 = LODWORD(flt_4A8118);
  byte_4A8168 = 1;
  byte_4A8169 = 2;
  dword_4A83AC = 0;
  v7 = (double)dword_4A694C;
  sub_409E50(25, v7, v6, v5);
  v8 = (double)dword_4A83CC * 3.75;
  flt_4A846C = v8;
  flt_4A8518 = v8;
  v9 = (double)dword_4A69E8;
  dword_4A83D0 = 1600 * (dword_4A83CC + 192);
  dword_4A8510 = LODWORD(flt_4A8474);
  v10 = (double)dword_4A69E4;
  dword_4A8514 = LODWORD(flt_4A8478);
  byte_4A84C8 = 1;
  byte_4A84C9 = 3;
  dword_4A870C = 0;
  v11 = (double)dword_4A69E0;
  sub_409E50(35, v11, v10, v9);
  v12 = (double)dword_4A872C * 3.75;
  flt_4A87CC = v12;
  flt_4A8878 = v12;
  v13 = (double)dword_4A6A7C;
  byte_4A8828 = 1;
  v14 = (double)dword_4A6A78;
  dword_4A8730 = 1600 * (dword_4A872C + 288);
  dword_4A8870 = LODWORD(flt_4A87D4);
  dword_4A8874 = LODWORD(flt_4A87D8);
  byte_4A8829 = 4;
  v15 = (double)dword_4A6A74;
  dword_4A8A6C = 0;
  sub_409E50(45, v15, v14, v13);
  dword_481BE8 = 15;
  v16 = (int)flt_4A6894;
  result = dword_4A7EA0;
  v18 = (signed int)&unk_4A7A74;
  dword_503518 = 4;
  do
  {
    *(result - 1) = 0;
    *result = 5000 * (*(_DWORD *)v18 + 3);
    *(result - 62) = *(_DWORD *)v16;
    *(result - 104) = 0;
    *(result - 60) = 0;
    *(result - 37) = 0;
    *(result - 5) = 0;
    *(result - 99) = 0;
    *(result - 98) = 0;
    *(result - 97) = 0;
    v19 = result - 96;
    *v19 = 0;
    v19[1] = 0;
    v19[2] = 0;
    v19[3] = 0;
    v19[4] = 0;
    v19[5] = 0;
    v19[6] = 0;
    v19[7] = 0;
    v19[8] = 0;
    v19[9] = 0;
    v19[10] = 0;
    v19[11] = 0;
    v19[12] = 0;
    v19[13] = 0;
    v19[14] = 0;
    v19[15] = 0;
    v20 = result - 80;
    *v20 = 0;
    v20[1] = 0;
    v20[2] = 0;
    v20[3] = 0;
    v20[4] = 0;
    v20[5] = 0;
    v20[6] = 0;
    v20[7] = 0;
    v20[8] = 0;
    v20[9] = 0;
    v20[10] = 0;
    v20[11] = 0;
    v20[12] = 0;
    v20[13] = 0;
    v20[14] = 0;
    v20[15] = 0;
    *(result - 63) = 0;
    *(result - 64) = 0;
    *(result - 57) = 0;
    *(result - 56) = 0;
    *(result - 41) = 0;
    *(result - 40) = 0;
    *(result - 39) = 0;
    *(result - 8) = 0;
    *(result - 7) = 0;
    *(result - 6) = 0;
    *(result - 3) = 0;
    *(result - 2) = 0;
    *(result - 15) = 0;
    *(result - 14) = 0;
    *(result - 13) = 0;
    *(result - 12) = 0;
    result[2] = 0;
    result[1] = 0;
    result[3] = 0;
    result[4] = 0;
    result[5] = 0;
    v21 = result + 17;
    *v21 = 0;
    v21[1] = 0;
    v21[2] = 0;
    v21[3] = 0;
    v21[4] = 0;
    v21[5] = 0;
    v21[6] = 0;
    v21[7] = 0;
    v21[8] = 0;
    v21[9] = 0;
    v21[10] = 0;
    v21[11] = 0;
    v21[12] = 0;
    v21[13] = 0;
    v21[14] = 0;
    v22 = result + 32;
    *v22 = 0;
    v22[1] = 0;
    v22[2] = 0;
    v22[3] = 0;
    v22[4] = 0;
    v22[5] = 0;
    v22[6] = 0;
    v22[7] = 0;
    v22[8] = 0;
    v22[9] = 0;
    v22[10] = 0;
    v22[11] = 0;
    v22[12] = 0;
    v22[13] = 0;
    v22[14] = 0;
    result[6] = 0;
    result[15] = 0;
    result[16] = 0;
    result[108] = 0;
    result[109] = 0;
    result[110] = 0;
    result[111] = 0;
    v18 += 84;
    v16 += 148;
    result += 216;
  }
  while ( v18 < (signed int)&unk_4A7BC4 );
  return result;
}

//----- (0040A360) --------------------------------------------------------
int sub_40A360()
{
  int result; // eax@1
  int v1; // ebp@1
  int v2; // esi@2
  int v3; // ebx@6
  int v4; // eax@7
  int v5; // edx@7
  int v6; // ecx@8
  int v7; // esi@9
  int v8; // esi@12
  int v9; // edi@12
  unsigned int v10; // eax@13
  unsigned int v11; // ecx@13
  double v12; // st7@13
  unsigned int v13; // edx@13
  double v14; // st6@13
  double v15; // st4@13
  double v16; // st2@13
  double v17; // ST48_8@13
  double v18; // ST40_8@13
  double v19; // st6@13
  double v20; // st5@13
  double v21; // st7@13
  double v22; // st7@13
  long double v23; // st6@14
  long double v24; // ST40_8@14
  long double v25; // st7@14
  long double v26; // st6@14
  long double v27; // st5@14
  int v28; // eax@16
  int v29; // ecx@16
  int v30; // edx@16
  int v31; // ebx@17
  int v32; // esi@17
  void *v33; // edi@18
  long double v34; // st7@18
  double v35; // st6@20
  double v36; // st6@21
  long double v37; // st6@23
  long double v38; // st6@23
  long double v39; // st6@25
  long double v40; // st5@25
  unsigned __int64 v41; // rax@26
  bool v42; // zf@29
  int v43; // [sp+10h] [bp-48h]@2
  void *v44; // [sp+14h] [bp-44h]@2
  double v45; // [sp+18h] [bp-40h]@13
  float v46; // [sp+18h] [bp-40h]@23
  double v47; // [sp+20h] [bp-38h]@13
  float v48; // [sp+20h] [bp-38h]@23
  int v49; // [sp+28h] [bp-30h]@2
  int v50; // [sp+2Ch] [bp-2Ch]@2
  double v51; // [sp+30h] [bp-28h]@13
  float v52; // [sp+30h] [bp-28h]@23
  int v53; // [sp+3Ch] [bp-1Ch]@2
  double v54; // [sp+50h] [bp-8h]@25

  result = dword_479D20;
  v1 = 0;
  dword_4AA928 = 0;
  if ( dword_479D20 > 0 )
  {
    v2 = (int)dword_4B4320;
    v49 = 0;
    v44 = dword_467020;
    v43 = (int)dword_4B4320;
    v50 = (int)dword_4B484C;
    v53 = dword_479D20;
    dword_4AA928 = dword_479D20;
    while ( 1 )
    {
      if ( *(_DWORD *)v2 > 0 )
        memset(v44, 0, 4 * *(_DWORD *)v2);
      v3 = *(_DWORD *)(v2 + 4);
      if ( v3 > 0 )
      {
        v4 = v2 + 1324;
        v5 = *(_DWORD *)(v2 + 4);
        do
        {
          ++dword_467020[v1 + *(_DWORD *)(v4 - 400)];
          ++dword_467020[v1 + *(_DWORD *)v4];
          v6 = v1 + *(_DWORD *)(v4 + 400);
          v4 += 4;
          --v5;
          ++dword_467020[v6];
        }
        while ( v5 );
      }
      v7 = *(_DWORD *)v2;
      if ( v7 > 0 )
      {
        memset(flt_4A8C00, 0, 4 * ((unsigned int)(4 * v7) >> 2));
        memset(flt_4A8AC0, 0, 4 * ((unsigned int)(4 * v7) >> 2));
        memset(flt_4A9A60, 0, 4 * ((unsigned int)(4 * v7) >> 2));
      }
      if ( v3 > 0 )
      {
        v8 = v50;
        v9 = v3;
        do
        {
          v10 = 4 * (v49 + *(_DWORD *)(v8 - 400));
          v11 = 2 * (v49 + *(_DWORD *)v8);
          v12 = (double)*(signed int *)&dword_4B4328[v10 / 2] * 0.00390625;
          v13 = 2 * (v49 + *(_DWORD *)(v8 + 400));
          v14 = (double)dword_4B4454[v10 / 4] * 0.00390625;
          v15 = (double)(dword_4B4580[v10 / 4] - 256);
          v16 = (double)(dword_4B4580[v13 / 2] - 256) - v15;
          v17 = (double)dword_4B4454[v11 / 2] * 0.00390625 - v14;
          v18 = (double)(dword_4B4580[v11 / 2] - 256) - v15;
          v19 = (double)dword_4B4454[v13 / 2] * 0.00390625 - v14;
          v47 = v17 * v16 - v19 * v18;
          v20 = (double)*(signed int *)&dword_4B4328[v13] * 0.00390625 - v12;
          v21 = (double)*(signed int *)&dword_4B4328[v11] * 0.00390625 - v12;
          v45 = v20 * v18 - v21 * v16;
          v51 = v21 * v19 - v20 * v17;
          v22 = v51 * v51 + v45 * v45 + v47 * v47;
          if ( v22 <= 1.0 )
          {
            v25 = 100.0;
            v26 = 100.0;
            v27 = 100.0;
          }
          else
          {
            v23 = sqrt(10000.0 / v22);
            v24 = v23;
            v25 = v23 * v47;
            v26 = v23 * v45;
            v27 = v24 * v51;
          }
          v28 = 4 * *(_DWORD *)(v8 - 400);
          v29 = 4 * *(_DWORD *)v8;
          v30 = 4 * *(_DWORD *)(v8 + 400);
          v8 += 4;
          --v9;
          *(float *)(v28 + 4889184) = *(float *)(v28 + 4889184) + v25;
          *(float *)(v29 + 4889184) = *(float *)(v29 + 4889184) + v25;
          *(float *)(v30 + 4889184) = *(float *)(v30 + 4889184) + v25;
          *(float *)(v28 + 4885184) = *(float *)(v28 + 4885184) + v26;
          *(float *)(v29 + 4885184) = *(float *)(v29 + 4885184) + v26;
          *(float *)(v30 + 4885184) = *(float *)(v30 + 4885184) + v26;
          *(float *)(v28 + 4885504) = *(float *)(v28 + 4885504) + v27;
          *(float *)(v29 + 4885504) = *(float *)(v29 + 4885504) + v27;
          *(float *)(v30 + 4885504) = *(float *)(v30 + 4885504) + v27;
        }
        while ( v9 );
      }
      v31 = *(_DWORD *)v43;
      v32 = 0;
      if ( *(_DWORD *)v43 > 0 )
      {
        v33 = v44;
        v34 = sqrt(350.0);
        do
        {
          if ( *(_DWORD *)v33 >= 1 )
          {
            v35 = 1.0 / (double)*(signed int *)v33;
            flt_4A9A60[v32] = v35 * flt_4A9A60[v32];
            flt_4A8AC0[v32] = v35 * flt_4A8AC0[v32];
            flt_4A8C00[v32] = v35 * flt_4A8C00[v32];
          }
          v36 = flt_4A8C00[v32] * flt_4A8C00[v32]
              + flt_4A8AC0[v32] * flt_4A8AC0[v32]
              + flt_4A9A60[v32] * flt_4A9A60[v32];
          if ( v36 < 1.0 )
            v36 = 1.0;
          v37 = sqrt(10000.0 / v36);
          v46 = flt_4A9A60[v32] * v37;
          flt_4A9A60[v32] = v46;
          v48 = flt_4A8AC0[v32] * v37;
          flt_4A8AC0[v32] = v48;
          v38 = v37 * flt_4A8C00[v32];
          flt_4A8C00[v32] = v38;
          v52 = v38 * v38 + v48 * v48;
          if ( v46 * v46 + v52 < 1.0 )
            flt_4A9A60[v32] = v46 + 1.0;
          v39 = v48 * -10.0 - v38 * 15.0 - flt_4A9A60[v32] * 10.0;
          v40 = sqrt(flt_4A9A60[v32] * flt_4A9A60[v32] + v52);
          v54 = v39 / (v40 * v34);
          if ( v54 <= 0.0 )
            v41 = (unsigned __int64)((v39 / (sqrt(425.0) * v40) + 1.0) * 3.0);
          else
            v41 = (unsigned __int64)(v54 * 5.0 + 3.0);
          *(_DWORD *)v33 = v41;
          ++v32;
          v33 = (char *)v33 + 4;
        }
        while ( v32 < v31 );
      }
      v1 += 75;
      result = v53 - 1;
      v42 = v53 == 1;
      v49 += 788;
      v50 += 3152;
      v43 += 3152;
      v44 = (char *)v44 + 300;
      --v53;
      if ( v42 )
        break;
      v2 = v43;
    }
  }
  return result;
}


//----- (0040A880) --------------------------------------------------------
int sub_40A880()
{
  int v0; // edx@1
  void *v1; // ebx@2
  int *v2; // esi@2
  int v3; // ebp@2
  int v4; // edx@3
  bool v5; // zf@3
  bool v6; // sf@3
  int result; // eax@7
  int v8; // ebp@8
  int v9; // ebx@8
  int v10; // ecx@9
  int v11; // edi@9
  int v12; // edx@10
  _UNKNOWN *v13; // esi@11
  int v14; // ecx@14
  int *v15; // [sp+10h] [bp-8h]@8
  int v16; // [sp+14h] [bp-4h]@9

  v0 = dword_479D20;
  if ( dword_479D20 > 0 )
  {
    v1 = dword_46F220;
    v2 = dword_4B4324;
    v3 = dword_479D20;
    do
    {
      v4 = *v2;
      v5 = *v2 == 0;
      v6 = *v2 < 0;
      dword_481BE8 = 0;
      if ( !v6 && !v5 )
      {
        memset(v1, 0xFFu, 4 * v4);
        dword_481BE8 = v4;
      }
      v2 += 788;
      v1 = (char *)v1 + 400;
      --v3;
    }
    while ( v3 );
    v0 = dword_479D20;
  }
  result = 0;
  dword_4AA928 = 0;
  if ( v0 > 0 )
  {
    v8 = dword_464F10;
    v9 = 0;
    v15 = dword_4B4324;
    do
    {
      v10 = *v15;
      v11 = 0;
      v5 = *v15 == 0;
      v6 = *v15 < 0;
      dword_481BE8 = 0;
      v16 = v10;
      if ( !v6 && !v5 )
      {
        do
        {
          v12 = 0;
          dword_4A6AFC = 0;
          if ( v8 > 0 )
          {
            v13 = &unk_50A1A8;
            do
            {
              if ( result == *((_DWORD *)v13 - 1) && v11 == *(_DWORD *)v13 )
              {
                v14 = v9 + v11;
                if ( dword_46F220[v9 + v11] == -1 )
                  dword_46F220[v14] = v12;
                else
                  dword_46F21C[v14] = v12;
              }
              ++v12;
              v13 = (char *)v13 + 44;
            }
            while ( v12 < v8 );
            v10 = v16;
            dword_4A6AFC = v12;
          }
          ++v11;
        }
        while ( v11 < v10 );
        v0 = dword_479D20;
        dword_481BE8 = v11;
      }
      ++result;
      v9 += 100;
      v15 += 788;
    }
    while ( result < v0 );
    dword_4AA928 = result;
  }
  return result;
}


//----- (0040A9A0) --------------------------------------------------------
int sub_40A9A0()
{
  int v0; // ebx@1
  int v1; // edi@1
  int v2; // ecx@1
  int i; // esi@1
  char v4; // dl@2
  int v5; // ecx@3
  int v6; // esi@3
  char v7; // dl@4
  int v8; // ecx@5
  int j; // esi@5
  char v10; // dl@6
  int v11; // ecx@7
  int k; // esi@7
  char v13; // dl@8
  int v14; // ecx@10
  signed int v15; // eax@10
  char *v16; // esi@11
  char v17; // dl@11
  int v18; // ebp@12
  int v19; // esi@12
  signed int v20; // eax@13
  char v21; // dl@14
  int v22; // ebp@16
  int v23; // esi@16
  signed int v24; // eax@17
  char *v25; // ecx@18
  char v26; // dl@18
  bool v27; // sf@20
  unsigned __int8 v28; // of@20
  signed int v29; // ebp@21
  signed int v30; // eax@22
  signed int v31; // ecx@22
  char *v32; // esi@23
  char v33; // dl@23
  int v34; // ebx@25
  int v35; // edi@25
  signed int v36; // esi@25
  unsigned __int64 v37; // rax@26
  int v38; // edx@26
  int v39; // ecx@26
  int v40; // eax@26
  int v41; // eax@28
  double v42; // st7@28
  signed int v43; // eax@29
  int v44; // ecx@30
  signed int v45; // eax@35
  int v46; // ecx@36
  int v47; // ecx@41
  int l; // eax@41
  int v49; // edi@42
  unsigned __int64 v50; // rax@43
  int v51; // esi@44
  int v52; // edi@44
  int v53; // ecx@45
  int v54; // eax@46
  int v55; // ecx@48
  int v56; // eax@49
  double v57; // st7@51
  int v58; // ecx@51
  double v59; // st7@51
  int v60; // ecx@51
  int v61; // ebp@51
  int v62; // ebp@53
  double v63; // st7@54
  double v64; // st6@54
  int v65; // esi@54
  int v66; // ebx@54
  int v67; // edi@55
  double v68; // st5@55
  int v69; // ST18_4@55
  int v70; // ecx@57
  __int64 v71; // rax@58
  int v72; // esi@58
  int v73; // eax@59
  char *v74; // edi@59
  char v75; // dl@59
  __int64 v76; // rax@59
  int v78; // [sp+10h] [bp-Ch]@9
  int v79; // [sp+14h] [bp-8h]@9
  signed int v80; // [sp+18h] [bp-4h]@12
  signed int v81; // [sp+18h] [bp-4h]@16
  int v82; // [sp+18h] [bp-4h]@56

  v0 = dword_464F40;
  v1 = dword_4A7CF8;
  v2 = dword_464F40 * dword_4A7CF8;
  for ( i = 0; i < dword_464F40 * dword_4A7CF8 / 2; ++i )
  {
    v4 = *((byte *)dword_5034F8 + i);
    *((byte *)dword_5034F8 + i) = *((char *)dword_5034F8 + v2 - i - 1);
    *((char *)dword_5034F8 + dword_464F40 * dword_4A7CF8 - i - 1) = v4;
    v1 = dword_4A7CF8;
    v0 = dword_464F40;
    v2 = dword_464F40 * dword_4A7CF8;
  }
  v5 = v0 * v1;
  v6 = 0;
  if ( v0 * v1 / 2 > 0 )
  {
    do
    {
      v7 = *((byte *)dword_50A16C + v6);
      *((byte *)dword_50A16C + v6) = *((char *)dword_50A16C + v5 - v6 - 1);
      *((char *)dword_50A16C + dword_464F40 * dword_4A7CF8 - v6 - 1) = v7;
      v5 = dword_464F40 * dword_4A7CF8;
      ++v6;
    }
    while ( v6 < dword_464F40 * dword_4A7CF8 / 2 );
  }
  v8 = dword_4A6858 * dword_503508;
  for ( j = 0; j < dword_4A6858 * dword_503508 / 2; ++j )
  {
    v10 = *((byte *)dword_5034D0 + j);
    *((byte *)dword_5034D0 + j) = *((char *)dword_5034D0 + v8 - j - 1);
    *((char *)dword_5034D0 + dword_4A6858 * dword_503508 - j - 1) = v10;
    v8 = dword_4A6858 * dword_503508;
  }
  v11 = dword_4A9B90 * dword_467000;
  for ( k = 0; k < dword_4A9B90 * dword_467000 / 2; ++k )
  {
    v13 = *((byte *)dword_4AA920 + k);
    *((byte *)dword_4AA920 + k) = *((char *)dword_4AA920 + v11 - k - 1);
    *((char *)dword_4AA920 + dword_4A9B90 * dword_467000 - k - 1) = v13;
    v11 = dword_4A9B90 * dword_467000;
  }
  v78 = 0;
  v79 = 0;
  do
  {
    v14 = v78;
    v15 = 0;
    do
    {
      v16 = (char *)dword_5034FC + v78 + v15;
      v17 = *v16;
      *v16 = *((byte *)dword_5034FC + v14 + 153599);
      ++v15;
      *((byte *)dword_5034FC + v14-- + 153599) = v17;
    }
    while ( v15 < 76800 );
    v18 = v79;
    v19 = v78 + 75200;
    v80 = 24;
    do
    {
      v20 = 0;
      do
      {
        v21 = *((byte *)dword_5034FC + v18 + v20);
        *((byte *)dword_5034FC + v18 + v20) = *((byte *)dword_5034FC + v19 + v20);
        *((byte *)dword_5034FC + v19 + v20++) = v21;
      }
      while ( v20 < 1600 );
      v18 += 1600;
      v19 -= 1600;
      --v80;
    }
    while ( v80 );
    v22 = v79 + 76800;
    v23 = v78 + 152000;
    v81 = 24;
    do
    {
      v24 = 0;
      do
      {
        v25 = (char *)dword_5034FC + v22 + v24;
        v26 = *v25;
        *v25 = *((byte *)dword_5034FC + v23 + v24);
        *((byte *)dword_5034FC + v23 + v24++) = v26;
      }
      while ( v24 < 1600 );
      v22 += 1600;
      v23 -= 1600;
      --v81;
    }
    while ( v81 );
    v28 = __OFSUB__(v79 + 153600, 614400);
    v27 = v79 - 460800 < 0;
    v79 += 153600;
    v78 += 153600;
  }
  while ( v27 ^ v28 );
  v29 = 0;
  do
  {
    v30 = 0;
    v31 = v29;
    do
    {
      v32 = (char *)pedestrBpk + v29 + v30;
      v33 = *v32;
      *v32 = *((byte *)pedestrBpk + v31 + 255);
      ++v30;
      *((byte *)pedestrBpk + v31-- + 255) = v33;
    }
    while ( v30 < 128 );
    v29 += 256;
  }
  while ( v29 < 9216 );
  v34 = dword_464F40;
  v35 = 0;
  v36 = (signed int)dword_4A7D0C;
  do
  {
    *(float *)(v36 + 168) = (double)(signed int)(v34 - (unsigned __int64)*(float *)(v36 + 168) - 1);
    v37 = (unsigned __int64)*(float *)(v36 + 172);
    v38 = dword_4A7CF8;
    v39 = dword_4A7CF8 - v37;
    v27 = *(_DWORD *)v36 - 48 < 0;
    v40 = *(_DWORD *)v36 - 48;
    *(_DWORD *)v36 = v40;
    *(float *)(v36 + 172) = (double)(v39 - 1);
    if ( v27 )
      *(_DWORD *)v36 = v40 + 95;
    v41 = 1600 * (v35 + *(_DWORD *)v36);
    v42 = (double)*(signed int *)v36 * 3.75;
    *(float *)(v36 + 160) = v42;
    *(float *)(v36 + 332) = v42;
    *(_DWORD *)(v36 + 4) = v41;
    v36 += 864;
    v35 += 96;
  }
  while ( v36 < (signed int)&unk_4A8A8C );
  v43 = (signed int)dword_501BA4;
  do
  {
    v44 = *(_DWORD *)(v43 - 4);
    if ( v44 > 0 )
      *(_DWORD *)(v43 - 4) = v34 - v44 - 1;
    if ( *(_DWORD *)v43 > 0 )
      *(_DWORD *)v43 = v38 - *(_DWORD *)v43 - 1;
    v43 += 288;
  }
  while ( v43 < (signed int)&unk_502DA4 );
  v45 = (signed int)&unk_479AA4;
  do
  {
    v46 = *(_DWORD *)(v45 - 4);
    if ( v46 > 0 )
      *(_DWORD *)(v45 - 4) = v34 - v46 - 17;
    if ( *(_DWORD *)v45 > 0 )
      *(_DWORD *)v45 = v38 - *(_DWORD *)v45 - 17;
    v45 += 32;
  }
  while ( v45 < (signed int)&unk_479D24 );
  v47 = dword_50E718;
  for ( l = 0; l < v47; ++l )
  {
    v49 = dword_4A9FE0[l];
    dword_479280[l] = v34 - dword_479280[l] - 1;
    dword_4A9FE0[l] = v38 - v49 - 1;
  }
  LODWORD(v50) = dword_479D20;
  if ( dword_479D20 > 0 )
  {
    v51 = (int)dword_4B4320;
    v52 = dword_479D20;
    do
    {
      v53 = 0;
      if ( *(_DWORD *)v51 > 0 )
      {
        v54 = v51 + 8;
        do
        {
          *(_DWORD *)v54 = -*(_DWORD *)v54;
          ++v53;
          v54 += 4;
        }
        while ( v53 < *(_DWORD *)v51 );
      }
      v55 = 0;
      if ( *(_DWORD *)v51 > 0 )
      {
        v56 = v51 + 308;
        do
        {
          *(_DWORD *)v56 = -*(_DWORD *)v56;
          ++v55;
          v56 += 4;
        }
        while ( v55 < *(_DWORD *)v51 );
      }
      v57 = (double)*(signed int *)(v51 + 908);
      *(_DWORD *)(v51 + 908) = -*(_DWORD *)(v51 + 912);
      v50 = (unsigned __int64)-v57;
      v58 = -*(_DWORD *)(v51 + 920);
      v59 = -(double)*(signed int *)(v51 + 916);
      *(_DWORD *)(v51 + 912) = v50;
      *(_DWORD *)(v51 + 916) = v58;
      v60 = *(_DWORD *)(v51 + 2524);
      v61 = *(_DWORD *)(v51 + 2528);
      *(_DWORD *)(v51 + 920) = (unsigned __int64)v59;
      LODWORD(v50) = dword_4A7CF8 - v61 - 1;
      *(_DWORD *)(v51 + 2524) = v34 - v60 - 1;
      *(_DWORD *)(v51 + 2528) = v50;
      v51 += 3152;
      --v52;
    }
    while ( v52 );
    v38 = dword_4A7CF8;
  }
  v62 = dword_464F10;
  if ( dword_464F10 > 0 )
  {
    v63 = (double)((v34 << 8) - 256);
    v64 = (double)((v38 << 8) - 256);
    v65 = (int)dword_50A18C;
    v66 = dword_464F10;
    do
    {
      v67 = *(_DWORD *)(v65 + 8);
      v68 = (double)*(signed int *)(v65 + 4);
      v69 = v67 * *(_DWORD *)(v65 - 8);
      *(_DWORD *)v65 = (unsigned __int64)(v63 - (double)*(signed int *)v65 - (double)(v67 * *(_DWORD *)(v65 - 12)));
      v50 = (unsigned __int64)(v64 - v68 - (double)v69);
      *(_DWORD *)(v65 + 4) = v50;
      v65 += 44;
      --v66;
    }
    while ( v66 );
  }
  v82 = 0;
  if ( v62 > 0 )
  {
    v70 = (int)dword_50A184;
    do
    {
      v71 = *(_DWORD *)(v70 - 4) * *(_DWORD *)v70;
      v72 = 0;
      if ( ((signed int)v71 - HIDWORD(v71)) >> 1 > 0 )
      {
        do
        {
          v73 = *(_DWORD *)(v70 + 4);
          v74 = (char *)dword_4A7A28 + v73 + v72;
          v75 = *v74;
          *v74 = *((char *)dword_4A7A28 + v73 + *(_DWORD *)v70 * *(_DWORD *)(v70 - 4) - v72 - 1);
          *((char *)dword_4A7A28 + *(_DWORD *)(v70 + 4) + *(_DWORD *)v70 * *(_DWORD *)(v70 - 4) - v72 - 1) = v75;
          v76 = *(_DWORD *)v70 * *(_DWORD *)(v70 - 4);
          ++v72;
        }
        while ( v72 < ((signed int)v76 - HIDWORD(v76)) >> 1 );
        v62 = dword_464F10;
      }
      LODWORD(v50) = v82 + 1;
      v70 += 44;
      ++v82;
    }
    while ( v82 < v62 );
  }
  return v50;
}


//----- (0040AFC0) --------------------------------------------------------
int sub_40AFC0()
{
  int v0; // esi@1
  long double v1; // st7@1
  int v2; // ebp@1
  int v3; // ebx@2
  int v4; // edi@4
  int v5; // ecx@4
  int v6; // eax@4
  int v7; // eax@7
  long double v8; // st7@15
  int v9; // ebx@15
  unsigned __int64 v10; // rax@15
  int v11; // edi@16
  int v12; // ebp@16
  int v13; // ecx@17
  int v14; // edx@17
  long double v15; // st7@33
  double v16; // ST20_8@33
  double v17; // ST18_8@33
  signed int v18; // ebp@33
  signed int v19; // edi@33
  long double v20; // st7@33
  signed int v21; // ebx@33
  unsigned __int64 v22; // rax@33
  char v23; // bl@49
  int v24; // edi@49
  int v25; // ecx@49
  signed int v26; // edx@49
  signed int v27; // eax@49
  int v28; // ecx@58
  signed int v29; // edx@58
  signed int v30; // eax@58
  int v31; // eax@67
  int v32; // ebp@68
  unsigned __int8 v33; // cl@68
  unsigned __int8 v34; // dl@68
  int v35; // eax@75
  bool v36; // zf@79
  unsigned int v37; // eax@79
  int v38; // ecx@81
  int v39; // eax@99
  int v40; // eax@101
  int v41; // eax@103
  long double v42; // st7@105
  int v43; // ebp@105
  int v44; // ebx@106
  int v45; // edi@108
  int v46; // ecx@108
  int v47; // eax@117
  long double v48; // st7@119
  int v49; // ebp@119
  int v50; // ebx@120
  int v51; // edi@122
  int v52; // ecx@122
  long double v53; // st7@130
  int v54; // ebp@130
  int v55; // ebx@131
  int v56; // edi@133
  int v57; // ecx@133
  long double v58; // st7@141
  int v59; // ebp@141
  int v60; // ebx@142
  int v61; // edi@144
  int v62; // ecx@144
  int v63; // edx@153
  int result; // eax@155
  int v65; // ebp@158
  char v66; // [sp+13h] [bp-15h]@49
  int v67; // [sp+14h] [bp-14h]@1
  int v68; // [sp+14h] [bp-14h]@105
  int v69; // [sp+14h] [bp-14h]@119
  int v70; // [sp+14h] [bp-14h]@130
  int v71; // [sp+14h] [bp-14h]@141
  int v72; // [sp+18h] [bp-10h]@1
  int v73; // [sp+18h] [bp-10h]@105
  int v74; // [sp+18h] [bp-10h]@119
  int v75; // [sp+18h] [bp-10h]@130
  int v76; // [sp+18h] [bp-10h]@141
  int v77; // [sp+20h] [bp-8h]@141

  v0 = 216 * dword_503518;
  dword_50E71C = 0;
  v1 = (flt_4A7DAC[216 * dword_503518] + 180.0) * 0.01745329251994444;
  v67 = (unsigned __int64)(sin(v1) * 35.0 + *(float *)&dword_4A7DB4[216 * dword_503518]);
  v72 = (unsigned __int64)(cos(v1) * 35.0 + *(float *)&dword_4A7DB8[216 * dword_503518]);
  v2 = 0;
  if ( dword_508D24 > 0 )
  {
    v3 = (int)dword_4A7DB8;
    do
    {
      if ( v2 != dword_503518 )
      {
        v4 = v67 - (unsigned __int64)*(float *)(v3 - 4);
        v5 = v72 - (unsigned __int64)*(float *)v3;
        v6 = v4;
        if ( v4 < 0 )
          v6 = -v4;
        if ( v6 < 20 )
        {
          v7 = v72 - (unsigned __int64)*(float *)v3;
          if ( v5 < 0 )
            v7 = -v5;
          if ( v7 < 20
            && *((byte *)dword_5034FC + 40 * v5 + *(_DWORD *)(v3 - 168) + v4 + 820) > 3u
            && !dword_4A7E88[v0]
            && !dword_4A7E0C[v0] )
            dword_4A7E88[v0] = 100;
        }
      }
      ++v2;
      v3 += 864;
    }
    while ( v2 < dword_508D24 );
  }
  v8 = (*(float *)(v0 * 4 + 4881836) + 180.0) * 0.01745329251994444;
  v9 = (unsigned __int64)(sin(v8) * 25.0 + *(float *)(v0 * 4 + 4881844));
  v10 = (unsigned __int64)(cos(v8) * 25.0 + *(float *)(v0 * 4 + 4881848));
  if ( dword_464F60 > 0 )
  {
    v11 = (int)dword_481C04;
    v12 = dword_464F60;
    do
    {
      v13 = v9 - *(_DWORD *)(v11 - 4);
      v14 = v10 - *(_DWORD *)v11;
      if ( v13 < 0 )
        v13 = -v13;
      if ( v13 < 20 )
      {
        if ( v14 < 0 )
          v14 = -v14;
        if ( v14 < 20 && !dword_4A7E88[v0] && !dword_4A7E0C[v0] )
          dword_4A7E88[v0] = 60;
      }
      v11 += 16;
      --v12;
    }
    while ( v12 );
  }
  if ( dword_4A7E94[v0] > 5 && !dword_4A7E84[v0] )
    dword_4A7E84[v0] = 100;
  if ( dword_4A7E98[v0] > 3 && !dword_4A7E88[v0] )
    dword_4A7E88[v0] = 100;
  v15 = (*(float *)(v0 * 4 + 4881836) + 206.0) * 0.01745329251994444;
  v16 = *(float *)(v0 * 4 + 4881844);
  v17 = *(float *)(v0 * 4 + 4881848);
  v18 = (unsigned __int64)(sin(v15) * 40.0 + v16);
  v19 = (unsigned __int64)(cos(v15) * 40.0 + v17);
  v20 = (*(float *)(v0 * 4 + 4881836) + 180.0 - 26.0) * 0.01745329251994444;
  v21 = (unsigned __int64)(sin(v20) * 40.0 + v16);
  v22 = (unsigned __int64)(cos(v20) * 40.0 + v17);
  if ( v18 > dword_464F40 - 1 )
    v18 = dword_464F40 - 1;
  if ( v18 < 0 )
    v18 = 0;
  if ( v21 > dword_464F40 - 1 )
    v21 = dword_464F40 - 1;
  if ( v21 < 0 )
    v21 = 0;
  if ( v19 > dword_4A7CF8 - 1 )
    v19 = dword_4A7CF8 - 1;
  if ( v19 < 0 )
    v19 = 0;
  if ( (signed int)v22 > dword_4A7CF8 - 1 )
    LODWORD(v22) = dword_4A7CF8 - 1;
  if ( (v22 & 0x80000000) != 0 )
    LODWORD(v22) = 0;
  BYTE4(v22) = *((byte *)dword_4AA920 + dword_4A9B90 * (v19 >> 2) + (v18 >> 2));
  v23 = *((byte *)dword_4AA920 + dword_4A9B90 * ((signed int)v22 >> 2) + (v21 >> 2));
  v24 = 4 * (dword_4A7A20 + 216 * dword_503518) + 4881696;
  v66 = BYTE4(v22);
  *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] = 0;
  v25 = dword_4A8050[v0];
  v26 = 0;
  v27 = 560;
  do
  {
    if ( v25 > v27 - 30 && v25 < v27 )
      v26 = 1;
    v27 -= 60;
  }
  while ( v27 >= 60 );
  if ( v26 && !dword_4A7E0C[v0] && dword_4A6898[37 * dword_503518] > 0 )
    *(_DWORD *)v24 |= 4u;
  v28 = dword_4A8050[v0];
  v29 = 0;
  v30 = 530;
  do
  {
    if ( v28 > v30 - 30 && v28 < v30 )
      v29 = 1;
    v30 -= 60;
  }
  while ( v30 >= 30 );
  if ( v29 && !dword_4A7E0C[v0] && dword_4A6898[37 * dword_503518] > 0 )
    *(_DWORD *)v24 |= 8u;
  v31 = dword_4A7E80[v0];
  if ( v31 < 100 )
  {
    v32 = *((byte *)dword_5034D0
          + dword_4A6858 * ((signed int)(unsigned __int64)*(float *)(v0 * 4 + 4881848) >> 2)
          + ((signed int)(unsigned __int64)*(float *)(v0 * 4 + 4881844) >> 2));
    v33 = 16 - v66;
    v34 = 16 - v23;
    if ( *(float *)&dword_4A6884[37 * dword_503518] > 0.0 || *(float *)(v0 * 4 + 4881840) > 0.5 )
    {
      if ( dword_4A7E88[v0] )
      {
        v35 = dword_46EE00[v32];
        if ( v33 > v35 + 1 )
          *(_DWORD *)v24 |= 8u;
        if ( v34 >= v35 - 1 )
          goto LABEL_79;
      }
      else
      {
        if ( v33 > 9u )
          *(_DWORD *)v24 |= 8u;
        if ( v34 >= 7u )
          goto LABEL_79;
      }
      *(_DWORD *)v24 |= 4u;
    }
LABEL_79:
    v37 = rand() & 0x80000001;
    v36 = v37 == 0;
    if ( (v37 & 0x80000000) != 0 )
      v36 = (((byte)v37 - 1) | 0xFFFFFFFE) == -1;
    v38 = dword_503518;
    if ( v36
      && dword_4A7E98[216 * dword_503518] > 3
      && !dword_4A7E0C[216 * dword_503518]
      && dword_4A6898[37 * dword_503518] > 0 )
      *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] |= 8u;
    v0 = 216 * v38;
    if ( flt_501280[v32] * *(float *)&dword_4A6884[37 * v38] > *(float *)&dword_4A7DB0[216 * v38] && !dword_4A7E84[v0] )
      *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * v38)] |= 1u;
    *((float *)&unk_4A7DA8 + 216 * v38) = flt_4796A0[v32] * flt_4A6894[37 * v38];
    goto LABEL_97;
  }
  if ( v31 > 148 && *(float *)(v0 * 4 + 4881840) > 0.5 )
    *(_DWORD *)v24 |= 2u;
  if ( dword_4A7E80[v0] < 148 )
    *(_DWORD *)v24 |= 4u;
  if ( dword_4A7E84[v0] > 0 )
    *(_DWORD *)v24 = 2;
LABEL_97:
  if ( dword_4A7E88[v0] > 0 )
    *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] |= 0x10u;
  v39 = dword_4A7E80[v0];
  if ( v39 > 0 )
    dword_4A7E80[v0] = v39 - 1;
  v40 = dword_4A7E84[v0];
  if ( v40 > 0 )
    dword_4A7E84[v0] = v40 - 1;
  v41 = dword_4A7E88[v0];
  if ( v41 > 0 )
    dword_4A7E88[v0] = v41 - 1;
  v42 = *(float *)(v0 * 4 + 4881836) * 0.01745329251994444;
  v68 = (unsigned __int64)(sin(v42) * 55.0 + *(float *)(v0 * 4 + 4881844));
  v73 = (unsigned __int64)(cos(v42) * 55.0 + *(float *)(v0 * 4 + 4881848));
  v43 = 0;
  if ( dword_508D24 > 0 )
  {
    v44 = (int)dword_4A7DB8;
    do
    {
      if ( v43 != dword_503518 )
      {
        v45 = v68 - (unsigned __int64)*(float *)(v44 - 4);
        v46 = v73 - (unsigned __int64)*(float *)v44;
        if ( v45 < 0 )
          v45 = -v45;
        if ( v45 < 20 )
        {
          if ( v46 < 0 )
            v46 = -v46;
          if ( v46 < 20 && !dword_4A7EA4[v0] )
          {
            *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] |= 0x40u;
            dword_4A7EA4[v0] = 350;
          }
        }
      }
      ++v43;
      v44 += 864;
    }
    while ( v43 < dword_508D24 );
  }
  v47 = dword_4A7EA4[v0];
  if ( v47 > 0 )
    dword_4A7EA4[v0] = v47 - 1;
  v48 = (*(float *)(v0 * 4 + 4881836) + 180.0) * 0.01745329251994444;
  v69 = (unsigned __int64)(sin(v48) * 20.0 + *(float *)(v0 * 4 + 4881844));
  v74 = (unsigned __int64)(cos(v48) * 20.0 + *(float *)(v0 * 4 + 4881848));
  v49 = 0;
  if ( dword_508D24 > 0 )
  {
    v50 = (int)dword_4A7DB8;
    do
    {
      if ( v49 != dword_503518 )
      {
        v51 = v69 - (unsigned __int64)*(float *)(v50 - 4);
        v52 = v74 - (unsigned __int64)*(float *)v50;
        if ( v51 < 0 )
          v51 = -v51;
        if ( v51 < 20 )
        {
          if ( v52 < 0 )
            v52 = -v52;
          if ( v52 < 20 )
            *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] |= 0x20u;
        }
      }
      ++v49;
      v50 += 864;
    }
    while ( v49 < dword_508D24 );
  }
  v53 = (*(float *)(v0 * 4 + 4881836) + 180.0) * 0.01745329251994444;
  v70 = (unsigned __int64)(sin(v53) * 50.0 + *(float *)(v0 * 4 + 4881844));
  v75 = (unsigned __int64)(cos(v53) * 50.0 + *(float *)(v0 * 4 + 4881848));
  v54 = 0;
  if ( dword_508D24 > 0 )
  {
    v55 = (int)dword_4A7DB8;
    do
    {
      if ( v54 != dword_503518 )
      {
        v56 = v70 - (unsigned __int64)*(float *)(v55 - 4);
        v57 = v75 - (unsigned __int64)*(float *)v55;
        if ( v56 < 0 )
          v56 = -v56;
        if ( v56 < 20 )
        {
          if ( v57 < 0 )
            v57 = -v57;
          if ( v57 < 20 )
            *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] |= 0x20u;
        }
      }
      ++v54;
      v55 += 864;
    }
    while ( v54 < dword_508D24 );
  }
  v58 = (*(float *)(v0 * 4 + 4881836) + 180.0) * 0.01745329251994444;
  v71 = (unsigned __int64)(sin(v58) * 80.0 + *(float *)(v0 * 4 + 4881844));
  v59 = dword_503518;
  v76 = (unsigned __int64)(cos(v58) * 80.0 + *(float *)(v0 * 4 + 4881848));
  v77 = 0;
  if ( dword_508D24 > 0 )
  {
    v60 = (int)dword_4A7DB8;
    do
    {
      if ( v77 != v59 )
      {
        v61 = v71 - (unsigned __int64)*(float *)(v60 - 4);
        v62 = v76 - (unsigned __int64)*(float *)v60;
        if ( v61 < 0 )
          v61 = -v61;
        if ( v61 < 20 )
        {
          if ( v62 < 0 )
            v62 = -v62;
          if ( v62 < 20 )
            *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * v59)] |= 0x20u;
        }
      }
      v60 += 864;
      ++v77;
    }
    while ( v77 < dword_508D24 );
  }
  if ( dword_4A7E88[v0] == 70 )
  {
    v63 = rand() % 5;
    v59 = dword_503518;
    if ( !v63 )
      dword_4A805C[216 * dword_503518] = 1;
  }
  result = 864 * v59;
  if ( !dword_4A7E88[216 * v59] )
    *(int *)((char *)dword_4A805C + result) = 0;
  if ( *(int *)((char *)dword_4A805C + result) == 1 )
  {
    v65 = dword_4A7A20 + 216 * v59;
    result = 4 * v65 + 4881696;
    *(_DWORD *)&dword_4A7D20[4 * v65] |= 0x42u;
  }
  return result;
}


//----- (0040B920) --------------------------------------------------------
int sub_40B920()
{
  int result; // eax@1
  int v1; // edi@4
  int v2; // ebx@5
  int *v3; // esi@5
  int v4; // edx@5
  double v5; // st7@7
  int v6; // eax@10
  int v7; // ecx@10
  int v8; // [sp+0h] [bp-34h]@2
  int v9; // [sp+4h] [bp-30h]@1
  int v10; // [sp+8h] [bp-2Ch]@1
  int v11; // [sp+Ch] [bp-28h]@1
  int v12; // [sp+10h] [bp-24h]@1
  int v13; // [sp+14h] [bp-20h]@1
  int v14; // [sp+18h] [bp-1Ch]@1
  int v15; // [sp+1Ch] [bp-18h]@1
  int v16; // [sp+20h] [bp-14h]@1
  int v17; // [sp+24h] [bp-10h]@1
  int v18; // [sp+28h] [bp-Ch]@1
  int v19; // [sp+2Ch] [bp-8h]@1
  int v20; // [sp+30h] [bp-4h]@1

  result = dword_4A9EA8;
  v9 = 1032805417;
  v10 = 1039516303;
  v11 = 1038174126;
  v12 = 1045220557;
  v13 = 1043878380;
  v14 = 1050924810;
  v15 = 1039516303;
  v16 = 1044549468;
  v17 = 1031127695;
  v18 = 1039516303;
  v19 = 1022739087;
  v20 = 1031127695;
  if ( dword_4A9EA8 )
    v8 = dword_4A7AA4;
  else
    v8 = dword_4A7AF8;
  v1 = 0;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = dword_4A685C;
    v3 = &dword_4A6888;
    v4 = (int)dword_4A7D00;
    while ( 1 )
    {
      v5 = 1.0;
      if ( (v1 != result || dword_464F6C) && v3[4] > 0 )
      {
        v6 = v2 * (unsigned __int8)byte_4A7E08[864 * result] + dword_4A7D00[216 * result];
        v7 = *(_DWORD *)v4 + v2 * *(byte *)(v4 + 264);
        if ( v7 == v6 - 1 )
          v5 = *((float *)&v9 + 2 * v8) + 1.0;
        if ( v7 <= v6 - 2 )
          v5 = *((float *)&v10 + 2 * v8) + 1.0;
        if ( selectedRaceId != 2 )
        {
          if ( v7 == v6 + 1 )
            v5 = 1.0 - *((float *)&v15 + 2 * v8);
          if ( v7 >= v6 + 2 )
            v5 = 1.0 - *((float *)&v16 + 2 * v8);
        }
      }
      result = dword_508D24;
      ++v1;
      v4 += 864;
      *((float *)v3 - 1) = v5 * *(float *)v3;
      v3 += 37;
      if ( v1 >= result )
        break;
      result = dword_4A9EA8;
    }
    dword_503518 = v1;
  }
  return result;
}


//----- (0040BAB0) --------------------------------------------------------
void sub_40BAB0()
{
  int v0; // edi@1
  unsigned int v1; // esi@1
  int v2; // ecx@1
  bool v3; // zf@1
  bool v4; // sf@1
  int v5; // edx@3
  int v6; // eax@3
  double v7; // st7@6
  int v8; // eax@7
  double v9; // st7@10
  double v10; // st7@13
  int v11; // eax@15
  double v12; // st7@21
  int v13; // eax@22
  int v14; // eax@29
  double v16; // st7@35
  unsigned __int8 v17; // c0@35
  unsigned __int8 v18; // c2@35
  int v19; // edi@40
  double v20; // st7@43
  double v21; // st6@43
  long double v22; // st7@64
  long double v23; // st7@64
  long double v24; // st6@64
  long double v25; // st6@64
  long double v26; // st5@64
  long double v27; // st5@64
  long double v28; // st4@64
  int v29; // et1@65
  double v31; // st3@65
  unsigned __int8 v32; // c0@65
  unsigned __int8 v33; // c2@65
  long double v34; // st4@67
  double v35; // st6@69
  long double v36; // st7@69
  int v37; // ebp@69
  int v38; // edi@69
  unsigned __int64 v39; // rax@69
  int v40; // edi@69
  void *v41; // ebx@69
  int v42; // edi@73
  int v43; // edi@77
  int v44; // edi@81
  int v45; // edi@85
  int v46; // edi@89
  int v47; // edi@93
  unsigned __int64 v48; // rax@97
  int v49; // edi@97
  int v50; // eax@97
  int v51; // edx@97
  unsigned int v52; // esi@97
  int v53; // ecx@98
  int v54; // eax@98
  int v55; // ecx@98
  signed int v56; // ebx@99
  int v57; // edi@101
  unsigned int v58; // esi@101
  int v59; // edi@101
  signed int v60; // ecx@101
  int v61; // eax@102
  int v62; // ST44_4@104
  double v63; // st7@104
  double v64; // st7@108
  int v65; // esi@112
  int v66; // edi@112
  unsigned __int64 v67; // rax@112
  int v68; // eax@112
  unsigned int v69; // ecx@112
  int v70; // eax@116
  int v71; // ebx@124
  int v72; // ebp@124
  int v73; // ecx@135
  int v74; // eax@135
  int v75; // esi@187
  double v76; // st7@187
  double v77; // st7@187
  int v78; // ST44_4@199
  double v79; // st7@199
  double v80; // st7@203
  int v81; // [sp+18h] [bp-28h]@91
  int v82; // [sp+1Ch] [bp-24h]@95
  int v83; // [sp+20h] [bp-20h]@79
  int v84; // [sp+24h] [bp-1Ch]@83
  int v85; // [sp+28h] [bp-18h]@87
  float v86; // [sp+2Ch] [bp-14h]@64
  int v87; // [sp+2Ch] [bp-14h]@75
  float v88; // [sp+30h] [bp-10h]@64
  int v89; // [sp+30h] [bp-10h]@71

  v0 = dword_503518;
  v1 = 864 * dword_503518;
  dword_4A7E60[v1 / 4] = 0;
  v2 = 37 * v0;
  v3 = dword_4A6898[37 * v0] == 0;
  v4 = dword_4A6898[37 * v0] < 0;
  dword_4A7E5C[v1 / 4] = 0;
  dword_50E71C = 0;
  *(float *)(v1 + 4881840) = *(float *)(v1 + 4881840) - *(float *)(v1 + 4881840) * 0.02;
  if ( v4 || v3 )
    goto LABEL_64;
  if ( dword_4A7E0C[v1 / 4] )
  {
LABEL_31:
    if ( dword_4A6898[v2] > 0 )
      goto LABEL_33;
    goto LABEL_32;
  }
  v5 = 4 * (dword_4A7A20 + 216 * v0) + 4881696;
  v6 = *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * v0)];
  if ( v6 & 1 )
  {
    if ( v6 & 0x10 && dword_4A68B4[v2] > 0 )
    {
      v7 = *(float *)&dword_4A6884[37 * v0];
      if ( dword_4A68A0[v2] )
      {
        v8 = dword_4A6898[v2];
        dword_4A6898[v2] = v8 - 22;
        *(float *)(v1 + 4881840) = v7 * 1.5 * 0.03333333333333333 + *(float *)(v1 + 4881840);
        if ( v8 - 22 < 0 )
          dword_4A6898[v2] = 0;
        dword_4A68D8[v2] = 1;
        goto LABEL_13;
      }
      v9 = v7 * 1.3;
    }
    else
    {
      v9 = *(float *)&dword_4A6884[37 * v0] * 0.8;
    }
    *(float *)(v1 + 4881840) = v9 * 0.03333333333333333 + *(float *)(v1 + 4881840);
LABEL_13:
    v10 = *(float *)(v1 + 4881840) - *(float *)(v1 + 4881840) * 0.033333335;
    *(float *)(v1 + 4881840) = 0.02 * v10 + v10;
  }
  if ( v0 == dword_4A9EA8 )
  {
    v11 = dword_4A68D8[v2];
    if ( v11 == 1 )
      ++dword_456AAC;
    if ( !v11 )
      dword_456AAC = 0;
  }
  if ( *(_DWORD *)v5 & 2 && !(*(_DWORD *)v5 & 0x40) )
  {
    v12 = *(float *)(v1 + 4881840) - *(float *)&dword_4A6884[37 * v0] * 0.33333334 * 0.03333333333333333;
    *(float *)(v1 + 4881840) = 0.02 * (v12 - 0.033333335 * v12) + v12 - 0.033333335 * v12;
  }
  v13 = *(_DWORD *)v5 & 0x10;
  if ( v13 )
  {
    if ( dword_4A68B4[v2] > 0 && dword_4A6898[v2] > 0 )
    {
      v4 = dword_4A68B4[v2] - 400 < 0;
      dword_4A68B4[v2] -= 400;
      if ( v4 )
        dword_4A68B4[v2] = 0;
    }
  }
  if ( v13 )
    goto LABEL_31;
  if ( dword_4A6898[v2] > 0 )
  {
    v14 = dword_4A68B4[v2] + 20;
    v4 = dword_4A68B4[v2] - 102380 < 0;
    dword_4A68B4[v2] = v14;
    if ( !((unsigned __int8)(v4 ^ __OFSUB__(v14, 102400)) | (v14 == 102400)) )
      dword_4A68B4[v2] = 102400;
    goto LABEL_31;
  }
LABEL_32:
  dword_4A6884[v2] = 0;
LABEL_33:
  if ( dword_4A7E0C[v1 / 4] || *(float *)&dword_4A6884[37 * v0] <= 0.0 )
  {
    *(float *)(v1 + 4881852) = *(float *)(v1 + 4881852) - 0.1 * *(float *)(v1 + 4881852);
  }
  else
  {
    *(float *)(v1 + 4881852) = *(float *)(v1 + 4881856)
                             * *(float *)(v1 + 4881840)
                             * (*(float *)&dword_4A688C[37 * v0]
                              / *(float *)&dword_4A6884[37 * v0]);
    v16 = *(float *)(v1 + 4881852);
    if ( v17 | v18 )
      v16 = -v16;
    if ( v16 > 20.0 )
      *(float *)(v1 + 4881840) = *(float *)(v1 + 4881840) - 0.02 * *(float *)(v1 + 4881840);
  }
  v19 = dword_4A7A20 + 216 * v0;
  if ( dword_4A7D20[4 * v19] & 8 )
  {
    if ( !dword_4A7D18[v1 / 4] && !dword_4A7D1C[v1 / 4] )
    {
      v20 = -(*(float *)(v2 * 4 + 4876432) / (90.0 / *(float *)(v1 + 4881832)));
      v21 = *(float *)(v1 + 4881852) * 0.027777778 * v20;
      *(float *)&dword_50E71C = v20 - (v21 + v21);
      *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) - *(float *)(v1 + 4881832);
      if ( *(float *)(v1 + 4881856) > -36.0 )
        *(float *)(v1 + 4881856) = *(float *)(v1 + 4881856) - 2.0;
    }
  }
  if ( *(float *)(v1 + 4881836) < 0.0 )
    *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) + 360.0;
  if ( dword_4A7D20[4 * v19] & 4 )
  {
    if ( !dword_4A7D18[v1 / 4] && !dword_4A7D1C[v1 / 4] )
    {
      *(float *)&dword_50E71C = (*(float *)(v2 * 4 + 4876432) / (90.0 / *(float *)(v1 + 4881832))
                               + *(float *)&dword_50E71C)
                              * (*(float *)(v1 + 4881852) * 0.027777778 + *(float *)(v1 + 4881852) * 0.027777778 + 1.0);
      *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) + *(float *)(v1 + 4881832);
      if ( *(float *)(v1 + 4881856) < 36.0 )
        *(float *)(v1 + 4881856) = *(float *)(v1 + 4881856) + 2.0;
    }
  }
  if ( *(float *)(v1 + 4881836) >= 360.0 )
    *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) - 360.0;
  if ( *(float *)(v1 + 4881856) > 0.0 )
    *(float *)(v1 + 4881856) = *(float *)(v1 + 4881856) - 1.0;
  if ( *(float *)(v1 + 4881856) < 0.0 )
    *(float *)(v1 + 4881856) = *(float *)(v1 + 4881856) + 1.0;
  if ( dword_4A6898[v2] > 0 )
    *(float *)(v1 + 4881836) = *(float *)(v1 + 4881924) + *(float *)(v1 + 4881836);
  if ( *(float *)(v1 + 4881836) < 0.0 )
    *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) + 360.0;
  if ( *(float *)(v1 + 4881836) >= 360.0 )
    *(float *)(v1 + 4881836) = *(float *)(v1 + 4881836) - 360.0;
LABEL_64:
  v22 = (*(float *)(v1 + 4881836) + 270.0) * 0.01745329251994444;
  flt_464F70 = sin(v22) * *(float *)&dword_50E71C;
  v23 = cos(v22) * *(float *)&dword_50E71C * 0.833333;
  v24 = (*(float *)(v1 + 4881836) + 180.0) * 0.01745329251994444;
  v86 = sin(v24) * *(float *)(v1 + 4881840);
  v25 = cos(v24) * *(float *)(v1 + 4881840) * 0.833333;
  v26 = (*(float *)(v1 + 4881836) - 90.0 + 180.0) * 0.01745329251994444;
  v88 = sin(v26) * *(float *)(v1 + 4881852) * 0.09090909090909091;
  v27 = cos(v26) * *(float *)(v1 + 4881852) * 0.07575754545454545;
  v28 = (v88 + v86) * (v88 + v86) + (v27 + v25) * (v27 + v25);
  if ( v28 == 0.0 )
  {
    v34 = 1.0;
  }
  else
  {
    v29 = *(_DWORD *)(v1 + 4881840);
    v31 = *(float *)(v1 + 4881840);
    if ( v32 | v33 )
      v31 = -v31;
    v34 = v31 / sqrt(v28);
  }
  dword_4AA924 = 0;
  *(float *)(v1 + 4882012) = (v88 + v86) * v34;
  *(float *)(v1 + 4882016) = (v27 + v25) * v34;
  v35 = flt_464F70;
  LODWORD(flt_464F70) = 0;
  *(float *)(v1 + 4882012) = v35 + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4882016) = v23 + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4882012) = *(float *)(v1 + 4881916) + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4882016) = *(float *)(v1 + 4881920) + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881860) = sin((*(float *)(v1 + 4881836) + 206.0) * 0.01745329251994444) * 18.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881864) = cos((*(float *)(v1 + 4881836) + 206.0) * 0.01745329251994444) * 14.999994
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881868) = sin((*(float *)(v1 + 4881836) + 180.0 - 26.0) * 0.01745329251994444) * 18.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881872) = cos((*(float *)(v1 + 4881836) + 180.0 - 26.0) * 0.01745329251994444) * 14.999994
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881876) = sin((*(float *)(v1 + 4881836) + 334.0) * 0.01745329251994444) * 18.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881880) = cos((*(float *)(v1 + 4881836) + 334.0) * 0.01745329251994444) * 14.999994
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881884) = sin((*(float *)(v1 + 4881836) + 180.0 - 154.0) * 0.01745329251994444) * 18.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881888) = cos((*(float *)(v1 + 4881836) + 180.0 - 154.0) * 0.01745329251994444) * 14.999994
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881892) = sin((*(float *)(v1 + 4881836) + 270.0) * 0.01745329251994444) * 8.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881896) = cos((*(float *)(v1 + 4881836) + 270.0) * 0.01745329251994444) * 6.666664
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881900) = sin((*(float *)(v1 + 4881836) + 180.0 - 90.0) * 0.01745329251994444) * 8.0
                           + *(float *)(v1 + 4882012);
  *(float *)(v1 + 4881904) = cos((*(float *)(v1 + 4881836) + 180.0 - 90.0) * 0.01745329251994444) * 6.666664
                           + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881908) = sin((*(float *)(v1 + 4881836) + 180.0) * 0.01745329251994444) * 22.0
                           + *(float *)(v1 + 4882012);
  v36 = cos((*(float *)(v1 + 4881836) + 180.0) * 0.01745329251994444) * 18.333326 + *(float *)(v1 + 4882016);
  *(float *)(v1 + 4881912) = v36;
  v37 = dword_464F40;
  v38 = dword_464F40 * (unsigned __int64)(v36 + *(float *)(v1 + 4881848));
  v39 = (unsigned __int64)(*(float *)(v1 + 4881908) + *(float *)(v1 + 4881844));
  v4 = (signed int)v39 + v38 < 0;
  v40 = v39 + v38;
  v41 = dword_50A16C;
  if ( v4 || v40 >= dword_464F40 * dword_4A7CF8 )
    v89 = 15;
  else
    v89 = *((byte *)dword_50A16C + v40) & 0xF;
  v42 = (unsigned __int64)(*(float *)(v1 + 4881860) + *(float *)(v1 + 4881844))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881864));
  if ( v42 < 0 || v42 >= dword_464F40 * dword_4A7CF8 )
    v87 = 15;
  else
    v87 = *((byte *)dword_50A16C + v42) & 0xF;
  v43 = (unsigned __int64)(*(float *)(v1 + 4881868) + *(float *)(v1 + 4881844))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881872));
  if ( v43 < 0 || v43 >= dword_464F40 * dword_4A7CF8 )
    v83 = 15;
  else
    v83 = *((byte *)dword_50A16C + v43) & 0xF;
  v44 = (unsigned __int64)(*(float *)(v1 + 4881876) + *(float *)(v1 + 4881844))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881880));
  if ( v44 < 0 || v44 >= dword_464F40 * dword_4A7CF8 )
    v84 = 15;
  else
    v84 = *((byte *)dword_50A16C + v44) & 0xF;
  v45 = (unsigned __int64)(*(float *)(v1 + 4881884) + *(float *)(v1 + 4881844))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881888));
  if ( v45 < 0 || v45 >= dword_464F40 * dword_4A7CF8 )
    v85 = 15;
  else
    v85 = *((byte *)dword_50A16C + v45) & 0xF;
  v46 = (unsigned __int64)(*(float *)(v1 + 4881844) + *(float *)(v1 + 4881892))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881896));
  if ( v46 < 0 || v46 >= dword_464F40 * dword_4A7CF8 )
    v81 = 15;
  else
    v81 = *((byte *)dword_50A16C + v46) & 0xF;
  v47 = (unsigned __int64)(*(float *)(v1 + 4881844) + *(float *)(v1 + 4881900))
      + dword_464F40 * (unsigned __int64)(*(float *)(v1 + 4881848) + *(float *)(v1 + 4881904));
  if ( v47 < 0 || v47 >= dword_464F40 * dword_4A7CF8 )
    v82 = 15;
  else
    v82 = *((byte *)dword_50A16C + v47) & 0xF;
  v48 = (unsigned __int64)(*(float *)(v1 + 4881836) * 0.2666666666666667);
  v49 = 1600 * (v48 + 96 * dword_503518);
  dword_4A7D0C[v1 / 4] = v48;
  dword_4A7D10[v1 / 4] = v49;
  v50 = sub_43BFE0(
          (int)((char *)dword_5034FC + v49),
          (int)((char *)v41
              + (unsigned __int64)*(float *)(v1 + 4882012)
              + v37 * (unsigned __int64)(*(float *)(v1 + 4881848) - 20.0 + *(float *)(v1 + 4882016))
              + (unsigned __int64)*(float *)(v1 + 4881844)
              - 20));
  v51 = dword_503518;
  v52 = 864 * dword_503518;
  dword_4A7D14[216 * dword_503518] = v50;
  if ( v50 >= 4 )
  {
    dword_4A7D14[v52 / 4] = 0;
LABEL_134:
    v72 = v85;
    v71 = v87;
    goto LABEL_135;
  }
  v53 = v50;
  v54 = dword_4A7A40;
  dword_4A7E90[v52 / 4] = v53;
  v55 = dword_508D20 - 20;
  dword_4A7E74[v52 / 4] = v54 - 20;
  dword_4A7E78[v52 / 4] = v55;
  if ( dword_4A7E94[v52 / 4] > 3 )
  {
    dword_4A7DB0[v52 / 4] = 0;
    dword_4A7E6C[v52 / 4] = 1;
    dword_4A7E70[v52 / 4] = 0;
    v56 = 0;
    if ( dword_4A7D14[v52 / 4] < 4 )
    {
      do
      {
        if ( v56 >= 100 )
          break;
        v57 = dword_4A7E6C[216 * v51];
        ++v56;
        *((float *)&unk_4A7E64 + 216 * v51) = (double)(rand() % (2 * v57 + 1) - v57);
        v58 = 864 * dword_503518;
        v59 = dword_4A7E6C[216 * dword_503518];
        *(float *)(v58 + 4882024) = (double)(rand() % (2 * v59 + 1) - v59);
        v60 = dword_4A7E70[v58 / 4] + 1;
        dword_4A7E70[v58 / 4] = v60;
        if ( !(v60 % 5) )
        {
          v61 = dword_4A7E6C[v58 / 4];
          if ( v61 < 30 )
            dword_4A7E6C[v58 / 4] = v61 + 1;
        }
        v62 = dword_464F40 - 20;
        *(float *)(v58 + 4881844) = *(float *)(v58 + 4882020) + *(float *)(v58 + 4881844);
        *(float *)(v58 + 4881848) = *(float *)(v58 + 4881848) + *(float *)(v58 + 4882024);
        v63 = (double)v62;
        if ( v63 < *(float *)(v58 + 4881844) )
          *(float *)(v58 + 4881844) = v63;
        if ( *(float *)(v58 + 4881844) < 20.0 )
          dword_4A7DB4[v58 / 4] = 1101004800;
        v64 = (double)(dword_4A7CF8 - 20);
        if ( v64 < *(float *)(v58 + 4881848) )
          *(float *)(v58 + 4881848) = v64;
        if ( *(float *)(v58 + 4881848) < 20.0 )
          dword_4A7DB8[v58 / 4] = 1101004800;
        v65 = dword_464F40 * (unsigned __int64)floor(*(float *)(v58 + 4881848) - 20.0 + *(float *)(v58 + 4882016));
        v66 = (unsigned __int64)floor(*(float *)&dword_4A7DB4[216 * dword_503518]);
        v67 = (unsigned __int64)floor(*(float *)&dword_4A7E5C[216 * dword_503518]);
        v68 = sub_43BFE0(
                (int)((char *)dword_5034FC + dword_4A7D10[216 * dword_503518]),
                (int)((char *)dword_50A16C + v65 + v66 + v67 - 20));
        v51 = dword_503518;
        v69 = 864 * dword_503518;
        dword_4A7D14[216 * dword_503518] = v68;
        if ( v68 < 4 )
        {
          *(float *)(v69 + 4881844) = *(float *)(v69 + 4881844) - *(float *)(v69 + 4882020);
          *(float *)(v69 + 4881848) = *(float *)(v69 + 4881848) - *(float *)(v69 + 4882024);
        }
      }
      while ( dword_4A7D14[v69 / 4] < 4 );
    }
    v52 = 864 * v51;
    dword_4A7D14[216 * v51] = 0;
  }
  v70 = dword_4A7E94[v52 / 4];
  if ( v70 && v70 <= 3 )
  {
    *(float *)(v52 + 4881916) = *(float *)(v52 + 4882012) * -1.0;
    *(float *)(v52 + 4881920) = *(float *)(v52 + 4882016) * -1.0;
    dword_4A7DB0[v52 / 4] = 0;
    dword_4A7D14[v52 / 4] = 1;
  }
  if ( dword_4A7E94[v52 / 4] )
    goto LABEL_134;
  if ( (v83 < 4 || v84 < 4) && v89 >= 4 )
    *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) + 20.0;
  v71 = v87;
  v72 = v85;
  if ( (v87 < 4 || v85 < 4) && v89 >= 4 )
    *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) - 20.0;
  if ( *(float *)(v52 + 4881836) < 0.0 )
    *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) + 360.0;
  if ( *(float *)(v52 + 4881836) >= 360.0 )
    *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) - 360.0;
  *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - 0.125 * *(float *)(v52 + 4881840);
  dword_4A7D14[v52 / 4] = 1;
LABEL_135:
  v73 = v84;
  v74 = v83;
  if ( v71 == 4 || v83 == 4 || v84 == 4 || v72 == 4 || v81 == 4 || v82 == 4 )
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.028571429;
  if ( v83 == 5 || v84 == 5 )
  {
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) + 0.2;
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.033333335;
  }
  if ( v71 == 5 || v72 == 5 )
  {
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) - 0.2;
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.033333335;
  }
  if ( v71 == 6 || v83 == 6 || v84 == 6 || v72 == 6 || v81 == 6 || v82 == 6 )
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.11111111;
  if ( v71 == 7 || v83 == 7 || v84 == 7 || v72 == 7 || v81 == 7 || v82 == 7 )
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.050000001;
  if ( v71 == 10 || v84 == 10 )
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) - 0.15;
  if ( v83 == 10 || v72 == 10 )
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) + 0.15;
  if ( v71 == 11 || v83 == 11 || v84 == 11 || v72 == 11 || v81 == 11 || v82 == 11 )
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) * 0.013333334 + *(float *)(v52 + 4881840);
  if ( v71 == 12 || v84 == 12 )
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) - 0.05;
  if ( v83 == 12 || v72 == 12 )
    *(float *)(v52 + 4881924) = *(float *)(v52 + 4881924) + 0.05;
  if ( v71 == 13 || v83 == 13 || v84 == 13 || v72 == 13 || v81 == 13 || v82 == 13 )
  {
    v75 = 864 * v51;
    v76 = (double)rand() * (*(float *)&dword_4A7DB0[216 * v51] * 7.0) * 0.0000152587890625 + flt_4A7DAC[216 * v51];
    *(float *)(v75 + 4881836) = v76;
    v52 = 864 * dword_503518;
    v77 = v76 - (double)rand() * (*(float *)(v52 + 4881840) * 7.0) * 0.0000152587890625;
    *(float *)(v52 + 4881836) = v77;
    if ( v77 < 0.0 )
      *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) + 360.0;
    if ( *(float *)(v52 + 4881836) >= 360.0 )
      *(float *)(v52 + 4881836) = *(float *)(v52 + 4881836) - 360.0;
    v74 = v83;
    v73 = v84;
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.033333335;
  }
  if ( v71 == 14 || v74 == 14 || v73 == 14 || v72 == 14 || v81 == 14 || v82 == 14 )
    *(float *)(v52 + 4881840) = *(float *)(v52 + 4881840) - *(float *)(v52 + 4881840) * 0.025;
  v78 = dword_464F40 - 20;
  *(float *)(v52 + 4881844) = *(float *)(v52 + 4882012) + *(float *)(v52 + 4881844);
  *(float *)(v52 + 4881848) = *(float *)(v52 + 4882016) + *(float *)(v52 + 4881848);
  v79 = (double)v78;
  if ( v79 < *(float *)(v52 + 4881844) )
    *(float *)(v52 + 4881844) = v79;
  if ( *(float *)(v52 + 4881844) < 20.0 )
    dword_4A7DB4[v52 / 4] = 1101004800;
  v80 = (double)(dword_4A7CF8 - 20);
  if ( v80 < *(float *)(v52 + 4881848) )
    *(float *)(v52 + 4881848) = v80;
  if ( *(float *)(v52 + 4881848) < 20.0 )
    dword_4A7DB8[v52 / 4] = 1101004800;
}


//----- (0040CD10) --------------------------------------------------------
int sub_40CD10()
{
  int v0; // ecx@1
  _UNKNOWN *v1; // eax@2
  int v2; // edx@2
  double v3; // st7@3
  int result; // eax@4
  unsigned int v5; // edi@8
  int v6; // esi@9
  signed int v7; // ebx@9
  unsigned __int64 v8; // rax@9
  int v9; // ecx@14
  signed int v10; // ebp@17
  signed int v11; // edx@17
  int v12; // eax@17
  int v13; // ebx@20
  int v14; // ecx@20
  int v15; // eax@20
  int v16; // ecx@21
  int v17; // edx@22
  double v18; // st7@30
  double v19; // st6@30
  double v20; // st6@30
  signed int v21; // ebx@30
  float v22; // ST3C_4@30
  double v23; // st5@30
  bool v24; // sf@30
  bool v25; // sf@37
  bool v26; // sf@44
  double v27; // st7@44
  bool v28; // sf@51
  double v29; // st7@63
  double v30; // st7@66
  int v31; // et1@68
  int v32; // et1@68
  double v34; // st7@68
  char v35; // c0@68
  double v36; // st7@69
  int v37; // et1@71
  int v38; // et1@71
  double v40; // st7@71
  char v41; // c0@71
  double v42; // st7@72
  double v44; // st7@75
  unsigned __int8 v45; // c0@75
  unsigned __int8 v46; // c2@75
  double v48; // st7@78
  unsigned __int8 v49; // c0@78
  unsigned __int8 v50; // c2@78
  double v52; // st7@81
  unsigned __int8 v53; // c0@81
  unsigned __int8 v54; // c2@81
  double v56; // st7@84
  unsigned __int8 v57; // c0@84
  unsigned __int8 v58; // c2@84
  double v59; // st7@87
  double v60; // st7@89
  int v61; // ebp@94
  int v62; // ebx@94
  int v63; // ecx@94
  int v64; // eax@94
  int v65; // eax@97
  int v66; // ebp@102
  int v67; // eax@102
  int v68; // ecx@102
  int v69; // ecx@105
  int v70; // esi@110
  unsigned __int64 v71; // rax@110
  signed int v72; // [sp+0h] [bp-3Ch]@19
  float v73; // [sp+0h] [bp-3Ch]@75
  signed int v74; // [sp+0h] [bp-3Ch]@92
  int v75; // [sp+4h] [bp-38h]@7
  int v76; // [sp+8h] [bp-34h]@19
  int v77; // [sp+Ch] [bp-30h]@14
  int v78; // [sp+10h] [bp-2Ch]@20
  int v79; // [sp+14h] [bp-28h]@20
  int v80; // [sp+18h] [bp-24h]@0
  int v81; // [sp+1Ch] [bp-20h]@0
  signed int v82; // [sp+20h] [bp-1Ch]@0
  int v83; // [sp+24h] [bp-18h]@14
  signed int v84; // [sp+28h] [bp-14h]@19
  signed int v85; // [sp+28h] [bp-14h]@30
  int v86; // [sp+2Ch] [bp-10h]@20
  float v87; // [sp+2Ch] [bp-10h]@87
  int v88; // [sp+2Ch] [bp-10h]@94
  int v89; // [sp+30h] [bp-Ch]@0
  int v90; // [sp+38h] [bp-4h]@7

  v0 = dword_508D24;
  if ( dword_508D24 > 0 )
  {
    v1 = &unk_4A7E00;
    v2 = dword_508D24;
    do
    {
      v3 = *((float *)v1 - 1);
      v1 = (char *)v1 + 864;
      --v2;
      *((float *)v1 - 217) = v3 * 0.8695652173913044;
      *((float *)v1 - 216) = *((float *)v1 - 216) * 0.8695652173913044;
      *((float *)v1 - 215) = *((float *)v1 - 215) * 0.8333333333333334;
    }
    while ( v2 );
  }
  result = v0 - 1;
  dword_503518 = 0;
  if ( v0 - 1 > 0 )
  {
    while ( 1 )
    {
      v90 = dword_503518 + 1;
      v75 = dword_503518 + 1;
      if ( dword_503518 + 1 < v0 )
        break;
LABEL_115:
      result = dword_508D24 - 1;
      dword_503518 = v90;
      if ( v90 >= dword_508D24 - 1 )
        return result;
      v0 = dword_508D24;
    }
    v5 = 864 * dword_503518;
    while ( 1 )
    {
      v6 = 216 * v75;
      v7 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v75] - *(float *)(v5 + 4881844));
      v8 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v75] - *(float *)(v5 + 4881848));
      if ( v7 >= 39 || (signed int)v8 >= 39 || v7 <= -39 || (signed int)v8 <= -39 )
        goto LABEL_114;
      if ( v7 < 0 )
      {
        v9 = 0;
        v77 = v7 + 40;
        v83 = -v7;
      }
      else
      {
        v9 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v75] - *(float *)(v5 + 4881844));
        v77 = 40;
        v83 = 0;
      }
      if ( (v8 & 0x80000000) != 0 )
      {
        v10 = 0;
        HIDWORD(v8) = v8 + 40;
        v12 = -(signed int)v8;
      }
      else
      {
        v10 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v75] - *(float *)(v5 + 4881848));
        v11 = 40;
        v12 = 0;
      }
      v84 = v11;
      v76 = v9;
      v72 = 0;
      if ( v10 >= v11 )
        goto LABEL_114;
      v13 = v77;
      v14 = v12 - 20;
      v78 = 40 * v12;
      v15 = 40 * v10;
      v79 = v14;
      v86 = 40 * v10;
      do
      {
        v16 = v76;
        if ( v76 < v13 )
        {
          v17 = v83 - v76;
          do
          {
            if ( *((byte *)dword_5034FC + v15 + dword_4A7D10[v5 / 4] + v16) > 3u
              && *((byte *)dword_5034FC + v17 + v78 + dword_4A7D10[v6] + v16) > 3u )
            {
              v89 = v16 - 20;
              v81 = v17 + v16 - 20;
              v72 = 1;
              v80 = v10 - 20;
              v82 = v79;
            }
            v13 = v77;
            ++v16;
          }
          while ( v16 < v77 );
          v15 = v86;
          v11 = v84;
        }
        v78 += 40;
        v15 += 40;
        ++v10;
        v86 = v15;
        ++v79;
      }
      while ( v10 < v11 );
      if ( v72 != 1 )
        goto LABEL_114;
      dword_4A7E74[v5 / 4] = v89;
      dword_4A7E78[v5 / 4] = v80;
      v18 = *(float *)&dword_4A7DB4[216 * v75] - *(float *)&dword_4A7E50[216 * v75];
      dword_4A7E74[v6] = v81;
      v19 = *(float *)&dword_4A7DB8[216 * v75];
      dword_4A7E78[v6] = v82;
      v20 = v19 - *(float *)&dword_4A7E54[216 * v75];
      v21 = (unsigned __int64)((double)v80 * v18 - (double)v89 * v20);
      v22 = *(float *)(v5 + 4881844) - *(float *)(v5 + 4882000);
      v23 = *(float *)(v5 + 4881848) - *(float *)(v5 + 4882004);
      v24 = v89 < 0;
      v85 = (unsigned __int64)((double)v82 * v22 - (double)v81 * v23);
      *(float *)(v5 + 4881916) = (v18 - v22) * 0.7 + *(float *)(v5 + 4881916);
      *(float *)(v5 + 4881920) = (v20 - v23) * 0.7 + *(float *)(v5 + 4881920);
      if ( v89 > 0 )
      {
        if ( *(float *)(v5 + 4882012) > 0.0 )
          goto LABEL_35;
        v24 = v89 < 0;
      }
      if ( v24 && *(float *)(v5 + 4882012) < 0.0 )
      {
LABEL_35:
        dword_4A7D18[v5 / 4] = 1;
        goto LABEL_37;
      }
      dword_4A7D18[v5 / 4] = 2;
LABEL_37:
      v25 = v80 < 0;
      if ( v80 > 0 )
      {
        if ( *(float *)(v5 + 4882016) > 0.0 )
          goto LABEL_42;
        v25 = v80 < 0;
      }
      if ( v25 && *(float *)(v5 + 4882016) < 0.0 )
      {
LABEL_42:
        dword_4A7D1C[v5 / 4] = 1;
        goto LABEL_44;
      }
      dword_4A7D1C[v5 / 4] = 2;
LABEL_44:
      v26 = v81 < 0;
      v27 = *(float *)(v5 + 4881848)
          - *(float *)(v5 + 4882004)
          - (*(float *)&dword_4A7DB8[216 * v75]
           - *(float *)&dword_4A7E54[216 * v75]);
      *((float *)&unk_4A7DFC + 216 * v75) = (*(float *)(v5 + 4881844)
                                           - *(float *)(v5 + 4882000)
                                           - (*(float *)&dword_4A7DB4[216 * v75]
                                            - *(float *)&dword_4A7E50[216 * v75]))
                                          * 0.7
                                          + *((float *)&unk_4A7DFC + 216 * v75);
      *((float *)&unk_4A7E00 + 216 * v75) = v27 * 0.7 + *((float *)&unk_4A7E00 + 216 * v75);
      if ( v81 > 0 )
      {
        if ( *(float *)&dword_4A7E5C[216 * v75] > 0.0 )
          goto LABEL_49;
        v26 = v81 < 0;
      }
      if ( v26 && *(float *)&dword_4A7E5C[216 * v75] < 0.0 )
      {
LABEL_49:
        dword_4A7D18[v6] = 1;
        goto LABEL_51;
      }
      dword_4A7D18[v6] = 2;
LABEL_51:
      v28 = v82 < 0;
      if ( v82 > 0 )
      {
        if ( *(float *)&dword_4A7E60[216 * v75] > 0.0 )
          goto LABEL_56;
        v28 = v82 < 0;
      }
      if ( !v28 || *(float *)&dword_4A7E60[216 * v75] >= 0.0 )
      {
        dword_4A7D1C[v6] = 2;
        goto LABEL_58;
      }
LABEL_56:
      dword_4A7D1C[v6] = 1;
LABEL_58:
      if ( dword_4A7D18[v5 / 4] == 1 && dword_4A7D18[v6] == 1 || dword_4A7D1C[v5 / 4] == 1 && dword_4A7D1C[v6] == 1 )
      {
        if ( *(float *)(v5 + 4881836) <= (double)flt_4A7DAC[216 * v75] )
          goto LABEL_118;
        v29 = *(float *)(v5 + 4881836) - flt_4A7DAC[216 * v75];
        if ( v29 < 0.0 )
          v29 = -v29;
        if ( v29 >= 100.0 )
        {
LABEL_118:
          *(float *)(v5 + 4881924) = *(float *)(v5 + 4881924) + 2.0;
          v30 = *((float *)&unk_4A7E04 + 216 * v75) - 2.0;
        }
        else
        {
          *(float *)(v5 + 4881924) = *(float *)(v5 + 4881924) - 2.0;
          v30 = *((float *)&unk_4A7E04 + 216 * v75) + 2.0;
        }
        *((float *)&unk_4A7E04 + 216 * v75) = v30;
        v31 = *(_DWORD *)(v5 + 4881844);
        v32 = dword_4A7DB4[216 * v75];
        v34 = *(float *)(v5 + 4881844);
        if ( v35 )
        {
          *(float *)(v5 + 4881844) = v34 - 0.6;
          v36 = *(float *)&dword_4A7DB4[216 * v75] + 0.6;
        }
        else
        {
          *(float *)(v5 + 4881844) = v34 + 0.6;
          v36 = *(float *)&dword_4A7DB4[216 * v75] - 0.6;
        }
        *(float *)&dword_4A7DB4[216 * v75] = v36;
        v37 = *(_DWORD *)(v5 + 4881848);
        v38 = dword_4A7DB8[216 * v75];
        v40 = *(float *)(v5 + 4881848);
        if ( v41 )
        {
          *(float *)(v5 + 4881848) = v40 - 0.6;
          v42 = *(float *)&dword_4A7DB8[216 * v75] + 0.6;
        }
        else
        {
          *(float *)(v5 + 4881848) = v40 + 0.6;
          v42 = *(float *)&dword_4A7DB8[216 * v75] - 0.6;
        }
        *(float *)&dword_4A7DB8[216 * v75] = v42;
      }
      v73 = *(float *)(v5 + 4881836) - flt_4A7DAC[216 * v75];
      v44 = v73;
      if ( v45 | v46 )
        v44 = -v44;
      if ( v44 < 315.0 )
      {
        v48 = v73;
        if ( v49 | v50 )
          v48 = -v48;
        if ( v48 > 45.0 )
        {
          v52 = v73;
          if ( v53 | v54 )
            v52 = -v52;
          if ( v52 < 135.0 )
            goto LABEL_119;
          v56 = v73;
          if ( v57 | v58 )
            v56 = -v56;
          if ( v56 > 225.0 )
          {
LABEL_119:
            v59 = (double)(v21 / 4);
            v87 = v59;
            if ( v59 > 3.0 )
              v87 = 3.0;
            v60 = (double)(v85 / 4);
            if ( v60 > 3.0 )
              v60 = 3.0;
            *(float *)(v5 + 4881924) = v87 + *(float *)(v5 + 4881924);
            *((float *)&unk_4A7E04 + 216 * v75) = v60 + *((float *)&unk_4A7E04 + 216 * v75);
          }
        }
      }
      v74 = 0;
      if ( dword_4A68A4[37 * dword_503518] && !dword_4A7E0C[v6] )
      {
        v61 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * v75];
        v62 = v61 - (unsigned __int64)(*(float *)(v5 + 4881868) + *(float *)(v5 + 4881844));
        v88 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * v75];
        v63 = v88 - (unsigned __int64)(*(float *)(v5 + 4881872) + *(float *)(v5 + 4881848));
        v64 = v62;
        if ( v62 < 0 )
          v64 = -v62;
        if ( v64 < 20 )
        {
          v65 = v88 - (unsigned __int64)(*(float *)(v5 + 4881872) + *(float *)(v5 + 4881848));
          if ( v63 < 0 )
            v65 = -v63;
          if ( v65 < 20 && *((byte *)dword_5034FC + 40 * v63 + dword_4A7D10[v6] + v62 + 820) > 3u )
            v74 = 1;
        }
        v66 = v61 - (unsigned __int64)(*(float *)(v5 + 4881860) + *(float *)(v5 + 4881844));
        v67 = v88 - (unsigned __int64)(*(float *)(v5 + 4881864) + *(float *)(v5 + 4881848));
        v68 = v66;
        if ( v66 < 0 )
          v68 = -v66;
        if ( v68 < 20 )
        {
          v69 = v88 - (unsigned __int64)(*(float *)(v5 + 4881864) + *(float *)(v5 + 4881848));
          if ( v67 < 0 )
            v69 = -v67;
          if ( v69 < 20 && *((byte *)dword_5034FC + 40 * v67 + dword_4A7D10[v6] + v66 + 820) > 3u )
            goto LABEL_120;
        }
        if ( v74 == 1 )
        {
LABEL_120:
          v70 = 37 * v75;
          v71 = (unsigned __int64)((*((float *)&unk_4A7E00 + 216 * v75) * *((float *)&unk_4A7E00 + 216 * v75)
                                  + *((float *)&unk_4A7DFC + 216 * v75) * *((float *)&unk_4A7DFC + 216 * v75))
                                 * (double)(3 * (1024 - dword_4A689C[37 * v75])));
          dword_50B2B0 = v71;
          if ( (signed int)v71 > 10000 )
          {
            LODWORD(v71) = 10000;
            dword_50B2B0 = 10000;
          }
          v24 = dword_4A6898[v70] - (signed int)v71 < 0;
          dword_4A6898[v70] -= v71;
          if ( v24 )
            dword_4A6898[v70] = 0;
        }
      }
LABEL_114:
      ++v75;
      if ( v75 >= dword_508D24 )
        goto LABEL_115;
    }
  }
  return result;
}


//----- (0040D560) --------------------------------------------------------
int sub_40D560()
{
  int v0; // ebx@1
  double v1; // st7@1
  long double v2; // st7@1
  unsigned __int64 v3; // rax@1
  int v4; // edi@1
  unsigned __int64 v5; // rax@1
  signed int v6; // ecx@3
  unsigned __int64 v7; // rax@6
  double v8; // st7@6
  int v9; // edi@6
  int result; // eax@6

  v0 = dword_4A7A3C;
  v1 = flt_4A7DAC[216 * dword_4A9EA8] + 180.0;
  dword_4A6B00 = dword_4A7A3C;
  dword_501264 = dword_464F1C;
  v2 = v1 * 0.01745329251994444;
  v3 = (unsigned __int64)(sin(v2) * *(float *)&dword_4A7DB0[216 * dword_4A9EA8] * 16.0);
  v4 = v3;
  dword_4A7A3C = v3;
  v5 = (unsigned __int64)(cos(v2) * *(float *)&dword_4A7DB0[216 * dword_4A9EA8] * 10.66666666666667);
  dword_464F1C = v5;
  if ( v0 == v4 && dword_501264 == (_DWORD)v5 )
  {
    v6 = dword_4A8AA4;
    if ( dword_4A8AA4 <= 0 )
      goto LABEL_6;
  }
  else
  {
    v6 = 5;
  }
  dword_46ECE8 += (v4 - dword_46ECE8) / v6;
  dword_503504 += ((signed int)v5 - dword_503504) / v6;
  dword_4A8AA4 = v6 - 1;
LABEL_6:
  v7 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_4A9EA8];
  v8 = *(float *)&dword_4A7DB8[216 * dword_4A9EA8];
  v9 = dword_46ECE8 + v7 - dword_445014;
  dword_456ABC = dword_46ECE8 + v7 - dword_445014;
  result = dword_503504 + (unsigned __int64)v8 - dword_44501C;
  dword_456AC0 = dword_503504 + (unsigned __int64)v8 - dword_44501C;
  if ( v9 > dword_464F40 - dword_445010 )
  {
    v9 = dword_464F40 - dword_445010;
    dword_456ABC = dword_464F40 - dword_445010;
  }
  if ( v9 < 0 )
    dword_456ABC = 0;
  if ( result > dword_4A7CF8 - dword_445018 )
  {
    result = dword_4A7CF8 - dword_445018;
    dword_456AC0 = dword_4A7CF8 - dword_445018;
  }
  if ( result < 0 )
    dword_456AC0 = 0;
  return result;
}


//----- (0040D6B0) --------------------------------------------------------
void sub_40D6B0()
{
  int v0; // edx@2
  int v1; // esi@2
  int v2; // edi@2
  _UNKNOWN *v3; // eax@2
  int v4; // ebx@3
  bool v5; // zf@3
  int v6; // [sp+0h] [bp-4h]@2

  dword_4AA928 = 0;
  if ( dword_479D20 > 0 )
  {
    v0 = dword_445014;
    v1 = dword_44501C;
    v2 = dword_456ABC;
    v3 = &unk_4B4D00;
    v6 = dword_479D20;
    dword_4AA928 = dword_479D20;
    do
    {
      v4 = dword_456AC0;
      *((_DWORD *)v3 + 1) = *((_DWORD *)v3 - 1) - v0 - v2;
      *((_DWORD *)v3 + 2) = *(_DWORD *)v3 - v1 - v4;
      v5 = BYTE2(dword_45EA50[0]) == 48;
      *((_DWORD *)v3 + 153) = 0;
      if ( !v5 )
      {
        if ( *((_DWORD *)v3 + 1) << 8 > (v0 << 8) + *((_DWORD *)v3 - 404) )
          *((_DWORD *)v3 + 153) = 1;
        if ( *((_DWORD *)v3 + 1) << 8 < *((_DWORD *)v3 - 405) - (v0 << 8) )
          *((_DWORD *)v3 + 153) = 1;
        if ( *((_DWORD *)v3 + 2) << 8 > (v1 << 8) + *((_DWORD *)v3 - 402) )
          *((_DWORD *)v3 + 153) = 1;
        if ( *((_DWORD *)v3 + 2) << 8 < *((_DWORD *)v3 - 403) - (v1 << 8) )
          *((_DWORD *)v3 + 153) = 1;
      }
      v3 = (char *)v3 + 3152;
      --v6;
    }
    while ( v6 );
  }
}

//----- (0040D7B0) --------------------------------------------------------
int sub_40D7B0()
{
  int result; // eax@1
  int v1; // edx@1
  int v2; // ecx@4
  int v3; // eax@4
  int v4; // edx@4
  int v5; // esi@4
  int v6; // edi@4
  int v7; // ebx@4
  int v8; // ebp@4
  int v9; // ecx@4

  result = dword_501A80;
  v1 = 0;
  dword_481BE8 = 0;
  if ( dword_501A80 > 0 )
  {
    while ( 1 )
    {
      v2 = dword_4A8D40[v1];
      v3 = dword_4AA520[v1];
      v4 = dword_46E8E0[v1];
      v2 *= 4;
      v5 = dword_479280[v3] - dword_456ABC;
      v6 = *(int *)((char *)dword_479280 + v2) - dword_456ABC;
      v7 = dword_479280[v4] - dword_456ABC;
      v8 = dword_4A9FE0[v3] - dword_456AC0;
      v9 = *(int *)((char *)dword_4A9FE0 + v2) - dword_456AC0;
      dword_46ECE4 = dword_4A9FE0[v4] - dword_456AC0;
      dword_50EF20 = v5;
      dword_50351C = v6;
      dword_4A8A80 = v7;
      dword_4A6AD0 = v8;
      dword_4A7A4C = v9;
      if ( (abs(v5 - dword_445014) < dword_445014
         || abs(v6 - dword_445014) < dword_445014
         || abs(v7 - dword_445014) < dword_445014)
        && (abs(v8 - dword_44501C) < dword_44501C
         || abs(v9 - dword_44501C) < dword_44501C
         || abs(dword_46ECE4 - dword_44501C) < dword_44501C) )
        sub_43D530(v5 + dword_456AA0, v8, dword_456AA0 + v6, v9, dword_456AA0 + v7, dword_46ECE4, (int)&unk_466F00);
      result = dword_481BE8++ + 1;
      if ( dword_481BE8 >= dword_501A80 )
        break;
      v1 = dword_481BE8;
    }
  }
  return result;
}


//----- (0040D920) --------------------------------------------------------
int sub_40D920()
{
  double v0; // st7@1
  int v1; // ebx@1
  int v2; // esi@1
  int v3; // edi@3
  double v4; // st7@5
  double v5; // st7@8
  double v6; // st6@8
  int v7; // edi@10
  double v8; // st7@12
  long double v9; // st7@17
  long double v10; // ST6C_8@17
  long double v11; // st7@17
  long double v12; // ST6C_8@17
  long double v13; // st7@17
  long double v14; // ST6C_8@17
  int v15; // ebp@18
  int v16; // esi@20
  double v17; // st7@20
  int v18; // edi@20
  int v19; // eax@20
  int v20; // ecx@20
  long double v21; // st7@26
  long double v22; // ST6C_8@26
  long double v23; // st7@26
  long double v24; // ST6C_8@26
  long double v25; // st7@26
  long double v26; // ST6C_8@26
  int v27; // ST50_4@29
  int v28; // ST4C_4@29
  int v29; // ST48_4@29
  int v30; // esi@30
  int v31; // eax@31
  bool v32; // sf@31
  int result; // eax@34
  int v34; // esi@34
  int v35; // eax@36
  int v36; // edx@36
  int v37; // ecx@38
  int v38; // eax@41
  int v39; // edx@41
  int v40; // ecx@43
  int v41; // esi@46
  int v42; // eax@47
  int v43; // eax@49
  float v44; // [sp+Ch] [bp-10h]@1
  float v45; // [sp+Ch] [bp-10h]@10
  float v46; // [sp+10h] [bp-Ch]@3
  float v47; // [sp+10h] [bp-Ch]@8

  v0 = (double)dword_46ECE8;
  v1 = dword_4A9EA8;
  v44 = (double)dword_445014;
  v2 = 216 * dword_4A9EA8;
  dword_503518 = dword_4A9EA8;
  if ( v0 + *(float *)&dword_4A7DB4[216 * dword_4A9EA8] < v44 )
    dword_4A7D04[v2] = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_4A9EA8];
  v3 = dword_445014;
  v46 = (double)(dword_464F40 - dword_445014);
  if ( v0 + *(float *)(v2 * 4 + 4881844) > v46 )
    dword_4A7D04[v2] = (unsigned __int64)(*(float *)(v2 * 4 + 4881844) - (double)(dword_464F40 - dword_445010));
  v4 = v0 + *(float *)(v2 * 4 + 4881844);
  if ( v4 >= v44 && v4 <= v46 )
    dword_4A7D04[v2] = v3 - dword_46ECE8;
  v5 = (double)dword_503504;
  v6 = (double)dword_44501C;
  dword_4A7D04[v2] += dword_456AA0;
  v47 = v6;
  if ( v5 + *(float *)(v2 * 4 + 4881848) < v47 )
    dword_4A7D08[v2] = (unsigned __int64)*(float *)(v2 * 4 + 4881848);
  v7 = dword_44501C;
  v45 = (double)(dword_4A7CF8 - dword_44501C);
  if ( v5 + *(float *)(v2 * 4 + 4881848) > v45 )
    dword_4A7D08[v2] = (unsigned __int64)(*(float *)(v2 * 4 + 4881848) - (double)(dword_4A7CF8 - dword_445018));
  v8 = v5 + *(float *)(v2 * 4 + 4881848);
  if ( v8 >= v47 && v8 <= v45 )
    dword_4A7D08[v2] = v7 - dword_503504;
  if ( dword_4A6898[37 * v1] > 0 && !dword_4A7E0C[v2] )
  {
    v9 = (*(float *)(v2 * 4 + 4881836) - 10.0 + 180.0) * 0.01745329251994444;
    v10 = (*(float *)(v2 * 4 + 4881836) + 190.0) * 0.01745329251994444;
    sub_43D530(
      dword_4A7D04[v2],
      dword_4A7D08[v2],
      dword_4A7D04[v2] - (unsigned __int64)(sin(v10) * -40.0),
      dword_4A7D08[v2] - (unsigned __int64)(cos(v10) * -33.33332),
      dword_4A7D04[v2] - (unsigned __int64)(sin(v9) * -40.0),
      dword_4A7D08[v2] - (unsigned __int64)(cos(v9) * -33.33332),
      (int)&unk_4A9EE0);
    v11 = (flt_4A7DAC[216 * dword_503518] + 190.0) * 0.01745329251994444;
    v12 = (flt_4A7DAC[216 * dword_503518] + 198.0) * 0.01745329251994444;
    sub_43D530(
      dword_4A7D04[216 * dword_503518],
      dword_4A7D08[216 * dword_503518],
      dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v12) * -36.0),
      dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v12) * -29.999988),
      dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v11) * -40.0),
      dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v11) * -33.33332),
      (int)&unk_4A9EE0);
    v13 = (flt_4A7DAC[216 * dword_503518] - 18.0 + 180.0) * 0.01745329251994444;
    v14 = (flt_4A7DAC[216 * dword_503518] - 10.0 + 180.0) * 0.01745329251994444;
    sub_43D530(
      dword_4A7D04[216 * dword_503518],
      dword_4A7D08[216 * dword_503518],
      dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v14) * -40.0),
      dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v14) * -33.33332),
      dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v13) * -36.0),
      dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v13) * -29.999988),
      (int)&unk_4A9EE0);
    v1 = dword_4A9EA8;
  }
  v15 = 0;
  for ( dword_503518 = 0; v15 < dword_508D24; dword_503518 = v15 )
  {
    if ( v15 != v1 )
    {
      v16 = 216 * v15;
      v17 = (double)dword_456AC0;
      dword_4A7D04[v16] = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v15]
                                           - (double)dword_456ABC
                                           + (double)dword_456AA0);
      v18 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v15] - v17);
      v19 = dword_456AA0;
      dword_4A7D08[v16] = v18;
      v20 = dword_4A7D04[216 * v15];
      if ( v20 > v19 - 40 )
      {
        if ( v20 < 360 && v18 > -40 && v18 < dword_445018 + 40 && dword_4A6898[37 * v15] > 0 && !dword_4A7E0C[v16] )
        {
          v21 = (flt_4A7DAC[216 * v15] - 10.0 + 180.0) * 0.01745329251994444;
          v22 = (flt_4A7DAC[216 * v15] + 190.0) * 0.01745329251994444;
          sub_43D530(
            dword_4A7D04[v16],
            v18,
            dword_4A7D04[v16] - (unsigned __int64)(sin(v22) * -40.0),
            v18 - (unsigned __int64)(cos(v22) * -33.33332),
            dword_4A7D04[v16] - (unsigned __int64)(sin(v21) * -40.0),
            v18 - (unsigned __int64)(cos(v21) * -33.33332),
            (int)&unk_4A9EE0);
          v23 = (flt_4A7DAC[216 * dword_503518] + 190.0) * 0.01745329251994444;
          v24 = (flt_4A7DAC[216 * dword_503518] + 198.0) * 0.01745329251994444;
          sub_43D530(
            dword_4A7D04[216 * dword_503518],
            dword_4A7D08[216 * dword_503518],
            dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v24) * -36.0),
            dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v24) * -29.999988),
            dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v23) * -40.0),
            dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v23) * -33.33332),
            (int)&unk_4A9EE0);
          v25 = (flt_4A7DAC[216 * dword_503518] - 18.0 + 180.0) * 0.01745329251994444;
          v26 = (flt_4A7DAC[216 * dword_503518] - 10.0 + 180.0) * 0.01745329251994444;
          sub_43D530(
            dword_4A7D04[216 * dword_503518],
            dword_4A7D08[216 * dword_503518],
            dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v26) * -40.0),
            dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v26) * -33.33332),
            dword_4A7D04[216 * dword_503518] - (unsigned __int64)(sin(v25) * -36.0),
            dword_4A7D08[216 * dword_503518] - (unsigned __int64)(cos(v25) * -29.999988),
            (int)&unk_4A9EE0);
          v15 = dword_503518;
        }
        v1 = dword_4A9EA8;
      }
    }
    ++v15;
  }
  v27 = dword_4A7D10[216 * v1];
  v28 = dword_4A7D08[216 * v1];
  v29 = dword_4A7D04[216 * v1];
  dword_503518 = v1;
  sub_43AEC0(v29, v28, v27);
  if ( dword_4A6898[37 * dword_503518] <= 0 )
  {
    sub_43AFC0(
      dword_4A7D04[216 * dword_503518],
      dword_4A7D08[216 * dword_503518],
      dword_4A7EDC[216 * dword_503518] << 8);
    v30 = 216 * dword_503518;
    if ( waitWithDelay() >= (unsigned int)(dword_4A7EE0[v30] + 3) )
    {
      v31 = dword_4A7EDC[v30] + 1;
      v32 = dword_4A7EDC[v30] - 6 < 0;
      dword_4A7EDC[v30] = v31;
      if ( !((unsigned __int8)(v32 ^ __OFSUB__(v31, 7)) | (v31 == 7)) )
        dword_4A7EDC[v30] = 0;
      dword_4A7EE0[216 * dword_503518] = waitWithDelay();
    }
  }
  result = dword_508D24;
  v34 = 0;
  for ( dword_503518 = 0; v34 < dword_508D24; dword_503518 = v34 )
  {
    if ( v34 != dword_4A9EA8 )
    {
      v35 = 216 * v34;
      v36 = dword_4A7D04[216 * v34];
      if ( v36 > dword_456AA0 - 20 && v36 < 340 )
      {
        v37 = dword_4A7D08[v35];
        if ( v37 > -20 && v37 < dword_445018 + 20 )
        {
          sub_43AEC0(v36, v37, dword_4A7D10[v35]);
          v34 = dword_503518;
        }
      }
      v38 = 216 * v34;
      v39 = dword_4A7D04[216 * v34];
      if ( v39 > dword_456AA0 - 8 && v39 < 328 )
      {
        v40 = dword_4A7D08[v38];
        if ( v40 > -8 && v40 < dword_445018 + 8 && dword_4A6898[37 * v34] <= 0 )
        {
          sub_43AFC0(v39, v40, dword_4A7EDC[v38] << 8);
          v41 = 216 * dword_503518;
          if ( waitWithDelay() < (unsigned int)(dword_4A7EE0[v41] + 3) )
          {
            v34 = dword_503518;
          }
          else
          {
            v42 = dword_4A7EDC[v41] + 1;
            v32 = dword_4A7EDC[v41] - 6 < 0;
            dword_4A7EDC[v41] = v42;
            if ( !((unsigned __int8)(v32 ^ __OFSUB__(v42, 7)) | (v42 == 7)) )
              dword_4A7EDC[v41] = 0;
            v43 = waitWithDelay();
            v34 = dword_503518;
            dword_4A7EE0[216 * dword_503518] = v43;
          }
        }
      }
    }
    result = dword_508D24;
    ++v34;
  }
  return result;
}


//----- (0040E180) --------------------------------------------------------
int sub_40E180()
{
  int v0; // ebp@1
  int v1; // ebx@1
  int result; // eax@1
  int v3; // esi@2
  int v4; // eax@7
  int v5; // ecx@7
  long double v6; // st7@7
  long double v7; // ST54_8@7
  double v8; // st7@7
  long double v9; // st6@7
  int v10; // ST44_4@7
  double v12; // st6@7
  char v13; // c0@7
  unsigned __int64 v14; // rax@9
  long double v15; // st6@9
  int v16; // ebx@9
  long double v17; // st5@9
  double v18; // st6@9
  double v19; // st7@11
  int v20; // ecx@11
  unsigned __int64 v21; // rax@11
  double v22; // st7@11
  int v23; // ebx@13
  unsigned __int64 v24; // rax@13
  signed int v25; // eax@13
  long double v26; // st7@16
  long double v27; // st6@16
  signed int v28; // edi@16
  long double v29; // st7@18
  signed int v30; // esi@18
  int v31; // eax@20
  int v32; // ebp@20
  signed int v33; // edi@20
  int v34; // ebx@22
  int v35; // edi@22
  int v36; // eax@22
  int v37; // esi@23
  int v38; // esi@25
  int v39; // eax@25
  int v40; // ecx@25
  int v41; // ecx@28
  char *v42; // ecx@31
  bool v43; // cf@31
  bool v44; // zf@31
  bool v45; // sf@40
  unsigned __int8 v46; // of@40
  int v47; // eax@41
  int v48; // edx@48
  int v49; // edx@49
  int v50; // edi@49
  int v51; // edi@51
  int v52; // eax@51
  int v53; // edi@57
  int v54; // edi@59
  int v55; // ST54_4@59
  unsigned __int64 v56; // rax@59
  signed int v57; // eax@59
  int v58; // eax@61
  int v59; // ecx@64
  int *v60; // eax@64
  int v61; // ebp@66
  int v62; // ecx@66
  int v63; // edx@66
  unsigned __int8 v64; // [sp-20h] [bp-5Ch]@12
  char v65; // [sp-1Ch] [bp-58h]@12
  int v66; // [sp-14h] [bp-50h]@12
  int v67; // [sp-14h] [bp-50h]@58
  int v68; // [sp+8h] [bp-34h]@9
  int v69; // [sp+Ch] [bp-30h]@22
  signed int v70; // [sp+10h] [bp-2Ch]@11
  int v71; // [sp+14h] [bp-28h]@23
  int v72; // [sp+18h] [bp-24h]@23
  char *v73; // [sp+18h] [bp-24h]@49
  signed int v74; // [sp+1Ch] [bp-20h]@20
  int v75; // [sp+20h] [bp-1Ch]@22
  int v76; // [sp+24h] [bp-18h]@22
  int v77; // [sp+28h] [bp-14h]@20
  long double v78; // [sp+2Ch] [bp-10h]@7
  int v79; // [sp+2Ch] [bp-10h]@20
  int v80; // [sp+34h] [bp-8h]@41

  v0 = dword_503518;
  v1 = 37 * dword_503518;
  result = dword_4A6898[37 * dword_503518];
  if ( result <= 0 )
    return result;
  v3 = 216 * dword_503518;
  result = dword_4A7E0C[216 * dword_503518];
  if ( result )
    return result;
  if ( dword_481E14 <= 430 )
    return result;
  result = dword_4A7A20 + 216 * dword_503518;
  if ( !(dword_4A7D20[4 * result] & 0x20) )
    return result;
  result = dword_4A68AC[v1];
  if ( !result )
    return result;
  result = dword_4A68B0[v1];
  if ( result <= 0 )
    return result;
  v4 = 37 * dword_503518 + dword_4A68E0[v1];
  dword_4A7EB8[v3] = 1;
  v5 = 37 * v0 + dword_4A68E0[v1];
  v6 = ((double)dword_4A68E4[v4] + flt_4A7DAC[216 * v0] + 180.0) * 0.01745329251994444;
  v78 = v6;
  v7 = sin(v6);
  v8 = (double)dword_4A68F4[v4];
  v9 = (double)dword_4A68F4[v5] * v7;
  v10 = (unsigned __int64)(sin(((double)dword_4A68E4[v5] + flt_4A7DAC[216 * v0] + 180.0) * 0.01745329251994444) * v8);
  v12 = v7 * v8;
  if ( !v13 )
    v12 = v12 + 1.0;
  v14 = (unsigned __int64)v12;
  v15 = cos(v78);
  v16 = 37 * v0 + dword_4A68E0[v1];
  v68 = v14;
  v17 = (double)dword_4A68F4[v16] * v15 * 0.833333;
  v18 = v15 * v8 * 0.833333;
  if ( v17
     - (double)(signed int)(unsigned __int64)(cos(((double)dword_4A68E4[v16] + flt_4A7DAC[216 * v0] + 180.0) * 0.01745329251994444)
                                            * v8
                                            * 0.833333) >= 0.5 )
    v18 = v18 + 1.0;
  v19 = *(float *)&dword_4A7DB4[216 * v0] - 4.0;
  v70 = (unsigned __int64)v18;
  v20 = dword_4A7D08[v3];
  dword_4A7A48 = dword_4A7D04[v3] + v14 - 4;
  dword_4B3144 = v20 + v70 - 4;
  v21 = (unsigned __int64)(v19 + (double)(signed int)v14);
  v22 = *(float *)&dword_4A7DB8[216 * v0] - 4.0;
  dword_50350C = v21;
  dword_4A6AD8 = (unsigned __int64)(v22 + (double)v70);
  if ( v0 == dword_4A9EA8 )
  {
    v66 = 36864;
    v65 = rand() % 2 + 19;
    v64 = 9;
LABEL_15:
    loadMenuSoundEffect(v64, v65, 0, v66, 135168);
    v0 = dword_503518;
    goto LABEL_16;
  }
  v23 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v0] - *(float *)&dword_4A7DB4[216 * dword_4A9EA8]);
  v24 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v0] - *(float *)&dword_4A7DB8[216 * dword_4A9EA8]);
  v25 = 36864 - 75 * (unsigned __int64)sqrt((double)(v23 * v23 + (signed int)v24 * (signed int)v24));
  if ( v25 > 4096 )
  {
    v66 = v25;
    v65 = rand() % 2 + 19;
    v64 = 10;
    goto LABEL_15;
  }
LABEL_16:
  v26 = (flt_4A7DAC[216 * v0] + 180.0) * 0.01745329251994444;
  v27 = sin(v26) * 256.0;
  v28 = (unsigned __int64)v27;
  if ( v27 - (double)v28 >= 0.5 )
    v28 = (unsigned __int64)(v27 + 1.0);
  v29 = cos(v26) * 213.333248;
  v30 = (unsigned __int64)v29;
  if ( v29 - (double)v30 >= 0.5 )
    v30 = (unsigned __int64)(v29 + 1.0);
  v77 = v28 + rand() % 6 - 3;
  v31 = rand();
  v32 = dword_503518;
  v33 = 0;
  v74 = 0;
  v79 = v30 + v31 % 6 - 3;
  while ( 1 )
  {
    v34 = (v77 * v33 + 128) >> 8;
    v35 = (v79 * v33 + 128) >> 8;
    v36 = 0;
    v75 = v34;
    v69 = v35;
    v76 = 0;
    if ( dword_508D24 > 0 )
    {
      v37 = (int)dword_4A6898;
      v72 = (int)dword_4A6898;
      v71 = (int)dword_4A7DB8;
      while ( v36 == v32 )
      {
LABEL_40:
        v36 = v76 + 1;
        v71 += 864;
        v37 += 148;
        v46 = __OFSUB__(v76 + 1, dword_508D24);
        v45 = v76++ + 1 - dword_508D24 < 0;
        v72 = v37;
        if ( !(v45 ^ v46) )
          goto LABEL_41;
      }
      v38 = (unsigned __int64)*(float *)(v71 - 4) - (unsigned __int64)*(float *)&dword_4A7DB4[216 * v32] - v34 - v68;
      v39 = (unsigned __int64)*(float *)v71 - (unsigned __int64)*(float *)&dword_4A7DB8[216 * v32] - v69 - v70;
      v40 = v38;
      if ( v38 < 0 )
        v40 = -v38;
      if ( v40 >= 20 )
        goto LABEL_69;
      v41 = (unsigned __int64)*(float *)v71 - (unsigned __int64)*(float *)&dword_4A7DB8[216 * v32] - v69 - v70;
      if ( v39 < 0 )
        v41 = -v39;
      if ( v41 >= 20 )
      {
LABEL_69:
        v37 = v72;
      }
      else
      {
        v42 = (char *)dword_5034FC + 40 * v39 + *(_DWORD *)(v71 - 168);
        v43 = (unsigned __int8)v42[v38 + 820] < 3u;
        v44 = v42[v38 + 820] == 3;
        v37 = v72;
        if ( !v43 && !v44 )
        {
          v74 = 130;
          if ( !*(_DWORD *)(v71 + 84) )
            *(_DWORD *)v72 = (unsigned __int64)((double)*(signed int *)v72
                                              - (double)(1024 - *(_DWORD *)(v72 + 4))
                                              * *(float *)&dword_4A6AE0[dword_4A6880[37 * v32]]);
          if ( *(_DWORD *)v72 < 0 )
            *(_DWORD *)v72 = 0;
          v34 = v75;
          dword_4A7CF0 = v75 + dword_50350C;
          dword_4AA3E4 = v69 + dword_4A6AD8;
          dword_4A7EAC[216 * v32] = 3 * dword_4A6904[dword_4A68E0[37 * v32] + 37 * v32] + 1;
          goto LABEL_39;
        }
      }
      v34 = v75;
LABEL_39:
      v35 = v69;
      goto LABEL_40;
    }
LABEL_41:
    v80 = v68 + v34 + (unsigned __int64)*(float *)&dword_4A7DB4[216 * v32];
    v47 = v70 + v35 + (unsigned __int64)*(float *)&dword_4A7DB8[216 * v32];
    if ( v47 >= 0
      && v47 < dword_4A7CF8
      && v80 >= 0
      && v80 < dword_464F40
      && (*((byte *)dword_50A16C + v47 * dword_464F40 + v80) & 0xFu) < 4 )
    {
      dword_4A7CF0 = v34 + dword_50350C;
      dword_4AA3E4 = v35 + dword_4A6AD8;
      v74 = 130;
      dword_4A7EAC[216 * v32] = 3 * dword_4A6904[dword_4A68E0[37 * v32] + 37 * v32] + 1;
    }
    if ( !isMultiplayerGame )
    {
      v48 = rand() % 5;
      v32 = dword_503518;
      if ( v48 < 20 )
      {
        v49 = 32 * v48;
        v50 = (int)((char *)&unk_479AB8 + v49);
        v73 = (char *)&unk_479AB8 + v49;
        while ( 1 )
        {
          if ( *(_DWORD *)v50 )
            goto LABEL_62;
          v51 = v34 + (unsigned __int64)*(float *)&dword_4A7DB4[216 * v32] - *(_DWORD *)(v50 - 24) + v68 - 8;
          v52 = v69 + (unsigned __int64)*(float *)&dword_4A7DB8[216 * v32] - *((_DWORD *)v73 - 5) + v70 - 8;
          if ( v51 < 0 )
            v51 = -v51;
          if ( v51 >= 3 )
            goto LABEL_62;
          if ( v52 < 0 )
            v52 = -v52;
          if ( v52 >= 3 )
            goto LABEL_62;
          v53 = dword_4A9EA8;
          v44 = v32 == dword_4A9EA8;
          *(_DWORD *)v73 = 1;
          *((_DWORD *)v73 - 1) = 0;
          if ( v44 )
            break;
          v54 = 864 * v53;
          v55 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v32] - *(float *)(v54 + 4881844));
          v56 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v32] - *(float *)(v54 + 4881848));
          v57 = 0x10000 - 75 * (unsigned __int64)sqrt((double)(v55 * v55 + (signed int)v56 * (signed int)v56));
          if ( v57 > 4096 )
          {
            v67 = v57;
            goto LABEL_61;
          }
LABEL_62:
          v50 = (int)(v73 + 160);
          v73 += 160;
          if ( (signed int)v73 >= (signed int)&unk_479D38 )
            goto LABEL_63;
        }
        v67 = 36864;
LABEL_61:
        v58 = rand();
        loadMenuSoundEffect(3u, v58 % 3 + 7, 0, v67, 327680);
        v32 = dword_503518;
        goto LABEL_62;
      }
    }
LABEL_63:
    v46 = __OFSUB__(v74 + 5, 130);
    v45 = v74 - 125 < 0;
    v74 += 5;
    if ( !(v45 ^ v46) )
      break;
    v33 = v74;
  }
  v59 = dword_4A68B0[37 * v32];
  v60 = &dword_4A68B0[37 * v32];
  *v60 = v59 - 260;
  if ( v59 - 260 < 0 )
    *v60 = 0;
  v61 = 216 * v32;
  v62 = dword_4AA3E4;
  v63 = dword_50350C;
  dword_4A7EBC[v61] = dword_4A7CF0;
  result = dword_4A6AD8;
  dword_4A7EC0[v61] = v62;
  dword_4A7ED4[v61] = v63;
  dword_4A7ED8[v61] = result;
  return result;
}


//----- (0040E960) --------------------------------------------------------
int sub_40E960()
{
  int v0; // ecx@1
  int v1; // eax@1
  int v2; // edi@2
  int v3; // ebp@2
  int v4; // ebp@6
  signed int v5; // esi@7
  char v6; // al@8
  char v7; // al@10
  char v8; // al@12
  int v9; // edx@14
  char v10; // al@14
  int v11; // ecx@19
  int v12; // ebx@19
  int result; // eax@19
  int v14; // [sp+0h] [bp-4h]@6

  v0 = dword_503518;
  v1 = 216 * dword_503518;
  if ( dword_4A7EB8[216 * dword_503518] )
  {
    v2 = dword_456AA0 + dword_4A7ED4[v1] - dword_456ABC;
    v3 = dword_4A7ED8[v1] - dword_456AC0;
    if ( v2 >= 0 && v2 + 8 < 320 && v3 >= 0 && v3 + 8 < 200 )
    {
      v14 = 0;
      v4 = v3 << 9;
      do
      {
        v5 = 0;
        do
        {
          v6 = *((byte *)*(&flame1Bpk + dword_4A6904[dword_4A68E0[37 * v0] + 37 * v0])
               + 8 * (v14 + 8 * (dword_4A7D0C[216 * v0] / 2))
               + v5);
          if ( v6 )
          {
            *(byte *)(v5 + dword_464F14 + v4 + v2 + 96) = v6;
            v0 = dword_503518;
          }
          v7 = *((byte *)*(&flame1Bpk + dword_4A6904[dword_4A68E0[37 * v0] + 37 * v0])
               + 8 * (v14 + 8 * (dword_4A7D0C[216 * v0] / 2))
               + v5
               + 1);
          if ( v7 )
          {
            *(byte *)(v5 + dword_464F14 + v4 + v2 + 97) = v7;
            v0 = dword_503518;
          }
          v8 = *((byte *)*(&flame1Bpk + dword_4A6904[dword_4A68E0[37 * v0] + 37 * v0])
               + 8 * (v14 + 8 * (dword_4A7D0C[216 * v0] / 2))
               + v5
               + 2);
          if ( v8 )
          {
            *(byte *)(v5 + dword_464F14 + v4 + v2 + 98) = v8;
            v0 = dword_503518;
          }
          v9 = v14;
          v10 = *((byte *)*(&flame1Bpk + dword_4A6904[dword_4A68E0[37 * v0] + 37 * v0])
                + 8 * (v14 + 8 * (dword_4A7D0C[216 * v0] / 2))
                + v5
                + 3);
          if ( v10 )
          {
            *(byte *)(v5 + v4 + dword_464F14 + v2 + 99) = v10;
            v0 = dword_503518;
          }
          v5 += 4;
        }
        while ( v5 < 8 );
        v4 += 512;
        ++v14;
      }
      while ( v9 + 1 < 8 );
    }
    dword_4A7EB8[216 * v0] = 0;
  }
  v11 = 37 * v0;
  v12 = dword_4A68E0[v11] + 1;
  dword_4A68E0[v11] = v12;
  result = v12;
  if ( v12 > dword_4A68DC[v11] - 1 )
    dword_4A68E0[v11] = 0;
  return result;
}


//----- (0040EBC0) --------------------------------------------------------
int sub_40EBC0()
{
  int result; // eax@1
  int v1; // edx@1
  int v2; // ecx@2
  int v3; // eax@2
  signed int v4; // esi@6
  int v5; // edi@6
  int v6; // eax@6
  char v7; // dl@7
  char v8; // dl@9
  char v9; // dl@11
  char v10; // dl@13
  char v11; // dl@15
  char v12; // dl@17
  char v13; // dl@19
  char v14; // dl@21
  int v15; // ebp@26
  int v16; // edi@26
  int v17; // ecx@26
  int v18; // edx@26
  int v19; // ecx@26
  int v20; // edx@26
  int v21; // edi@30
  signed int v22; // esi@30
  int v23; // edx@30
  char v24; // al@31
  char v25; // al@33
  char v26; // al@35
  char v27; // al@37
  char v28; // al@39
  char v29; // al@41
  char v30; // al@43
  char v31; // al@45
  int v32; // ebp@50
  int v33; // edi@50
  int v34; // ecx@50
  int v35; // edx@50
  int v36; // ecx@50
  int v37; // edx@50
  int v38; // edi@54
  signed int v39; // esi@54
  int v40; // edx@54
  char v41; // al@55
  char v42; // al@57
  char v43; // al@59
  char v44; // al@61
  char v45; // al@63
  char v46; // al@65
  char v47; // al@67
  char v48; // al@69

  result = 216 * dword_503518;
  v1 = dword_4A7EB4[216 * dword_503518];
  if ( v1 > 0 )
  {
    v2 = dword_456AA0 + dword_4A7ECC[result] - dword_456ABC;
    v3 = dword_4A7ED0[result] - dword_456AC0;
    if ( v2 >= 0 && v2 + 8 < 320 && v3 >= 0 && v3 + 8 < 200 )
    {
      v4 = 0;
      v5 = (v1 << 6) - 64;
      v6 = v3 << 9;
      do
      {
        v7 = *((byte *)shotsBpk + v4 + v5);
        if ( v7 )
          *(byte *)(v2 + v6 + dword_464F14 + 96) = v7;
        v8 = *((byte *)shotsBpk + v4 + v5 + 1);
        if ( v8 )
          *(byte *)(v2 + v6 + dword_464F14 + 97) = v8;
        v9 = *((byte *)shotsBpk + v4 + v5 + 2);
        if ( v9 )
          *(byte *)(v2 + v6 + dword_464F14 + 98) = v9;
        v10 = *((byte *)shotsBpk + v4 + v5 + 3);
        if ( v10 )
          *(byte *)(v2 + v6 + dword_464F14 + 99) = v10;
        v11 = *((byte *)shotsBpk + v4 + v5 + 4);
        if ( v11 )
          *(byte *)(v2 + v6 + dword_464F14 + 100) = v11;
        v12 = *((byte *)shotsBpk + v4 + v5 + 5);
        if ( v12 )
          *(byte *)(v2 + v6 + dword_464F14 + 101) = v12;
        v13 = *((byte *)shotsBpk + v4 + v5 + 6);
        if ( v13 )
          *(byte *)(v2 + v6 + dword_464F14 + 102) = v13;
        v14 = *((byte *)shotsBpk + v4 + v5 + 7);
        if ( v14 )
          *(byte *)(v2 + v6 + dword_464F14 + 103) = v14;
        v4 += 8;
        v6 += 512;
      }
      while ( v4 < 64 );
    }
    result = 216 * dword_503518;
    dword_4A7EB4[216 * dword_503518] = 0;
  }
  if ( dword_4A7EB0[result] > 0 )
  {
    v15 = dword_456AA0;
    v16 = dword_456AC0;
    v17 = dword_4A7EC4[result] - dword_456ABC;
    v18 = dword_4A7EC8[result];
    dword_4A7ECC[result] = dword_4A7EC4[result];
    v19 = v15 + v17;
    v20 = v18 - v16;
    dword_4A7ED0[result] = dword_4A7EC8[result];
    if ( v19 >= 0 && v19 + 8 < 320 && v20 >= 0 && v20 + 8 < 200 )
    {
      v21 = (dword_4A7EB0[result] << 6) - 64;
      v22 = 0;
      v23 = v20 << 9;
      do
      {
        v24 = *((byte *)shotsBpk + v22 + v21);
        if ( v24 )
          *(byte *)(v19 + v23 + dword_464F14 + 96) = v24;
        v25 = *((byte *)shotsBpk + v22 + v21 + 1);
        if ( v25 )
          *(byte *)(v19 + v23 + dword_464F14 + 97) = v25;
        v26 = *((byte *)shotsBpk + v22 + v21 + 2);
        if ( v26 )
          *(byte *)(v19 + v23 + dword_464F14 + 98) = v26;
        v27 = *((byte *)shotsBpk + v22 + v21 + 3);
        if ( v27 )
          *(byte *)(v19 + v23 + dword_464F14 + 99) = v27;
        v28 = *((byte *)shotsBpk + v22 + v21 + 4);
        if ( v28 )
          *(byte *)(v19 + v23 + dword_464F14 + 100) = v28;
        v29 = *((byte *)shotsBpk + v22 + v21 + 5);
        if ( v29 )
          *(byte *)(v19 + v23 + dword_464F14 + 101) = v29;
        v30 = *((byte *)shotsBpk + v22 + v21 + 6);
        if ( v30 )
          *(byte *)(v19 + v23 + dword_464F14 + 102) = v30;
        v31 = *((byte *)shotsBpk + v22 + v21 + 7);
        if ( v31 )
          *(byte *)(v19 + v23 + dword_464F14 + 103) = v31;
        v22 += 8;
        v23 += 512;
      }
      while ( v22 < 64 );
    }
    result = 216 * dword_503518;
    dword_4A7EB4[result] = dword_4A7EB0[216 * dword_503518] + 1;
    dword_4A7EB0[result] = 0;
  }
  if ( dword_4A7EAC[result] > 0 )
  {
    v32 = dword_456AA0;
    v33 = dword_456AC0;
    v34 = dword_4A7EBC[result] - dword_456ABC;
    v35 = dword_4A7EC0[result];
    dword_4A7EC4[result] = dword_4A7EBC[result];
    v36 = v32 + v34;
    v37 = v35 - v33;
    dword_4A7EC8[result] = dword_4A7EC0[result];
    if ( v36 >= 0 && v36 + 8 < 320 && v37 >= 0 && v37 + 8 < 200 )
    {
      v38 = (dword_4A7EAC[result] << 6) - 64;
      v39 = 0;
      v40 = v37 << 9;
      do
      {
        v41 = *((byte *)shotsBpk + v39 + v38);
        if ( v41 )
          *(byte *)(v36 + v40 + dword_464F14 + 96) = v41;
        v42 = *((byte *)shotsBpk + v39 + v38 + 1);
        if ( v42 )
          *(byte *)(v36 + v40 + dword_464F14 + 97) = v42;
        v43 = *((byte *)shotsBpk + v39 + v38 + 2);
        if ( v43 )
          *(byte *)(v36 + v40 + dword_464F14 + 98) = v43;
        v44 = *((byte *)shotsBpk + v39 + v38 + 3);
        if ( v44 )
          *(byte *)(v36 + v40 + dword_464F14 + 99) = v44;
        v45 = *((byte *)shotsBpk + v39 + v38 + 4);
        if ( v45 )
          *(byte *)(v36 + v40 + dword_464F14 + 100) = v45;
        v46 = *((byte *)shotsBpk + v39 + v38 + 5);
        if ( v46 )
          *(byte *)(v36 + v40 + dword_464F14 + 101) = v46;
        v47 = *((byte *)shotsBpk + v39 + v38 + 6);
        if ( v47 )
          *(byte *)(v36 + v40 + dword_464F14 + 102) = v47;
        v48 = *((byte *)shotsBpk + v39 + v38 + 7);
        if ( v48 )
          *(byte *)(v36 + v40 + dword_464F14 + 103) = v48;
        v39 += 8;
        v40 += 512;
      }
      while ( v39 < 64 );
    }
    result = 216 * dword_503518;
    dword_4A7EB0[result] = dword_4A7EAC[216 * dword_503518] + 1;
    dword_4A7EAC[result] = 0;
  }
  return result * 4;
}


//----- (0040F070) --------------------------------------------------------
int  sub_40F070(int result)
{
  signed int v1; // esi@1
  signed int v2; // edi@1
  int v3; // ecx@2
  int v4; // edx@2
  int v5; // eax@3
  int v6; // ecx@3
  signed int v7; // esi@14
  int v8; // ecx@14
  char v9; // dl@15
  char v10; // dl@17
  char v11; // dl@19
  char v12; // dl@21
  char v13; // dl@23
  char v14; // dl@25
  char v15; // dl@27
  char v16; // dl@29
  int v17; // edx@35
  int v18; // eax@36
  int v19; // ecx@36
  signed int v20; // esi@47
  int v21; // ecx@47
  char v22; // dl@48
  char v23; // dl@50
  char v24; // dl@52
  char v25; // dl@54
  char v26; // dl@56
  char v27; // dl@58
  char v28; // dl@60
  char v29; // dl@62
  int v30; // eax@66
  int v31; // edx@66
  int v32; // edx@66
  signed int v33; // [sp+Ch] [bp-4h]@1

  v1 = 0;
  v33 = 0;
  v2 = 0;
  do
  {
    v3 = v1 + 216 * dword_503518;
    v4 = dword_4A7EE4[v3];
    if ( v4 <= 0 )
      goto LABEL_35;
    v5 = dword_456AA0 + dword_4A7F5C[v3] - dword_456ABC;
    v6 = dword_4A7FD4[v3] - dword_456AC0;
    if ( v5 >= 4 && v5 + 4 < 320 && v6 >= 4 && v6 + 4 < 200 )
    {
      if ( v4 > 4 || (v2 = 0, v4 > 4) )
      {
        if ( v4 > 8 )
          goto LABEL_12;
        v2 = 64;
      }
      if ( v4 <= 8 )
      {
LABEL_14:
        v7 = 0;
        v8 = v6 << 9;
        do
        {
          v9 = *((byte *)smokeBpk + v7 + v2);
          if ( v9 )
            *(byte *)(v5 + v8 + dword_464F14 - 1956) = v9;
          v10 = *((byte *)smokeBpk + v7 + v2 + 1);
          if ( v10 )
            *(byte *)(v5 + v8 + dword_464F14 - 1955) = v10;
          v11 = *((byte *)smokeBpk + v7 + v2 + 2);
          if ( v11 )
            *(byte *)(v5 + v8 + dword_464F14 - 1954) = v11;
          v12 = *((byte *)smokeBpk + v7 + v2 + 3);
          if ( v12 )
            *(byte *)(v5 + v8 + dword_464F14 - 1953) = v12;
          v13 = *((byte *)smokeBpk + v7 + v2 + 4);
          if ( v13 )
            *(byte *)(v5 + v8 + dword_464F14 - 1952) = v13;
          v14 = *((byte *)smokeBpk + v7 + v2 + 5);
          if ( v14 )
            *(byte *)(v5 + v8 + dword_464F14 - 1951) = v14;
          v15 = *((byte *)smokeBpk + v7 + v2 + 6);
          if ( v15 )
            *(byte *)(v5 + v8 + dword_464F14 - 1950) = v15;
          v16 = *((byte *)smokeBpk + v7 + v2 + 7);
          if ( v16 )
            *(byte *)(v5 + v8 + dword_464F14 - 1949) = v16;
          v7 += 8;
          v8 += 512;
        }
        while ( v7 < 64 );
        v1 = v33;
        goto LABEL_33;
      }
LABEL_12:
      if ( v4 <= 12 )
        v2 = 128;
      goto LABEL_14;
    }
LABEL_33:
    v3 = v1 + 216 * dword_503518;
    result = dword_4A9EA4 + dword_4A7EE4[v3];
    dword_4A7EE4[v3] = result;
    if ( result >= 13 )
      dword_4A7EE4[v3] = 0;
LABEL_35:
    v17 = dword_4A7F20[v3];
    if ( v17 <= 0 )
      goto LABEL_68;
    v18 = dword_456AA0 + dword_4A7F98[v3] - dword_456ABC;
    v19 = dword_4A8010[v3] - dword_456AC0;
    if ( v18 >= 4 && v18 + 4 < 320 && v19 >= 4 && v19 + 4 < 200 )
    {
      if ( v17 <= 4 && (v2 = 0, v17 <= 4) )
      {
LABEL_44:
        if ( v17 > 8 )
          goto LABEL_45;
      }
      else
      {
        if ( v17 <= 8 )
        {
          v2 = 64;
          goto LABEL_44;
        }
LABEL_45:
        if ( v17 <= 12 )
          v2 = 128;
      }
      v20 = 0;
      v21 = v19 << 9;
      do
      {
        v22 = *((byte *)smokeBpk + v20 + v2);
        if ( v22 )
          *(byte *)(v18 + v21 + dword_464F14 - 1956) = v22;
        v23 = *((byte *)smokeBpk + v20 + v2 + 1);
        if ( v23 )
          *(byte *)(v18 + v21 + dword_464F14 - 1955) = v23;
        v24 = *((byte *)smokeBpk + v20 + v2 + 2);
        if ( v24 )
          *(byte *)(v18 + v21 + dword_464F14 - 1954) = v24;
        v25 = *((byte *)smokeBpk + v20 + v2 + 3);
        if ( v25 )
          *(byte *)(v18 + v21 + dword_464F14 - 1953) = v25;
        v26 = *((byte *)smokeBpk + v20 + v2 + 4);
        if ( v26 )
          *(byte *)(v18 + v21 + dword_464F14 - 1952) = v26;
        v27 = *((byte *)smokeBpk + v20 + v2 + 5);
        if ( v27 )
          *(byte *)(v18 + v21 + dword_464F14 - 1951) = v27;
        v28 = *((byte *)smokeBpk + v20 + v2 + 6);
        if ( v28 )
          *(byte *)(v18 + v21 + dword_464F14 - 1950) = v28;
        v29 = *((byte *)smokeBpk + v20 + v2 + 7);
        if ( v29 )
          *(byte *)(v18 + v21 + dword_464F14 - 1949) = v29;
        v20 += 8;
        v21 += 512;
      }
      while ( v20 < 64 );
      v1 = v33;
    }
    v30 = v1 + 216 * dword_503518;
    v31 = dword_4A7F20[v30];
    result = 4 * v30 + 4882208;
    v32 = dword_4A9EA4 + v31;
    *(_DWORD *)result = v32;
    if ( v32 >= 13 )
      *(_DWORD *)result = 0;
LABEL_68:
    ++v1;
    v33 = v1;
  }
  while ( v1 < 15 );
  return result;
}


//----- (0040F450) --------------------------------------------------------
int sub_40F450()
{
  int v0; // ebx@1
  unsigned __int64 v1; // rax@1
  int v2; // ebp@4
  long double v3; // st7@4
  double v4; // st6@4
  long double v5; // st5@4
  signed int v6; // esi@4
  long double v7; // st7@6
  int v8; // edi@9
  int v9; // esi@9
  signed int v10; // eax@13
  int v11; // ebp@13
  int v12; // esi@13
  int v13; // edx@13
  signed int v14; // eax@14
  char v15; // cl@15
  char v16; // cl@17
  char v17; // cl@19
  char v18; // cl@21
  bool v19; // zf@26
  bool v20; // sf@26
  unsigned __int8 v21; // of@26
  signed int v23; // [sp+0h] [bp-4h]@13

  v0 = dword_503518;
  LODWORD(v1) = 148 * dword_503518;
  if ( dword_4A68D8[37 * dword_503518] == 1
    && *(int *)((char *)dword_4A68B4 + v1) > 0
    && *(int *)((char *)dword_4A68A0 + v1) )
  {
    v2 = 216 * dword_503518;
    v3 = (flt_4A7DAC[216 * dword_503518] + 180.0) * 0.01745329251994444;
    v4 = *(float *)&dword_4A6890[37 * dword_503518] * -2.3;
    v5 = sin(v3) * v4;
    v6 = (unsigned __int64)v5;
    if ( v5 - (double)v6 >= 0.5 )
      v6 = (unsigned __int64)(v5 + 1.0);
    v7 = cos(v3) * v4 * 0.833333;
    if ( v7 - (double)(signed int)(unsigned __int64)v7 < 0.5 )
      LODWORD(v1) = (unsigned __int64)v7;
    else
      v1 = (unsigned __int64)(v7 + 1.0);
    v8 = dword_4A7D04[v2] + v6 - 8;
    v9 = dword_4A7D08[v2] + v1 - 8;
    if ( v8 >= 0 )
    {
      LODWORD(v1) = v8 + 16;
      if ( v8 + 16 < 320 && v9 >= 0 && v9 + 16 < 200 )
      {
        v10 = dword_4A7D0C[v2];
        v11 = dword_456AFC;
        v12 = v9 << 9;
        v13 = v10 / 4 << 8;
        v23 = 16;
        do
        {
          v14 = 0;
          do
          {
            v15 = *((byte *)*(&rocket1Bpk + v11) + v13 + v14);
            if ( v15 )
              *(byte *)(v14 + v12 + dword_464F14 + v8 + 96) = v15;
            v16 = *((byte *)*(&rocket1Bpk + v11) + v13 + v14 + 1);
            if ( v16 )
              *(byte *)(v14 + v12 + dword_464F14 + v8 + 97) = v16;
            v17 = *((byte *)*(&rocket1Bpk + v11) + v13 + v14 + 2);
            if ( v17 )
              *(byte *)(v14 + v12 + dword_464F14 + v8 + 98) = v17;
            v18 = *((byte *)*(&rocket1Bpk + v11) + v13 + v14 + 3);
            if ( v18 )
              *(byte *)(v14 + v12 + dword_464F14 + v8 + 99) = v18;
            v14 += 4;
          }
          while ( v14 < 16 );
          v13 += 16;
          v12 += 512;
          --v23;
        }
        while ( v23 );
        LODWORD(v1) = waitWithDelay();
        v0 = dword_503518;
        if ( (unsigned int)v1 >= dword_4A7EE0[216 * dword_503518] + 4 )
        {
          v21 = __OFSUB__(dword_456AFC + 1, 1);
          v19 = dword_456AFC == 0;
          v20 = dword_456AFC++ < 0;
          if ( !((unsigned __int8)(v20 ^ v21) | v19) )
            dword_456AFC = 0;
          LODWORD(v1) = waitWithDelay();
          v0 = dword_503518;
          dword_4A7EE0[216 * dword_503518] = v1;
        }
      }
    }
  }
  dword_4A68D8[37 * v0] = 0;
  return v1;
}


//----- (0040F6A0) --------------------------------------------------------
int sub_40F6A0()
{
  int v0; // ecx@1
  unsigned int v1; // ebp@1
  int v2; // eax@1
  int v3; // eax@3
  int v4; // ecx@5
  long double v5; // st7@10
  double v6; // st6@10
  long double v7; // st5@10
  int v8; // esi@13
  long double v9; // st7@13
  int v10; // ebx@16
  signed int v11; // edi@16
  int v12; // edx@17
  int v13; // eax@18
  int v14; // eax@21
  int v15; // ebx@29
  unsigned __int64 v16; // rax@29
  int v17; // eax@29
  int v18; // ecx@32
  int v19; // eax@32
  int v20; // eax@32
  signed int v21; // ecx@32
  char v22; // dl@33
  char v23; // dl@35
  char v24; // dl@37
  char v25; // dl@39
  char v26; // dl@41
  char v27; // dl@43
  char v28; // dl@45
  char v29; // dl@47
  int result; // eax@51
  int v31; // esi@52
  int v32; // ebp@53
  int v33; // eax@53
  int v34; // ecx@53
  int v35; // ecx@56
  int v36; // edx@61
  signed int v37; // edi@61
  signed int v38; // eax@62
  char v39; // cl@63
  char v40; // cl@65
  char v41; // cl@67
  char v42; // cl@69
  int v43; // edx@73
  int v44; // ecx@73
  char *v45; // edi@77
  int *v46; // edi@77
  int *v47; // edi@77
  int v48; // edi@77
  int v49; // eax@77
  int v50; // ebp@77
  bool v51; // zf@77
  int v52; // ebp@79
  int v53; // ebx@79
  unsigned __int64 v54; // rax@79
  signed int v55; // eax@79
  int v56; // [sp-Ch] [bp-24h]@78
  unsigned int v57; // [sp+10h] [bp-8h]@11
  unsigned int v58; // [sp+10h] [bp-8h]@14
  int v59; // [sp+10h] [bp-8h]@17
  int v60; // [sp+14h] [bp-4h]@16
  int v61; // [sp+14h] [bp-4h]@51

  v0 = dword_503518;
  v1 = 864 * dword_503518;
  v2 = dword_4A7EA8[216 * dword_503518];
  if ( v2 > 0 )
    dword_4A7EA8[v1 / 4] = v2 - 1;
  v3 = 37 * v0;
  if ( dword_4A6898[37 * v0] > 0 && !dword_4A7E0C[v1 / 4] )
  {
    v4 = *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * v0)];
    if ( v4 & 0x40 )
    {
      if ( dword_4A68A8[v3] > 0 && dword_481E14 > 430 && !dword_4A7EA8[v1 / 4] && !(v4 & 2) )
      {
        dword_4A7EA8[v1 / 4] = 50;
        v5 = *(float *)(v1 + 4881836) * 0.01745329251994444;
        v6 = *(float *)(v3 * 4 + 4876432);
        v7 = sin(v5) * v6 * 2.3;
        v57 = v7 - (double)(signed int)(unsigned __int64)v7 < 0.5 ? (unsigned int)(unsigned __int64)v7 : (unsigned int)(unsigned __int64)(v7 + 1.0);
        v8 = (unsigned __int64)(*(float *)(v1 + 4881844) - 4.0 + (double)(signed int)v57);
        v9 = cos(v5) * v6 * 1.9166659;
        v58 = v9 - (double)(signed int)(unsigned __int64)v9 < 0.5 ? (unsigned int)(unsigned __int64)v9 : (unsigned int)(unsigned __int64)(v9 + 1.0);
        v10 = (unsigned __int64)(*(float *)(v1 + 4881848) - 4.0 + (double)(signed int)v58);
        v11 = 0;
        v60 = (unsigned __int64)(*(float *)(v1 + 4881848) - 4.0 + (double)(signed int)v58);
        if ( dword_464F60 <= 0 )
          goto LABEL_85;
        v12 = (int)dword_481C04;
        v59 = dword_464F60;
        do
        {
          v13 = *(_DWORD *)(v12 - 4) - v8 - 4;
          if ( v13 < 0 )
            v13 = v8 - *(_DWORD *)(v12 - 4) + 4;
          if ( v13 < 8 )
          {
            v14 = *(_DWORD *)v12 - v10 - 4;
            if ( v14 < 0 )
              v14 = v10 - *(_DWORD *)v12 + 4;
            if ( v14 < 8 )
              v11 = 1;
          }
          v12 += 16;
          --v59;
        }
        while ( v59 );
        if ( !v11 )
        {
LABEL_85:
          if ( dword_503518 == dword_4A9EA8 )
          {
            loadMenuSoundEffect(4u, 18, 0, 36864, 135168);
          }
          else
          {
            v15 = (unsigned __int64)(*(float *)(v1 + 4881844) - *(float *)&dword_4A7DB4[216 * dword_4A9EA8]);
            v16 = (unsigned __int64)(*(float *)(v1 + 4881848) - *(float *)&dword_4A7DB8[216 * dword_4A9EA8]);
            v17 = 0x10000 - 75 * (unsigned __int64)sqrt((double)(v15 * v15 + (signed int)v16 * (signed int)v16));
            if ( v17 > 4096 )
              loadMenuSoundEffect(4u, 18, 0, v17, 135168);
            v10 = v60;
          }
          v18 = dword_464F60;
          v19 = 4 * dword_464F60;
          dword_481C00[v19] = v8 + 4;
          dword_481C04[v19] = v10 + 4;
          dword_464F60 = v18 + 1;
          v20 = v10;
          v21 = 0;
          do
          {
            v22 = *((byte *)mines1aBpk + v21);
            if ( v22 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8) = v22;
            v23 = *((byte *)mines1aBpk + v21 + 1);
            if ( v23 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 1) = v23;
            v24 = *((byte *)mines1aBpk + v21 + 2);
            if ( v24 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 2) = v24;
            v25 = *((byte *)mines1aBpk + v21 + 3);
            if ( v25 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 3) = v25;
            v26 = *((byte *)mines1aBpk + v21 + 4);
            if ( v26 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 4) = v26;
            v27 = *((byte *)mines1aBpk + v21 + 5);
            if ( v27 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 5) = v27;
            v28 = *((byte *)mines1aBpk + v21 + 6);
            if ( v28 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 6) = v28;
            v29 = *((byte *)mines1aBpk + v21 + 7);
            if ( v29 )
              *((byte *)dword_5034F8 + dword_464F40 * v20 + v8 + 7) = v29;
            v21 += 8;
            ++v20;
          }
          while ( v21 < 64 );
          --dword_4A68A8[37 * dword_503518];
        }
      }
    }
  }
  result = dword_464F60;
  v61 = 0;
  if ( dword_464F60 > 0 )
  {
    v31 = (int)dword_481C00;
    while ( 1 )
    {
      v32 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_503518] - *(_DWORD *)v31;
      v33 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_503518] - *(_DWORD *)(v31 + 4);
      v34 = v32;
      if ( v32 < 0 )
        v34 = -v32;
      if ( v34 >= 20 )
        goto LABEL_82;
      v35 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_503518] - *(_DWORD *)(v31 + 4);
      if ( v33 < 0 )
        v35 = -v33;
      if ( v35 >= 20
        || *((byte *)dword_5034FC + 40 * v33 + dword_4A7D10[216 * dword_503518] + v32 + 820) <= 3u
        || *(_DWORD *)(v31 + 8) != -1 )
        goto LABEL_82;
      v36 = 0;
      v37 = 0;
      do
      {
        v38 = 0;
        do
        {
          v39 = *((byte *)blowiBpk + v37 + v38 + 1280);
          if ( v39 )
            *((char *)dword_5034F8 + *(_DWORD *)v31 + dword_464F40 * (*(_DWORD *)(v31 + 4) + v36 - 8) + v38 - 8) = v39;
          v40 = *((byte *)blowiBpk + v37 + v38 + 1281);
          if ( v40 )
            *((char *)dword_5034F8 + *(_DWORD *)v31 + dword_464F40 * (*(_DWORD *)(v31 + 4) + v36 - 8) + v38 - 7) = v40;
          v41 = *((byte *)blowiBpk + v37 + v38 + 1282);
          if ( v41 )
            *((char *)dword_5034F8 + *(_DWORD *)v31 + dword_464F40 * (*(_DWORD *)(v31 + 4) + v36 - 8) + v38 - 6) = v41;
          v42 = *((byte *)blowiBpk + v37 + v38 + 1283);
          if ( v42 )
            *((char *)dword_5034F8 + *(_DWORD *)v31 + dword_464F40 * (*(_DWORD *)(v31 + 4) + v36 - 8) + v38 - 5) = v42;
          v38 += 4;
        }
        while ( v38 < 16 );
        v37 += 16;
        ++v36;
      }
      while ( v37 < 256 );
      v43 = dword_503518;
      v44 = dword_4A7E0C[216 * dword_503518];
      *(_DWORD *)(v31 + 8) = 0;
      if ( !v44 )
        dword_4A6898[37 * v43] += 20 * (dword_4A689C[37 * v43] - 1024);
      if ( dword_4A6898[37 * v43] < 0 )
        dword_4A6898[37 * v43] = 0;
      *((float *)&unk_4A7DFC + 216 * v43) = (double)(rand() % 3 - 1) * 0.5 + *((float *)&unk_4A7DFC + 216 * v43);
      v45 = (char *)&unk_4A7E00 + 864 * dword_503518;
      *(float *)v45 = (double)(rand() % 3 - 1) * 0.5 + *(float *)v45;
      v46 = &dword_4A7DB4[216 * dword_503518];
      *(float *)v46 = (double)(rand() % 11 - 5) + *(float *)v46;
      v47 = &dword_4A7DB8[216 * dword_503518];
      *(float *)v47 = (double)(rand() % 11 - 5) + *(float *)v47;
      v48 = 864 * dword_503518;
      v49 = rand();
      v50 = dword_4A9EA8;
      v51 = dword_503518 == dword_4A9EA8;
      *(float *)(v48 + 4881924) = (double)(v49 % 22 - 10);
      *(float *)(v48 + 4881840) = *(float *)(v48 + 4881840) - 1.7 * *(float *)(v48 + 4881840);
      if ( v51 )
        break;
      v52 = 864 * v50;
      v53 = (unsigned __int64)(*(float *)(v48 + 4881844) - *(float *)(v52 + 4881844));
      v54 = (unsigned __int64)(*(float *)(v48 + 4881848) - *(float *)(v52 + 4881848));
      v55 = 0x10000 - 75 * (unsigned __int64)sqrt((double)(v53 * v53 + (signed int)v54 * (signed int)v54));
      if ( v55 > 4096 )
      {
        v56 = v55;
        goto LABEL_81;
      }
LABEL_82:
      result = v61 + 1;
      v31 += 16;
      ++v61;
      if ( v61 >= dword_464F60 )
        return result;
    }
    v56 = 36864;
LABEL_81:
    loadMenuSoundEffect(4u, 23, 0, v56, 135168);
    goto LABEL_82;
  }
  return result;
}


//----- (0040FE20) --------------------------------------------------------
int sub_40FE20()
{
  int result; // eax@1
  int v1; // esi@1
  int v2; // ebp@2
  char *v3; // edi@2
  int v4; // edx@4
  int v5; // ebx@4
  signed int v6; // esi@9
  int v7; // ebx@9
  signed int v8; // eax@10
  char v9; // cl@11
  char v10; // cl@13
  char v11; // cl@15
  char v12; // cl@17
  int v13; // ecx@25
  bool v14; // sf@25
  unsigned __int8 v15; // of@25
  char *v16; // eax@26
  int v17; // edx@26
  int v18; // [sp+4h] [bp-10h]@2
  char *v19; // [sp+8h] [bp-Ch]@2
  int v20; // [sp+Ch] [bp-8h]@1
  int v21; // [sp+10h] [bp-4h]@2

  result = dword_464F60;
  v1 = 0;
  v20 = 0;
  if ( dword_464F60 > 0 )
  {
    v2 = (int)dword_481C00;
    v3 = (char *)&unk_481C08;
    v19 = (char *)&unk_481C0C;
    v18 = (int)dword_481C04;
    v21 = (int)dword_481C00;
    do
    {
      if ( *(_DWORD *)v3 != -1 )
      {
        v4 = dword_456AA0 + *(_DWORD *)v2 - dword_456ABC;
        v5 = *(_DWORD *)v18 - dword_456AC0;
        if ( v4 >= 8 && v4 + 8 < 320 && v5 >= 8 && v5 + 8 < 200 && *(_DWORD *)v3 != 5 )
        {
          v6 = 0;
          v7 = v5 << 9;
          do
          {
            v8 = 0;
            do
            {
              v9 = *((byte *)blowiBpk + 16 * (v6 + 16 * *(_DWORD *)v3) + v8);
              if ( v9 )
                *(byte *)(v4 + v8 + v7 + dword_464F14 - 4008) = v9;
              v10 = *((byte *)blowiBpk + 16 * (v6 + 16 * *(_DWORD *)v3) + v8 + 1);
              if ( v10 )
                *(byte *)(v4 + v8 + v7 + dword_464F14 - 4007) = v10;
              v11 = *((byte *)blowiBpk + 16 * (v6 + 16 * *(_DWORD *)v3) + v8 + 2);
              if ( v11 )
                *(byte *)(v4 + v8 + v7 + dword_464F14 - 4006) = v11;
              v12 = *((byte *)blowiBpk + 16 * (v6 + 16 * *(_DWORD *)v3) + v8 + 3);
              if ( v12 )
                *(byte *)(v4 + v8 + v7 + dword_464F14 - 4005) = v12;
              v8 += 4;
            }
            while ( v8 < 16 );
            ++v6;
            v7 += 512;
          }
          while ( v6 < 16 );
          v2 = v21;
          v1 = v20;
        }
        if ( waitWithDelay() >= (unsigned int)(*(_DWORD *)v19 + 5) )
        {
          ++*(_DWORD *)v3;
          *(_DWORD *)v19 = waitWithDelay();
        }
        if ( *(_DWORD *)v3 > 5 )
        {
          v13 = dword_464F60 - 1;
          v15 = __OFSUB__(v1, dword_464F60 - 1);
          v14 = v1 - (dword_464F60 - 1) < 0;
          *(_DWORD *)v3 = -1;
          if ( v14 ^ v15 )
          {
            v16 = v3;
            v17 = v13 - v1;
            do
            {
              *(_DWORD *)v16 = *((_DWORD *)v16 + 4);
              *((_DWORD *)v16 - 2) = *((_DWORD *)v16 + 2);
              *((_DWORD *)v16 - 1) = *((_DWORD *)v16 + 3);
              v16 += 16;
              --v17;
            }
            while ( v17 );
          }
          --v1;
          v2 -= 16;
          v18 -= 16;
          v19 -= 16;
          v3 -= 16;
          dword_464F60 = v13;
        }
      }
      v2 += 16;
      v3 += 16;
      result = dword_464F60;
      ++v1;
      v20 = v1;
      v21 = v2;
      v18 += 16;
      v19 += 16;
    }
    while ( v1 < dword_464F60 );
  }
  return result;
}


//----- (00410050) --------------------------------------------------------
void sub_410050()
{
  int v0; // ecx@1
  signed int v1; // esi@1
  int v2; // ebp@4
  int v3; // ebx@4
  unsigned int v4; // eax@9
  char *v5; // esi@9
  void *v6; // edi@9
  char v7; // cl@10
  char *v8; // edi@12
  char v9; // al@13
  char v10; // cl@16
  int v11; // [sp+14h] [bp-14h]@1
  char DstBuf; // [sp+18h] [bp-10h]@9
  char v13; // [sp+1Fh] [bp-9h]@9
  __int16 v14; // [sp+20h] [bp-8h]@9

  v0 = Val;
  v1 = (signed int)&unk_501BB4;
  v11 = (int)&unk_501BB4;
  do
  {
    if ( *(_DWORD *)v1 > 0 && v0 > 0 )
    {
      v2 = dword_456AA0 + *(_DWORD *)(v1 - 20) - dword_456ABC;
      v3 = (*(_DWORD *)v1 >> 3) - dword_456AC0 + *(_DWORD *)(v1 - 16) - 10;
      if ( v2 >= -18 && v2 < 320 && v3 >= 0 && v3 + 6 < 200 )
      {
        switch ( *(_DWORD *)(v1 + 4) )
        {
          case 3:
            itoa(v0, &DstBuf, 10);
            v14 = 36;
            v5 = &DstBuf;
            v4 = strlen(&DstBuf) + 1;
            v6 = &v13;
            do
            {
              v7 = *((byte *)v6 + 1);
              v6 = (char *)v6 + 1;
            }
            while ( v7 );
            goto LABEL_17;
          case 5:
          case 8:
            itoa(*(_DWORD *)(v1 + 8), &DstBuf, 10);
            v8 = (char *)&v11 + 3;
            do
              v9 = (v8++)[1];
            while ( v9 );
            *(_WORD *)v8 = 37;
            sub_402510((v3 << 9) + v2 + 96, &DstBuf);
            goto LABEL_18;
          case 7:
            itoa(10 * v0, &DstBuf, 10);
            v14 = 36;
            v5 = &DstBuf;
            v4 = strlen(&DstBuf) + 1;
            v6 = &v13;
            do
            {
              v10 = *((byte *)v6 + 1);
              v6 = (char *)v6 + 1;
            }
            while ( v10 );
LABEL_17:
            memcpy(v6, v5, v4);
            sub_402510((v3 << 9) + v2 + 96, (const char *)&v14);
            v1 = v11;
LABEL_18:
            v0 = Val;
            break;
          default:
            break;
        }
      }
      *(_DWORD *)v1 -= dword_4A9EA4;
    }
    v1 += 288;
    v11 = v1;
  }
  while ( v1 < (signed int)&unk_502C94 );
}

//----- (00410220) --------------------------------------------------------
int sub_410220()
{
  int v0; // edx@1
  int v1; // esi@2
  signed int v2; // eax@4
  signed int v3; // ecx@8
  signed int v4; // ecx@11
  signed int v5; // ecx@14
  signed int v6; // ecx@17
  signed int v7; // ecx@20
  int (__cdecl *v8)(); // ebx@24
  signed int v9; // ecx@26
  signed int v10; // eax@26
  int v11; // edx@41
  int v12; // esi@42
  int v13; // eax@42
  int v14; // edx@49
  bool v15; // sf@62
  unsigned __int8 v16; // of@62
  void *v17; // edi@76
  int v18; // ebp@76
  signed int v19; // eax@76
  int v20; // edx@77
  int v21; // ecx@77
  int v22; // ecx@77
  int v23; // edx@77
  int v24; // ecx@77
  int v25; // ecx@77
  int v26; // edx@77
  signed int v27; // ecx@78
  signed int v28; // eax@79
  char v29; // dl@80
  char v30; // dl@82
  char v31; // dl@84
  char v32; // dl@86
  signed int v33; // esi@95
  int v34; // ecx@96
  signed int v35; // edx@96
  signed int v36; // eax@96
  signed int v37; // ecx@102
  signed int v38; // eax@103
  char v39; // dl@104
  char v40; // dl@106
  char v41; // dl@108
  char v42; // dl@110
  int v43; // ecx@114
  signed int v44; // edx@114
  int result; // eax@114
  char *v46; // ecx@120
  int v47; // edi@121
  char *v48; // edx@121
  char *v49; // edi@121
  char *v50; // edi@121
  signed int v51; // eax@123
  char *v52; // ecx@123
  int v53; // edi@125
  char *v54; // edx@125
  char *v55; // edi@125
  char *v56; // edi@125
  int v57; // edx@125
  int v58; // eax@126
  signed __int64 v59; // rtt@126
  char *v60; // [sp+10h] [bp-18h]@76
  signed int v61; // [sp+14h] [bp-14h]@40
  int v62; // [sp+18h] [bp-10h]@40
  int v63; // [sp+1Ch] [bp-Ch]@40
  int v64; // [sp+20h] [bp-8h]@40
  int v65; // [sp+24h] [bp-4h]@40

  v0 = dword_4A9EA4;
  if ( dword_456AC4 <= 0 )
    v1 = 0;
  else
    v1 = dword_456AC4 - dword_4A9EA4;
  dword_456AC4 = v1;
  v2 = (signed int)dword_501BB0;
  do
  {
    if ( *(_DWORD *)v2 < 2000 && *(_DWORD *)(v2 - 8) )
      *(_DWORD *)v2 += v0;
    v3 = *(_DWORD *)(v2 + 288);
    if ( v3 < 2000 && *(_DWORD *)(v2 + 280) )
      *(_DWORD *)(v2 + 288) = v0 + v3;
    v4 = *(_DWORD *)(v2 + 576);
    if ( v4 < 2000 && *(_DWORD *)(v2 + 568) )
      *(_DWORD *)(v2 + 576) = v0 + v4;
    v5 = *(_DWORD *)(v2 + 864);
    if ( v5 < 2000 && *(_DWORD *)(v2 + 856) )
      *(_DWORD *)(v2 + 864) = v0 + v5;
    v6 = *(_DWORD *)(v2 + 1152);
    if ( v6 < 2000 && *(_DWORD *)(v2 + 1144) )
      *(_DWORD *)(v2 + 1152) = v0 + v6;
    v7 = *(_DWORD *)(v2 + 1440);
    if ( v7 < 2000 && *(_DWORD *)(v2 + 1432) )
      *(_DWORD *)(v2 + 1440) = v0 + v7;
    v2 += 1728;
  }
  while ( v2 < (signed int)&unk_502930 );
  v8 = rand;
  if ( !v1 && !dword_456AC8 )
  {
    v9 = 0;
    v10 = (signed int)&unk_501CC8;
    do
    {
      if ( *(_DWORD *)(v10 - 288) > 0 )
        ++v9;
      if ( *(_DWORD *)v10 > 0 )
        ++v9;
      if ( *(_DWORD *)(v10 + 288) > 0 )
        ++v9;
      if ( *(_DWORD *)(v10 + 576) > 0 )
        ++v9;
      if ( *(_DWORD *)(v10 + 864) > 0 )
        ++v9;
      if ( *(_DWORD *)(v10 + 1152) > 0 )
        ++v9;
      v10 += 1728;
    }
    while ( v10 < (signed int)&unk_502A48 );
    v63 = 0;
    v64 = 0;
    v61 = v9;
    v65 = 0;
    v62 = 0;
    while ( 1 )
    {
      do
        v11 = v8() % 12;
      while ( *((byte *)&v63 + v11) == 1 );
      v12 = 72 * v11;
      v13 = dword_501BAC[72 * v11];
      *((byte *)&v63 + v11) = 1;
      dword_501BAC[v12] = v13 <= 0 ? 0 : v13 - dword_4A9EA4;
      if ( !dword_501BA8[v12] && dword_501BA0[v12] > 0 && !dword_501BAC[v12] && v61 < 4 )
        break;
      v17 = dword_5034F8;
      v18 = dword_464F40;
LABEL_92:
      v16 = __OFSUB__(v62 + 1, 12);
      v15 = v62++ - 11 < 0;
      if ( !(v15 ^ v16) )
        goto LABEL_95;
    }
    v14 = v8() % 100;
    if ( dword_4A68AC[37 * dword_4A9EA8] )
    {
      if ( v14 >= 0 )
      {
        if ( v14 >= 30 )
        {
LABEL_54:
          if ( v14 >= 65 )
          {
LABEL_57:
            if ( v14 >= 80 )
              goto LABEL_60;
            dword_501BA8[v12] = 3;
LABEL_59:
            if ( v14 < 80 )
            {
LABEL_62:
              v16 = __OFSUB__(v14, 85);
              v15 = v14 - 85 < 0;
              goto LABEL_73;
            }
LABEL_60:
            if ( v14 >= 85 )
              goto LABEL_74;
            dword_501BA8[v12] = 4;
            goto LABEL_62;
          }
          dword_501BA8[v12] = 2;
LABEL_56:
          if ( v14 < 65 )
            goto LABEL_59;
          goto LABEL_57;
        }
        dword_501BA8[v12] = 1;
      }
      if ( v14 < 30 )
        goto LABEL_56;
      goto LABEL_54;
    }
    if ( v14 >= 0 )
    {
      if ( v14 >= 45 )
      {
LABEL_67:
        if ( v14 >= 80 )
          goto LABEL_70;
        dword_501BA8[v12] = 3;
LABEL_69:
        if ( v14 < 80 )
        {
LABEL_72:
          v16 = __OFSUB__(v14, 90);
          v15 = v14 - 90 < 0;
LABEL_73:
          if ( v15 ^ v16 )
          {
LABEL_76:
            v17 = dword_5034F8;
            ++v61;
            dword_501BB0[v12] = 0;
            v18 = dword_464F40;
            v19 = 0;
            v60 = (char *)&unk_501BD0 + v12 * 4;
            do
            {
              v20 = (int)((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v19 - 8) - 8);
              v21 = (int)(v60 - 16);
              *(_DWORD *)v21 = *(_DWORD *)v20;
              *(_DWORD *)(v21 + 4) = *(_DWORD *)(v20 + 4);
              *(_DWORD *)(v21 + 8) = *(_DWORD *)(v20 + 8);
              *(_DWORD *)(v21 + 12) = *(_DWORD *)(v20 + 12);
              v22 = (int)((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v19 - 7) - 8);
              *(_DWORD *)v60 = *(_DWORD *)v22;
              *((_DWORD *)v60 + 1) = *(_DWORD *)(v22 + 4);
              *((_DWORD *)v60 + 2) = *(_DWORD *)(v22 + 8);
              *((_DWORD *)v60 + 3) = *(_DWORD *)(v22 + 12);
              v23 = (int)((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v19 - 6) - 8);
              v24 = (int)(v60 + 16);
              *(_DWORD *)v24 = *(_DWORD *)v23;
              *(_DWORD *)(v24 + 4) = *(_DWORD *)(v23 + 4);
              *(_DWORD *)(v24 + 8) = *(_DWORD *)(v23 + 8);
              *(_DWORD *)(v24 + 12) = *(_DWORD *)(v23 + 12);
              v25 = (int)((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v19 - 5) - 8);
              v26 = (int)(v60 + 32);
              *(_DWORD *)v26 = *(_DWORD *)v25;
              *(_DWORD *)(v26 + 4) = *(_DWORD *)(v25 + 4);
              *(_DWORD *)(v26 + 8) = *(_DWORD *)(v25 + 8);
              *(_DWORD *)(v26 + 12) = *(_DWORD *)(v25 + 12);
              v19 += 4;
              v60 += 64;
            }
            while ( v19 < 16 );
            v27 = 0;
            do
            {
              v28 = 0;
              do
              {
                v29 = *((byte *)obstacleBpk + 16 * (16 * dword_501BA8[v12] + v27 - 16) + v28);
                if ( v29 )
                {
                  *((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v27 - 8) + v28 - 8) = v29;
                  v17 = dword_5034F8;
                  v18 = dword_464F40;
                }
                v30 = *((char *)obstacleBpk + 16 * (v27 + 16 * dword_501BA8[v12]) + v28 - 255);
                if ( v30 )
                {
                  *((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v27 - 8) + v28 - 7) = v30;
                  v17 = dword_5034F8;
                  v18 = dword_464F40;
                }
                v31 = *((char *)obstacleBpk + 16 * (v27 + 16 * dword_501BA8[v12]) + v28 - 254);
                if ( v31 )
                {
                  *((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v27 - 8) + v28 - 6) = v31;
                  v17 = dword_5034F8;
                  v18 = dword_464F40;
                }
                v32 = *((char *)obstacleBpk + 16 * (v27 + 16 * dword_501BA8[v12]) + v28 - 253);
                if ( v32 )
                {
                  *((char *)v17 + dword_501BA0[v12] + v18 * (dword_501BA4[v12] + v27 - 8) + v28 - 5) = v32;
                  v17 = dword_5034F8;
                  v18 = dword_464F40;
                }
                v28 += 4;
              }
              while ( v28 < 16 );
              ++v27;
            }
            while ( v27 < 16 );
            v8 = rand;
            goto LABEL_92;
          }
LABEL_74:
          if ( v14 < 100 )
            dword_501BA8[v12] = 5;
          goto LABEL_76;
        }
LABEL_70:
        if ( v14 >= 90 )
          goto LABEL_74;
        dword_501BA8[v12] = 4;
        goto LABEL_72;
      }
      dword_501BA8[v12] = 2;
    }
    if ( v14 < 45 )
      goto LABEL_69;
    goto LABEL_67;
  }
  v17 = dword_5034F8;
  v18 = dword_464F40;
LABEL_95:
  v33 = 0;
  do
  {
    v34 = dword_501BB0[v33];
    v35 = 0;
    v36 = 2000;
    do
    {
      if ( v34 > v36 - 10 && v34 < v36 )
        v35 = 1;
      v36 -= 20;
    }
    while ( v36 >= 1540 );
    if ( v35 )
    {
      v37 = 0;
      do
      {
        v38 = 0;
        do
        {
          v39 = *((byte *)obstacleBpk + 16 * (16 * dword_501BA8[v33] + v37 - 16) + v38);
          if ( v39 )
          {
            *((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + v37 - 8) + v38 - 8) = v39;
            v17 = dword_5034F8;
            v18 = dword_464F40;
          }
          v40 = *((char *)obstacleBpk + 16 * (v37 + 16 * dword_501BA8[v33]) + v38 - 255);
          if ( v40 )
          {
            *((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + v37 - 8) + v38 - 7) = v40;
            v17 = dword_5034F8;
            v18 = dword_464F40;
          }
          v41 = *((char *)obstacleBpk + 16 * (v37 + 16 * dword_501BA8[v33]) + v38 - 254);
          if ( v41 )
          {
            *((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + v37 - 8) + v38 - 6) = v41;
            v17 = dword_5034F8;
            v18 = dword_464F40;
          }
          v42 = *((char *)obstacleBpk + 16 * (v37 + 16 * dword_501BA8[v33]) + v38 - 253);
          if ( v42 )
          {
            *((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + v37 - 8) + v38 - 5) = v42;
            v17 = dword_5034F8;
            v18 = dword_464F40;
          }
          v38 += 4;
        }
        while ( v38 < 16 );
        ++v37;
      }
      while ( v37 < 16 );
    }
    v43 = dword_501BB0[v33];
    v44 = 0;
    result = 1990;
    do
    {
      if ( v43 > result - 10 && v43 < result )
        v44 = 1;
      result -= 20;
    }
    while ( result >= 1530 );
    if ( v44 )
    {
      result = 0;
      v46 = (char *)&unk_501BD0 + v33 * 4;
      do
      {
        v47 = (int)((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + result - 8) - 8);
        *(_DWORD *)v47 = *((_DWORD *)v46 - 4);
        *(_DWORD *)(v47 + 4) = *((_DWORD *)v46 - 3);
        *(_DWORD *)(v47 + 8) = *((_DWORD *)v46 - 2);
        *(_DWORD *)(v47 + 12) = *((_DWORD *)v46 - 1);
        v48 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + result - 7) - 8;
        *(_DWORD *)v48 = *(_DWORD *)v46;
        *((_DWORD *)v48 + 1) = *((_DWORD *)v46 + 1);
        *((_DWORD *)v48 + 2) = *((_DWORD *)v46 + 2);
        *((_DWORD *)v48 + 3) = *((_DWORD *)v46 + 3);
        v49 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + result - 6) - 8;
        *(_DWORD *)v49 = *((_DWORD *)v46 + 4);
        *((_DWORD *)v49 + 1) = *((_DWORD *)v46 + 5);
        *((_DWORD *)v49 + 2) = *((_DWORD *)v46 + 6);
        *((_DWORD *)v49 + 3) = *((_DWORD *)v46 + 7);
        v50 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + result - 5) - 8;
        *(_DWORD *)v50 = *((_DWORD *)v46 + 8);
        *((_DWORD *)v50 + 1) = *((_DWORD *)v46 + 9);
        *((_DWORD *)v50 + 2) = *((_DWORD *)v46 + 10);
        result += 4;
        *((_DWORD *)v50 + 3) = *((_DWORD *)v46 + 11);
        v18 = dword_464F40;
        v17 = dword_5034F8;
        v46 += 64;
      }
      while ( result < 16 );
    }
    if ( dword_501BB0[v33] >= 2000 )
    {
      v51 = 0;
      v52 = (char *)&unk_501BD0 + v33 * 4;
      while ( 1 )
      {
        v53 = (int)((char *)v17 + dword_501BA0[v33] + v18 * (dword_501BA4[v33] + v51 - 8) - 8);
        *(_DWORD *)v53 = *((_DWORD *)v52 - 4);
        *(_DWORD *)(v53 + 4) = *((_DWORD *)v52 - 3);
        *(_DWORD *)(v53 + 8) = *((_DWORD *)v52 - 2);
        *(_DWORD *)(v53 + 12) = *((_DWORD *)v52 - 1);
        v54 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + v51 - 7) - 8;
        *(_DWORD *)v54 = *(_DWORD *)v52;
        *((_DWORD *)v54 + 1) = *((_DWORD *)v52 + 1);
        *((_DWORD *)v54 + 2) = *((_DWORD *)v52 + 2);
        *((_DWORD *)v54 + 3) = *((_DWORD *)v52 + 3);
        v55 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + v51 - 6) - 8;
        *(_DWORD *)v55 = *((_DWORD *)v52 + 4);
        *((_DWORD *)v55 + 1) = *((_DWORD *)v52 + 5);
        *((_DWORD *)v55 + 2) = *((_DWORD *)v52 + 6);
        *((_DWORD *)v55 + 3) = *((_DWORD *)v52 + 7);
        v56 = (char *)dword_5034F8 + dword_501BA0[v33] + dword_464F40 * (dword_501BA4[v33] + v51 - 5) - 8;
        *(_DWORD *)v56 = *((_DWORD *)v52 + 8);
        *((_DWORD *)v56 + 1) = *((_DWORD *)v52 + 9);
        *((_DWORD *)v56 + 2) = *((_DWORD *)v52 + 10);
        v57 = *((_DWORD *)v52 + 11);
        v51 += 4;
        v52 += 64;
        *((_DWORD *)v56 + 3) = v57;
        if ( v51 >= 16 )
          break;
        v17 = dword_5034F8;
        v18 = dword_464F40;
      }
      dword_501BB0[v33] = 0;
      dword_501BA8[v33] = 0;
      dword_456AC4 = 280;
      v58 = rand();
      v59 = v58;
      result = v58 / 200;
      v17 = dword_5034F8;
      v18 = dword_464F40;
      dword_501BAC[v33] = (unsigned __int64)(v59 % 200) + 300;
    }
    v33 += 72;
  }
  while ( v33 < 864 );
  return result;
}


//----- (00410B90) --------------------------------------------------------
char sub_410B90()
{
  int v0; // ebx@1
  signed int v1; // esi@1
  int v2; // edi@2
  int v3; // eax@2
  int v4; // ecx@2
  int v5; // ecx@5
  char *v6; // edx@8
  int v7; // edi@8
  double v8; // st7@15
  int v9; // ebx@15
  signed int v10; // eax@15
  signed int v11; // eax@18
  int v12; // ecx@18
  char *v13; // ebx@19
  char *v14; // edx@19
  char *v15; // ebx@19
  char *v16; // ebx@19
  int v17; // edx@19
  int *v18; // eax@21
  int v19; // edx@21
  int v20; // eax@24
  int v21; // eax@26
  int v22; // edx@26
  int *v23; // ecx@26
  int v24; // eax@26
  int v25; // edx@31
  int v26; // eax@34
  int v27; // eax@34
  signed __int64 v28; // rtt@34
  unsigned __int8 v30; // [sp-18h] [bp-2Ch]@14
  char v31; // [sp-14h] [bp-28h]@14
  int v32; // [sp-Ch] [bp-20h]@14

  v0 = dword_503518;
  v1 = (signed int)dword_501BA0;
  do
  {
    v2 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * v0] - *(_DWORD *)v1;
    v3 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * v0] - *(_DWORD *)(v1 + 4);
    v4 = v2;
    if ( v2 < 0 )
      v4 = -v2;
    if ( v4 < 17 )
    {
      v5 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * v0] - *(_DWORD *)(v1 + 4);
      if ( v3 < 0 )
        v5 = -v3;
      if ( v5 < 17 )
      {
        v6 = (char *)dword_5034FC + 40 * v3 + dword_4A7D10[216 * v0];
        LOBYTE(v3) = v6[v2 + 738];
        v7 = (int)&v6[v2];
        if ( (unsigned __int8)v3 > 3u
          || *(byte *)(v7 + 742) > 3u
          || *(byte *)(v7 + 898) > 3u
          || *(byte *)(v7 + 902) > 3u )
        {
          v3 = *(_DWORD *)(v1 + 8);
          if ( v3 > 0 )
          {
            if ( v0 == dword_4A9EA8 )
            {
              v32 = 36864;
              v31 = 18;
              v30 = 4;
            }
            else
            {
              v8 = *(float *)&dword_4A7DB8[216 * v0] - *(float *)&dword_4A7DB8[216 * dword_4A9EA8];
              v9 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v0] - *(float *)&dword_4A7DB4[216 * dword_4A9EA8]);
              v10 = 36864
                  - 75
                  * (unsigned __int64)sqrt((double)(signed int)(v9 * v9 + (unsigned __int64)v8 * (unsigned __int64)v8));
              if ( v10 <= 4096 )
              {
LABEL_18:
                v11 = 0;
                v12 = v1 + 48;
                do
                {
                  v13 = (char *)dword_5034F8 + *(_DWORD *)v1 + dword_464F40 * (*(_DWORD *)(v1 + 4) + v11 - 8) - 8;
                  *(_DWORD *)v13 = *(_DWORD *)(v12 - 16);
                  *((_DWORD *)v13 + 1) = *(_DWORD *)(v12 - 16 + 4);
                  *((_DWORD *)v13 + 2) = *(_DWORD *)(v12 - 16 + 8);
                  *((_DWORD *)v13 + 3) = *(_DWORD *)(v12 - 16 + 12);
                  v14 = (char *)dword_5034F8 + *(_DWORD *)v1 + dword_464F40 * (*(_DWORD *)(v1 + 4) + v11 - 7) - 8;
                  *(_DWORD *)v14 = *(_DWORD *)v12;
                  *((_DWORD *)v14 + 1) = *(_DWORD *)(v12 + 4);
                  *((_DWORD *)v14 + 2) = *(_DWORD *)(v12 + 8);
                  *((_DWORD *)v14 + 3) = *(_DWORD *)(v12 + 12);
                  v15 = (char *)dword_5034F8 + *(_DWORD *)v1 + dword_464F40 * (*(_DWORD *)(v1 + 4) + v11 - 6) - 8;
                  *(_DWORD *)v15 = *(_DWORD *)(v12 + 16);
                  *((_DWORD *)v15 + 1) = *(_DWORD *)(v12 + 20);
                  *((_DWORD *)v15 + 2) = *(_DWORD *)(v12 + 24);
                  *((_DWORD *)v15 + 3) = *(_DWORD *)(v12 + 28);
                  v16 = (char *)dword_5034F8 + *(_DWORD *)v1 + dword_464F40 * (*(_DWORD *)(v1 + 4) + v11 - 5) - 8;
                  *(_DWORD *)v16 = *(_DWORD *)(v12 + 32);
                  *((_DWORD *)v16 + 1) = *(_DWORD *)(v12 + 36);
                  *((_DWORD *)v16 + 2) = *(_DWORD *)(v12 + 40);
                  v17 = *(_DWORD *)(v12 + 44);
                  v11 += 4;
                  v12 += 64;
                  *((_DWORD *)v16 + 3) = v17;
                }
                while ( v11 < 16 );
                switch ( *(_DWORD *)(v1 + 8) )
                {
                  case 1:
                    v18 = &dword_4A68B0[37 * dword_503518];
                    v19 = dword_4A68B0[37 * dword_503518] + 30720;
                    goto LABEL_32;
                  case 2:
                    v18 = &dword_4A68B4[37 * dword_503518];
                    v19 = dword_4A68B4[37 * dword_503518] + 15360;
                    goto LABEL_32;
                  case 3:
                    ++dword_4A68D0[37 * dword_503518];
                    break;
                  case 4:
                    v20 = dword_503518;
                    dword_4A8050[216 * dword_503518] = 560;
                    if ( v20 == dword_4A9EA8 )
                      loadMenuSoundEffect(2u, 6, 0, 0x10000, 327680);
                    break;
                  case 5:
                    v21 = rand() % 4;
                    v22 = dword_4A6898[37 * dword_503518];
                    v21 += 2;
                    v23 = &dword_4A6898[37 * dword_503518];
                    *(_DWORD *)(v1 + 28) = v21;
                    v24 = (v21 << 10) + v22;
                    *v23 = v24;
                    if ( v24 > 102400 )
                      *v23 = 102400;
                    break;
                  case 6:
                    if ( dword_503518 == dword_4A9EA8 )
                      dword_4A7AAC = 1;
                    break;
                  case 7:
                    dword_4A68D0[37 * dword_503518] += 10;
                    break;
                  case 8:
                    v25 = dword_4A6898[37 * dword_503518];
                    v18 = &dword_4A6898[37 * dword_503518];
                    *(_DWORD *)(v1 + 28) = 20;
                    v19 = v25 + 20480;
LABEL_32:
                    *v18 = v19;
                    if ( v19 > 102400 )
                      *v18 = 102400;
                    break;
                  default:
                    break;
                }
                v26 = *(_DWORD *)(v1 + 8);
                *(_DWORD *)(v1 + 20) = 140;
                *(_DWORD *)(v1 + 24) = v26;
                *(_DWORD *)(v1 + 8) = 0;
                dword_456AC4 = 240;
                v27 = rand();
                v28 = v27;
                v3 = v27 / 150;
                v0 = dword_503518;
                *(_DWORD *)(v1 + 16) = 0;
                *(_DWORD *)(v1 + 12) = (unsigned __int64)(v28 % 150) + 200;
                goto LABEL_35;
              }
              v32 = v10;
              v31 = 18;
              v30 = 10;
            }
            loadMenuSoundEffect(v30, v31, 0, v32, 135168);
            goto LABEL_18;
          }
        }
      }
    }
LABEL_35:
    v1 += 288;
  }
  while ( v1 < (signed int)&unk_502DA0 );
  return v3;
}


//----- (00410FA0) --------------------------------------------------------
int sub_410FA0()
{
  int result; // eax@1
  int v1; // ebx@3
  int v2; // edi@3
  int v3; // esi@3
  int v4; // eax@3
  int v5; // ecx@3
  int v6; // ecx@6
  int *v7; // esi@14
  unsigned int v8; // esi@14
  int v9; // eax@14
  int v10; // edi@14
  bool v11; // zf@14
  int v12; // edi@16
  int v13; // ebx@16
  unsigned __int64 v14; // rax@16
  signed int v15; // eax@16
  int v16; // eax@18
  int v17; // [sp-Ch] [bp-24h]@15
  signed int v18; // [sp+10h] [bp-8h]@1

  result = (int)&unk_479AB8;
  v18 = (signed int)&unk_479AB8;
  do
  {
    if ( !*(_DWORD *)result )
    {
      v1 = dword_503518;
      v2 = 216 * dword_503518;
      v3 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_503518] - *(_DWORD *)(v18 - 24) - 8;
      v4 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_503518] - *(_DWORD *)(v18 - 20) - 8;
      v5 = v3;
      if ( v3 < 0 )
        v5 = -v3;
      if ( v5 < 20 )
      {
        v6 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_503518] - *(_DWORD *)(v18 - 20) - 8;
        if ( v4 < 0 )
          v6 = -v4;
        if ( v6 < 20 && *((byte *)dword_5034FC + 40 * v4 + dword_4A7D10[v2] + v3 + 820) > 3u )
        {
          *(_DWORD *)v18 = 1;
          *(_DWORD *)(v18 - 4) = 0;
          if ( !dword_4A7E0C[v2] )
            dword_4A6898[37 * v1] += 3 * (dword_4A689C[37 * v1] - 1024);
          if ( dword_4A6898[37 * v1] < 0 )
            dword_4A6898[37 * v1] = 0;
          *(float *)&dword_4A7DB4[216 * v1] = (double)(rand() % 7 - 3) + *(float *)&dword_4A7DB4[216 * v1];
          v7 = &dword_4A7DB8[216 * dword_503518];
          *(float *)v7 = (double)(rand() % 7 - 3) + *(float *)v7;
          v8 = 864 * dword_503518;
          v9 = rand();
          v10 = dword_4A9EA8;
          v11 = dword_503518 == dword_4A9EA8;
          *(float *)(v8 + 4881924) = (double)(v9 % 10 - 5);
          *(float *)(v8 + 4881840) = *(float *)(v8 + 4881840) - *(float *)(v8 + 4881840) * 1.1;
          dword_4A8054[v8 / 4] = 45;
          if ( v11 )
          {
            v17 = 36864;
          }
          else
          {
            v12 = 864 * v10;
            v13 = (unsigned __int64)(*(float *)(v8 + 4881844) - *(float *)(v12 + 4881844));
            v14 = (unsigned __int64)(*(float *)(v8 + 4881848) - *(float *)(v12 + 4881848));
            v15 = 0x10000 - 75 * (unsigned __int64)sqrt((double)(v13 * v13 + (signed int)v14 * (signed int)v14));
            if ( v15 <= 4096 )
              goto LABEL_19;
            v17 = v15;
          }
          v16 = rand();
          loadMenuSoundEffect(3u, v16 % 3 + 7, 0, v17, 327680);
        }
      }
    }
LABEL_19:
    result = v18 + 32;
    v18 += 32;
  }
  while ( v18 < (signed int)&unk_479D38 );
  return result;
}


//----- (004111F0) --------------------------------------------------------
char sub_4111F0()
{
  signed int v0; // esi@1
  int v1; // eax@4
  signed int v2; // eax@5
  int v3; // eax@9
  int v4; // edi@13
  double v5; // st7@13
  int v6; // ebp@14
  int v7; // ebx@14
  bool v8; // zf@14
  bool v9; // sf@14
  unsigned __int8 v10; // of@14
  bool v11; // zf@21
  bool v12; // sf@21
  unsigned __int8 v13; // of@21
  int v14; // ebp@28
  int v15; // ebx@28
  bool v16; // zf@28
  bool v17; // sf@28
  unsigned __int8 v18; // of@28
  bool v19; // zf@35
  bool v20; // sf@35
  unsigned __int8 v21; // of@35
  signed int v22; // eax@43
  signed int v23; // esi@46
  signed int v24; // edx@47
  int v25; // eax@47
  int v26; // edi@53
  int v27; // ecx@53
  int v28; // eax@53
  int v29; // edi@58
  char *v31; // [sp-8h] [bp-18h]@60
  int v32; // [sp-4h] [bp-14h]@58

  v0 = (signed int)&unk_479AA0;
  do
  {
    if ( *(_DWORD *)(v0 + 24) )
    {
      if ( waitWithDelay() >= (unsigned int)(*(_DWORD *)(v0 + 28) + 5) )
      {
        v22 = *(_DWORD *)(v0 + 20);
        if ( v22 < 7 )
        {
          *(_DWORD *)(v0 + 20) = v22 + 1;
          *(_DWORD *)(v0 + 28) = waitWithDelay();
        }
      }
    }
    else
    {
      if ( waitWithDelay() >= (unsigned int)(*(_DWORD *)(v0 + 28) + 5) )
      {
        v1 = *(_DWORD *)(v0 + 12);
        if ( v1 )
        {
          if ( v1 == 1 )
          {
            v3 = *(_DWORD *)(v0 + 20);
            if ( v3 <= 0 )
              *(_DWORD *)(v0 + 12) = 0;
            else
              *(_DWORD *)(v0 + 20) = v3 - 1;
          }
        }
        else
        {
          v2 = *(_DWORD *)(v0 + 20);
          if ( v2 >= 2 )
            *(_DWORD *)(v0 + 12) = 1;
          else
            *(_DWORD *)(v0 + 20) = v2 + 1;
        }
        *(_DWORD *)(v0 + 28) = waitWithDelay();
      }
      v4 = 864 * dword_4A9EA8;
      v5 = *(float *)&dword_4A7DB4[216 * dword_4A9EA8];
      if ( dword_456AA8 )
      {
        v14 = *(_DWORD *)v0;
        v15 = (unsigned __int64)v5;
        v18 = __OFSUB__(v15, *(_DWORD *)v0);
        v16 = v15 == *(_DWORD *)v0;
        v17 = v15 - *(_DWORD *)v0 < 0;
        if ( v15 < *(_DWORD *)v0 )
        {
          if ( (signed int)(unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_4A9EA8] < *(_DWORD *)(v0 + 4) )
            *(_DWORD *)(v0 + 16) = 0;
          v18 = __OFSUB__(v15, v14);
          v16 = v15 == v14;
          v17 = v15 - v14 < 0;
        }
        if ( !((unsigned __int8)(v17 ^ v18) | v16)
          && (signed int)(unsigned __int64)*(float *)(v4 + 4881848) < *(_DWORD *)(v0 + 4) )
          *(_DWORD *)(v0 + 16) = 1;
        v21 = __OFSUB__(v15, v14);
        v19 = v15 == v14;
        v20 = v15 - v14 < 0;
        if ( v15 < v14 )
        {
          if ( (signed int)(unsigned __int64)*(float *)(v4 + 4881848) > *(_DWORD *)(v0 + 4) )
            *(_DWORD *)(v0 + 16) = 3;
          v21 = __OFSUB__(v15, v14);
          v19 = v15 == v14;
          v20 = v15 - v14 < 0;
        }
        if ( !((unsigned __int8)(v20 ^ v21) | v19)
          && (signed int)(unsigned __int64)*(float *)(v4 + 4881848) > *(_DWORD *)(v0 + 4) )
          *(_DWORD *)(v0 + 16) = 2;
      }
      else
      {
        v6 = *(_DWORD *)v0;
        v7 = (unsigned __int64)v5;
        v10 = __OFSUB__(v7, *(_DWORD *)v0);
        v8 = v7 == *(_DWORD *)v0;
        v9 = v7 - *(_DWORD *)v0 < 0;
        if ( v7 < *(_DWORD *)v0 )
        {
          if ( (signed int)(unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_4A9EA8] < *(_DWORD *)(v0 + 4) )
            *(_DWORD *)(v0 + 16) = 2;
          v10 = __OFSUB__(v7, v6);
          v8 = v7 == v6;
          v9 = v7 - v6 < 0;
        }
        if ( !((unsigned __int8)(v9 ^ v10) | v8)
          && (signed int)(unsigned __int64)*(float *)(v4 + 4881848) < *(_DWORD *)(v0 + 4) )
          *(_DWORD *)(v0 + 16) = 3;
        v13 = __OFSUB__(v7, v6);
        v11 = v7 == v6;
        v12 = v7 - v6 < 0;
        if ( v7 < v6 )
        {
          if ( (signed int)(unsigned __int64)*(float *)(v4 + 4881848) > *(_DWORD *)(v0 + 4) )
            *(_DWORD *)(v0 + 16) = 1;
          v13 = __OFSUB__(v7, v6);
          v11 = v7 == v6;
          v12 = v7 - v6 < 0;
        }
        if ( !((unsigned __int8)(v12 ^ v13) | v11)
          && (signed int)(unsigned __int64)*(float *)(v4 + 4881848) > *(_DWORD *)(v0 + 4) )
          *(_DWORD *)(v0 + 16) = 0;
      }
    }
    v0 += 32;
  }
  while ( v0 < (signed int)&dword_479D20 );
  v23 = (signed int)&unk_479AA4;
  do
  {
    v24 = *(_DWORD *)(v23 - 4);
    v25 = *(_DWORD *)v23;
    if ( v24 > dword_456ABC - 16
      && v24 < dword_456ABC + 320
      && v25 > dword_456AC0 - 16
      && v25 < dword_456AC0 + 200
      && v24
      && v25 )
    {
      v26 = 0;
      v27 = dword_456AA0 + v24 - dword_456ABC;
      v28 = v25 - dword_456AC0;
      if ( v28 >= 0 )
      {
        if ( v28 > 183 )
        {
          v29 = 200 - v28;
          v28 = 200 - (200 - v28);
          v32 = v29;
          if ( !*(_DWORD *)(v23 + 20) )
          {
            LOBYTE(v25) = sub_43AF30(
                            dword_464F14 + (v28 << 9) + v27 + 96,
                            (int)((char *)pedestrBpk
                                + 256 * (*(_DWORD *)(v23 + 16) + 3 * (*(_DWORD *)(v23 + 12) + 4 * *(_DWORD *)(v23 + 4)))),
                            v29);
            goto LABEL_63;
          }
          v31 = (char *)*(&splat3Bpk + v24 % 2) + 256 * *(_DWORD *)(v23 + 16);
          goto LABEL_62;
        }
      }
      else
      {
        v26 = -v28;
        v28 = 0;
      }
      if ( !*(_DWORD *)(v23 + 20) )
      {
        LOBYTE(v25) = sub_43AF30(
                        dword_464F14 + (v28 << 9) + v27 + 96,
                        (int)((char *)pedestrBpk
                            + 16
                            * (v26
                             + 16 * (*(_DWORD *)(v23 + 16) + 3 * (*(_DWORD *)(v23 + 12) + 4 * *(_DWORD *)(v23 + 4))))),
                        16 - v26);
        goto LABEL_63;
      }
      v32 = 16 - v26;
      v31 = (char *)*(&splat3Bpk + v24 % 2) + 16 * (v26 + 16 * *(_DWORD *)(v23 + 16));
LABEL_62:
      LOBYTE(v25) = sub_43AF30(dword_464F14 + (v28 << 9) + v27 + 96, (int)v31, v32);
    }
LABEL_63:
    v23 += 32;
  }
  while ( v23 < (signed int)&unk_479D24 );
  return v25;
}


//----- (00411530) --------------------------------------------------------
int sub_411530()
{
  int v0; // edi@1
  int result; // eax@1
  int v2; // esi@1
  int v3; // ebx@2
  int v4; // ebp@2
  int *v5; // ecx@2
  int v6; // eax@3

  v0 = 788 * dword_4AA928;
  result = dword_4B4320[788 * dword_4AA928];
  v2 = 0;
  dword_481BE8 = 0;
  if ( result > 0 )
  {
    v3 = dword_445014;
    v4 = dword_44501C;
    v5 = &dword_4B4580[v0];
    do
    {
      v6 = (v5[483] << 8) / *v5;
      ++v5;
      v5[482] = v3 + ((v6 + 128) >> 8);
      v5[557] = v4 + (((v5[557] << 8) / *(v5 - 1) + 128) >> 8);
      result = dword_4B4320[v0];
      ++v2;
    }
    while ( v2 < result );
    dword_481BE8 = v2;
  }
  return result;
}


//----- (004115C0) --------------------------------------------------------
int __cdecl sub_4115C0(int a1, int a2)
{
  int v2; // ecx@1
  int v3; // ebx@1
  int v4; // edx@2
  int v5; // edi@2
  int v6; // esi@2
  int *v7; // eax@3
  int v8; // ebp@4
  int result; // eax@5
  int v10; // ebp@6
  int v11; // ecx@8
  int v12; // ebx@8
  int v13; // ebp@8
  int v14; // ebx@8

  v2 = a1;
  v3 = a2;
  while ( 1 )
  {
    v4 = dword_4B4F68[788 * ((v2 + v3) / 2)];
    v5 = v2;
    v6 = v3;
    do
    {
      v7 = &dword_4B4F68[788 * v5];
      if ( dword_4B4F68[788 * v5] < v4 )
      {
        do
        {
          v8 = v7[788];
          v7 += 788;
          ++v5;
        }
        while ( v8 < v4 );
      }
      result = (int)&dword_4B4F68[788 * v6];
      if ( v4 < dword_4B4F68[788 * v6] )
      {
        do
        {
          v10 = *(_DWORD *)(result - 3152);
          result -= 3152;
          --v6;
        }
        while ( v4 < v10 );
      }
      if ( v5 > v6 )
        break;
      v11 = 788 * v6;
      result = 3152 * v5;
      v12 = dword_4B4F68[788 * v5];
      *(int *)((char *)dword_4B4F68 + result) = dword_4B4F68[788 * v6];
      v13 = dword_4B4F6C[788 * v6];
      dword_4B4F68[v11] = v12;
      v14 = dword_4B4F6C[788 * v5++];
      --v6;
      *(int *)((char *)dword_4B4F6C + result) = v13;
      dword_4B4F6C[v11] = v14;
      v2 = a1;
      v3 = a2;
    }
    while ( v5 < v6 );
    if ( v2 < v6 )
      result = sub_4115C0(v2, v6);
    if ( v5 >= v3 )
      break;
    v2 = v5;
    a1 = v5;
  }
  return result;
}
// 4B4F68: using guessed type int dword_4B4F68[];
// 4B4F6C: using guessed type int dword_4B4F6C[];

//----- (004116D0) --------------------------------------------------------
void sub_4116D0()
{
  int v0; // ebx@1
  int v1; // edi@2
  int v2; // esi@2
  bool v3; // zf@2
  int v4; // eax@3
  int v5; // ecx@3
  int *v6; // eax@4
  int v7; // eax@7
  int v8; // edi@10
  int v9; // esi@10
  int v10; // eax@10
  int v11; // ecx@10
  int v12; // edx@10
  int v13; // ecx@10
  int v14; // edx@10
  int v15; // ebp@10
  int v16; // edx@10
  int v17; // eax@10
  int v18; // ebx@10
  int v19; // ebp@10
  int v20; // ecx@15
  int v21; // eax@20
  int v22; // eax@21
  unsigned int v23; // eax@23
  int v24; // ecx@23
  int v25; // edx@23
  unsigned int v26; // eax@23
  bool v27; // sf@23
  int v28; // edx@23
  int v29; // eax@23
  int v30; // eax@24
  int v31; // edx@26
  int v32; // esi@26
  unsigned int v33; // eax@26
  int v34; // ecx@26
  int v35; // eax@26
  unsigned int v36; // esi@26
  int v37; // ecx@26
  int v38; // eax@26
  int v39; // eax@27
  int v40; // ecx@38
  int v41; // esi@38
  int v42; // edi@38
  int v43; // eax@38
  int v44; // edx@39
  int v45; // ecx@40
  int v46; // edx@43
  int v47; // [sp+0h] [bp-4h]@23

  v0 = dword_479D20 - 1;
  dword_4A7A38 = dword_479D20 - 1;
  if ( dword_479D20 - 1 >= 0 )
  {
    while ( 1 )
    {
      v1 = dword_4B4F6C[788 * v0];
      v2 = 788 * dword_4B4F6C[788 * v0];
      v3 = dword_4B4F64[v2] == 1;
      dword_4AA928 = dword_4B4F6C[788 * v0];
      if ( !v3 )
      {
        v4 = dword_4B4320[v2];
        v5 = 0;
        dword_481BE8 = 0;
        if ( v4 > 0 )
        {
          v6 = &dword_4B4D0C[v2];
          do
          {
            *v6 = *(v6 - 633) + (dword_4B4D04[v2] << 8);
            v6[75] = *(v6 - 558) + (dword_4B4D08[v2] << 8);
            ++v5;
            ++v6;
          }
          while ( v5 < dword_4B4320[v2] );
          dword_481BE8 = v5;
        }
        sub_411530();
        v7 = dword_4B4324[v2];
        dword_481BE8 = 0;
        if ( v7 > 0 )
          break;
      }
LABEL_45:
      --v0;
      dword_4A7A38 = v0;
      if ( v0 < 0 )
        return;
    }
    while ( 1 )
    {
      v8 = 788 * v1;
      v9 = v8 + dword_481BE8;
      v10 = dword_4B46BC[v9];
      v11 = v8 + dword_4B484C[v9];
      v12 = dword_4B4D0C[v11];
      v13 = dword_4B4E38[v11];
      dword_50351C = v12;
      v14 = v8 + dword_4B49DC[v9];
      v15 = dword_4B4D0C[v14];
      v16 = dword_4B4E38[v14];
      v17 = v8 + v10;
      v18 = dword_4B4D0C[v17];
      dword_4A8A80 = v15;
      v19 = dword_4B4E38[v17];
      dword_4A7A4C = v13;
      dword_46ECE4 = v16;
      dword_50EF20 = v18;
      dword_4A6AD0 = v19;
      if ( (dword_50351C - v18) * (v16 - v19) - (dword_4A8A80 - v18) * (v13 - v19) <= 0
        && (abs(v18 - dword_445014) < dword_445014
         || abs(dword_50351C - dword_445014) < dword_445014
         || abs(dword_4A8A80 - dword_445014) < dword_445014) )
      {
        if ( abs(v19 - dword_44501C) < dword_44501C )
        {
          v20 = dword_46ECE4;
        }
        else
        {
          v20 = dword_46ECE4;
          if ( abs(dword_4A7A4C - dword_44501C) >= dword_44501C && abs(dword_46ECE4 - dword_44501C) >= dword_44501C )
            goto LABEL_36;
        }
        switch ( *(_DWORD *)&dword_4B4B6C[v9 * 4] )
        {
          case 0x80:
            v21 = dword_4B46BC[v9];
            if ( 75 * dword_4B4454[v8 + dword_4B46BC[v9]] >> (54
                                                            * ((unsigned __int16)(100
                                                                                - *(_DWORD *)&dword_4B4328[2 * (v8 + dword_4B46BC[v9])]) >> 8)
                                                            + 8) >= 0 )
              v22 = 75 * dword_4B4454[v8 + v21] >> (54
                                                  * ((unsigned __int16)(100 - *(_DWORD *)&dword_4B4328[2 * (v8 + v21)]) >> 8)
                                                  + 8);
            else
              v22 = -(75 * dword_4B4454[v8 + v21] >> (54 * ((unsigned __int16)(100 - dword_4B4328[2 * (v8 + v21)]) >> 8)
                                                    + 8));
            v47 = v22 & 7;
            v23 = 4 * (v8 + dword_4B484C[v9]);
            v24 = 100 - *(_DWORD *)&dword_4B4328[v23 / 2];
            v25 = 75 * dword_4B4454[v23 / 4] >> (54 * BYTE1(v24) + 8);
            v26 = 4 * (v8 + dword_4B484C[v9]);
            v27 = v25 < 0;
            v28 = *(_DWORD *)&dword_4B4328[v26 / 2];
            v29 = dword_4B4454[v26 / 4];
            if ( v27 )
              v30 = -(75 * v29 >> (54 * ((unsigned __int16)(100 - v28) >> 8) + 8));
            else
              v30 = 75 * v29 >> (54 * ((unsigned __int16)(100 - v28) >> 8) + 8);
            v31 = v30 & 7;
            v32 = dword_4B49DC[v9];
            v33 = 4 * (v8 + v32);
            v34 = 100 - *(_DWORD *)&dword_4B4328[v33 / 2];
            v35 = 75 * dword_4B4454[v33 / 4] >> (54 * BYTE1(v34) + 8);
            v36 = 4 * (v8 + v32);
            v37 = 54 * ((100 - *(_DWORD *)&dword_4B4328[v36 / 2]) >> 8) + 8;
            v27 = v35 < 0;
            v38 = dword_4B4454[v36 / 4];
            if ( v27 )
              v39 = -(75 * v38 >> v37);
            else
              v39 = 75 * v38 >> v37;
            sub_43D050(
              v18 + dword_456AA0,
              v19,
              v47 + 109,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              v31 + 109,
              dword_456AA0 + dword_4A8A80,
              dword_46ECE4,
              (v39 & 7) + 109);
            break;
          case 0x8A:
            sub_43D050(
              v18 + dword_456AA0,
              v19,
              dword_467020[75 * dword_4AA928 + dword_4B46BC[v9]] + 108,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              dword_467020[75 * dword_4AA928 + dword_4B484C[v9]] + 108,
              dword_456AA0 + dword_4A8A80,
              v20,
              dword_467020[75 * dword_4AA928 + dword_4B49DC[v9]] + 108);
            break;
          case 0x81:
            sub_43D530(
              v18 + dword_456AA0,
              v19,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              dword_456AA0 + dword_4A8A80,
              v20,
              (int)&unk_46ED00);
            break;
          case 0x82:
            sub_43D530(
              v18 + dword_456AA0,
              v19,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              dword_456AA0 + dword_4A8A80,
              v20,
              (int)&unk_4A7BC0);
            break;
          case 0x83:
            sub_43D530(
              v18 + dword_456AA0,
              v19,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              dword_456AA0 + dword_4A8A80,
              v20,
              (int)&unk_4AA400);
            break;
          default:
            sub_43CD50(
              v18 + dword_456AA0,
              v19,
              dword_456AA0 + dword_50351C,
              dword_4A7A4C,
              dword_456AA0 + dword_4A8A80,
              v20,
              dword_4B4B6C[v9 * 4]);
            break;
        }
      }
LABEL_36:
      if ( dword_44502C )
      {
        dword_4A6AFC = dword_46F220[dword_481BE8 + 100 * dword_4AA928];
        if ( dword_4A6AFC != -1 )
        {
          v40 = 11 * dword_4A6AFC;
          v41 = dword_445014;
          v42 = dword_44501C;
          dword_50A198[v40] = dword_50A18C[v40] - (dword_456ABC << 8) - (dword_445014 << 8);
          dword_50A19C[v40] = dword_50A190[v40] - (dword_456AC0 << 8) - (v42 << 8);
          dword_50A198[v40] = v41 + (((dword_50A198[v40] << 8) / dword_50A194[v40] + 128) >> 8);
          dword_50A19C[v40] = v42 + (((dword_50A19C[v40] << 8) / dword_50A194[v40] + 128) >> 8);
          v43 = (int)&dword_50A180[v40];
          if ( dword_50A198[v40] > -dword_50A180[v40] )
          {
            v44 = dword_50A19C[v40];
            if ( v44 > -dword_50A184[v40] )
            {
              v45 = dword_50A198[v40];
              if ( v45 < dword_445010 && v44 < dword_445018 )
                sub_43B2F0(dword_456AA0 + v45, v44, v43);
            }
          }
        }
      }
      v46 = dword_4B4324[788 * dword_4AA928];
      ++dword_481BE8;
      if ( dword_481BE8 >= v46 )
      {
        v0 = dword_4A7A38;
        goto LABEL_45;
      }
      v1 = dword_4AA928;
    }
  }
}


//----- (00411D10) --------------------------------------------------------
int sub_411D10()
{
  int result; // eax@1
  int v1; // edx@1
  unsigned int v2; // esi@4
  int v3; // eax@4
  char *v4; // esi@8
  double v5; // st7@8
  int v6; // eax@8
  signed int v7; // ebx@11
  double v8; // st7@11
  int *v9; // edi@11
  int *v10; // ebp@11
  double v11; // st6@11
  int v12; // ST34_4@12
  float v13; // et1@12
  double v15; // st7@12
  char v16; // c0@12
  int v17; // esi@14
  int v18; // ST34_4@14
  float v19; // et1@14
  double v21; // st7@14
  char v22; // c0@14
  int v23; // eax@16
  int v24; // ST34_4@18
  int v25; // et1@18
  double v27; // st7@18
  char v28; // c0@18
  int v29; // edi@20
  int v30; // ST34_4@20
  int v31; // et1@20
  double v33; // st7@20
  char v34; // c0@20
  int v35; // eax@22
  int v36; // ST34_4@24
  int v37; // et1@24
  double v39; // st7@24
  char v40; // c0@24
  int v41; // edi@26
  int v42; // ST34_4@26
  int v43; // et1@26
  double v45; // st7@26
  char v46; // c0@26
  int v47; // eax@28
  int v48; // ST34_4@30
  int v49; // et1@30
  double v51; // st7@30
  char v52; // c0@30
  int v53; // edi@32
  int v54; // ST34_4@32
  int v55; // et1@32
  double v57; // st7@32
  char v58; // c0@32
  int v59; // eax@34
  unsigned int v60; // eax@36
  int v61; // et1@38
  double v63; // st7@38
  unsigned __int8 v64; // c0@38
  unsigned __int8 v65; // c2@38
  int v66; // ebx@46
  int v67; // et1@49
  double v69; // st7@49
  unsigned __int8 v70; // c0@49
  unsigned __int8 v71; // c2@49
  int v72; // et1@52
  double v74; // st7@52
  unsigned __int8 v75; // c0@52
  unsigned __int8 v76; // c2@52
  signed int v77; // ebp@63
  double v78; // st7@63
  int v79; // eax@63
  double v80; // st6@63
  signed int v81; // ebx@64
  signed int v82; // ebp@64
  int *v83; // edi@64
  int v84; // ST38_4@68
  int v85; // et1@68
  double v87; // st7@68
  char v88; // c0@68
  int v89; // ST38_4@70
  int v90; // et1@70
  double v92; // st7@70
  char v93; // c0@70
  int v94; // ST38_4@74
  int v95; // et1@74
  double v97; // st7@74
  char v98; // c0@74
  int v99; // ST38_4@76
  int v100; // et1@76
  double v102; // st7@76
  char v103; // c0@76
  bool v104; // sf@79
  unsigned __int8 v105; // of@79
  int v106; // ebx@82
  int v107; // ST38_4@86
  int v108; // et1@86
  double v110; // st7@86
  char v111; // c0@86
  int v112; // edi@88
  int v113; // ST38_4@88
  int v114; // et1@88
  double v116; // st7@88
  char v117; // c0@88
  int v118; // eax@90
  int v119; // ST38_4@92
  int v120; // et1@92
  double v122; // st7@92
  char v123; // c0@92
  int v124; // edi@94
  int v125; // ST38_4@94
  int v126; // et1@94
  double v128; // st7@94
  char v129; // c0@94
  int v130; // eax@96
  int v131; // ST38_4@98
  int v132; // et1@98
  double v134; // st7@98
  char v135; // c0@98
  int v136; // edi@100
  int v137; // ST38_4@100
  int v138; // et1@100
  double v140; // st7@100
  char v141; // c0@100
  int v142; // eax@102
  int v143; // ST38_4@104
  int v144; // et1@104
  double v146; // st7@104
  char v147; // c0@104
  int v148; // edi@106
  int v149; // ST38_4@106
  int v150; // et1@106
  double v152; // st7@106
  char v153; // c0@106
  int v154; // eax@108
  double v155; // st7@110
  int v156; // ecx@111
  int v157; // eax@111
  signed int v158; // [sp+10h] [bp-30h]@63
  float v159; // [sp+14h] [bp-2Ch]@11
  float v160; // [sp+14h] [bp-2Ch]@63
  float v161; // [sp+18h] [bp-28h]@11
  float v162; // [sp+18h] [bp-28h]@63
  float v163; // [sp+1Ch] [bp-24h]@11
  float v164; // [sp+1Ch] [bp-24h]@63
  float v165; // [sp+20h] [bp-20h]@11
  float v166; // [sp+20h] [bp-20h]@63
  float v167; // [sp+24h] [bp-1Ch]@11
  float v168; // [sp+24h] [bp-1Ch]@63
  float v169; // [sp+28h] [bp-18h]@11
  float v170; // [sp+28h] [bp-18h]@63
  float v171; // [sp+2Ch] [bp-14h]@11
  float v172; // [sp+2Ch] [bp-14h]@63
  float i; // [sp+30h] [bp-10h]@11
  float v174; // [sp+30h] [bp-10h]@40
  float v175; // [sp+30h] [bp-10h]@63
  int v176; // [sp+34h] [bp-Ch]@64

  result = dword_508D24;
  v1 = 0;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    while ( 1 )
    {
      v2 = 864 * v1;
      v3 = dword_4A6898[37 * v1];
      *(float *)(v2 + 4881936) = sin((flt_4A7DAC[216 * v1] + 180.0 - 22.0) * 0.01745329251994444) * 12.0
                               + *(float *)&dword_4A7DB4[216 * v1];
      *(float *)(v2 + 4881940) = cos((flt_4A7DAC[216 * v1] + 180.0 - 22.0) * 0.01745329251994444) * 9.999995999999999
                               + *(float *)&dword_4A7DB8[216 * v1];
      *(float *)(v2 + 4881952) = sin((flt_4A7DAC[216 * v1] + 202.0) * 0.01745329251994444) * 12.0
                               + *(float *)&dword_4A7DB4[216 * v1];
      *(float *)(v2 + 4881956) = cos((flt_4A7DAC[216 * v1] + 202.0) * 0.01745329251994444) * 9.999995999999999
                               + *(float *)&dword_4A7DB8[216 * v1];
      *(float *)(v2 + 4881968) = sin((flt_4A7DAC[216 * v1] - 22.0) * 0.01745329251994444) * 12.0
                               + *(float *)&dword_4A7DB4[216 * v1];
      *(float *)(v2 + 4881972) = cos((flt_4A7DAC[216 * v1] - 22.0) * 0.01745329251994444) * 9.999995999999999
                               + *(float *)&dword_4A7DB8[216 * v1];
      *(float *)(v2 + 4881984) = sin((flt_4A7DAC[216 * v1] + 22.0) * 0.01745329251994444) * 12.0
                               + *(float *)&dword_4A7DB4[216 * v1];
      *(float *)(v2 + 4881988) = cos((flt_4A7DAC[216 * v1] + 22.0) * 0.01745329251994444) * 9.999995999999999
                               + *(float *)&dword_4A7DB8[216 * v1];
      if ( v3 > 0
        && *(float *)&dword_4A7DB0[216 * v1] > 0.0
        && *(float *)&dword_4A6884[37 * v1] * 0.55 > *(float *)&dword_4A7DB0[216 * v1]
        && dword_4A7D20[4 * (dword_4A7A20 + 216 * v1)] & 1 )
      {
        v4 = (char *)&unk_4A7E04 + 864 * v1;
        v5 = (double)rand() * 0.0000152587890625 + *(float *)v4;
        *(float *)v4 = v5;
        v2 = 864 * dword_503518;
        v6 = rand();
        v1 = dword_503518;
        *(float *)(v2 + 4881924) = v5 - (double)v6 * 0.0000152587890625;
      }
      if ( dword_4A8054[v2 / 4] > 0 && dword_4A68AC[37 * dword_4A9EA8] )
      {
        --dword_4A8054[v2 / 4];
        v7 = (unsigned __int64)*(float *)(v2 + 4881840);
        v8 = (double)v7;
        v9 = &dword_4A7E18[v2 / 4];
        v10 = &dword_4A7E1C[v2 / 4];
        v11 = *(float *)(v2 + 4881936) - *(float *)&dword_4A7E18[v2 / 4];
        dword_481BE8 = 0;
        v159 = v11 / v8;
        v161 = (*(float *)(v2 + 4881940) - *(float *)&dword_4A7E1C[v2 / 4]) / v8;
        v163 = (*(float *)(v2 + 4881952) - *(float *)(v2 + 4881960)) / v8;
        v165 = (*(float *)(v2 + 4881956) - *(float *)(v2 + 4881964)) / v8;
        v167 = (*(float *)(v2 + 4881968) - *(float *)(v2 + 4881976)) / v8;
        v169 = (*(float *)(v2 + 4881972) - *(float *)(v2 + 4881980)) / v8;
        v171 = (*(float *)(v2 + 4881984) - *(float *)(v2 + 4881992)) / v8;
        for ( i = (*(float *)(v2 + 4881988) - *(float *)(v2 + 4881996)) / v8; dword_481BE8 < v7; ++dword_481BE8 )
        {
          v12 = (unsigned __int64)*(float *)v9;
          v13 = *(float *)v9;
          v15 = *(float *)v9;
          if ( !v16 )
            v15 = v15 + 1.0;
          v17 = (unsigned __int64)v15;
          v18 = (unsigned __int64)*(float *)v10;
          v19 = *(float *)v10;
          v21 = *(float *)v10;
          if ( !v22 )
            v21 = v21 + 1.0;
          v23 = v17 + dword_464F40 * (unsigned __int64)v21;
          if ( (*((byte *)dword_50A16C + v23) & 0xF) == 15 )
          {
            *((byte *)dword_5034F8 + v23) = byte_479D40[*((byte *)dword_5034F8 + v23)];
            *((byte *)dword_5034F8 + v23 + 1) = byte_479D40[*((byte *)dword_5034F8 + v23 + 1)];
            *((byte *)dword_5034F8 + dword_464F40 + v23) = byte_479D40[*((byte *)dword_5034F8 + dword_464F40 + v23)];
            *((byte *)dword_5034F8 + dword_464F40 + v23 + 1) = byte_479D40[*((byte *)dword_5034F8
                                                                            + dword_464F40
                                                                            + v23
                                                                            + 1)];
          }
          v24 = (unsigned __int64)*(float *)&dword_4A7E28[216 * dword_503518];
          v25 = dword_4A7E28[216 * dword_503518];
          v27 = *(float *)&dword_4A7E28[216 * dword_503518];
          if ( !v28 )
            v27 = v27 + 1.0;
          v29 = (unsigned __int64)v27;
          v30 = (unsigned __int64)*(float *)&dword_4A7E2C[216 * dword_503518];
          v31 = dword_4A7E2C[216 * dword_503518];
          v33 = *(float *)&dword_4A7E2C[216 * dword_503518];
          if ( !v34 )
            v33 = v33 + 1.0;
          v35 = v29 + dword_464F40 * (unsigned __int64)v33;
          if ( (*((byte *)dword_50A16C + v35) & 0xF) == 15 )
          {
            *((byte *)dword_5034F8 + v35) = byte_479D40[*((byte *)dword_5034F8 + v35)];
            *((byte *)dword_5034F8 + v35 + 1) = byte_479D40[*((byte *)dword_5034F8 + v35 + 1)];
            *((byte *)dword_5034F8 + dword_464F40 + v35) = byte_479D40[*((byte *)dword_5034F8 + dword_464F40 + v35)];
            *((byte *)dword_5034F8 + dword_464F40 + v35 + 1) = byte_479D40[*((byte *)dword_5034F8
                                                                            + dword_464F40
                                                                            + v35
                                                                            + 1)];
          }
          v36 = (unsigned __int64)*(float *)&dword_4A7E38[216 * dword_503518];
          v37 = dword_4A7E38[216 * dword_503518];
          v39 = *(float *)&dword_4A7E38[216 * dword_503518];
          if ( !v40 )
            v39 = v39 + 1.0;
          v41 = (unsigned __int64)v39;
          v42 = (unsigned __int64)*(float *)&dword_4A7E3C[216 * dword_503518];
          v43 = dword_4A7E3C[216 * dword_503518];
          v45 = *(float *)&dword_4A7E3C[216 * dword_503518];
          if ( !v46 )
            v45 = v45 + 1.0;
          v47 = v41 + dword_464F40 * (unsigned __int64)v45;
          if ( (*((byte *)dword_50A16C + v47) & 0xF) == 15 )
          {
            *((byte *)dword_5034F8 + v47) = byte_479D40[*((byte *)dword_5034F8 + v47)];
            *((byte *)dword_5034F8 + v47 + 1) = byte_479D40[*((byte *)dword_5034F8 + v47 + 1)];
            *((byte *)dword_5034F8 + dword_464F40 + v47) = byte_479D40[*((byte *)dword_5034F8 + dword_464F40 + v47)];
            *((byte *)dword_5034F8 + dword_464F40 + v47 + 1) = byte_479D40[*((byte *)dword_5034F8
                                                                            + dword_464F40
                                                                            + v47
                                                                            + 1)];
          }
          v48 = (unsigned __int64)*(float *)&dword_4A7E48[216 * dword_503518];
          v49 = dword_4A7E48[216 * dword_503518];
          v51 = *(float *)&dword_4A7E48[216 * dword_503518];
          if ( !v52 )
            v51 = v51 + 1.0;
          v53 = (unsigned __int64)v51;
          v54 = (unsigned __int64)*(float *)&dword_4A7E4C[216 * dword_503518];
          v55 = dword_4A7E4C[216 * dword_503518];
          v57 = *(float *)&dword_4A7E4C[216 * dword_503518];
          if ( !v58 )
            v57 = v57 + 1.0;
          v59 = v53 + dword_464F40 * (unsigned __int64)v57;
          if ( (*((byte *)dword_50A16C + v59) & 0xF) == 15 )
          {
            *((byte *)dword_5034F8 + v59) = byte_479D40[*((byte *)dword_5034F8 + v59)];
            *((byte *)dword_5034F8 + v59 + 1) = byte_479D40[*((byte *)dword_5034F8 + v59 + 1)];
            *((byte *)dword_5034F8 + dword_464F40 + v59) = byte_479D40[*((byte *)dword_5034F8 + dword_464F40 + v59)];
            *((byte *)dword_5034F8 + dword_464F40 + v59 + 1) = byte_479D40[*((byte *)dword_5034F8
                                                                            + dword_464F40
                                                                            + v59
                                                                            + 1)];
          }
          v60 = 864 * dword_503518;
          *(float *)(v60 + 4881944) = v159 + *(float *)&dword_4A7E18[216 * dword_503518];
          v9 = &dword_4A7E18[v60 / 4];
          *(float *)(v60 + 4881948) = v161 + *(float *)(v60 + 4881948);
          v10 = &dword_4A7E1C[v60 / 4];
          *(float *)(v60 + 4881960) = v163 + *(float *)(v60 + 4881960);
          *(float *)(v60 + 4881964) = v165 + *(float *)(v60 + 4881964);
          *(float *)(v60 + 4881976) = v167 + *(float *)(v60 + 4881976);
          *(float *)(v60 + 4881980) = v169 + *(float *)(v60 + 4881980);
          *(float *)(v60 + 4881992) = v171 + *(float *)(v60 + 4881992);
          *(float *)(v60 + 4881996) = i + *(float *)(v60 + 4881996);
        }
      }
      else
      {
        v61 = *(_DWORD *)(v2 + 4881852);
        v63 = *(float *)(v2 + 4881852);
        if ( v64 | v65 )
          v63 = -v63;
        v174 = (double)(dword_4A6880[37 * v1] + 13);
        if ( v63 > v174
          || *(float *)(v2 + 4881840) > 0.0 && dword_4A7D20[4 * (dword_4A7A20 + 216 * v1)] & 2
          || *(float *)(v2 + 4881840) > 0.0
          && *(float *)&dword_4A6884[37 * v1] * 0.55 > *(float *)(v2 + 4881840)
          && dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)] & 1 )
        {
          v66 = *(_DWORD *)&dword_4A7D20[4 * (dword_4A7A20 + 216 * dword_503518)];
          if ( !(v66 & 2) || !(v66 & 0x40) )
          {
            if ( dword_503518 == dword_4A9EA8 )
            {
              v67 = *(_DWORD *)(v2 + 4881852);
              v69 = *(float *)(v2 + 4881852);
              if ( v70 | v71 )
                v69 = -v69;
              if ( v69 > v174 )
              {
                v72 = *(_DWORD *)(v2 + 4881852);
                v74 = *(float *)(v2 + 4881852);
                if ( v75 | v76 )
                  v74 = -v74;
                dword_4AA92C = (unsigned __int64)(v74 * 2048.0);
              }
              if ( dword_4AA92C > 0x10000 )
                dword_4AA92C = 0x10000;
              if ( *(float *)(v2 + 4881840) > 0.0 && v66 & 2
                || *(float *)(v2 + 4881840) > 0.0
                && *(float *)&dword_4A6884[37 * v1] * 0.85 > *(float *)(v2 + 4881840)
                && v66 & 1 )
                dword_4AA92C = 0x10000;
            }
            v77 = (unsigned __int64)*(float *)(v2 + 4881840);
            v158 = v77;
            v78 = (double)v77;
            v79 = dword_4A804C[v2 / 4] + 1;
            v160 = (*(float *)(v2 + 4881936) - *(float *)(v2 + 4881944)) / v78;
            v162 = (*(float *)(v2 + 4881940) - *(float *)(v2 + 4881948)) / v78;
            v164 = (*(float *)(v2 + 4881952) - *(float *)(v2 + 4881960)) / v78;
            v166 = (*(float *)(v2 + 4881956) - *(float *)(v2 + 4881964)) / v78;
            v168 = (*(float *)(v2 + 4881968) - *(float *)(v2 + 4881976)) / v78;
            v170 = (*(float *)(v2 + 4881972) - *(float *)(v2 + 4881980)) / v78;
            v172 = (*(float *)(v2 + 4881984) - *(float *)(v2 + 4881992)) / v78;
            v80 = *(float *)(v2 + 4881988) - *(float *)(v2 + 4881996);
            dword_4A804C[v2 / 4] = v79;
            v175 = v80 / v78;
            if ( v79 == 6 )
            {
              v81 = 0;
              v176 = 0;
              v82 = 0;
              v83 = &dword_4A7EE4[v2 / 4];
              do
              {
                if ( v82 || v81 )
                  break;
                if ( !*v83 )
                {
                  *v83 = 1;
                  v84 = (unsigned __int64)*(float *)(v2 + 4881968);
                  v85 = *(_DWORD *)(v2 + 4881968);
                  v87 = *(float *)(v2 + 4881968);
                  if ( !v88 )
                    v87 = v87 + 1.0;
                  v83[30] = (unsigned __int64)v87;
                  v89 = (unsigned __int64)*(float *)(v2 + 4881972);
                  v90 = *(_DWORD *)(v2 + 4881972);
                  v92 = *(float *)(v2 + 4881972);
                  if ( !v93 )
                    v92 = v92 + 1.0;
                  v83[60] = (unsigned __int64)v92;
                  v82 = 1;
                }
                if ( !v83[15] )
                {
                  v83[15] = 1;
                  v94 = (unsigned __int64)*(float *)(v2 + 4881984);
                  v95 = *(_DWORD *)(v2 + 4881984);
                  v97 = *(float *)(v2 + 4881984);
                  if ( !v98 )
                    v97 = v97 + 1.0;
                  v83[45] = (unsigned __int64)v97;
                  v99 = (unsigned __int64)*(float *)(v2 + 4881988);
                  v100 = *(_DWORD *)(v2 + 4881988);
                  v102 = *(float *)(v2 + 4881988);
                  if ( !v103 )
                    v102 = v102 + 1.0;
                  v83[75] = (unsigned __int64)v102;
                  v81 = 1;
                }
                ++v83;
                v105 = __OFSUB__(v176 + 1, 15);
                v104 = v176++ - 14 < 0;
              }
              while ( v104 ^ v105 );
              v77 = v158;
              dword_4A804C[v2 / 4] = 0;
            }
            dword_481BE8 = 0;
            if ( v77 > 0 )
            {
              v106 = dword_503518;
              do
              {
                if ( *(float *)(v2 + 4881840) < 0.0
                  || *(float *)&dword_4A6884[37 * v106] * 0.85 < *(float *)(v2 + 4881840)
                  || !(dword_4A7D20[4 * (dword_4A7A20 + 216 * v106)] & 1) )
                {
                  v107 = (unsigned __int64)*(float *)(v2 + 4881944);
                  v108 = *(_DWORD *)(v2 + 4881944);
                  v110 = *(float *)(v2 + 4881944);
                  if ( !v111 )
                    v110 = v110 + 1.0;
                  v112 = (unsigned __int64)v110;
                  v113 = (unsigned __int64)*(float *)(v2 + 4881948);
                  v114 = *(_DWORD *)(v2 + 4881948);
                  v116 = *(float *)(v2 + 4881948);
                  if ( !v117 )
                    v116 = v116 + 1.0;
                  v118 = v112 + dword_464F40 * (unsigned __int64)v116;
                  if ( (*((byte *)dword_50A16C + v118) & 0xF) == 15 )
                  {
                    *((byte *)dword_5034F8 + v118) = byte_501AA0[*((byte *)dword_5034F8 + v118)];
                    *((byte *)dword_5034F8 + v118 + 1) = byte_501AA0[*((byte *)dword_5034F8 + v118 + 1)];
                    *((byte *)dword_5034F8 + dword_464F40 + v118) = byte_501AA0[*((byte *)dword_5034F8
                                                                                 + dword_464F40
                                                                                 + v118)];
                    *((byte *)dword_5034F8 + dword_464F40 + v118 + 1) = byte_501AA0[*((byte *)dword_5034F8
                                                                                     + dword_464F40
                                                                                     + v118
                                                                                     + 1)];
                    v106 = dword_503518;
                  }
                  v119 = (unsigned __int64)*(float *)&dword_4A7E28[216 * v106];
                  v120 = dword_4A7E28[216 * v106];
                  v122 = *(float *)&dword_4A7E28[216 * v106];
                  if ( !v123 )
                    v122 = v122 + 1.0;
                  v124 = (unsigned __int64)v122;
                  v125 = (unsigned __int64)*(float *)&dword_4A7E2C[216 * v106];
                  v126 = dword_4A7E2C[216 * v106];
                  v128 = *(float *)&dword_4A7E2C[216 * v106];
                  if ( !v129 )
                    v128 = v128 + 1.0;
                  v130 = v124 + dword_464F40 * (unsigned __int64)v128;
                  if ( (*((byte *)dword_50A16C + v130) & 0xF) == 15 )
                  {
                    *((byte *)dword_5034F8 + v130) = byte_501AA0[*((byte *)dword_5034F8 + v130)];
                    *((byte *)dword_5034F8 + v130 + 1) = byte_501AA0[*((byte *)dword_5034F8 + v130 + 1)];
                    *((byte *)dword_5034F8 + dword_464F40 + v130) = byte_501AA0[*((byte *)dword_5034F8
                                                                                 + dword_464F40
                                                                                 + v130)];
                    *((byte *)dword_5034F8 + dword_464F40 + v130 + 1) = byte_501AA0[*((byte *)dword_5034F8
                                                                                     + dword_464F40
                                                                                     + v130
                                                                                     + 1)];
                    v106 = dword_503518;
                  }
                }
                v131 = (unsigned __int64)*(float *)&dword_4A7E38[216 * v106];
                v132 = dword_4A7E38[216 * v106];
                v134 = *(float *)&dword_4A7E38[216 * v106];
                if ( !v135 )
                  v134 = v134 + 1.0;
                v136 = (unsigned __int64)v134;
                v137 = (unsigned __int64)*(float *)&dword_4A7E3C[216 * v106];
                v138 = dword_4A7E3C[216 * v106];
                v140 = *(float *)&dword_4A7E3C[216 * v106];
                if ( !v141 )
                  v140 = v140 + 1.0;
                v142 = v136 + dword_464F40 * (unsigned __int64)v140;
                if ( (*((byte *)dword_50A16C + v142) & 0xF) == 15 )
                {
                  *((byte *)dword_5034F8 + v142) = byte_501AA0[*((byte *)dword_5034F8 + v142)];
                  *((byte *)dword_5034F8 + v142 + 1) = byte_501AA0[*((byte *)dword_5034F8 + v142 + 1)];
                  *((byte *)dword_5034F8 + dword_464F40 + v142) = byte_501AA0[*((byte *)dword_5034F8
                                                                               + dword_464F40
                                                                               + v142)];
                  *((byte *)dword_5034F8 + dword_464F40 + v142 + 1) = byte_501AA0[*((byte *)dword_5034F8
                                                                                   + dword_464F40
                                                                                   + v142
                                                                                   + 1)];
                  v106 = dword_503518;
                }
                v143 = (unsigned __int64)*(float *)&dword_4A7E48[216 * v106];
                v144 = dword_4A7E48[216 * v106];
                v146 = *(float *)&dword_4A7E48[216 * v106];
                if ( !v147 )
                  v146 = v146 + 1.0;
                v148 = (unsigned __int64)v146;
                v149 = (unsigned __int64)*(float *)&dword_4A7E4C[216 * v106];
                v150 = dword_4A7E4C[216 * v106];
                v152 = *(float *)&dword_4A7E4C[216 * v106];
                if ( !v153 )
                  v152 = v152 + 1.0;
                v154 = v148 + dword_464F40 * (unsigned __int64)v152;
                if ( (*((byte *)dword_50A16C + v154) & 0xF) == 15 )
                {
                  *((byte *)dword_5034F8 + v154) = byte_501AA0[*((byte *)dword_5034F8 + v154)];
                  *((byte *)dword_5034F8 + v154 + 1) = byte_501AA0[*((byte *)dword_5034F8 + v154 + 1)];
                  *((byte *)dword_5034F8 + dword_464F40 + v154) = byte_501AA0[*((byte *)dword_5034F8
                                                                               + dword_464F40
                                                                               + v154)];
                  *((byte *)dword_5034F8 + dword_464F40 + v154 + 1) = byte_501AA0[*((byte *)dword_5034F8
                                                                                   + dword_464F40
                                                                                   + v154
                                                                                   + 1)];
                  v106 = dword_503518;
                }
                v2 = 864 * v106;
                v105 = __OFSUB__(dword_481BE8 + 1, v77);
                v104 = dword_481BE8 + 1 - v77 < 0;
                v155 = v160 + *(float *)&dword_4A7E18[216 * v106];
                ++dword_481BE8;
                *(float *)(v2 + 4881944) = v155;
                *(float *)(v2 + 4881948) = v162 + *(float *)&dword_4A7E1C[216 * v106];
                *(float *)(v2 + 4881960) = v164 + *(float *)&dword_4A7E28[216 * v106];
                *(float *)(v2 + 4881964) = v166 + *(float *)&dword_4A7E2C[216 * v106];
                *(float *)(v2 + 4881976) = v168 + *(float *)&dword_4A7E38[216 * v106];
                *(float *)(v2 + 4881980) = v170 + *(float *)&dword_4A7E3C[216 * v106];
                *(float *)(v2 + 4881992) = v172 + *(float *)&dword_4A7E48[216 * v106];
                *(float *)(v2 + 4881996) = v175 + *(float *)&dword_4A7E4C[216 * v106];
              }
              while ( v104 ^ v105 );
            }
          }
        }
      }
      v156 = dword_503518;
      v157 = 216 * dword_503518;
      dword_4A7E18[v157] = dword_4A7E10[216 * dword_503518];
      dword_4A7E1C[v157] = dword_4A7E14[v157];
      dword_4A7E28[v157] = dword_4A7E20[v157];
      dword_4A7E2C[v157] = dword_4A7E24[v157];
      dword_4A7E38[v157] = dword_4A7E30[v157];
      dword_4A7E3C[v157] = dword_4A7E34[v157];
      dword_4A7E48[v157] = dword_4A7E40[v157];
      dword_4A7E4C[v157] = dword_4A7E44[v157];
      result = dword_508D24;
      dword_503518 = v156 + 1;
      if ( v156 + 1 >= dword_508D24 )
        break;
      v1 = dword_503518;
    }
  }
  return result;
}


//----- (00412DF0) --------------------------------------------------------
int sub_412DF0()
{
  int v0; // ebp@1
  int v1; // esi@1
  void *v2; // ebx@2
  int v3; // ebp@2
  unsigned int v4; // esi@3
  int v5; // edi@3
  int v6; // edi@11
  int v7; // ecx@12
  int v8; // esi@13
  int v9; // eax@13
  char v10; // bl@19
  int v11; // edx@22
  unsigned int v12; // eax@23
  int v13; // eax@29
  int v14; // eax@44
  bool v15; // zf@45
  int v16; // edx@51
  int v17; // esi@51
  int v18; // eax@52
  int result; // eax@63

  v0 = dword_508D24;
  v1 = 0;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = dword_5034D0;
    v3 = dword_4A6858;
    do
    {
      v4 = 864 * v1;
      v5 = dword_4A7D00[v4 / 4] + 1;
      if ( *((byte *)v2
           + v3 * ((signed int)(unsigned __int64)*(float *)(v4 + 4881940) >> 2)
           + ((signed int)(unsigned __int64)*(float *)(v4 + 4881936) >> 2)) == v5
        || *((byte *)v2
           + dword_4A6858 * ((signed int)(unsigned __int64)*(float *)(v4 + 4881956) >> 2)
           + ((signed int)(unsigned __int64)*(float *)(v4 + 4881952) >> 2)) == v5 )
        ++dword_4A7D00[v4 / 4];
      v3 = dword_4A6858;
      if ( *((byte *)v2
           + dword_4A6858 * ((signed int)(unsigned __int64)*(float *)(v4 + 4881848) >> 2)
           + ((signed int)(unsigned __int64)*(float *)(v4 + 4881844) >> 2)) == dword_4A685C
        && dword_4A7D00[v4 / 4] < dword_4A685C )
        dword_4A7D00[v4 / 4] = 0;
      v1 = dword_503518++ + 1;
    }
    while ( dword_503518 < dword_508D24 );
    v0 = dword_508D24;
  }
  v6 = 0;
  if ( v0 > 0 )
  {
    v7 = (int)byte_4A7E09;
    do
    {
      v8 = 0;
      v9 = (int)byte_4A7E09;
      do
      {
        if ( !*(_DWORD *)(v9 + 3)
          && v8 != v6
          && *(_DWORD *)(v7 - 265) > *(_DWORD *)(v9 - 265)
          && *(byte *)(v7 - 1) >= *(byte *)(v9 - 1)
          && *(byte *)v7 > *(byte *)v9 )
        {
          v10 = *(byte *)v7;
          *(byte *)v7 = *(byte *)v9;
          *(byte *)v9 = v10;
        }
        ++v8;
        v9 += 864;
      }
      while ( v8 < v0 );
      ++v6;
      v7 += 864;
    }
    while ( v6 < v0 );
  }
  v11 = 0;
  for ( dword_503518 = 0; v11 < v0; dword_503518 = v11 )
  {
    v12 = 864 * v11;
    if ( dword_4A7D00[216 * v11] == dword_4A685C )
    {
      if ( dword_456AC8 )
      {
        dword_4A7E0C[v12 / 4] = 1;
        dword_4A6884[37 * v11] = 0;
      }
      else
      {
        ++byte_4A7E08[v12];
        if ( v11 == dword_4A9EA8 )
        {
          if ( (unsigned __int8)byte_4A7E08[v12] == numberOfLaps )
          {
            loadMenuSoundEffect(2u, 2, 0, 0x10000, 327680);
            v11 = dword_503518;
            v0 = dword_508D24;
            dword_456AE4 = 210;
          }
          v13 = dword_45FC1C + 100 * (dword_463CD4 + 60 * dword_45EA64);
          if ( v13 < dword_461FEC + 100 * (dword_45EB48 + 60 * dword_463CAC)
            || !dword_463CAC && !dword_45EB48 && !dword_461FEC )
          {
            dword_463CAC = dword_45EA64;
            dword_45EB48 = dword_463CD4;
            dword_461FEC = dword_45FC1C;
          }
          if ( v13 >= dword_4A9B8C + 100 * (dword_501260 + 60 * dword_50A160)
            && (dword_50A160 || dword_501260 || dword_4A9B8C) )
          {
            dword_456AE4 = 0;
          }
          else
          {
            if ( BYTE2(dword_45EA50[0]) != 48 && !dword_456AE4 )
            {
              loadMenuSoundEffect(2u, 4, 0, 0x10000, 327680);
              v11 = dword_503518;
              v0 = dword_508D24;
            }
            dword_50A160 = dword_45EA64;
            dword_501260 = dword_463CD4;
            dword_4A9B8C = dword_45FC1C;
          }
          dword_503224 = dword_481E0C;
          dword_4A9EB0 = 210;
          dword_45FC1C = 0;
          dword_463CD4 = 0;
          dword_45EA64 = 0;
          dword_481E0C = 0;
        }
      }
      v14 = 216 * v11;
      dword_4A7D00[216 * v11] = 0;
      if ( (unsigned __int8)byte_4A7E08[864 * v11] > numberOfLaps )
      {
        byte_4A7E08[v14 * 4] = numberOfLaps;
        v15 = v11 == dword_4A9EA8;
        dword_4A7E0C[v14] = 1;
        if ( v15 )
        {
          dword_4A9EB0 = 9999;
          dword_4A8050[v14] = 0;
        }
        dword_4A6884[37 * v11] = 0;
        dword_456AC8 = 1;
        if ( !memcmp(&dword_4A7A60[84 * v11], &dword_441250, 0xBu) && byte_4A7E09[v14 * 4] == 1 )
        {
          loadMenuSoundEffect(2u, 31, 0, 0x10000, 327680);
          v11 = dword_503518;
          v0 = dword_508D24;
        }
      }
    }
    ++v11;
  }
  v16 = 0;
  v17 = 0;
  dword_503518 = 0;
  if ( v0 > 0 )
  {
    v18 = (int)dword_4A7D00;
    do
    {
      if ( *(_DWORD *)v18 + dword_4A685C * *(byte *)(v18 + 264) > v17 && v16 != dword_4A9EA8 )
        v17 = *(_DWORD *)v18 + dword_4A685C * *(byte *)(v18 + 264);
      ++v16;
      v18 += 864;
    }
    while ( v16 < v0 );
    dword_503518 = v16;
  }
  if ( v17 > dword_4A7D00[216 * dword_4A9EA8] + dword_4A685C * ((unsigned __int8)byte_4A7E08[864 * dword_4A9EA8] + 1)
    && !lapped_456BC0
    && dword_4A6880[0] != 6
    && !isMultiplayerGame )
  {
    lapped_456BC0 = 1;
    loadMenuSoundEffect(2u, 22, 0, 0x10000, 327680);
  }
  result = 864 * dword_4A9EA8;
  if ( v17 < dword_4A7D00[216 * dword_4A9EA8] + dword_4A685C * ((unsigned __int8)byte_4A7E08[864 * dword_4A9EA8] + 1)
    && lapped_456BC0 == 1
    && dword_4A6880[0] != 6 )
  {
    result = isMultiplayerGame;
    if ( !isMultiplayerGame )
      lapped_456BC0 = 0;
  }
  return result;
}


//----- (00413300) --------------------------------------------------------
void sub_413300()
{
  int v0; // ebp@1
  int v1; // esi@1
  int v2; // edi@2
  int v3; // ecx@2
  int v4; // eax@5
  char v5; // dl@7

  v0 = dword_508D24;
  v1 = 0;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = dword_4A9EA8;
    v3 = (int)byte_4A7E09;
    do
    {
      if ( v1 != v2 && !*(_DWORD *)(v3 + 3) )
      {
        v4 = 864 * v2;
        if ( !dword_4A7E0C[216 * v2] && (unsigned __int8)byte_4A7E09[v4] < *(byte *)v3 )
        {
          v5 = *(byte *)v3;
          *(byte *)v3 = byte_4A7E09[v4];
          byte_4A7E09[v4] = v5;
        }
      }
      ++v1;
      v3 += 864;
    }
    while ( v1 < v0 );
    dword_503518 = v1;
  }
}
// 4A7E0C: using guessed type int dword_4A7E0C[];
// 4A9EA8: using guessed type int dword_4A9EA8;
// 503518: using guessed type int dword_503518;
// 508D24: using guessed type int dword_508D24;

//----- (00413380) --------------------------------------------------------
int sub_413380()
{
  int v0; // ebx@1
  int v1; // ebp@1
  int v2; // edi@2
  int v3; // ecx@3
  int v4; // eax@3
  int v5; // esi@3
  char v6; // dl@8
  int result; // eax@12
  int v8; // ebp@12
  bool v9; // zf@14
  bool v10; // sf@14
  signed int v11; // edx@15
  int v12; // ecx@15
  signed int v13; // edx@23
  int v14; // ecx@23
  int i; // ecx@33
  int v16; // esi@34
  char v17; // dl@34
  int v18; // [sp+10h] [bp-8h]@2
  int v19; // [sp+14h] [bp-4h]@2
  int v20; // [sp+14h] [bp-4h]@13

  v0 = dword_508D24;
  v1 = 0;
  if ( dword_508D24 > 0 )
  {
    v2 = (int)byte_4A7E09;
    v19 = (int)byte_4A7E09;
    v18 = (int)dword_4A6898;
    do
    {
      v3 = 0;
      v4 = (int)byte_4A7E09;
      v5 = (int)dword_4A6898;
      do
      {
        if ( v3 != v1 )
        {
          if ( *(byte *)v2 > *(byte *)v4 && *(_DWORD *)v18 > 0 && *(_DWORD *)v5 <= 0 )
          {
            v6 = *(byte *)v2;
            v2 = v19;
            *(byte *)v19 = *(byte *)v4;
            *(byte *)v4 = v6;
          }
          v0 = dword_508D24;
        }
        ++v3;
        v5 += 148;
        v4 += 864;
      }
      while ( v3 < v0 );
      ++v1;
      v2 += 864;
      v18 += 148;
      v19 = v2;
    }
    while ( v1 < v0 );
  }
  result = dword_479684;
  v8 = 0;
  dword_503518 = 0;
  if ( v0 > 0 )
  {
    v20 = (int)dword_4A6898;
    do
    {
      v9 = *(_DWORD *)v20 == 0;
      v10 = *(_DWORD *)v20 < 0;
      if ( !*(_DWORD *)v20 )
      {
        v11 = 0;
        v12 = 0;
        if ( result <= 0 )
          goto LABEL_37;
        do
        {
          if ( dword_4A7CE0[v12] == v8 )
            v11 = 1;
          ++v12;
        }
        while ( v12 < result );
        if ( !v11 )
LABEL_37:
          dword_4A7CE0[result++] = v8;
        v9 = 1;
        v10 = 0;
      }
      if ( !v10 && !v9 )
      {
        v13 = -1;
        v14 = 0;
        if ( result > 0 )
        {
          do
          {
            if ( dword_4A7CE0[v14] == v8 )
              v13 = v14;
            ++v14;
          }
          while ( v14 < result );
          if ( v13 != -1 )
          {
            --result;
            if ( v13 < result )
              memcpy((void *)(4 * v13 + 4881632), (const void *)(4 * v13 + 4881636), 4 * (result - v13));
            dword_4A7CE0[result] = -1;
          }
        }
      }
      ++v8;
      v20 += 148;
    }
    while ( v8 < v0 );
    dword_503518 = v8;
    dword_479684 = result;
  }
  for ( i = 0; i < result; byte_4A7E09[v16] = v17 )
  {
    v16 = 864 * dword_4A7CE0[i];
    v17 = v0 - i++;
  }
  return result;
}

//----- (00413500) --------------------------------------------------------
int sub_413500()
{
  int result; // eax@1
  int v1; // ebx@2
  signed int v2; // edx@3
  int v3; // esi@3
  byte *v4; // eax@4
  int v5; // ecx@5
  int v6; // ebp@9
  int v7; // edi@10
  int v8; // ebp@14
  unsigned __int64 v9; // rax@14
  int v10; // eax@14
  int *v11; // eax@16
  char v12; // [sp+4h] [bp-4h]@9

  result = dword_481E14;
  if ( dword_481E14 > 190 )
  {
    result = dword_508D24;
    v1 = 0;
    for ( dword_503518 = 0; v1 < dword_508D24; dword_503518 = v1 )
    {
      v2 = 0;
      v3 = 0;
      if ( dword_503510 > 0 )
      {
        v4 = &dword_4A7D20[864 * v1];
        do
        {
          v5 = *(_DWORD *)v4;
          if ( *(_DWORD *)v4 & 2 && v5 & 0x40 )
          {
            v2 = 1;
            *(_DWORD *)v4 = v5 & 0xBD;
          }
          ++v3;
          v4 += 4;
        }
        while ( v3 < dword_503510 );
      }
      v6 = dword_4A6880[37 * v1];
      v12 = (v6 > 1) + 33;
      if ( v2 != 1 || (v7 = 216 * v1, dword_4A7E0C[216 * v1]) )
      {
        v11 = &dword_4A8058[216 * v1];
        if ( *v11 == 1 )
        {
          *v11 = 0;
          sub_43C3E0(v1 + 11);
          goto LABEL_18;
        }
      }
      else if ( !dword_4A8058[v7] )
      {
        dword_4A8058[v7] = 1;
        if ( v1 == dword_4A9EA8 )
        {
          loadMenuSoundEffect(v1 + 11, (v6 > 1) + 33, 0, 0x10000, (v1 + 33) << 12);
LABEL_18:
          v1 = dword_503518;
          goto LABEL_19;
        }
        v8 = (unsigned __int64)(*(float *)&dword_4A7DB4[216 * v1] - *(float *)&dword_4A7DB4[216 * dword_4A9EA8]);
        v9 = (unsigned __int64)(*(float *)&dword_4A7DB8[216 * v1] - *(float *)&dword_4A7DB8[216 * dword_4A9EA8]);
        v10 = 38144 - 88 * (unsigned __int64)sqrt((double)(v8 * v8 + (signed int)v9 * (signed int)v9));
        if ( v10 > 0 )
        {
          loadMenuSoundEffect(v1 + 11, v12, 0, v10, (v1 + 33) << 12);
          goto LABEL_18;
        }
      }
LABEL_19:
      result = dword_508D24;
      ++v1;
    }
  }
  return result;
}


//----- (004136C0) --------------------------------------------------------
signed int sub_4136C0()
{
  char v0; // al@1
  int v1; // esi@1
  char v2; // dl@2
  char v3; // dl@2
  char v4; // dl@2
  char v5; // dl@2
  char v6; // dl@2
  char v7; // bl@2
  char v8; // cl@2
  bool v9; // zf@2
  char v10; // dl@2
  signed int result; // eax@30

  v0 = eventDetected();
  v1 = dword_4A9EA8;
  if ( !v0 )
    goto LABEL_30;
  v2 = byte_4A9EC2;
  byte_4A9EC0 = byte_4A9EC1;
  byte_4A9EC2 = byte_4A9EC3;
  byte_4A9EC1 = v2;
  v3 = byte_4A9EC4;
  byte_4A9EC4 = byte_4A9EC5;
  byte_4A9EC3 = v3;
  v4 = byte_4A9EC6;
  byte_4A9EC6 = byte_4A9EC7;
  byte_4A9EC5 = v4;
  v5 = byte_4A9EC8;
  byte_4A9EC8 = byte_4A9EC9;
  byte_4A9EC7 = v5;
  v6 = byte_4A9ECA;
  v7 = byte_4A9ECE;
  byte_4A9ECA = byte_4A9ECB;
  v8 = byte_4A9ECC;
  v9 = byte_4A9ECC == 32;
  byte_4A9EC9 = v6;
  v10 = byte_4A9ECD;
  byte_4A9ECB = byte_4A9ECC;
  byte_4A9ECC = byte_4A9ECD;
  byte_4A9ECD = byte_4A9ECE;
  byte_4A9ECE = v0;
  if ( v9 && v10 == 19 && v7 == 22 && v0 == 34 )
    dword_4A8050[216 * dword_4A9EA8] = 999999;
  if ( byte_4A9ECA != 32 || v8 != 19 )
  {
    if ( v8 == 32 && v10 == 19 && byte_4A9ECD == 22 && v0 == 48 )
      goto LABEL_18;
  }
  else if ( v10 == 23 && byte_4A9ECD == 49 && v0 == 37 )
  {
    dword_4A68A0[37 * v1] = 1;
  }
  if ( dword_456B10 )
LABEL_18:
    dword_456AB0 = 1;
  if ( byte_4A9ECA != 32 || v8 != 19 )
  {
    if ( v8 == 32 && v10 == 19 && byte_4A9ECD == 30 && v0 == 34 )
      dword_456AB8 = 1;
  }
  else if ( v10 == 18 && byte_4A9ECD == 30 && v0 == 32 )
  {
    dword_456AB4 = 1;
  }
LABEL_30:
  result = 102400;
  if ( dword_456AB0 )
    dword_4A6898[37 * v1] = 102400;
  if ( dword_456AB4 )
    dword_4A68B0[37 * v1] = 102400;
  if ( dword_456AB8 )
    dword_4A68B4[37 * v1] = 102400;
  return result;
}

//----- (004138A0) --------------------------------------------------------
void sub_4138A0()
{
  char v0; // bl@1
  int v1; // edx@45
  int v2; // eax@45
  int v3; // ecx@45
  int v4; // edx@45
  int v5; // eax@45
  int v6; // ecx@45
  int v7; // edx@45
  int v8; // eax@47
  int v9; // ecx@47
  int v10; // eax@51
  int v11; // ecx@51
  int *v12; // ecx@71
  int v13; // eax@71
  bool v14; // sf@71

  v0 = 0;
  if ( isMultiplayerGame && dword_45E0A8 == 2 )
    nullsub_1();
  if ( dword_4A6AD4 )
  {
    ++dword_5034F4;
  }
  else
  {
    if (configuration.accelerateKey == 200 && byte_45E108 )
      v0 = 1;
    if (configuration.brakeKey == 208 && byte_45E110 )
      v0 |= 2u;
    if (configuration.leftSteeringKey == 203 && byte_45E10B )
      v0 |= 4u;
    if (configuration.rightSteeringKey == 205 && byte_45E10D )
      v0 |= 8u;
    if ( byte_45E188 )
      v0 |= 1u;
    if ( byte_45E108 )
      v0 |= 1u;
    if ( byte_45E0C0[configuration.accelerateKey] )
      v0 |= 1u;
    if ( byte_45E190 )
      v0 |= 2u;
    if ( byte_45E110 )
      v0 |= 2u;
    if ( byte_45E0C0[configuration.brakeKey] )
      v0 |= 2u;
    if ( byte_45E0C0[configuration.leftSteeringKey] )
      v0 |= 4u;
    if ( byte_45E0C0[configuration.rightSteeringKey] )
      v0 |= 8u;
    if ( byte_45E0C0[configuration.turboKey] )
      v0 |= 0x10u;
    if ( byte_45E0C0[configuration.gunKey] )
      v0 |= 0x20u;
    if ( byte_45E0C0[configuration.mineKey] )
    {
      v0 |= 0x40u;
      byte_45E0C0[configuration.mineKey] = 0;
    }
    if ( v0 & 2 && v0 & 0x40 )
      v0 &= 0xFDu;
    if ( byte_45E0C0[configuration.hornKey] )
      v0 |= 0x42u;
    if ( configuration.useJoystick > 0 )
    {
      v1 = (unsigned __int8)configuration.defaultLeftSteeringGamepad;
      v2 = (unsigned __int8)configuration.defaultBrakeGamepad;
      byte_463E00[(unsigned __int8)configuration.defaultRightSteeringGamepad] = 0;
      v3 = (unsigned __int8)byte_44512A;
      byte_463E00[v1] = 0;
      v4 = (unsigned __int8)configuration.defaultMineGamepad;
      byte_463E00[v2] = 0;
      v5 = (unsigned __int8)configuration.defaultGunGamepad;
      byte_463E00[v3] = 0;
      v6 = (unsigned __int8)configuration.defaultTurboGamepad;
      byte_463E00[v4] = 0;
      v7 = (unsigned __int8)configuration.defaultAccelerateGamepad;
      byte_463E00[v5] = 0;
      byte_463E00[v6] = 0;
      byte_463E00[v7] = 0;
      if ( !SDLCheckJoystick() )
        configuration.useJoystick = 0;
      v8 = dword_4AA3E0;
      v9 = dword_4A7A44;
      if ( dword_4A7A44 < dword_4AA3E0 - 50 )
        byte_463E00[(unsigned __int8)configuration.defaultLeftSteeringGamepad] = 1;
      if ( v9 > v8 + 50 )
        byte_463E00[(unsigned __int8)configuration.defaultRightSteeringGamepad] = 1;
      v10 = dword_4A9EA0;
      v11 = dword_4A9EB8;
      if ( dword_4A9EB8 < dword_4A9EA0 - 50 )
        byte_463E00[(unsigned __int8)byte_44512A] = 1;
      if ( v11 > v10 + 50 )
        byte_463E00[(unsigned __int8)configuration.defaultBrakeGamepad] = 1;
      if ( byte_463E00[configuration.accelerateGamepad] )
        v0 |= 1u;
      if ( byte_463E00[configuration.brakeGamepad] )
        v0 |= 2u;
      if ( byte_463E00[configuration.leftSteeringGamepad] )
        v0 |= 4u;
      if ( byte_463E00[configuration.rightSteeringGamepad] )
        v0 |= 8u;
      if ( byte_463E00[configuration.turboGamepad] )
        v0 |= 0x10u;
      if ( byte_463E00[configuration.gunGamepad] )
        v0 |= 0x20u;
      if ( byte_463E00[configuration.mineGamepad] )
      {
        v0 |= 0x40u;
        byte_45E0C0[configuration.mineKey] = 0;
      }
    }
    if ( v0 & 0x10 )
      v0 |= 1u;
    v12 = &dword_4A7DA0[216 * dword_4A9EA8];
    dword_4A7D60[*v12 + 216 * dword_4A9EA8] = (unsigned __int8)v0;
    v13 = *v12 + 1;
    v14 = *v12 - 14 < 0;
    *v12 = v13;
    if ( !((unsigned __int8)(v14 ^ __OFSUB__(v13, 15)) | (v13 == 15)) )
      *v12 = 0;
    if ( isMultiplayerGame )
    {
      if ( dword_4A7CF4 )
      {
        nullsub_1();
        if ( dword_50E540 )
          nullsub_1();
      }
    }
    ++dword_4A9EAC;
    if ( dword_4A9EAC >= 15 )
      dword_4A9EAC = 0;
    ++dword_503500;
  }
}

//----- (00413C90) --------------------------------------------------------
int  sub_413C90(int a1)
{
  int v1; // eax@1
  int v2; // ecx@1
  signed int v3; // edi@1
  signed int v4; // esi@2
  char v5; // dl@3
  char v6; // dl@5
  int v7; // eax@5
  int v8; // ecx@5
  char v9; // dl@7
  int v10; // eax@7
  int v11; // ecx@7
  char v12; // dl@9
  int v13; // eax@9
  int v14; // ecx@9
  unsigned __int64 v15; // rax@13
  unsigned __int64 v16; // rax@16
  int v17; // esi@18
  signed int v18; // edi@19
  double v19; // st7@26
  int v20; // eax@26
  int v21; // esi@26
  int result; // eax@34

  v1 = 0;
  v2 = 96;
  v3 = 32;
  do
  {
    v4 = 16;
    do
    {
      v5 = byte_50E720[v1];
      if ( v5 )
      {
        a1 = dword_464F14;
        *(byte *)(dword_464F14 + v2) = v5;
      }
      v6 = byte_50E721[v1];
      v7 = v1 + 1;
      v8 = v2 + 1;
      if ( v6 )
      {
        a1 = dword_464F14;
        *(byte *)(dword_464F14 + v8) = v6;
      }
      v9 = byte_50E721[v7];
      v10 = v7 + 1;
      v11 = v8 + 1;
      if ( v9 )
      {
        a1 = dword_464F14;
        *(byte *)(dword_464F14 + v11) = v9;
      }
      v12 = byte_50E721[v10];
      v13 = v10 + 1;
      v14 = v11 + 1;
      if ( v12 )
      {
        a1 = dword_464F14;
        *(byte *)(dword_464F14 + v14) = v12;
      }
      v1 = v13 + 1;
      v2 = v14 + 1;
      --v4;
    }
    while ( v4 );
    v2 += 448;
    --v3;
  }
  while ( v3 );
  v15 = (unsigned __int64)((double)dword_4A68B4[37 * dword_4A9EA8] * 0.000556640625);
  if ( (v15 & 0x80000000) != 0 )
    LOBYTE(v15) = 0;
  sub_43B3A0((unsigned __int8)v15 + dword_464F14 + 3684, 58 - (unsigned __int8)v15, 7, 0);
  if ( dword_4A68AC[37 * dword_4A9EA8] )
  {
    v16 = (unsigned __int64)((double)dword_4A68B0[37 * dword_4A9EA8] * 0.000537109375);
    if ( (v16 & 0x80000000) != 0 )
      LOBYTE(v16) = 0;
    sub_43BEF0(a1, (void *)((unsigned __int8)v16 + dword_464F14 + 9828), 55 - (unsigned __int8)v16, 3, 0);
    v17 = 0;
    if ( dword_4A68A8[37 * dword_4A9EA8] > 0 )
    {
      v18 = 6752;
      do
      {
        sub_43B240((int)dword_481E04, 8, 6, v18 + dword_464F14);
        ++v17;
        v18 += 8;
      }
      while ( v17 < dword_4A68A8[37 * dword_4A9EA8] );
    }
  }
  else if ( dword_4A9EB0 <= 0 )
  {
    sub_402590((int)&unk_4A9160, 6, 6, dword_481E0C / 70 / 60, 16, 8315, -6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, dword_481E0C / 70 % 60, 16, 8329, 6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, (unsigned __int64)((double)(dword_481E0C % 70) * 1.42), 16, 8343, 6, 0);
  }
  else
  {
    sub_402590((int)&unk_4A9160, 6, 6, dword_503224 / 70 / 60, 16, 8315, -6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, dword_503224 / 70 % 60, 16, 8329, 6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, (unsigned __int64)((double)(dword_503224 % 70) * 1.42), 16, 8343, 6, 0);
    dword_4A9EB0 -= dword_4A9EA4;
    if ( dword_4A9EB0 < 0 )
      dword_4A9EB0 = 0;
  }
  v19 = 100.0 - ceil((double)dword_4A6898[37 * dword_4A9EA8] * 0.0009765625);
  v20 = sub_402590((int)&unk_46E560, 8, 10, (unsigned __int64)v19, 0, 11408, -8, -16);
  sub_43B240((int)&unk_46E880, 8, 10, v20 + dword_464F14);
  v21 = dword_4A9EA8;
  if ( dword_4A6898[37 * dword_4A9EA8] < 20480 )
  {
    if ( !dword_456ADC )
    {
      loadMenuSoundEffect(2u, 1, 0, 0x10000, 327680);
      v21 = dword_4A9EA8;
    }
    dword_456ADC = 1;
  }
  if ( dword_4A6898[37 * v21] < 10240 )
  {
    if ( !dword_456AE0 )
    {
      loadMenuSoundEffect(2u, 1, 0, 0x10000, 327680);
      v21 = dword_4A9EA8;
    }
    dword_456AE0 = 1;
  }
  result = dword_4A6898[37 * v21];
  if ( !result )
  {
    result = 0;
    if ( !memcmp(&dword_4A7A60[84 * v21], &dword_441250, 0xBu) )
    {
      result = dword_456AE8;
      if ( !dword_456AE8 )
        result = loadMenuSoundEffect(2u, 32, 0, 0x10000, 327680);
      dword_456AE8 = 1;
    }
  }
  return result;
}


//----- (00414110) --------------------------------------------------------
int  sub_414110(int a1)
{
  int v1; // ST00_4@1

  dword_4A9EA4 = dword_503500 - dword_4A7CFC;
  v1 = (dword_503500 - dword_4A7CFC) << 16;
  dword_4A7CFC = dword_503500;
  dword_4AA500 = sub_43B290(v1, 0x20000);
  if ( dword_481E14 > 190 && !dword_4A7E0C[216 * dword_4A9EA8] )
  {
    dword_50A164 += dword_4A9EA4;
    dword_481E0C += dword_4A9EA4;
    dword_45EEC0 = dword_50A164 / 70 / 60;
    dword_45EEBC = dword_50A164 / 70 % 60;
    dword_462D74 = (unsigned __int64)((double)(dword_50A164 % 70) * 1.42);
    dword_45EA64 = dword_481E0C / 70 / 60;
    dword_463CD4 = dword_481E0C / 70 % 60;
    dword_45FC1C = (unsigned __int64)((double)(dword_481E0C % 70) * 1.42);
  }
  if ( dword_4A9EB0 > 0 )
  {
    dword_4A9EB0 -= dword_4A9EA4;
    if ( dword_4A9EB0 < 0 )
      dword_4A9EB0 = 0;
  }
  return sub_413C90(a1);
}


//----- (00414220) --------------------------------------------------------
int sub_414220()
{
  int v0; // ST3C_4@1
  char v1; // bl@1
  int v2; // edi@6
  const void *v3; // esi@6
  int v4; // eax@8
  int v5; // edi@8
  int v6; // esi@9
  int v7; // eax@13
  int v8; // esi@14
  signed int v9; // edx@15
  int i; // eax@16
  int v11; // ebp@20
  signed int v12; // esi@20
  signed int v13; // edi@21
  signed int v14; // eax@23
  signed int v15; // esi@23
  signed int v16; // edi@24
  unsigned __int64 v17; // rax@27
  int v18; // ebp@27
  unsigned __int64 v19; // rax@31
  int v20; // ebp@31
  unsigned __int64 v21; // rax@35
  int v22; // ebp@35
  signed int v23; // esi@38
  signed int v24; // edi@39
  int v25; // edx@41
  int v26; // eax@41
  signed int v27; // esi@41
  int v28; // edx@42
  int v29; // edi@42
  bool v30; // zf@42
  bool v31; // sf@42
  unsigned __int8 v32; // of@42
  int v33; // ecx@45
  int v34; // eax@45
  int v35; // eax@46
  int v36; // eax@47
  int v37; // ecx@47
  int v38; // edi@47
  int v39; // eax@47
  int v40; // eax@49
  int v41; // ecx@49
  int v42; // edi@49
  int v43; // eax@49
  signed int v44; // esi@52
  signed int v45; // edi@53
  int v46; // eax@55
  int v47; // esi@55
  int v48; // edx@55
  int v49; // ecx@55
  double v50; // st7@55
  unsigned __int64 v51; // rax@55
  signed int v52; // ecx@55
  signed int v53; // esi@58
  unsigned __int64 v54; // rax@62
  int v55; // esi@64
  signed int v56; // edi@65
  signed int v57; // edx@71
  unsigned __int64 v58; // rax@72
  unsigned __int64 v59; // rax@74
  int v60; // eax@74
  int v61; // eax@74
  unsigned __int64 v62; // rax@87
  int result; // eax@89
  int v64; // esi@89
  int v65; // edi@90
  signed int v66; // [sp+18h] [bp-4h]@27
  signed int v67; // [sp+18h] [bp-4h]@31
  signed int v68; // [sp+18h] [bp-4h]@35

  dword_4A9EA4 = dword_503500 - dword_4A7CFC;
  v0 = (dword_503500 - dword_4A7CFC) << 16;
  dword_4A7CFC = dword_503500;
  dword_4AA500 = sub_43B290(v0, 0x20000);
  v1 = 0;
  if ( dword_481E14 > 190 && !dword_4A7E0C[216 * dword_4A9EA8] )
  {
    dword_50A164 += dword_4A9EA4;
    dword_481E0C += dword_4A9EA4;
    dword_45EEC0 = dword_50A164 / 70 / 60;
    dword_45EEBC = dword_50A164 / 70 % 60;
    dword_462D74 = (unsigned __int64)((double)(dword_50A164 % 70) * 1.42);
    dword_45EA64 = dword_481E0C / 70 / 60;
    dword_463CD4 = dword_481E0C / 70 % 60;
    dword_45FC1C = (unsigned __int64)((double)(dword_481E0C % 70) * 1.42);
  }
  if ( dword_456AA0 < 64 )
    sub_413C90(0);
  v2 = 0;
  v3 = &unk_4AA940;
  do
  {
    copyBuffer2Screen((void *)(v2 + dword_464F14 + dword_456AA0 + 32), v3, 16);
    v3 = (char *)v3 + 64;
    v2 += 512;
  }
  while ( (signed int)v3 < (signed int)&unk_4ADB40 );
  v4 = dword_508D24;
  v5 = 0;
  if ( dword_508D24 > 0 )
  {
    v6 = 0;
    do
    {
      if ( dword_4A7E0C[216 * dword_508D44[v5]] )
      {
        sub_43B240((int)dword_4AA50C, 22, 28, v6 + dword_464F14 + dword_456AA0 + 39972);
        v4 = dword_508D24;
      }
      ++v5;
      v6 += 0x4000;
    }
    while ( v5 < v4 );
  }
  v7 = v4 - 1;
  if ( v7 < 3 )
  {
    v8 = 32 * v7;
    do
    {
      v9 = 0;
      do
      {
        for ( i = v9 % 2; i < 64; i += 2 )
          *(byte *)(dword_456AA0 + ((v8 + v9) << 9) + dword_464F14 + i + 53280) = 0;
        ++v9;
      }
      while ( v9 < 32 );
      v8 += 32;
    }
    while ( v8 < 96 );
  }
  sub_43B240((int)((char *)&unk_46E560 + 80 * numberOfLaps), 8, 10, dword_464F14 + dword_456AA0 + 46133);
  v11 = 1;
  v12 = 1;
  if ( dword_508D24 > 1 )
  {
    v13 = 0x4000;
    do
    {
      sub_43B240((int)((char *)&unk_46E560 + 80 * numberOfLaps), 8, 10, v13 + dword_464F14 + dword_456AA0 + 46138);
      ++v12;
      v13 += 0x4000;
    }
    while ( v12 < dword_508D24 );
  }
  sub_43B240(
    (int)((char *)&unk_46E560 + 80 * (unsigned __int8)byte_4A7E08[864 * dword_508D44[0]]),
    8,
    10,
    dword_464F14 + dword_456AA0 + 46114);
  v14 = dword_508D24;
  v15 = 1;
  if ( dword_508D24 > 1 )
  {
    v16 = 0x4000;
    do
    {
      sub_43B240(
        (int)((char *)&unk_46E560 + 80 * (unsigned __int8)byte_4A7E08[864 * dword_508D44[v15]]),
        8,
        10,
        v16 + dword_464F14 + dword_456AA0 + 46116);
      v14 = dword_508D24;
      ++v15;
      v16 += 0x4000;
    }
    while ( v15 < dword_508D24 );
    if ( dword_508D24 > 1 )
    {
      v17 = (unsigned __int64)(64.0 - ceil((double)dword_4A6898[37 * dword_508D48] * 0.0009765625) * 0.6369426751592356);
      HIDWORD(v17) = -(signed int)v17;
      v18 = -(signed int)v17;
      v66 = 9;
      do
      {
        memcpy((void *)(v18 + dword_464F14 + dword_456AA0 + 53344), (char *)damslidBpk + HIDWORD(v17) + 64, v17);
        HIDWORD(v17) += 64;
        v18 += 512;
        --v66;
      }
      while ( v66 );
      v14 = dword_508D24;
      v11 = 1;
      v1 = 0;
    }
  }
  if ( v14 > 2 )
  {
    v19 = (unsigned __int64)(64.0 - ceil((double)dword_4A6898[37 * dword_508D4C] * 0.0009765625) * 0.6369426751592356);
    HIDWORD(v19) = -(signed int)v19;
    v20 = -(signed int)v19;
    v67 = 9;
    do
    {
      memcpy((void *)(v20 + dword_464F14 + dword_456AA0 + 69728), (char *)damslidBpk + HIDWORD(v19) + 64, v19);
      HIDWORD(v19) += 64;
      v20 += 512;
      --v67;
    }
    while ( v67 );
    v14 = dword_508D24;
    v1 = 0;
    v11 = 1;
  }
  if ( v14 > 3 )
  {
    v21 = (unsigned __int64)(64.0 - ceil((double)dword_4A6898[37 * dword_508D50] * 0.0009765625) * 0.6369426751592356);
    HIDWORD(v21) = -(signed int)v21;
    v22 = -(signed int)v21;
    v68 = 9;
    do
    {
      memcpy((void *)(v22 + dword_464F14 + dword_456AA0 + 86112), (char *)damslidBpk + HIDWORD(v21) + 64, v21);
      HIDWORD(v21) += 64;
      v22 += 512;
      --v68;
    }
    while ( v68 );
    v11 = 1;
    v1 = 0;
  }
  sub_402510(dword_456AA0 + 1059, &byte_4A68C4[148 * dword_508D44[0]]);
  v23 = 1;
  if ( dword_508D24 > 1 )
  {
    v24 = 0x4000;
    do
    {
      sub_402510(v24 + dword_456AA0 + 37923, &byte_4A68C4[148 * dword_508D44[v23++]]);
      v24 += 0x4000;
    }
    while ( v23 < dword_508D24 );
  }
  v25 = (unsigned __int8)byte_4A7E09[864 * dword_508D48];
  dword_481BD0[0] = (unsigned __int8)byte_4A7E09[864 * dword_508D44[0]];
  dword_481BD4 = v25;
  v26 = (unsigned __int8)byte_4A7E09[864 * dword_508D50];
  dword_481BD8 = (unsigned __int8)byte_4A7E09[864 * dword_508D4C];
  dword_481BDC = v26;
  v27 = 0;
  do
  {
    v28 = dword_481BD0[v27];
    v29 = dword_46E8D0[v27];
    v32 = __OFSUB__(v28, v29);
    v30 = v28 == v29;
    v31 = v28 - v29 < 0;
    if ( v28 < v29 )
    {
      dword_4A8A90[v27] = 458752 * v29 - 458752;
      dword_4AA3F0[v27] = 7 * v28 - 7;
      v1 = 0;
      dword_4A7CC0[v27] = (v28 - v29) << 16;
      v32 = __OFSUB__(v28, v29);
      v30 = v28 == v29;
      v31 = v28 - v29 < 0;
    }
    if ( !((unsigned __int8)(v31 ^ v32) | v30) )
    {
      v33 = dword_46E8D0[v27];
      v34 = dword_481BD0[v27];
      dword_4A8A90[v27] = 458752 * dword_46E8D0[v27] - 458752;
      dword_4AA3F0[v27] = 7 * v34 - 7;
      dword_4A7CC0[v27] = (v34 - v33) << 16;
    }
    v35 = dword_4A7CC0[v27];
    if ( (signed int)((v35 + 0x8000) & 0xFFFF0000) <= 0 )
    {
      v40 = convertColorToPaletteColor(v35, dword_4AA500);
      v41 = dword_4AA3F0[v27];
      v42 = v40 + dword_4A8A90[v27];
      v43 = (v40 + dword_4A8A90[v27] + 0x8000) >> 16;
      dword_4A8A90[v27] = v42;
      if ( v43 < v41 )
        dword_4A8A90[v27] = 458752 * dword_481BD0[v27] - 458752;
    }
    else
    {
      v36 = convertColorToPaletteColor(v35, dword_4AA500);
      v37 = dword_4AA3F0[v27];
      v38 = v36 + dword_4A8A90[v27];
      v39 = (v36 + dword_4A8A90[v27] + 0x8000) >> 16;
      dword_4A8A90[v27] = v38;
      if ( v39 > v37 )
        dword_4A8A90[v27] = 458752 * dword_481BD0[v27] - 458752;
    }
    ++v27;
  }
  while ( v27 < 4 );
  sub_43B160(
    (int)((char *)&unk_503520 + 1024 * ((dword_4A8A90[0] + 0x8000) >> 16)),
    32,
    32,
    dword_464F14 + dword_456AA0 + 36928);
  v44 = 1;
  if ( dword_508D24 > 1 )
  {
    v45 = 0x4000;
    do
    {
      sub_43B160(
        (int)((char *)&unk_50B2C0 + 576 * ((dword_4A8A90[v44++] + 0x8000) >> 16)),
        24,
        24,
        v45 + dword_464F14 + dword_456AA0 + 41032);
      v45 += 0x4000;
    }
    while ( v44 < dword_508D24 );
  }
  v46 = (unsigned __int8)byte_4A7E09[864 * dword_508D48];
  v47 = dword_4A9EA8;
  dword_46E8D0[0] = (unsigned __int8)byte_4A7E09[864 * dword_508D44[0]];
  v48 = (unsigned __int8)byte_4A7E09[864 * dword_508D4C];
  dword_46E8D4 = v46;
  v49 = (unsigned __int8)byte_4A7E09[864 * dword_508D50];
  dword_46E8D8 = v48;
  v50 = *(float *)&dword_4A7DB0[216 * dword_4A9EA8];
  dword_46E8DC = v49;
  v51 = (unsigned __int64)(v50 / *(float *)&dword_4A6884[37 * dword_4A9EA8] * -162.0);
  v52 = 1 - v51;
  if ( v11 - (signed int)v51 < v11 )
    v52 = 1;
  if ( v52 < 162 )
  {
    v53 = v52;
    do
    {
      sub_43C7E0(
        dword_456AA0 + dword_464F14 + (dword_4B3160[v53] << 9) + dword_503240[v53] + 32,
        dword_503240[v53],
        32,
        33 - dword_4B3160[v53],
        v1);
      ++v53;
    }
    while ( v53 < 162 );
    v47 = dword_4A9EA8;
  }
  if ( dword_4A68AC[37 * v47] )
  {
    v54 = (unsigned __int64)((double)dword_4A68B0[37 * v47] * 0.000537109375);
    if ( (v54 & 0x80000000) != 0 )
      LOBYTE(v54) = 0;
    sub_43BEF0(0, (void *)(dword_464F14 + (unsigned __int8)v54 + dword_456AA0 + 24100), 55 - (unsigned __int8)v54, 3, 0);
    v55 = 0;
    if ( dword_4A68A8[37 * dword_4A9EA8] > 0 )
    {
      v56 = 21024;
      do
      {
        sub_43B240((int)dword_481E04, 8, 6, dword_456AA0 + v56 + dword_464F14);
        ++v55;
        v56 += 8;
      }
      while ( v55 < dword_4A68A8[37 * dword_4A9EA8] );
    }
  }
  else if ( dword_4A9EB0 <= 0 )
  {
    v57 = (signed int)(dword_481E0C / 70 + ((unsigned int)(-2004318071 * (dword_481E0C / 70)) >> 32)) >> 5;
    sub_402590((int)&unk_4A9160, 6, 6, v57 + ((unsigned int)v57 >> 31), 16, dword_456AA0 + 22587, -6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, dword_481E0C / 70 % 60, 16, dword_456AA0 + 22601, 6, 0);
    sub_402590(
      (int)&unk_4A9160,
      6,
      6,
      (unsigned __int64)((double)(dword_481E0C % 70) * 1.42),
      16,
      dword_456AA0 + 22615,
      6,
      0);
  }
  else
  {
    sub_402590((int)&unk_4A9160, 6, 6, dword_503224 / 70 / 60, 16, dword_456AA0 + 22587, -6, 0);
    sub_402590((int)&unk_4A9160, 6, 6, dword_503224 / 70 % 60, 16, dword_456AA0 + 22601, 6, 0);
    sub_402590(
      (int)&unk_4A9160,
      6,
      6,
      (unsigned __int64)((double)(dword_503224 % 70) * 1.42),
      16,
      dword_456AA0 + 22615,
      6,
      0);
    dword_4A9EB0 -= dword_4A9EA4;
    if ( dword_4A9EB0 < 0 )
      dword_4A9EB0 = 0;
  }
  v58 = (unsigned __int64)((double)dword_4A68B4[37 * dword_4A9EA8] * 0.000556640625);
  if ( (v58 & 0x80000000) != 0 )
    LOBYTE(v58) = 0;
  sub_43B3A0(dword_464F14 + (unsigned __int8)v58 + dword_456AA0 + 17444, 58 - (unsigned __int8)v58, 7, v1);
  v59 = (unsigned __int64)(100.0 - ceil((double)dword_4A6898[37 * dword_4A9EA8] * 0.0009765625));
  v60 = sub_402590((int)&unk_46E560, 8, 10, v59, 0, dword_456AA0 + 36398, -8, -16);
  sub_43B240((int)&unk_46E880, 8, 10, v60 + dword_464F14);
  v61 = dword_4A9EA8;
  if ( dword_4A6898[37 * dword_4A9EA8] < 20480 )
  {
    if ( !dword_456ADC )
    {
      loadMenuSoundEffect(2u, v11, 0, 0x10000, 327680);
      v61 = dword_4A9EA8;
    }
    dword_456ADC = 1;
  }
  if ( dword_4A6898[37 * v61] < 10240 )
  {
    if ( !dword_456AE0 )
    {
      loadMenuSoundEffect(2u, v11, 0, 0x10000, 327680);
      v61 = dword_4A9EA8;
    }
    dword_456AE0 = 1;
  }
  if ( !dword_4A6898[37 * v61] && !memcmp(&dword_4A7A60[84 * v61], &dword_441250, 0xBu) )
  {
    if ( !dword_456AE8 )
    {
      loadMenuSoundEffect(2u, 32, 0, 0x10000, 327680);
      v61 = dword_4A9EA8;
    }
    dword_456AE8 = 1;
  }
  v62 = (unsigned __int64)ceil((double)dword_4A6898[37 * v61] * 0.000048828125);
  if ( (v62 & 0x80000000) != 0 )
    LODWORD(v62) = 0;
  sub_43B160((int)((char *)&unk_4669C0 - 1344 * v62), 64, 21, dword_464F14 + dword_456AA0 + 25632);
  result = dword_508D24;
  v64 = 0;
  if ( dword_508D24 > 0 )
  {
    v65 = 0;
    do
    {
      if ( dword_4A6898[37 * dword_508D44[v64]] <= 0 )
        sub_43B240((int)dword_464F78, 64, 32, v65 + dword_464F14 + dword_456AA0 + 36896);
      result = dword_508D24;
      ++v64;
      v65 += 0x4000;
    }
    while ( v64 < dword_508D24 );
  }
  return result;
}

//----- (00414FC0) --------------------------------------------------------
int sub_414FC0()
{
  int result; // eax@1
  int v1; // eax@10
  int v2; // eax@11

  result = dword_481E14;
  if ( dword_481E14 > 10 && dword_481E14 <= 130 )
  {
    if ( !dword_456AD8 )
    {
      loadMenuSoundEffect(2u, 3, 0, 0x10000, 327680);
      dword_456AD8 = 1;
    }
    dword_464F64 = dword_464F64 - dword_4A9EA4 <= 0 ? 0 : dword_464F64 - dword_4A9EA4;
    sub_43B160((int)genlamBpk, 80, 60, dword_464F14 + dword_464F64 + 336);
    result = dword_481E14;
  }
  if ( result > 190 )
  {
    if ( dword_456AD4 == 1 )
    {
      if ( isMultiplayerGame )
      {
        sub_403960();
        sub_403D50();
        dword_4A7CF4 = 1;
      }
      dword_4A8D2C = 0;
      dword_503500 = 0;
      dword_4A7CFC = 0;
      dword_503510 = 0;
      dword_4A9EAC = 0;
      v1 = 216 * dword_4A9EA8;
      dword_4A7DA4[v1] = 0;
      dword_4A7DA0[v1] = 0;
      loadMenuSoundEffect(5u, 44, 0, 0x10000, 163840);
    }
    v2 = dword_464F64 + 2 * dword_4A9EA4;
    if ( dword_4A9EA4 + dword_464F64 > 80 )
      v2 = 80;
    dword_464F64 = v2;
    sub_43B160((int)((char *)genlamBpk + 9600), 80, 60, dword_464F14 + v2 + 336);
    result = dword_481E14;
    dword_456AD4 = 2;
  }
  if ( result > 130 && result <= 190 )
  {
    if ( !dword_456AD4 )
    {
      if ( isMultiplayerGame )
      {
        if ( dword_45E0A8 == 2 )
          sub_4039D0();
        else
          sub_403960();
      }
      loadMenuSoundEffect(5u, 44, 0, 0x10000, 0x20000);
    }
    dword_456AD4 = 1;
    result = sub_43B160((int)((char *)genlamBpk + 4800), 80, 60, dword_464F14 + 336);
  }
  return result;
}


//----- (004151C0) --------------------------------------------------------
void sub_4151C0()
{
  int v0; // eax@6
  signed int v1; // esi@8
  int v2; // esi@10
  int v3; // esi@12
  int v4; // eax@21
  int v5; // eax@1
  char v6; // cl@2
  char *v7; // edi@3
  char v8; // al@4

  v5 = 0;
  do
  {
    v6 = *((byte *)dword_45EA50 + v5);
    *(&byte_464F50 + v5++) = v6;
  }
  while ( v6 );
  v7 = &byte_464F50 - 1;
  do
    v8 = (v7++)[1];
  while ( v8 );
  *(_DWORD *)v7 = 1095778862;
  v7[4] = 0;
  sub_402CF0();
  sub_402EE0();
  sub_403050();
  loadEngineGraphics();
  sub_4034F0();
  sub_403190();
  sub_4032F0();
  sub_403410();
  extractFromBpa("ENGINE.BPA", textureTemp, "GEN-FLA.BPK");
  copyImageToBuffer((int)textureTemp, (int)genflaBpk);
  extractFromBpa("ENGINE.BPA", textureTemp, "GEN-LAM.BPK");
  copyImageToBuffer((int)textureTemp, (int)genlamBpk);
  loadEngineGraphics2();
  extractFromBpa("IBFILES.BPA", textureTemp, "BOARDS.BPK");
  if ( dword_4A68AC[37 * dword_4A9EA8] )
    v0 = 8704 * dword_4A9EA8;
  else
    v0 = 6656 * dword_4A9EA8 + 34816;
  decryptTexture((int)textureTemp, (int)&unk_4AA940, v0, 6656);
  v1 = 0;
  if ( !dword_4A9EA8 )
    v1 = 1;
  decryptTexture((int)textureTemp, (int)&unk_4AC340, 8704 * v1 + 6656, 2048);
  v2 = v1 + 1;
  if ( v2 == dword_4A9EA8 )
    ++v2;
  decryptTexture((int)textureTemp, (int)&unk_4ACB40, 8704 * v2 + 6656, 2048);
  v3 = v2 + 1;
  if ( v3 == dword_4A9EA8 )
    ++v3;
  decryptTexture((int)textureTemp, (int)&unk_4AD340, 8704 * v3 + 6656, 2048);
  extractFromBpa("IBFILES.BPA", textureTemp, "RASTI1.BPK");
  copyImageToBuffer((int)textureTemp, (int)dword_464F78);
  switch ( dword_4A6880[37 * dword_4A9EA8] )
  {
    case 0:
      extractFromBpa("IBFILES.BPA", textureTemp, "DAM-KUP.BPK");
      break;
    case 1:
      extractFromBpa("IBFILES.BPA", textureTemp, "DAM-PIC.BPK");
      break;
    case 2:
      extractFromBpa("IBFILES.BPA", textureTemp,"DAM-SED.BPK");
      break;
    case 3:
      extractFromBpa("IBFILES.BPA", textureTemp, "DAM-CAM.BPK");
      break;
    case 4:
      extractFromBpa("IBFILES.BPA", textureTemp, "DAM-POR.BPK");
      break;
    case 5:
      extractFromBpa("IBFILES.BPA", textureTemp, "DAM-LOT.BPK");
      break;
    default:
      break;
  }
  decryptTexture((int)textureTemp, (int)&unk_464F80, 8064 * dword_4A9EA8, 8064);
  extractFromBpa("IBFILES.BPA", textureTemp,"BIGNUM6.BPK");
  copyImageToBuffer((int)textureTemp, (int)&unk_46E560);
  extractFromBpa("IBFILES.BPA", textureTemp, "SMALFO4A.BPK");
  copyImageToBuffer((int)textureTemp, (int)&unk_4A9160);
  extractFromBpa("IBFILES.BPA", textureTemp,"POSNUM2.BPK");
  copyImageToBuffer((int)textureTemp, (int)&unk_50E440);
  extractFromBpa("IBFILES.BPA", textureTemp, "OWN-NUM1.BPK");
  copyImageToBuffer((int)textureTemp, (int)&unk_503520);
  extractFromBpa("IBFILES.BPA", textureTemp, "OTH-NUM1.BPK");
  copyImageToBuffer((int)textureTemp, (int)&unk_50B2C0);
  extractFromBpa("IBFILES.BPA", textureTemp, "GOALNUM2.BPK");
  copyImageToBuffer((int)textureTemp, (int)dword_4AA50C);
  extractFromBpa("IBFILES.BPA", textureTemp, "SIDEBOM1.BPK");
  copyImageToBuffer((int)textureTemp, (int)dword_481E04);
  extractFromBpa("IBFILES.BPA", textureTemp, "SMALLBAR.BPK");
  v4 = dword_4A9EA8;
  if ( !dword_4A68AC[37 * dword_4A9EA8] )
    v4 = dword_4A9EA8 + 4;
  decryptTexture((int)textureTemp, (int)byte_50E720, v4 << 11, 2048);
}


//----- (00415280) --------------------------------------------------------
int sub_415280()
{
  int result; // eax@1
  char v1; // al@2
  unsigned __int64 v2; // rax@2
  unsigned __int64 v3; // rax@2
  unsigned __int64 v4; // rax@2
  unsigned __int64 v5; // rax@2

  result = dword_4A8D2C;
  if ( dword_503500 >= dword_4A8D2C )
  {
    v1 = 8 * (LOBYTE(dword_4A7E0C[216 * dword_4A9EA8]) + 2 * byte_4A7E08[864 * dword_4A9EA8]);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = -2;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = dword_4A9EA8;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = dword_4A6898[37 * dword_4A9EA8] >> 4;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = dword_4A6898[37 * dword_4A9EA8] >> 12;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = dword_4A68B4[37 * dword_4A9EA8] >> 10;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = dword_4A68B0[37 * dword_4A9EA8] >> 10;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = LOBYTE(dword_4A68D0[37 * dword_4A9EA8]);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = v1;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = LOBYTE(dword_4A7D00[216 * dword_4A9EA8]);
    v2 = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_4A9EA8];
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = BYTE1(v2);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = (unsigned __int64)*(float *)&dword_4A7DB4[216 * dword_4A9EA8];
    v3 = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_4A9EA8];
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = BYTE1(v3);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = (unsigned __int64)*(float *)&dword_4A7DB8[216 * dword_4A9EA8];
    v4 = (unsigned __int64)*(float *)&dword_4A7E50[216 * dword_4A9EA8];
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = BYTE1(v4);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = (unsigned __int64)*(float *)&dword_4A7E50[216 * dword_4A9EA8];
    v5 = (unsigned __int64)*(float *)&dword_4A7E54[216 * dword_4A9EA8];
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = BYTE1(v5);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = (unsigned __int64)*(float *)&dword_4A7E54[216 * dword_4A9EA8];
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = LOBYTE(dword_4A7D0C[216 * dword_4A9EA8]);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = -1;
    dword_4A6AD4 = 1;
    nullsub_1();
    if ( dword_5034F4 > 0 )
    {
      sub_4138A0();
      dword_5034F4 = 0;
    }
    result = dword_45E0A8;
    dword_4A6AD4 = 0;
    switch ( dword_45E0A8 )
    {
      case 2:
        result = dword_503500 + 1;
        dword_4A8D2C = dword_503500 + 1;
        break;
      case 1:
        dword_4A8D2C = dword_503500 + 2;
        break;
      case 3:
      case 4:
        dword_4A8D2C = dword_503500 + 3;
        break;
    }
  }
  return result;
}


//----- (004156B0) --------------------------------------------------------
int sub_4156B0()
{
  int v0; // edi@1
  int v1; // ecx@1
  int v2; // eax@2

  v0 = dword_479D20;
  v1 = 0;
  dword_4AA928 = 0;
  if ( dword_479D20 > 0 )
  {
    v2 = (int)dword_4B4D04;
    do
    {
      *(_DWORD *)(v2 + 612) = *(_DWORD *)v2 * *(_DWORD *)v2 + *(_DWORD *)(v2 + 4) * *(_DWORD *)(v2 + 4);
      *(_DWORD *)(v2 + 616) = v1++;
      v2 += 3152;
    }
    while ( v1 < v0 );
    dword_4AA928 = v1;
  }
  return sub_4115C0(0, v0 - 1);
}


//----- (00415710) --------------------------------------------------------
void __cdecl sub_415710(int a1, int a2)
{
  int v2; // edx@2
  unsigned int v3; // eax@2
  int *v4; // ecx@3
  int v5; // esi@3
  int *v6; // ecx@6
  int v7; // esi@6
  int *v8; // ecx@10
  void *v9; // eax@14
  void *v10; // eax@18
  void *v11; // eax@22
  void *v12; // eax@26
  void *v13; // eax@30
  int v14; // eax@34
  void *v15; // eax@38
  void *v16; // eax@42
  void *v17; // eax@46
  void *v18; // eax@50
  void *v19; // eax@54
  void *v20; // eax@58
  void *v21; // eax@62
  void *v22; // eax@66
  void *v23; // eax@70
  void *v24; // eax@74
  void *v25; // eax@78
  void *v26; // eax@82
  void *v27; // eax@86
  void *v28; // eax@90
  void *v29; // eax@94
  void *v30; // eax@98
  void *v31; // eax@102
  void *v32; // eax@106
  void *v33; // eax@110
  void *v34; // eax@114
  void *v35; // eax@118
  void *v36; // eax@122
  void *v37; // eax@126
  void *v38; // eax@130
  void *v39; // eax@134
  void *v40; // eax@138
  int v41; // eax@142
  char v42; // cl@143
  char *v43; // edi@144
  char v44; // al@145
  int v45; // edx@154
  int v46; // edx@160
  int v47; // eax@161
  int *v48; // ecx@161
  void *v49; // eax@166
  int v50; // ebp@167
  int v51; // eax@169
  int v52; // eax@176
  int v53; // ecx@176
  int v54; // eax@181
  int v55; // ecx@181
  int v56; // ecx@184
  int v57; // eax@184
  int v58; // eax@196
  int v59; // ecx@196
  int v60; // edi@199
  int v61; // edi@201
  int v62; // eax@211
  int v63; // ecx@211
  int v64; // edi@214
  int v65; // esi@214
  unsigned __int64 v66; // rax@218
  int v67; // esi@223
  signed int v68; // ecx@226
  int v69; // ecx@237
  int v70; // eax@237
  int v71; // eax@248
  bool v72; // zf@248
  double v73; // st7@261
  int v74; // esi@263
  int v75; // edi@270
  int v76; // esi@271
  int v77; // edx@271
  int v78; // ecx@271
  char v79; // al@290
  int v80; // ebp@292
  char v81; // al@336
  int v82; // ebp@338
  int v83; // ecx@361
  int v84; // eax@361
  int v85; // ecx@369
  int v86; // eax@382
  char v87; // al@390
  int v88; // eax@398
  int v89; // eax@400
  int v90; // ecx@409
  signed int v91; // eax@409
  signed int v92; // eax@413
  bool v93; // sf@414
  unsigned __int8 v94; // of@414
  int v95; // ecx@416
  bool v96; // zf@420
  bool v97; // sf@420
  unsigned __int8 v98; // of@420
  char v99; // al@436
  char v100; // cl@453
  int v101; // edx@467
  _UNKNOWN *v102; // ecx@468
  int v103; // eax@468
  char v104; // [sp-14h] [bp-34h]@233
  char v105; // [sp-14h] [bp-34h]@242
  int v106; // [sp-Ch] [bp-2Ch]@233
  int v107; // [sp-Ch] [bp-2Ch]@241
  int v108; // [sp-8h] [bp-28h]@233
  int v109; // [sp-8h] [bp-28h]@241
  char v110; // [sp+Fh] [bp-11h]@144
  char v111[16]; // [sp+10h] [bp-10h]@143

  dword_4A9EA8 = a1;
  dword_508D24 = a2;
  sub_401060();
  sub_409A90();
  if ( isMultiplayerGame )
  {
    v2 = dword_508D24;
    v3 = 0;
    dword_4A7A38 = 0;
    if ( dword_508D24 > 0 )
    {
      v4 = &dword_4A68B8;
      v5 = dword_508D24;
      do
      {
        v3 += *v4;
        v4 += 37;
        --v5;
      }
      while ( v5 );
      dword_4A7A38 = v3;
      if ( dword_508D24 > 0 )
      {
        v6 = &dword_4A68BC;
        v7 = dword_508D24;
        do
        {
          v3 += *v6;
          v6 += 37;
          --v7;
        }
        while ( v7 );
        dword_4A7A38 = v3;
      }
    }
    dword_481BE8 = 0;
    if ( dword_508D24 > 0 )
    {
      v8 = &dword_4A68C0;
      dword_481BE8 = dword_508D24;
      do
      {
        v3 += *v8;
        v8 += 37;
        --v2;
      }
      while ( v2 );
      dword_4A7A38 = v3;
    }
    srand(v3);
    dword_4A7CF4 = 0;
    dword_50E540 = 1;
    dword_4A6B04 = 0;
    dword_47968C = 0;
    dword_4A8D2C = 0;
  }
  sub_43C7B0((int (*)(void))sub_4138A0);
  sub_409BF0();
 
  smokeBpk = v40;
  noMemExitScreen();
  dword_4A9140 = (int)exitCtrlAltDel;
  sub_4151C0();
  sub_409F90();
  sub_4022A0();
  sub_40A360();
  dword_481BE0 = 0;
  dword_4B3140 = 80;
  dword_464F64 = 80;
  sub_40A880();
  sub_43CBB0();
  sub_404920();
  stopSong();
  stopAndOpenMusic();
  nullsub_1();
  sub_43BEE0();
  sub_43C740();
  v41 = 0;
  do
  {
    v42 = *((byte *)dword_45EA50 + v41);
    v111[v41++] = v42;
  }
  while ( v42 );
  v43 = &v110;
  do
    v44 = (v43++)[1];
  while ( v44 );
  *(_DWORD *)v43 = 1398099245;
  *((_DWORD *)v43 + 1) = 1179468590;
  v43[8] = 0;
  loadMusic(1, (int)v111, 2, (int)"GEN-EFE.CMF");
  setMusicVolume(0);
  musicSetMasterVolume(configuration.masterVolume);
  musicSetVolume(configuration.musicVolume);
  nullsub_1();
  musicPlayMusic();
  setMusicVolume(0);
  nullsub_1();
  if ( !dword_445020 )
    musicSetMasterVolume(0);
  if ( !dword_445024 )
    musicSetVolume(0);
  sub_4049F0();
  if ( dword_456AA8 )
    sub_40A9A0();
  sub_409460();
  sub_4022A0();
  sub_409A90();
  loadMenuSoundEffect(1u, LOBYTE(dword_4A6880[37 * dword_4A9EA8]) + 25, 0, 0x10000, 163840);
  dword_503510 = 0;
  dword_4A9EAC = 0;
  dword_481E14 = 0;
  dword_481E0C = 0;
  dword_4A9EB0 = 0;
  dword_503224 = 0;
  dword_50A164 = 0;
  dword_4A6AD4 = 0;
  if ( dword_456B10 )
    dword_464F6C = 1;
  do
  {
    v45 = dword_4A9EAC;
    dword_4A7DA4[216 * dword_4A9EA8] = dword_4A7DA0[216 * dword_4A9EA8];
    dword_503510 = v45;
    dword_4A7A20 = 0;
    dword_4A9EAC = 0;
    if ( dword_456AE4 > 0 )
    {
      dword_456AE4 -= dword_4A9EA4;
      if ( dword_456AE4 <= 0 )
      {
        loadMenuSoundEffect(2u, 4, 0, 0x10000, 327680);
        dword_456AE4 = 0;
      }
    }
    if ( isMultiplayerGame && dword_4A7CF4 )
      sub_403E30();
    v46 = 0;
    dword_481BE8 = 0;
    if ( dword_503510 > 0 )
    {
      v47 = 216 * dword_4A9EA8;
      v48 = &dword_4A7DA4[216 * dword_4A9EA8];
      do
      {
        v93 = (*v48)-- - 1 < 0;
        if ( v93 )
          *v48 = 15;
        dword_4A7D1C[dword_503510 + v47 - v46++] = dword_4A7D60[v47 + *v48];
      }
      while ( v46 < dword_503510 );
      dword_481BE8 = v46;
    }
    sub_413500();
    v49 = malloc(0xAu);
    free(v49);
    sub_410220();
    if ( dword_503510 > 0 )
    {
      v50 = dword_508D24;
      while ( 1 )
      {
        v94 = __OFSUB__(dword_481E14 + 1, 190);
        v72 = dword_481E14 == 189;
        v93 = dword_481E14++ - 189 < 0;
        if ( (unsigned __int8)(v93 ^ v94) | v72 )
          goto LABEL_195;
        v51 = 0;
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          do
          {
            if ( dword_464F6C || v51 != dword_4A9EA8 && !isMultiplayerGame )
            {
              sub_40AFC0();
              v50 = dword_508D24;
            }
            v51 = dword_503518++ + 1;
          }
          while ( dword_503518 < v50 );
          if ( v50 > 0 )
          {
            v52 = (int)dword_4A7D14;
            v53 = v50;
            do
            {
              *(_DWORD *)v52 = 0;
              v52 += 864;
              --v53;
            }
            while ( v53 );
          }
        }
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          do
          {
            sub_40BAB0();
            v50 = dword_508D24;
            ++dword_503518;
          }
          while ( dword_503518 < dword_508D24 );
          if ( dword_508D24 > 0 )
          {
            v54 = (int)dword_4A7D18;
            v55 = dword_508D24;
            do
            {
              *(_DWORD *)v54 = 0;
              v54 += 864;
              --v55;
            }
            while ( v55 );
          }
        }
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          v56 = v50;
          v57 = (int)dword_4A7D1C;
          dword_503518 = v50;
          do
          {
            *(_DWORD *)v57 = 0;
            v57 += 864;
            --v56;
          }
          while ( v56 );
        }
        sub_40CD10();
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          do
          {
            sub_40F6A0();
            v50 = dword_508D24;
            ++dword_503518;
          }
          while ( dword_503518 < dword_508D24 );
        }
        if ( !isMultiplayerGame )
        {
          dword_503518 = 0;
          if ( v50 > 0 )
          {
            do
            {
              sub_410FA0();
              v50 = dword_508D24;
              ++dword_503518;
            }
            while ( dword_503518 < dword_508D24 );
          }
        }
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          do
          {
            sub_410B90();
            v50 = dword_508D24;
            ++dword_503518;
          }
          while ( dword_503518 < dword_508D24 );
        }
        dword_503518 = 0;
        if ( v50 > 0 )
          break;
LABEL_213:
        dword_503518 = 0;
        if ( v50 > 0 )
        {
          v64 = (int)dword_4A6898;
          v65 = (int)dword_4A7E98;
          dword_503518 = v50;
          do
          {
            if ( (*(_DWORD *)(v65 - 4) == 2 || *(_DWORD *)v65 == 2) && !*(_DWORD *)(v65 - 140) )
            {
              v66 = (unsigned __int64)((*(float *)(v65 - 156) * *(float *)(v65 - 156)
                                      + *(float *)(v65 - 152) * *(float *)(v65 - 152))
                                     * (double)(1024 - *(_DWORD *)(v64 + 4)));
              dword_50B2B0 = v66;
              if ( (signed int)v66 > 10000 )
              {
                LODWORD(v66) = 10000;
                dword_50B2B0 = 10000;
              }
              v93 = *(_DWORD *)v64 - (signed int)v66 < 0;
              *(_DWORD *)v64 -= v66;
              if ( v93 )
                *(_DWORD *)v64 = 0;
            }
            v65 += 864;
            v64 += 148;
            --v50;
          }
          while ( v50 );
        }
        v67 = 216 * dword_4A9EA8;
        if ( !dword_4A7D14[216 * dword_4A9EA8] && !dword_4A7D18[v67] && !dword_4A7D1C[v67] )
          goto LABEL_248;
        v68 = (unsigned __int64)(sqrt(*((float *)&unk_4A7DFC + 216 * dword_4A9EA8)
                                    * *((float *)&unk_4A7DFC + 216 * dword_4A9EA8) + *((float *)&unk_4A7E00
                                                                                     + 216 * dword_4A9EA8)
                                                                                   * *((float *)&unk_4A7E00
                                                                                     + 216 * dword_4A9EA8))
                               * 25000.0);
        dword_50B2B0 = v68;
        if ( v68 > 0x10000 )
        {
          v68 = 0x10000;
          dword_50B2B0 = 0x10000;
        }
        if ( dword_4A7D18[v67] || dword_4A7D1C[v67] )
        {
          if ( dword_503500 % 3 )
          {
            if ( dword_503500 % 3 == 1 )
            {
              v108 = 143360;
              v106 = v68;
              v104 = 13;
            }
            else
            {
              if ( dword_503500 % 3 != 2 )
                goto LABEL_237;
              v108 = 143360;
              v106 = v68;
              v104 = 16;
            }
          }
          else
          {
            v108 = 135168;
            v106 = v68;
            v104 = 11;
          }
          loadMenuSoundEffect(5u, v104, 0, v106, v108);
        }
LABEL_237:
        v69 = rand() % 24576;
        v70 = dword_4A7E90[216 * dword_4A9EA8];
        dword_481BE8 = v69;
        switch ( v70 )
        {
          case 0:
            if ( !(dword_503500 % 3) )
            {
              v109 = v69 + 139264;
              v107 = dword_50B2B0;
              v105 = 10;
              goto LABEL_247;
            }
            if ( dword_503500 % 3 == 1 )
              goto LABEL_244;
            if ( dword_503500 % 3 == 2 )
            {
              v109 = v69 + 139264;
              v107 = dword_50B2B0;
              goto LABEL_246;
            }
            break;
          case 1:
            v109 = v69 + 139264;
            v107 = dword_50B2B0;
            v105 = 11;
            goto LABEL_247;
          case 2:
LABEL_244:
            v109 = v69 + 139264;
            v107 = dword_50B2B0;
            v105 = 15;
            goto LABEL_247;
          case 3:
            v109 = v69 + 139264;
            v107 = dword_50B2B0;
LABEL_246:
            v105 = 16;
LABEL_247:
            loadMenuSoundEffect(5u, v105, 0, v107, v109);
            break;
          default:
            break;
        }
LABEL_248:
        v71 = dword_4AA92C;
        v72 = dword_4AA92C == 0;
        if ( dword_4AA92C > 0 )
        {
          if ( !dword_456AD0
            && dword_4A6898[37 * dword_4A9EA8] > 0
            && !dword_4A7E0C[216 * dword_4A9EA8]
            && dword_456AD4 == 2 )
          {
            loadMenuSoundEffect(6u, 37, 0, dword_4AA92C, 163840);
            v71 = dword_4AA92C;
            dword_456AD0 = 1;
          }
          v72 = v71 == 0;
        }
        if ( v72 && dword_456AD0 == 1 )
        {
          sub_43C3E0(6u);
          dword_456AD0 = 0;
        }
        v72 = dword_4A6898[37 * dword_4A9EA8] == 0;
        v93 = dword_4A6898[37 * dword_4A9EA8] < 0;
        dword_4AA92C = 0;
        if ( v93 || v72 || dword_4A7E0C[216 * dword_4A9EA8] )
        {
          sub_43C3E0(1u);
          sub_43C3E0(6u);
        }
        v73 = *(float *)&dword_4A7DB0[216 * dword_4A9EA8] / *(float *)&dword_4A6884[37 * dword_4A9EA8];
        if ( v73 < 0.0 )
          v73 = -v73;
        dword_445034 = (unsigned __int64)((double)(5 * dword_4A7EA0[216 * dword_4A9EA8]) * v73
                                        + (double)(dword_4A7E9C[216 * dword_4A9EA8] + 163840));
        sub_43C1B0(1u, 0x10000, dword_445034);
        sub_411D10();
        sub_412DF0();
        v74 = isMultiplayerGame;
        if ( !isMultiplayerGame || !dword_4A6B04 )
          sub_413380();
        if ( !v74 && (dword_4A7E0C[216 * dword_4A9EA8] || dword_4A6898[37 * dword_4A9EA8] <= 0) )
          ++dword_4AA508;
        v50 = dword_508D24;
        v75 = 0;
        dword_4A7A38 = 0;
        dword_503518 = 0;
        if ( dword_508D24 > 0 )
        {
          v76 = dword_508D24;
          v77 = (int)dword_4A6898;
          v78 = (int)dword_4A7E0C;
          dword_503518 = dword_508D24;
          do
          {
            if ( *(float *)(v78 - 92) <= 0.5 && (*(_DWORD *)v78 || *(_DWORD *)v77 <= 0) )
              ++v75;
            v78 += 864;
            v77 += 148;
            --v76;
          }
          while ( v76 );
          dword_4A7A38 = v75;
        }
        if ( v75 >= dword_508D24 - 1 )
          ++dword_4AA508;
        --dword_503510;
        ++dword_4A7A20;
        if ( dword_503510 <= 0 )
          goto LABEL_281;
      }
      do
      {
        sub_40E180();
        v50 = dword_508D24;
        ++dword_503518;
      }
      while ( dword_503518 < dword_508D24 );
LABEL_195:
      if ( v50 > 0 )
      {
        v58 = (int)dword_4A7E94;
        v59 = v50;
        do
        {
          if ( *(_DWORD *)v58 > 0 )
            --*(_DWORD *)v58;
          v60 = *(_DWORD *)(v58 + 4);
          if ( v60 > 0 )
            *(_DWORD *)(v58 + 4) = v60 - 1;
          v61 = *(_DWORD *)(v58 - 24);
          if ( v61 > 0 )
            *(_DWORD *)(v58 - 24) = v61 - 1;
          if ( *(_DWORD *)(v58 - 384) == 1 )
            *(_DWORD *)v58 += 2;
          if ( *(_DWORD *)(v58 - 380) == 1 )
          {
            *(_DWORD *)(v58 - 224) = *(_DWORD *)(v58 - 68);
            *(_DWORD *)(v58 + 4) += 2;
          }
          if ( *(_DWORD *)(v58 - 376) == 1 )
          {
            *(_DWORD *)(v58 - 220) = *(_DWORD *)(v58 - 64);
            *(_DWORD *)(v58 + 4) += 2;
          }
          v58 += 864;
          --v59;
        }
        while ( v59 );
        if ( v50 > 0 )
        {
          v62 = (int)dword_4A7E50;
          v63 = v50;
          do
          {
            *(_DWORD *)v62 = *(_DWORD *)(v62 - 156);
            *(_DWORD *)(v62 + 4) = *(_DWORD *)(v62 - 152);
            *(_DWORD *)(v62 + 8) = *(_DWORD *)(v62 - 164);
            v62 += 864;
            --v63;
          }
          while ( v63 );
        }
      }
      goto LABEL_213;
    }
LABEL_281:
    if ( isMultiplayerGame )
    {
      if ( dword_4A7CF4 )
        sub_415280();
    }
    else if ( dword_4A6880[0] != 6 )
    {
      sub_40B920();
    }
    if ( byte_45E118 )
      sub_4092B0();
    if ( byte_45E0FB && !isMultiplayerGame )
    {
      v79 = 0;
      dword_456C28 = 0;
      dword_481BE8 = 0;
      do
      {
        sub_43C3E0(v79 + 1);
        v79 = dword_481BE8 + 1;
        v94 = __OFSUB__(dword_481BE8 + 1, 14);
        v93 = dword_481BE8++ - 13 < 0;
      }
      while ( v93 ^ v94 );
      v80 = sub_43C1F0() & 0xFF00;
      if ( !memcmp(dword_45EA50, "TR0", 4u) )
        musicSetOrder(7680);
      if ( !memcmp(dword_45EA50, "TR1", 4u) )
        musicSetOrder(14080);
      if ( !memcmp(dword_45EA50, "TR2", 4u) )
        musicSetOrder(11520);
      if ( !memcmp(dword_45EA50, "TR3", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR4", 4u) )
        musicSetOrder(11520);
      if ( !memcmp(dword_45EA50, "TR5", 4u) )
        musicSetOrder(14080);
      if ( !memcmp(dword_45EA50, "TR6", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR7", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR8", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR9", 4u) )
        musicSetOrder(12800);
      setMusicVolume(0x8000);
      sub_407330();
      musicSetOrder(v80);
      setMusicVolume(0x10000);
      loadMenuSoundEffect(1u, LOBYTE(dword_4A6880[37 * dword_4A9EA8]) + 25, 0, 0x10000, 163840);
    }
    if ( dword_46F200 )
      goto LABEL_316;
    if ( byte_45E0CF )
    {
      dword_46F200 = 1;
      dword_445028 = dword_445028 == 0;
LABEL_316:
      if ( byte_45E0CF )
        goto LABEL_318;
    }
    dword_46F200 = 0;
LABEL_318:
    if ( dword_4A6898[37 * dword_4A9EA8] <= 0 )
      dword_445028 = 1;
    if ( byte_45E0FC )
    {
      if ( dword_445020 )
      {
        dword_445020 = 0;
        musicSetMasterVolume(0);
      }
      else
      {
        dword_445020 = 1;
        musicSetMasterVolume(configuration.masterVolume);
      }
      byte_45E0FC = 0;
    }
    if ( byte_45E0FD )
    {
      if ( dword_445024 )
      {
        dword_445024 = 0;
        musicSetVolume(0);
      }
      else
      {
        dword_445024 = 1;
        musicSetVolume(configuration.musicVolume);
      }
      byte_45E0FD = 0;
    }
    if ( byte_45E0FE )
    {
      byte_45E0FE = 0;
      dword_44502C = dword_44502C == 0;
    }
    if ( byte_45E0FF )
    {
      byte_45E0FF = 0;
      dword_445030 = dword_445030 == 0;
    }
    if ( byte_45E0D9 && !isMultiplayerGame )
    {
      v81 = 0;
      dword_456C28 = 0;
      dword_481BE8 = 0;
      do
      {
        sub_43C3E0(v81 + 1);
        v81 = dword_481BE8 + 1;
        v94 = __OFSUB__(dword_481BE8 + 1, 14);
        v93 = dword_481BE8++ - 13 < 0;
      }
      while ( v93 ^ v94 );
      v82 = sub_43C1F0() & 0xFF00;
      if ( !memcmp(dword_45EA50, "TR0", 4u) )
        musicSetOrder(7680);
      if ( !memcmp(dword_45EA50, "TR1", 4u) )
        musicSetOrder(14080);
      if ( !memcmp(dword_45EA50, "TR2", 4u) )
        musicSetOrder(11520);
      if ( !memcmp(dword_45EA50, "TR3", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR4", 4u) )
        musicSetOrder(11520);
      if ( !memcmp(dword_45EA50, "TR5", 4u) )
        musicSetOrder(14080);
      if ( !memcmp(dword_45EA50, "TR6", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR7", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR8", 4u) )
        musicSetOrder(12800);
      if ( !memcmp(dword_45EA50, "TR9", 4u) )
        musicSetOrder(12800);
      setMusicVolume(0x8000);
      memcpy(dword_479690, genmesBpk, 0x3C90u);
      sub_406410(0, 0, "                                ");
      sub_406410(0, 1, "                                ");
      sub_406410(0, 2, "                                ");
      sub_406410(0, 3, "     G A M E   P A U S E D !    ");
      sub_406410(0, 4, "                                ");
      sub_406410(0, 5, "                                ");
      sub_406410(0, 6, "                                ");
      sub_406410(0, 7, "                                ");
      sub_406410(0, 8, "    PRESS ENTER TO CONTINUE     ");
      sub_4064A0(0);
      if ( dword_456AA4 == 1 )
        memset((void *)screenPtr, 0, 0xFA00u);
      musicSetOrder(v82);
      setMusicVolume(0x10000);
      loadMenuSoundEffect(1u, LOBYTE(dword_4A6880[37 * dword_4A9EA8]) + 25, 0, 0x10000, 163840);
    }
    sub_40D560();
    sub_40D6B0();
    v83 = dword_464F40;
    v84 = 0;
    dword_4A7A38 = 0;
    dword_481BE8 = 0;
    do
    {
      copyBuffer2Screen(
        (void *)(dword_464F14 + dword_456AA0 + v84 + 96),
        (char *)dword_5034F8 + dword_456ABC + v83 * dword_456AC0 + dword_4A7A38,
        (dword_445010 >> 2) + 1);
      v83 = dword_464F40;
      v84 = dword_481BE8 + 512;
      v94 = __OFSUB__(dword_481BE8 + 512, 102400);
      v93 = dword_481BE8 - 101888 < 0;
      dword_481BE8 += 512;
      dword_4A7A38 += dword_464F40;
    }
    while ( v93 ^ v94 );
    if ( !isMultiplayerGame )
      LOBYTE(v84) = sub_4111F0();
    for ( dword_503518 = 0; dword_503518 < dword_508D24; ++dword_503518 )
    {
      sub_40F070(v84);
      v84 = dword_503518 + 1;
    }
    sub_40D920();
    sub_40FE20();
    if ( dword_445030 )
      sub_40D7B0();
    v85 = dword_508D24;
    for ( dword_503518 = 0; dword_503518 < dword_508D24; ++dword_503518 )
    {
      sub_40E960();
      v85 = dword_508D24;
    }
    dword_503518 = 0;
    if ( v85 > 0 )
    {
      do
      {
        sub_40F450();
        ++dword_503518;
      }
      while ( dword_503518 < dword_508D24 );
    }
    sub_4156B0();
    sub_4116D0();
    for ( dword_503518 = 0; dword_503518 < dword_508D24; ++dword_503518 )
      sub_40EBC0();
    sub_410050();
    if ( !isMultiplayerGame )
      sub_4136C0();
    if ( dword_481E14 < 290 )
      sub_414FC0();
    if ( dword_445010 == 320 )
      sub_414110(0);
    else
      sub_414220();
    v86 = 0;
    for ( dword_503518 = 0; v86 < dword_508D24; dword_503518 = v86 )
    {
      if ( byte_4A7E09[864 * v86] == 1 && dword_456AC8 )
      {
        sub_402490();
        v86 = dword_503518;
      }
      ++v86;
    }
    if ( dword_4AA508 > 300 )
    {
      dword_456C28 = 0;
      if ( isMultiplayerGame )
        dword_4A7CF4 = 0;
      v87 = 0;
      dword_481BE8 = 0;
      do
      {
        sub_43C3E0(v87 + 1);
        v87 = dword_481BE8 + 1;
        v94 = __OFSUB__(dword_481BE8 + 1, 14);
        v93 = dword_481BE8++ - 13 < 0;
      }
      while ( v93 ^ v94 );
      loadMenuSoundEffect(2u, 5, 0, 0x10000, 327680);
      memcpy(dword_479690, genmesBpk, 0x3C90u);
      sub_406410(0, 0, "                                ");
      sub_406410(0, 1, "                                ");
      sub_406410(0, 2, "                                ");
      sub_406410(0, 3, "      R A C E    O V E R !      ");
      sub_406410(0, 4, "                                ");
      sub_406410(0, 5, "                                ");
      sub_406410(0, 6, "                                ");
      sub_406410(0, 7, "                                ");
      sub_406410(0, 8, "    PRESS ENTER TO CONTINUE     ");
      if ( dword_456B10 )
        sub_4064A0(1);
      else
        sub_4064A0(0);
      dword_464F68 = 1;
    }
    dword_481BE8 = waitWithDelay();
    while ( dword_481BE8 == waitWithDelay() )
      ;
    v88 = dword_4A9EA8;
    if ( dword_4A8050[216 * dword_4A9EA8] > 0 )
    {
      if ( !dword_456AA4 || (sub_405430(), !dword_456AA4) )
        sub_404730();
    }
    else
    {
      if ( !dword_456AA4 )
      {
        v89 = 0;
        dword_4A7A38 = 0;
        dword_481BE8 = 0;
        do
        {
          copyBuffer2Screen((void *)(v89 + screenPtr), (const void *)(dword_464F14 + dword_4A7A38 + 96), 80);
          v89 = dword_481BE8 + 320;
          v94 = __OFSUB__(dword_481BE8 + 320, 64000);
          v93 = dword_481BE8 - 63680 < 0;
          dword_481BE8 += 320;
          dword_4A7A38 += 512;
        }
        while ( v93 ^ v94 );
        v88 = dword_4A9EA8;
      }
      if ( dword_456AA4 == 1 )
      {
        sub_405430();
        v88 = dword_4A9EA8;
      }
      dword_4A8050[216 * v88] = 0;
    }
    v90 = dword_4A9EA4;
    v91 = (signed int)dword_4A8050;
    dword_503518 = 4;
    do
    {
      if ( *(_DWORD *)v91 > 0 )
        *(_DWORD *)v91 -= v90;
      v91 += 864;
    }
    while ( v91 < (signed int)&unk_4A8DD0 );
    v92 = dword_445010;
    if ( dword_445028 )
    {
      v94 = __OFSUB__(dword_445010, 256);
      v93 = dword_445010 - 256 < 0;
      if ( dword_445010 > 256 )
      {
        if ( !dword_456AA4 )
        {
          v95 = -v90;
          v92 = dword_445010 + 4 * v95;
          dword_445010 += 4 * v95;
        }
        v94 = __OFSUB__(v92, 256);
        v93 = v92 - 256 < 0;
      }
      if ( v93 ^ v94 )
      {
        v92 = 256;
LABEL_426:
        dword_445010 = v92;
        goto LABEL_427;
      }
    }
    else
    {
      v98 = __OFSUB__(dword_445010, 320);
      v96 = dword_445010 == 320;
      v97 = dword_445010 - 320 < 0;
      if ( dword_445010 < 320 )
      {
        if ( !dword_456AA4 )
        {
          v92 = dword_445010 + 2 * v90;
          dword_445010 += 2 * v90;
        }
        v98 = __OFSUB__(v92, 320);
        v96 = v92 == 320;
        v97 = v92 - 320 < 0;
      }
      if ( !((unsigned __int8)(v97 ^ v98) | v96) )
      {
        v92 = 320;
        goto LABEL_426;
      }
    }
LABEL_427:
    dword_445014 = v92 >> 1;
    dword_456AA0 = 320 - v92;
    if ( isMultiplayerGame )
    {
      if ( !byte_45E0C1[0] && !dword_47968C || dword_481E14 <= 200 )
        goto LABEL_458;
    }
    else if ( !byte_45E0C1[0] )
    {
      goto LABEL_460;
    }
    dword_456C28 = 0;
    if ( isMultiplayerGame )
    {
      dword_4A7CF4 = 0;
      if ( !dword_47968C )
        nullsub_1();
    }
    dword_464F68 = -1;
    v99 = 0;
    memcpy(dword_479690, genmesBpk, 0x3C90u);
    dword_481BE8 = 0;
    do
    {
      sub_43C3E0(v99 + 1);
      v99 = dword_481BE8 + 1;
      v94 = __OFSUB__(dword_481BE8 + 1, 14);
      v93 = dword_481BE8++ - 13 < 0;
    }
    while ( v93 ^ v94 );
    if ( isMultiplayerGame && dword_47968C )
    {
      sub_406410(0, 0, "                                ");
      sub_406410(0, 1, "                                ");
      sub_406410(0, 2, " S O M E O N E   I S   A B O U T");
      sub_406410(0, 3, "   T O   A B O R T   R A C E !  ");
      sub_406410(0, 4, "                                ");
      sub_406410(0, 5, "                                ");
      sub_406410(0, 6, "                                ");
      sub_406410(0, 7, "  WAITING FOR SIGNAL FROM HOST  ");
      sub_406410(0, 8, "                                ");
      sub_406D30(1);
    }
    else
    {
      sub_406410(0, 0, "                                ");
      sub_406410(0, 1, "                                ");
      sub_406410(0, 2, "                                ");
      if ( dword_456B10 )
        sub_406410(0, 3, "      A B O R T   D E M O !     ");
      else
        sub_406410(0, 3, "      A B O R T   R A C E !     ");
      sub_406410(0, 4, "                                ");
      sub_406410(0, 5, "             Y / N              ");
      sub_406410(0, 6, "                                ");
      sub_406410(0, 7, "                                ");
      sub_406410(0, 8, "                                ");
    }
    if ( !isMultiplayerGame )
      goto LABEL_473;
    if ( !dword_47968C )
      sub_406D30(0);
    if ( !isMultiplayerGame )
LABEL_473:
      sub_4064A0(0);
    if ( dword_464F68 == 1 )
    {
      if ( !isMultiplayerGame )
      {
        sub_413300();
        dword_456B10 = 0;
        goto LABEL_460;
      }
      goto LABEL_458;
    }
    v100 = LOBYTE(dword_4A6880[37 * dword_4A9EA8]) + 25;
    dword_464F68 = 0;
    loadMenuSoundEffect(1u, v100, 0, 0x10000, 163840);
    if ( dword_456AA4 == 1 )
      memset((void *)screenPtr, 0, 0xFA00u);
    if ( isMultiplayerGame )
    {
      if ( !dword_464F68 )
      {
        dword_4A7CF4 = 1;
        dword_47968C = 0;
      }
LABEL_458:
      if ( dword_4A6B04 == 1 )
      {
        dword_456C28 = 0;
        dword_4A7CF4 = 0;
        nullsub_1();
        dword_464F68 = -1;
        memcpy(dword_479690, genmesBpk, 0x3C90u);
        sub_406410(0, 0, "                                ");
        sub_406410(0, 1, "                                ");
        sub_406410(0, 2, "     M U L T I P L A Y E R      ");
        sub_406410(0, 3, "      C O N N E C T I O N       ");
        sub_406410(0, 4, "           L O S T !            ");
        sub_406410(0, 5, "                                ");
        sub_406410(0, 6, "                                ");
        sub_406410(0, 7, "                                ");
        sub_406410(0, 8, "      PRESS ENTER TO ABORT      ");
        sub_406D30(0);
        dword_464F68 = 1;
        dword_4A7AA4 = -1;
      }
    }
LABEL_460:
    ++dword_456ACC;
    if ( dword_456ACC == 1 )
    {
      dword_456C28 = 0;
      sub_404C30();
      if ( !isMultiplayerGame )
      {
        if ( dword_464F44 )
        {
          memcpy(dword_479690, genmesBpk, 0x3C90u);
          sub_406410(0, 0, "     WELCOME TO DEATH RALLY!    ");
          sub_406410(0, 1, "                                ");
          sub_406410(0, 2, " PRESS                          ");
          sub_406410(0, 3, "    F1-INFO SCREEN              ");
          sub_406410(0, 4, "     P-PAUSE                    ");
          sub_406410(0, 5, "   TAB-TOGGLE STATUS BAR        ");
          sub_406410(0, 6, "   ESC-ABORT RACE               ");
          sub_406410(0, 7, "                                ");
          sub_406410(0, 8, "    PRESS ENTER TO CONTINUE     ");
          if ( dword_456B10 )
            sub_4064A0(1);
          else
            sub_4064A0(0);
        }
      }
    }
    dword_456C28 = 0;
    waitWithDelay();
    dword_456C28 = 1;
  }
  while ( !dword_464F68 );
  dword_456C28 = 0;
  sub_4055A0();
  memset((void *)screenPtr, 0, 0xFA00u);
  v101 = dword_508D24;
  dword_503518 = 0;
  if ( dword_508D24 > 0 )
  {
    v102 = &unk_4A68D4;
    v103 = (int)byte_4A7E09;
    dword_503518 = dword_508D24;
    do
    {
      *(_DWORD *)v102 = *(byte *)v103;
      v103 += 864;
      v102 = (char *)v102 + 148;
      --v101;
    }
    while ( v101 );
  }
  sub_43C730();
  stopSong();
  stopAndOpenMusic();
  sub_402240();
  free(dword_5034F8);
  free(dword_50A16C);
  free(dword_5034D0);
  free(dword_4AA920);
  free(dword_4A7A28);
  free((void *)(dword_464F14 - 512));
  free(dword_5034FC);
  free(genflaBpk);
  free(dword_481E04);
  free(genlamBpk);
  free(damslidBpk);
  free(genmesBpk);
  free(dword_479690);
  free(dword_464F78);
  free(dword_4AA50C);
  free(flame1Bpk);
  free(flame2Bpk);
  free(flame3Bpk);
  free(flame4Bpk);
  free(flame5Bpk);
  free(flame6Bpk);
  free(mines1aBpk);
  free(blowiBpk);
  free(shotsBpk);
  free(obstacleBpk);
  free(pedestrBpk);
  free(splat3Bpk);
  free(splat4Bpk);
  free(rocket1Bpk);
  free(rocket2Bpk);
  free(burn1aBpk);
  free(smokeBpk);
  free(dword_4A6854);
  free(dword_46F204);
  byte_45E0C1[0] = 0;
}

//----- (00417B90) --------------------------------------------------------
int __cdecl getFileSizeFromBpa(char *bpaFile, char * filename)
{
  char  v2; // ebp@1
  FILE *v3; // esi@1
  signed int i; // ecx@1
  int fileOrd; // edi@3
  const char *headerOffset; // ebp@4
  unsigned int v7; // eax@9
  char *v8; // edi@9
  char v9; // cl@10
  char *v10; // edi@11
  char v11; // al@12
  unsigned int v12; // eax@13
  char *v13; // edi@13
  char v14; // cl@14
  char *v15; // edi@15
  char v16; // al@16
  FILE *bpa; // esi@18
  __int32 fileHeaderStart; // eax@18
  int *v19; // ecx@19
  int v20; // edx@19
  int filseSize; // edi@21
  int DstBuf; // [sp+14h] [bp-64h]@1
  char fileNameUpper[16]; // [sp+18h] [bp-60h]@1
  int v25; // [sp+28h] [bp-50h]@9
  int v26; // [sp+2Ch] [bp-4Ch]@9
  int v27; // [sp+30h] [bp-48h]@9
  int v28; // [sp+34h] [bp-44h]@9

  v2 = filename;
  strcpy(fileNameUpper, (const char *)filename);
  v3 = fopen(bpaFile, "rb");
  fread(&DstBuf, 4u, 1u, v3);
  fread(&unk_463E20, 0x10EFu, 1u, v3);
  fclose(v3);
  strupr(fileNameUpper);
  //aqui se codifica para leer la cabecera
  for ( i = 0; i < (signed int)strlen(fileNameUpper); ++i )
	  fileNameUpper[i] += 3 * (39 - i);
  fileOrd = 0;
  if ( DstBuf <= 0 )
  {
LABEL_9:
    v25 = 1651470928;
    v28 = 5972072;
    v27 = 1953068832;
    v26 = 1936549228;
    v7 = strlen(bpaFile) + 1;
    v8 = &fileNameUpper[15];
    do
      v9 = (v8++)[1];
    while ( v9 );
    memcpy(v8, bpaFile, v7);
    v10 = &fileNameUpper[15];
    do
      v11 = (v10++)[1];
    while ( v11 );
    *(_WORD *)v10 = 8285;
    v10[2] = 0;
    v12 = strlen((const char *)v2) + 1;
    v13 = &fileNameUpper[15];
    do
      v14 = (v13++)[1];
    while ( v14 );
    memcpy(v13, (const void *)v2, v12);
    v15 = &fileNameUpper[15];
    do
      v16 = (v15++)[1];
    while ( v16 );
    *(_DWORD *)v15 = 1818846752;
    *((_WORD *)v15 + 2) = 8549;
    v15[6] = 0;
    errorExitScreen((int)&v25);
  }
  headerOffset = (const char *)&unk_463E20;
  while ( strcmp(headerOffset, fileNameUpper) || fileOrd == -1 )
  {
    ++fileOrd;
	headerOffset += 17;
    if (fileOrd >= DstBuf )
    {
	 //salimos con error		
      v2 = filename;
      goto LABEL_9;
    }
  }
  bpa = fopen(bpaFile, "rb");
  fseek(bpa, 4339, 0);
  fileHeaderStart = 17;
  if (fileOrd > 0 )
  {
    //v19 = &dword_463E2D; -> apunta a la primera posicion de tamao de la cabecera deberia ser 18
	 fileHeaderStart = 17;
    v20 = fileOrd;
    do
    {
		//fileHeaderStart += *v19;
		fileHeaderStart = fileHeaderStart + 17;
      --v20;
    }
    while ( v20 );
  }
  fseek(bpa, fileHeaderStart, 0);
  fread(&filseSize, 4u, 1u, bpa);
  
 // filseSize = *(int *)((char *)&dword_463E2D + 17 * fileOrd);
  fclose(bpa);
  return filseSize;
}
// 463E2D: using guessed type int dword_463E2D;
// 417B90: using guessed type char Str[16];

//----- (00417DF0) --------------------------------------------------------
int __cdecl getSizeMusic(char * music)
{
  return getFileSizeFromBpa("MUSICS.BPA", music);
}

//----- (00417E10) --------------------------------------------------------
void *__cdecl getMusicStream(char* musicName)
{
  size_t v1; // eax@1
  unsigned int v2; // edi@1
  int v3; // eax@1
  char *fileContent; // ebp@1
  unsigned int filePos; // ebx@1
  int v6; // esi@2
  char v7; // dl@2

  v1 = getFileSizeFromBpa("MUSICS.BPA", musicName);
  v2 = v1;
  fileContent = malloc(v1);
  	//TODO correct
  //operator delete(v1);
  
  //fileContent = &v3;
  
   extractFromBpa("MUSICS.BPA", fileContent, musicName);
  filePos = 0;
  if ( v2 )
  {
    do
    {
		v6 = (byte)fileContent[filePos];
		char a1 = v6;
		int a2 = filePos % 7;
		int result = (byte)a1 << a2;
		(byte)v6 = result | (byte)a1 >> (8 - a2);
		v6 = -109 - (17 * filePos) + (byte)v6;
		v6 = (byte)v6;
		
		fileContent[filePos] = v6;
		++filePos;

    }
    while (filePos < v2 );
  }
  return fileContent;
}

//----- (00417E80) --------------------------------------------------------
int configJoystick()
{
  int result; // eax@1

  result = configuration.useJoystick;
  if ( configuration.useJoystick > 0 )
  {
    result = SDLConfigureJoystick();
    dword_4AA3E0 = 0;
    dword_4A9EA0 = 0;
  }
  return result;
}
// 417E80: using guessed type int configJoystick(void);
// 45EA00: using guessed type int configuration.useJoystick;
// 4A9EA0: using guessed type int dword_4A9EA0;
// 4AA3E0: using guessed type int dword_4AA3E0;

//----- (00417EB0) --------------------------------------------------------
char eventDetected()
{
  char v0; // bl@1
  int v1; // eax@1
  int ticks; // eax@13
  int v3; // edi@13
  char v4; // cl@17
  char result; // al@39
  int v6; // ecx@40

  v0 = sub_43B2E0();
  v1 = dword_456B04;
  if ( dword_456B08 )
  {
    *(byte *)(dword_456B04 + dword_463E08) = v0;
    v1 = dword_456B04++ + 1;
  }
  if ( dword_456B0C )
  {
    if ( *(byte *)(v1 + dword_463E08) == 69
      && *(byte *)(v1 + dword_463E08 + 1) == 78
      && *(byte *)(v1 + dword_463E08 + 2) == 68 )
      dword_456B0C = 0;
    v0 = *(byte *)(v1 + dword_463E08);
    dword_456B04 = v1 + 1;
  }
  if ( dword_456B10 )
    v0 = 28;
  if ( configuration.useJoystick <= 0 )
    return v0;
  SDLConfigureJoystick();
  if ( configuration.useJoystick <= 0 )
    return v0;
  ticks = SDL_GetTicks();
  v3 = dword_456B28;
  if ( !dword_456B28 )
    v3 = ticks - 250;
  if ( !dword_456B2C )
    dword_456B2C = ticks - 250;
  v4 = 0;
  if ( !byte_456B00 )
  {
    if ( dword_4A7A44 < dword_4AA3E0 - 50 )
      v4 = -53;
    if ( dword_4A7A44 > dword_4AA3E0 + 50 )
      v4 = -51;
    if ( dword_4A9EB8 < dword_4A9EA0 - 50 )
      v4 = -56;
    if ( dword_4A9EB8 > dword_4A9EA0 + 50 )
      v4 = -48;
    if ( byte_463E00[(unsigned __int8)configuration.defaultAccelerateGamepad] )
      v4 = 28;
    if ( byte_463E00[(unsigned __int8)configuration.defaultTurboGamepad] )
      v4 = 1;
    if ( byte_463E00[(unsigned __int8)configuration.defaultGunGamepad] )
      v4 = 28;
    if ( byte_463E00[(unsigned __int8)configuration.defaultMineGamepad] )
      v4 = 1;
  }
  if (ticks < dword_456B1C )
  {
    if ( v4 )
    {
      dword_456B28 = ticks;
      dword_456B2C = ticks;
      return 0;
    }
    dword_456B1C = ticks;
    dword_456B28 = ticks - 400;
    dword_456B2C = ticks;
    return v0;
  }
  if ( v4 )
  {
    if (ticks - v3 >= 400 && ticks - dword_456B2C < 400 )
      dword_456B1C = ticks + 700;
    dword_456B28 = ticks;
    dword_456B2C = ticks;
    result = v4;
  }
  else
  {
    v6 = ticks - 400;
    dword_456B2C = ticks;
    result = v0;
    dword_456B28 = v6;
  }
  return result;
}
//----- (00418090) --------------------------------------------------------
char sub_418090()
{
  char v0; // bl@1
  int v1; // eax@1
  int v2; // eax@13
  int v3; // edx@14
  char result; // al@14

  v0 = sub_43B2D0();
  v1 = dword_456B04;
  if ( dword_456B08 )
  {
    *(byte *)(dword_456B04 + dword_463E08) = v0;
    v1 = dword_456B04++ + 1;
  }
  if ( dword_456B0C )
  {
    if ( *(byte *)(v1 + dword_463E08) == 69
      && *(byte *)(v1 + dword_463E08 + 1) == 78
      && *(byte *)(v1 + dword_463E08 + 2) == 68 )
      dword_456B0C = 0;
    v0 = *(byte *)(v1 + dword_463E08);
    dword_456B04 = v1 + 1;
  }
  if ( dword_456B10 )
    v0 = 13;
  if ( configuration.useJoystick > 0 )
  {
    SDLConfigureJoystick();
    if ( configuration.useJoystick > 0 )
    {
      v2 = SDL_GetTicks();
      if ( v2 >= dword_456B1C )
      {
        v3 = v2 - 400;
        dword_456B34 = v2;
        result = v0;
        dword_456B30 = v3;
        return result;
      }
      dword_456B1C = v2;
      dword_456B30 = v2 - 400;
      dword_456B34 = v2;
    }
  }
  return v0;
}


//----- (00418150) --------------------------------------------------------
int sub_418150()
{
  int result; // eax@1

  result = configuration.useJoystick;
  if ( configuration.useJoystick > 0 )
  {
    SDLConfigureJoystick();
    if ( dword_4A7A44 < dword_4AA3E0 - 50 )
      byte_45E18B = 1;
    if ( dword_4A7A44 > dword_4AA3E0 + 50 )
      byte_45E18D = 1;
    if ( dword_4A9EB8 < dword_4A9EA0 - 50 )
      byte_45E188 = 1;
    result = dword_4A9EA0 + 50;
    if ( dword_4A9EB8 > dword_4A9EA0 + 50 )
      byte_45E190 = 1;
  }
  return result;
}


//----- (004181B0) --------------------------------------------------------
void sub_4181B0()
{
  if ( isMultiplayerGame )
  {
    if ( dword_45E0A8 == 2 )
      nullsub_1();
  }
}


//----- (004181E0) --------------------------------------------------------
unsigned int sub_4181E0()
{
  signed int v0; // edx@1
  int v1; // eax@1
  void *v2; // ebp@1
  int v3; // esi@1
  int v4; // edi@3
  int i; // ecx@4
  char v6; // dl@5
  char v7; // cl@8
  int v8; // edi@8
  unsigned int v9; // ebx@10
  int v10; // ecx@10
  int j; // ecx@13
  char v12; // bl@14
  int v13; // ebx@15
  unsigned int result; // eax@17
  unsigned int v15; // [sp+10h] [bp-4h]@10

  v0 = dword_456B3C;
  v1 = dword_456B38;
  v2 = DstBuf;
  v3 = dword_456B40;
  if ( dword_456B3C )
  {
    v8 = dword_45F028;
  }
  else
  {
    if ( dword_456B38 > 0 )
    {
      v4 = dword_45F028;
    }
    else
    {
		v4 = (int)byte_4610C0;
		dword_45F028 = (int)byte_4610C0;//esto empieza con 0
		//dword_456B40=301
			
			v1 = *((byte *)DstBuf + dword_456B40);
			v3 = dword_456B40 + 1;
			dword_456B38 = *((byte *)DstBuf + dword_456B40++);
			if (v1)
			{
				for (i = 0; i < v1 ; dword_456B40 = v3)
				{
					v6 = *((byte *)v2 + v3++);
					byte_4610C0[i++] = v6;
				}
			}
		
    }
    v7 = *(byte *)v4;
    v8 = v4 + 1;
    v0 = 8;
    --v1;
    byte_461F18 = v7;
    dword_45F028 = v8;
    dword_456B3C = 8;
    dword_456B38 = v1;
  }
  v9 = (unsigned int)(unsigned __int8)byte_461F18 >> (8 - v0);
  v10 = dword_462CEC;
  v15 = (unsigned int)(unsigned __int8)byte_461F18 >> (8 - v0);
  if ( dword_462CEC > v0 )
  {
    do
    {
      if ( v1 <= 0 )
      {
        v8 = (int)byte_4610C0;
        dword_45F028 = (int)byte_4610C0;
		
		v1 = *((byte *)v2 + v3++);
		
        
		
        dword_456B38 = v1;
        dword_456B40 = v3;
        if ( v1 )
        {
          for ( j = 0; j < v1 ; dword_456B40 = v3 )
          {
            v12 = *((byte *)v2 + v3++);
			byte_4610C0[j++] = v12;
          }
        }
      }
      byte_461F18 = *( byte *)v8;
      v13 = (unsigned __int8)byte_461F18 << v0;
      ++v8;
      v0 += 8;
      v15 |= v13;
      v10 = dword_462CEC;
      --v1;
      dword_45F028 = v8;
      dword_456B3C = v0;
      dword_456B38 = v1;
    }
    while ( dword_462CEC > v0 );
    v9 = v15;
  }
  result = v9 & dword_4456B0[v10];
  dword_456B3C = v0 - v10;
  return result;
}


//----- (00418330) --------------------------------------------------------
void decryptAnimFrame()
{
  void *dataBuffer; // esi@1
  int v1; // eax@1
  int v2; // ecx@1
  int v3; // ecx@2
  int v4; // eax@2
  unsigned __int8 v5; // bl@3
  void *v6 =malloc(0x1001u); // eax@3
  void *v7 =malloc(0x1001u); // eax@3
  void *v8 =malloc(0x4004u); // eax@3
  signed int v9; // edx@3
  signed int v10; // esi@3
  int v11; // ebp@3
  int v12; // ebx@3
  unsigned int v13; // edi@3
  unsigned int v14; // eax@3
  unsigned int v15; // eax@8
  int v16; // ecx@13
  char v17; // al@22
  int v18; // [sp+10h] [bp-Ch]@3
  char v19; // [sp+14h] [bp-8h]@3
  int v20; // [sp+18h] [bp-4h]@3
  void *dword_45FB9C; // idb
  void *dword_45EA94; // idb
  void *dword_462D78; // idb
  int i = 0;
  dataBuffer = DstBuf;
  v1 = 0;
  dword_456B44 = 0;
  dword_456B40 = 0;
  v2 = animPalette;
  ///lee la paleta de colores que esta al principio
  do
  {
    *(byte *)v2 = *((byte *)dataBuffer + v1);
    v3 = v2 + 1;
    v4 = v1 + 1;
    dword_456B40 = v4;
    *(byte *)v3++ = *((byte *)dataBuffer + v4++);
    dword_456B40 = v4;
    *(byte *)v3 = *((byte *)dataBuffer + v4);
    v2 = v3 + 1;
    v1 = v4 + 1;
    dword_456B40 = v1;
	i++;
  }
  while ( i <256);
 
  //while (v2 < (signed int)&configuration.leftSteeringGamepad);
  v5 = *((byte *)dataBuffer + v1);
  dword_456B40 = v1 + 1;
  dword_45FB9C = v6;
  dword_45EA94 = v7;
  dword_462D78 = v8;
  v9 = 1 << (v5 + 1);
  v20 = v5 + 1;
  dword_462CEC = v5 + 1;
  v10 = 1 << v5;
  dword_456B3C = 0;
  dword_456B38 = 0;
  v11 = (1 << v5) + 1;
  v12 = (1 << v5) + 2;
  v19 = 0;
  v18 = 0;
  v13 = (unsigned int)dword_45FB9C;
  dword_45FC28 = v9;
  dword_463CD0 = v10;
  dword_461EB0 = v11;
  dword_46125C = v12;
  dword_462D5C = v12;
  v14 = sub_4181E0();
 // v14 = 0;
  if ( v14 != v11 )
  {
    while ( 1 )
    {
      if ( v14 == v10 )
      {
        dword_462CEC = v20;
        dword_462D5C = v12;
        dword_45FC28 = 1 << v20;
        do
          v15 = sub_4181E0();
        while ( v15 == v10 );
        if ( v15 == v11 )
          break;
        if ( (signed int)v15 >= v12 )
          v15 = 0;
        *((byte *)anim_currentFrameData + dword_456B44) = v15;
        v19 = v15;
        v18 = v15;
        ++dword_456B44;
      }
      else
      {
        v16 = v14;
        if ( (signed int)v14 >= dword_462D5C )
        {
          v16 = v18;
          *(byte *)v13 = v19;
          v12 = dword_46125C;
          ++v13;
        }
        if ( v16 >= v12 )
        {
          do
          {
            *(byte *)v13 = *((byte *)dword_45EA94 + v16);
            v16 = *((_DWORD *)dword_462D78 + v16);
            ++v13;
          }
          while ( v16 >= dword_46125C );
        }
		
			*(byte *)v13++ = v16;
		
        if ( dword_462D5C >= dword_45FC28
          || (*((byte *)dword_45EA94 + dword_462D5C) = v16,
              v19 = v16,
              *((_DWORD *)dword_462D78 + dword_462D5C) = v18,
              v18 = v14,
              ++dword_462D5C,
              dword_462D5C >= dword_45FC28) )
        {
          if ( dword_462CEC < 12 )
          {
            dword_45FC28 *= 2;
            ++dword_462CEC;
          }
        }
        for ( ; v13 > (unsigned int)dword_45FB9C ; ++dword_456B44 )
        {
          v17 = *(byte *)(v13-- - 1);
          *((byte *)anim_currentFrameData + dword_456B44) = v17;
        }
      }
      v14 = sub_4181E0();
      v11 = dword_461EB0;
      if ( v14 == dword_461EB0 )
        break;
      v10 = dword_463CD0;
      v12 = dword_46125C;
    }
  }
  free(dword_45FB9C);
  free(dword_45EA94);
  free(dword_462D78);
}


//----- (004185B0) --------------------------------------------------------
void __cdecl openAnimation(const char *animFile, int a2, int music, int a4, int effect, char onKeyPressExit, char screenResolution)
{
	
  unsigned int v7; // eax@2
  char *v8; // edi@2
  char v9; // cl@3
  unsigned int v10; // eax@5
  char *v11; // edi@5
  char v12; // cl@6
  void *v13 =malloc(0xFA00u); // eax@7
  void *v14 = malloc(0xFA00u); // eax@7
  int (__cdecl *v15)(FILE *); // ebx@11
  FILE *fAnimFile; // ebp@11
  unsigned __int8 v17; // ST3F_1@11
  void *v18; // eax@11
  void *v19; // eax@11
  size_t v20; // eax@11
  signed int i; // esi@11
  signed int v22; // esi@13
  signed int v23; // esi@15
  signed int v24; // edi@17
  char *v25; // esi@17
  char v26; // al@22
  int v27; // edi@24
  unsigned __int8 v28; // bl@24
  unsigned __int8 v29; // al@24
  int v30; // esi@24
  signed int v31; // edi@28
  int v32; // esi@28
  int v33; // eax@29
  int v34; // ecx@29
  int v35; // esi@29
  int v36; // edx@29
  signed int screenFrameSize; // ecx@31
  int screenFrameStartPosition; // edi@31
  char v39; // al@33
  int v40; // esi@34
  signed int v41; // esi@37
  signed int v42; // esi@39
  int v43; // [sp+Ch] [bp-404h]@1
  char Filename; // [sp+10h] [bp-400h]@1
  char *v45 = malloc(768); // [sp+110h] [bp-300h]@17
  //char v46; // [sp+111h] [bp-2FFh]@17
  int frames;
  int currentFrame;
  void *framesDelay; // idb
 
  v43 = 1;
  Filename = 0;
  if ( byte_462D50 == 2 )
  {
    v7 = strlen(byte_45FAA0) + 1;
    v8 = (char *)&v43 + 3;
    do
      v9 = (v8++)[1];
    while ( v9 );
    memcpy(v8, byte_45FAA0, v7);
  }
  v10 = strlen(animFile) + 1;
  v11 = (char *)&v43 + 3;
  do
    v12 = (v11++)[1];
  while ( v12 );
  memcpy(v11, animFile, v10);
  //allocateMemory(0xFA00u);
  //allocateMemoryPtr((void*)&v13,0xFA00u); //esto huele a un frame
  anim_currentFrameData = v13;
  //allocateMemory(0xFA00u);
  //allocateMemoryPtr((void*)&v14, 0xFA00u);
  DstBuf = v14;
  if ( (byte)a2 )
    loadMusic(a2, music, a4, effect);
  nullsub_1();
  setWindowCaption3(19);
  sub_43C740();
  if ( (byte)a2 )
  {
    nullsub_1();
    musicPlayMusic();
    nullsub_1();
  }
  v15 = getc;
  fAnimFile = fopen(animFile, "rb");
  //v16 = fopen(&Filename, "rb");
  //dos primeros bytes los frames
  //para cada frame un byte determina duracion
  //para cada frame un byte determina el efecto de sonido  
  //ahora la paleta de 720 colores porque los 16 * 3 primeros son de los frames de arriba y abajo
  //datos de cada frame
  v17 = getc(fAnimFile);
  frames = v17 + ((unsigned __int8)getc(fAnimFile) << 8);
  //allocateMemory(Size);
  v18 = malloc(frames);
  
  //esto tiene los efectos de sonido
  dword_45EEA4 = v18;
  v19 = malloc(frames);  
  framesDelay = v19;
  v20 = frames;
  for ( i = 0; i < (signed int)frames; ++i )
  {
    *((byte *)dword_45EEA4 + i) = getc(fAnimFile);
    v20 = frames;
  }
  v22 = 0;
  if ( (signed int)v20 > 0 )
  {
    do
      *((byte *)framesDelay + v22++) = getc(fAnimFile);
    while ( v22 < (signed int)frames);
  }
  v23 = 0;
  do
    setPaletteValue(v23++, 0, 0, 0);
  while ( v23 < 255 );
  DstBuf = malloc(0xFA00u);
  extractFromBpa("MENU.BPA", DstBuf, (int)"FRAMES.BPK");
  //esto parece que pinta los cuadros de arriba y abajo
  
  
 
  decryptTexture((int)DstBuf, v45, 0, 768);
  decryptTexture((int)DstBuf, screenPtr, 768, 0xFA00u);
  v24 = 0;
  v25 = v45;
  do
  {//esta leyendo colores
    setPaletteValue(v24++, (unsigned __int8)v25[0], (unsigned __int8)v25[1], (unsigned __int8)v25[2]);
    v25 += 3;
  }
  while ( v24 < 16 );
  currentFrame = 0;
  if ( frames > 0 )
  {
    while ( 1 )
    {
      v26 = eventDetected();
      if (onKeyPressExit)
      {
        if ( v26 )
          break;
      }
      v27 = waitWithDelay();
      
	  //los dos primeros bytes contienen el tamao del frame
	  v28 = v15(fAnimFile);
      v29 = getc(fAnimFile);
      fread(DstBuf, v28 + (v29 << 8), 1u, fAnimFile);
	  decryptAnimFrame();
      v30 = v27 + *((byte *)framesDelay + currentFrame);
      while ( waitWithDelay() < (unsigned int)v30 )
        ;
      if ( dword_45EA08 )
        sub_43C8F0();
      v31 = 16;
      //v32 = (int)&unk_45EBD0;
	  v32 = (byte *)animPalette+48;

	  
	  //seteo lapaleta con el valor fijo
      do
      {
        v33 = *(byte *)v32;
        v34 = *(byte *)(v32 + 1);
        v35 = v32 + 1;
        v36 = *(byte *)(v35 + 1);
        v32 = v35 + 2;
        
		setPaletteValue(v31++, v33, v34, v36);
      }
      while ( v31 < 256 );
      if (screenResolution == 100 )
      {
		screenFrameSize = 8000;
		screenFrameStartPosition = screenPtr + 16000;
      }
      else
      {
		  screenFrameSize = 9600;
		  screenFrameStartPosition = screenPtr + 12800;
      }
	  //pinta los datos en pantalla
      memcpy((void *)screenFrameStartPosition, anim_currentFrameData, 4 * screenFrameSize);
      v39 = *((byte *)dword_45EEA4 + currentFrame);
      if ( v39 )
      {
        v40 = v43;
		//abirr efecto de sonido
        loadMenuSoundEffect(v43, v39, 0, 0x10000, 0x10000);
        v43 = v40 + 1;
        if ( v40 + 1 > 6 )
          v43 = 1;
      }
      ++currentFrame;
      if (currentFrame >= frames)
        break;
      v15 = getc;
    }
  }
  fclose(fAnimFile);
  v41 = 0;
  do
    setPaletteValue(v41++, 0, 0, 0);
  while ( v41 < 256 );
  v42 = 1;
  do
    sub_43C3E0(v42++);
  while ( v42 <= 6 );
  //free(anim_currentFrameData);
  free(DstBuf);
  free(dword_45EEA4);
  free(framesDelay);
}

//----- (004189C0) --------------------------------------------------------
int __cdecl setPaletteValueWithFloats(float a1, float a2, float a3)
{
  signed int v3; // edi@1
  char v4; // si@1
  float v5; // ST24_4@2
  float v6; // ST20_4@2
  float v7; // ST1C_4@2
  signed int v8; // edi@3
  float v9; // ST24_4@4
  float v10; // ST20_4@4
  float v11; // ST1C_4@4
  int result; // eax@4
  signed int v13; // [sp+0h] [bp-28h]@1
  signed int v14; // [sp+0h] [bp-28h]@3
  double v15; // [sp+10h] [bp-18h]@1
  double v16; // [sp+18h] [bp-10h]@1
  double v17; // [sp+20h] [bp-8h]@1

  v3 = 0;
  v4 = 64;
  v13 = 0;
  v17 = 0.1 * a1;
  v16 = 0.1 * a2;
  v15 = 0.1 * a3;
  do
  {
    v7 = (a3 - v15) * 0.0625;
    v6 = (a2 - v16) * 0.0625;
    v5 = (a1 - v17) * 0.0625;
    setPaletteAndGetValue(
      v4++,
      (unsigned __int64)((double)v13 * v5 + v17),
      (unsigned __int64)(v6 * (double)v13 + v16),
      (unsigned __int64)(v7 * (double)v13 + v15));
    ++v3;
    v13 = v3;
  }
  while ( v3 < 16 );
  v8 = 0;
  v14 = 0;
  do
  {
    v11 = (63.0 - a3) * 0.0625;
    v10 = (63.0 - a2) * 0.0625;
    v9 = (63.0 - a1) * 0.0625;
    result = setPaletteAndGetValue(
               v4++,
               (unsigned __int64)((double)v14 * v9 + a1),
               (unsigned __int64)(v10 * (double)v14 + a2),
               (unsigned __int64)(v11 * (double)v14 + a3));
    ++v8;
    v14 = v8;
  }
  while ( v8 < 16 );
  return result;
}

//----- (00418B00) --------------------------------------------------------
int __cdecl sub_418B00(float a1, float a2, float a3)
{
  signed int v3; // edi@1
  _UNKNOWN *v4; // esi@1
  float v5; // ST24_4@2
  float v6; // ST28_4@2
  float v7; // ST2C_4@2
  float v8; // ST20_4@2
  signed int v9; // edi@3
  _UNKNOWN *v10; // esi@3
  float v11; // ST24_4@4
  float v12; // ST28_4@4
  float v13; // ST2C_4@4
  float v14; // ST20_4@4
  int result; // eax@4
  signed int v16; // [sp+0h] [bp-28h]@1
  signed int v17; // [sp+0h] [bp-28h]@3
  double v18; // [sp+10h] [bp-18h]@1
  double v19; // [sp+18h] [bp-10h]@1
  double v20; // [sp+20h] [bp-8h]@1
  int index;

  v3 = 0;
  v16 = 0;
  //FIXED
 // v4 = &unk_45FF44;
  index = 144;//posiciones desde dword_45FD00 que es el inicio de la paleta
  v18 = 0.1 * a1;
  v19 = 0.1 * a2;
  v20 = 0.1 * a3;
  do
  {
    v8 = (double)v16;
    v5 = (a1 - v18) * 0.0625;
    //*((_DWORD *)v4 - 1) = sub_43B290((unsigned int)(unsigned __int64)(v8 * v5 + v18) << 16, 6553600);
    v6 = (a2 - v19) * 0.0625;
    //*(_DWORD *)v4 = sub_43B290((unsigned int)(unsigned __int64)(v8 * v6 + v19) << 16, 6553600);
    v7 = (a3 - v20) * 0.0625;
    ///*((_DWORD *)v4 + 1) = sub_43B290((unsigned int)(unsigned __int64)(v8 * v7 + v20) << 16, 6553600);
    //v4 = (char *)v4 + 12;*/
	index = index + 3;

	palette1[index] = sub_43B290((unsigned int)(unsigned __int64)(v8 * v5 + v18) << 16, 6553600);
 	palette1[index +1] = sub_43B290((unsigned int)(unsigned __int64)(v8 * v6 + v19) << 16, 6553600);
	palette1[index +2] = sub_43B290((unsigned int)(unsigned __int64)(v8 * v7 + v20) << 16, 6553600);
	
    ++v3;
    v16 = v3;
  }
  while ( v3 < 16 );
  v9 = 0;
  v17 = 0;
  //FIXED
  v10 = &unk_460004;
  do
  {
    v14 = (double)v17;
    v11 = (63.0 - a1) * 0.0625;
    //*((_DWORD *)v10 - 1) = sub_43B290((unsigned int)(unsigned __int64)(v14 * v11 + a1) << 16, 6553600);
    v12 = (63.0 - a2) * 0.0625;
    //*(_DWORD *)v10 = sub_43B290((unsigned int)(unsigned __int64)(v14 * v12 + a2) << 16, 6553600);
    v13 = (63.0 - a3) * 0.0625;
   // result = sub_43B290((unsigned int)(unsigned __int64)(v14 * v13 + a3) << 16, 6553600);
    //*((_DWORD *)v10 + 1) = result;
    v10 = (char *)v10 + 12;

	palette1[index] = sub_43B290((unsigned int)(unsigned __int64)(v14 * v11 + a1) << 16, 6553600);
	palette1[index + 1] = sub_43B290((unsigned int)(unsigned __int64)(v14 * v12 + a2) << 16, 6553600);
	palette1[index + 2] = sub_43B290((unsigned int)(unsigned __int64)(v14 * v13 + a3) << 16, 6553600);
	result = palette1[index + 2];
	index = index + 3;
    ++v9;
    v17 = v9;
  }
  while ( v9 < 16 );
  return result;
}



void freeMemoryGraphics() 
{
	free(dword_45EB5C); //es una textura pero vete a saber
	free(screenBuffer);
}

//----- (00419950) --------------------------------------------------------
void loadGraphics2()
{
  int v0; // edi@1
  
  int *v38; // esi@1

  v0 = 0;
  cursorBpkFrame = 0;
  chattextBpk = malloc(0x7530u);
  fasesel1Bpk = malloc(0x1B18u);
  facearr1Bpk = malloc(0x1100u);
  enterx2Bpk = malloc(0x5000u);
  shoptxt1Bpk = malloc(0x2800u);
  shoptxt2Bpk = malloc(0x2800u);
  fametxtBpk = malloc(0x8700u);
  recotxtBpk = malloc(0x2800u);
  recobarBpk = malloc(0xAA00u);
  linlin1Bpk = malloc(0x111Cu);
  chatlin1Bpk = malloc(0x1900u);
  cursorBpk = malloc(0x4E20u);
  fbig3dBpk = malloc(0x18000u);
  fbig3bBpk = malloc(0x18000u);
  mseletx1Bpk = malloc(0x2800u);
  trarr1Bpk = malloc(0x1500u);
  trsnap2m1Bpk[0] = malloc(0x3800u);
  trsnap2m1Bpk[1] = malloc(0x3800u);
  trsnap2m1Bpk[2] = malloc(0x3800u);
  trsnap2m1Bpk[3] = malloc(0x3800u);
  trsnap2m1Bpk[4] = malloc(0x3800u);
  trsnap2m1Bpk[5] = malloc(0x3800u);
  trsnap2m1Bpk[6] = malloc(0x3800u);
  trsnap2m1Bpk[7] = malloc(0x3800u);
  trsnap2m1Bpk[8] = malloc(0x3800u);
  trsnap2m1Bpk[9] = malloc(0x3800u);
  trsnap2m1Bpk[10] = malloc(0x3800u);
  trsnap2m1Bpk[11] = malloc(0x3800u);
  trsnap2m1Bpk[12] = malloc(0x3800u);
  trsnap2m1Bpk[13] = malloc(0x3800u);
  trsnap2m1Bpk[14] = malloc(0x3800u);
  trsnap2m1Bpk[15] = malloc(0x3800u);
  trsnap2m1Bpk[16] = malloc(0x3800u);
  trsnap2m1Bpk[17] = malloc(0x3800u);
  trsnap2m1Bpk[18] = malloc(0x3800u);
  trsnap2m1Bpk[19] = malloc(0x3800u);
  
  int index = 0;
  v38 = (int *)&trsnap2m1Bpk;
  do
  {
    extractFromBpa("MENU.BPA", textureTemp, "trsnap2m.bpk");
    decryptTexture((int)textureTemp, trsnap2m1Bpk[index], v0, 14336);
    ++v38;
	index++;
    v0 += 14336;
  }
  while (index < 20);
  //while ((signed int)v38 < (signed int)&configuration.turboGamepad);
  /*extractFromBpa("MENU.BPA", textureTemp, "trsnap2m.bpk");
  decryptTexture((int)textureTemp, (int)trsnap2m2Bpk, 258048, 14336);
  extractFromBpa("MENU.BPA", textureTemp, "trsnap2m.bpk");
  decryptTexture((int)textureTemp, (int)trsnap2m3Bpk, 272384, 14336);*/
  extractFromBpa("MENU.BPA", textureTemp, "cursor.bpk");
  copyImageToBuffer((int)textureTemp, (int)cursorBpk);
  extractFromBpa("MENU.BPA", textureTemp,"f-big3b.bpk");
  copyImageToBuffer((int)textureTemp, (int)fbig3bBpk);
  extractFromBpa("MENU.BPA", textureTemp, "f-big3d.bpk");
  copyImageToBuffer((int)textureTemp, (int)fbig3dBpk);
  extractFromBpa("MENU.BPA", textureTemp, "chatlin1.bpk");
  copyImageToBuffer((int)textureTemp, (int)chatlin1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "chattext.bpk");
  copyImageToBuffer((int)textureTemp, (int)chattextBpk);
  extractFromBpa("MENU.BPA", textureTemp, "entertx2.bpk");
  copyImageToBuffer((int)textureTemp, (int)enterx2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "shoptxt1.bpk");
  copyImageToBuffer((int)textureTemp, (int)shoptxt1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "shoptxt2.bpk");
  copyImageToBuffer((int)textureTemp, (int)shoptxt2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "fametxt.bpk");
  copyImageToBuffer((int)textureTemp, (int)fametxtBpk);
  extractFromBpa("MENU.BPA", textureTemp, "recotxt.bpk");
  copyImageToBuffer((int)textureTemp, (int)recotxtBpk);
  extractFromBpa("MENU.BPA", textureTemp, "recobar.bpk");
  copyImageToBuffer((int)textureTemp, (int)recobarBpk);
  extractFromBpa("MENU.BPA", textureTemp, "lic-lin1.bpk");
  copyImageToBuffer((int)textureTemp, (int)linlin1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "facesel1.bpk");
  copyImageToBuffer((int)textureTemp, (int)fasesel1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "facearr1.bpk");
  copyImageToBuffer((int)textureTemp, (int)facearr1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "mseletx1.bpk");
  copyImageToBuffer((int)textureTemp, (int)mseletx1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "trarr1.bpk");
  copyImageToBuffer((int)textureTemp, (int)trarr1Bpk);
}


//----- (00419EA0) --------------------------------------------------------
int __cdecl loadPaletteMenu()
{
	char *v0; // eax@1
  signed int v1; // esi@1
  int v2; // ebp@3
  int v3; // edi@3
  int v4; // ebx@3
  int result; // eax@3
  int v6; // [sp+10h] [bp-304h]@1
  void * v7=malloc(768); // [sp+14h] [bp-300h]@1
  char v8; // [sp+15h] [bp-2FFh]@1

  extractFromBpa("MENU.BPA",v7, "menu.pal");
  v0 = v7; // TODO antes v0 = &v8;
  v6 = v7; // TODO antes v6 = &v8;
  v1 = 0;
   while ( 1 )
  {
    v2 = (unsigned __int8)v0[2];
    v3 = (unsigned __int8)v0[0] << 16;
    v4 = (unsigned __int8)v0[1] << 16;
    palette1[v1] = sub_43B290((unsigned __int8)*(v0) << 16, 6553600);

    v2 <<= 16;
	palette1[v1+1] = sub_43B290(v4, 6553600);
	palette1[v1+2] = sub_43B290(v2, 6553600);
    palette2[v1] = sub_43B290(v3, 6553600);
	palette2[v1+1] = sub_43B290(v4, 6553600);
    result = sub_43B290(v2, 6553600);
	palette2[v1+2] = result;
    v1 += 3;
    v6 += 3;
    if ( v1 >= 768 )
      break;
    v0 = v6;
  }
  result = 0;
  
  return result;
}

//----- (00419F80) --------------------------------------------------------
void freeMemoryGraphics2()
{
  free(chattextBpk);
  free(fasesel1Bpk);
  free(facearr1Bpk);
  free(enterx2Bpk);
  free(shoptxt1Bpk);
  free(shoptxt2Bpk);
  free(fametxtBpk);
  free(recotxtBpk);
  free(recobarBpk);
  free(linlin1Bpk);
  free(chatlin1Bpk);
  free(cursorBpk);
  free(fbig3dBpk);
  free(fbig3bBpk);
  free(mseletx1Bpk);
  free(trarr1Bpk);
  free(trsnap2m1Bpk[0]);
  free(trsnap2m1Bpk[1]);
  free(trsnap2m1Bpk[2]);
  free(trsnap2m1Bpk[3]);
  free(trsnap2m1Bpk[4]);
  free(trsnap2m1Bpk[5]);
  free(trsnap2m1Bpk[6]);
  free(trsnap2m1Bpk[7]);
  free(trsnap2m1Bpk[8]);
  free(trsnap2m1Bpk[9]);
  free(trsnap2m1Bpk[10]);
  free(trsnap2m1Bpk[11]);
  free(trsnap2m1Bpk[12]);
  free(trsnap2m1Bpk[13]);
  free(trsnap2m1Bpk[14]);
  free(trsnap2m1Bpk[15]);
  free(trsnap2m1Bpk[16]);
  free(trsnap2m1Bpk[17]);
  free(trsnap2m1Bpk[18]);
  free(trsnap2m1Bpk[19]);
  
}

//----- (0041A140) --------------------------------------------------------
signed int isVesaCompatible()
{
  signed int result; // eax@2

  dword_456BA4 = 0;
  updateScreenPtr(0);
  *(byte *)screenPtr = 0;
  updateScreenPtr(1);
  *(byte *)screenPtr = 0;
  updateScreenPtr(0);
  *(byte *)screenPtr = 1;
  updateScreenPtr(1);
  if ( *(byte *)screenPtr == 1 )
  {
    result = 1;
  }
  else
  {
    updateScreenPtr(0);
    *(byte *)screenPtr = 0;
    updateScreenPtr(1);
    *(byte *)screenPtr = 0;
    result = 0;
  }
  return result;
}
// 456BA4: using guessed type int dword_456BA4;
// 456BF0: using guessed type int screenPtr;

//----- (0041A1C0) --------------------------------------------------------
void refreshBottomScreen() //solo refresca la patte inferior
{
  updateScreenPtr(3);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x30000, 0x4000);
  updateScreenPtr(4);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
}
// 456BF0: using guessed type int screenPtr;

//----- (0041A210) --------------------------------------------------------
void refreshAllScreen() //esto refresca la imagen
{
  updateScreenPtr(0);//setea los punteros
  copyBuffer2Screen((void *)screenPtr, screenBuffer, 0x4000);//copia el contenido de una capa a la pantalla
  updateScreenPtr(1);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x10000, 0x4000);
  updateScreenPtr(2);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x20000, 0x4000);
  updateScreenPtr(3);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x30000, 0x4000);  
  updateScreenPtr(4);
  copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
}
// 456BF0: using guessed type int screenPtr;

//----- (0041A2D0) --------------------------------------------------------
unsigned int __cdecl drawTextWithFont(int font, int a2, const char *text, int screenPosition)
{
  int height; // edx@1
  int width; // ebp@1
  unsigned int v6; // esi@1
  unsigned int result; // eax@1
  int screenPositionOffset; // ebx@2
  char v9; // al@3
  int v10; // [sp+10h] [bp-8h]@1

  height = *(byte *)(a2 + 1); 
  width = *(byte *)a2;
  v10 = *(byte *)(a2 + 1);
  /*height = 32;
  width = 32;
  v10 = 32;*/
  
  v6 = 0;
  result = strlen(text);
  if ( result )
  {
	  screenPositionOffset = screenPosition;
    do
    {
      v9 = text[v6];
      if ( v9 == -6 )
      {
        ++screenPositionOffset;
      }
      else
      {
        drawImageWithPosition(font + width * height * ((unsigned __int8)v9 - 32), width, height, (int)((char *)screenBuffer + screenPositionOffset));
		height = v10;
		screenPositionOffset += *(byte *)(text[v6] + a2 - 30);
      }
      ++v6;
      result = strlen(text);
    }
    while ( v6 < result );
  }
  return result;
}

//----- (0041A370) --------------------------------------------------------
unsigned int __cdecl sub_41A370(const char *a1, int a2)
{
  int v2; // ebx@1
  int v3; // ebp@1
  unsigned int v4; // esi@1
  unsigned int result; // eax@1
  int v6; // edi@2
  char v7; // al@3
  int v8; // [sp-8h] [bp-18h]@3

  v2 = (unsigned __int8)byte_445914;
  v3 = (unsigned __int8)byte_445915;
  v4 = 0;
  result = strlen(a1);
  if ( result )
  {
    v6 = a2;
    do
    {
      v7 = a1[v4];
      v8 = (int)((char *)screenBuffer + v6);
      if ( v7 == 36 )
      {
        drawImageWithPosition2((int)fsma3fBpk, v2, v3, v8);
        v6 += (unsigned __int8)byte_445916;
      }
      else
      {
        drawImageWithPosition2((int)((char *)fsma3fBpk + v2 * v3 * ((unsigned __int8)v7 - 47)), v2, v3, v8);
        v6 += (unsigned __int8)byte_4458E7[a1[v4]];
      }
      ++v4;
      result = strlen(a1);
    }
    while ( v4 < result );
  }
  return result;
}
// 445914: using guessed type char byte_445914;
// 445915: using guessed type char byte_445915;
// 445916: using guessed type char byte_445916;

//----- (0041A430) --------------------------------------------------------
int __cdecl writeTextInScreen(const char *text, int screenOffset)
{
  int v2; // esi@1
  unsigned int v3; // ebp@1
  int v4; // edi@1
  int result; // eax@1
  int v6; // ebx@2
  const char *v7; // edx@3
  int v8; // eax@3
  void *v9; // edx@7
  const char *v10; // eax@17
  int v11; // edx@17
  char v12; // cl@18
  signed int v13; // [sp+Ch] [bp-8h]@1

  //ancho y alto escribe un 10h
  v2 = (unsigned __int8)byte_4458B0[0];
  v3 = 0;
  v4 = (unsigned __int8)byte_4458B0[1];
  //v4 = (unsigned __int8)byte_4458B1;
  v13 = 0;
  result = strlen(text);
  if ( result )
  {
    v6 = screenOffset;
    do
    {
      v7 = text;
      v8 = text[v3];
      if ( v8 == 91 )
      {
        v13 = 2;
      }
      else if (text[v3] == 123 )
      {
        v13 = 0;
      }
      else
      {
        if (text[v3] != 125 )
        {
          if ( !v13 )
          {
            v9 = graphicsGeneral.fsma3bBpk;
            goto LABEL_12;
          }
          if ( v13 == 1 )
          {
            drawImageWithPosition((int)((char *)graphicsGeneral.fsma3cBpk + v2 * v4 * (v8 - 32)), v2, v4, (int)((char *)screenBuffer + v6));
          }
          else if ( v13 == 2 )
          {
            v9 = graphicsGeneral.fsma3aBpk;
LABEL_12:
            drawImageWithPosition((int)((char *)v9 + v2 * v4 * (v8 - 32)), v2, v4, (int)((char *)screenBuffer + v6));
          }
          v7 = text;
          v6 += (unsigned __int8)byte_445892[text[v3]];
          goto LABEL_17;
        }
        v13 = 1;
      }
LABEL_17:
      v10 = v7;
      ++v3;
      v11 = (int)(v7 + 1);
      do
        v12 = *v10++;
      while ( v12 );
      result = (int)&v10[-v11];
    }
    while ( v3 < result );
  }
  return result;
}
// 4458B0: using guessed type char byte_4458B0;
// 4458B1: using guessed type char byte_4458B1;

//----- (0041A530) esto pinta el recuadro parece que es x , offset x , y , offset y --------------------------------------------------------
signed int __cdecl createPopup(int x, int xLenght, int y, int yLenght, int cornerType)
{
  int v5; // ebp@1
  int v6; // edx@2
  unsigned int v7; // ecx@3
  char *v8; // edi@3
  void *v9; // edi@3
  int v10; // edi@4
  int v11; // ebx@5
  signed int result; // eax@5
  int v13; // edx@7
  int i; // ecx@7
  int v15; // ecx@9
  int v16; // edx@11
  int v17; // ecx@12
  char *v18; // ebx@13
  int v19; // ecx@15
  char *v20; // edx@16
  int v21; // [sp+10h] [bp-4h]@2
  int v22; // [sp+24h] [bp+10h]@11

  v5 = y;
  if (yLenght - 8 > 0 )
  {
    v6 = 640 * xLenght;
    v21 = yLenght - 8;
    do
    {
      v7 = (unsigned int)(v5 - 6) >> 2;
      v8 = (char *)screenBuffer + v6 + x + 1282;
      memset(v8, 0xC4u, 4 * v7);
      v9 = &v8[4 * v7];
      LOBYTE(v7) = v5 - 6;
      v5 = y;
      memset(v9, -60, v7 & 3);
      v6 += 640;
      --v21;
    }
    while ( v21 );
  }
  v10 = 640 * xLenght;
  if (cornerType)
  {
    drawImageWithPosition((int)graphicsGeneral.corn3aBpk, 32, 20, (int)((char *)screenBuffer + v10 + x));
    drawImageWithPosition((int)((char *)graphicsGeneral.corn3aBpk + 640), 32, 20, (int)((char *)screenBuffer + v10 + x + v5 - 32));
    drawImageWithPosition(
      (int)((char *)graphicsGeneral.corn3aBpk + 1280),
      32,
      20,
      (int)((char *)screenBuffer + 128 * (5 * (yLenght + xLenght) - 100) + x));
    v11 = 640 * (yLenght + xLenght);
    drawImageWithPosition((int)((char *)graphicsGeneral.corn3aBpk + 1920), 32, 20, (int)((char *)screenBuffer + v11 + x + v5 - 12832));
    result = 7;
  }
  else
  {
    drawImageWithPosition((int)graphicsGeneral.corn3bBpk, 32, 20, (int)((char *)screenBuffer + v10 + x));
    drawImageWithPosition((int)((char *)graphicsGeneral.corn3bBpk + 640), 32, 20, (int)((char *)screenBuffer + v10 + x + v5 - 32));
    drawImageWithPosition(
      (int)((char *)graphicsGeneral.corn3bBpk + 1280),
      32,
      20,
      (int)((char *)screenBuffer + 128 * (5 * (yLenght + xLenght) - 100) + x));
    v11 = 640 * (yLenght + xLenght);
    drawImageWithPosition((int)((char *)graphicsGeneral.corn3bBpk + 1920), 32, 20, (int)((char *)screenBuffer + v11 + x + v5 - 12832));
    result = 4;
  }
  v13 = v5 - 64;
  for ( i = 0; i < v5 - 64; v13 = v5 - 64 )
    *((byte *)screenBuffer + v10 + i++ + x + 672) = result;
  v15 = 0;
  if ( v13 > 0 )
  {
    do
      *((char *)screenBuffer + v11 + v15++ + x - 4448) = result;
    while ( v15 < v5 - 64 );
  }
  v16 = yLenght - 40;
  v22 = yLenght - 40;
  if ( v22 > 0 )
  {
    v17 = 640 * xLenght;
    do
    {
      v18 = (char *)screenBuffer + v17;
      v17 += 640;
      --v16;
      v18[x + 12801] = result;
    }
    while ( v16 );
    if ( v22 > 0 )
    {
      v19 = v22;
      do
      {
        v20 = (char *)screenBuffer + v10 + x;
        v10 += 640;
        --v19;
        v20[v5 + 12795] = result;
      }
      while ( v19 );
    }
  }
  return result;
}

//----- (0041A7A0) --------------------------------------------------------
int __cdecl drawTransparentBlock(int a1, int a2, int a3, int a4)
{
  int v4; // ebx@1
  int v5; // esi@1
  int v6; // eax@2
  char *v7; // esi@3
  char *v8; // edi@3
  unsigned int v10; // [sp+10h] [bp-4h]@2

  v4 = a4;
  v5 = a2;
  if ( a4 > 0 )
  {
    v10 = a3 - 6;
    v6 = 640 * a2;
    do
    {
      v7 = (char *)graphicsGeneral.menubg5Bpk + v6 + a1 - 2558;
      v8 = (char *)screenBuffer + v6 + a1 - 2558;
      memcpy(v8, v7, 4 * (v10 >> 2));
      v6 += 640;
      --v4;
      memcpy(&v8[4 * (v10 >> 2)], &v7[4 * (v10 >> 2)], v10 & 3);
    }
    while ( v4 );
    v5 = a2;
    v4 = a4;
  }
  drawImageWithPosition((int)chatlin1Bpk, 640, 10, (int)((char *)screenBuffer + 128 * (5 * v5 + 5)));
  return drawImageWithPosition((int)chatlin1Bpk, 640, 10, (int)((char *)screenBuffer + 640 * (v5 + v4 - 9)));
}

//----- (0041A880) --------------------------------------------------------

//pinta el menu
//menu type
// 0 es el menu principal
// 1 es comenzar racing
int __cdecl drawMenu(int menuType, int top)
{
  int v2; // edi@1
  int v3; // esi@1
  int result; // eax@1
  int v5; // ebx@1
  signed int v6; // ebp@1
  int v7; // eax@2
  const char *v8; // edi@2
  int v9; // eax@5
  int v10; // eax@14
  int v11; // ecx@14
  int v12; // [sp+10h] [bp-4h]@2
  signed int v13; // [sp+18h] [bp+4h]@1
  int menuEntryIndex = 0;
  v2 = menuType;
  //v3 = 7 * a1;
  v3 = menuType;
  //createPopup(dword_4456F4[7 * a1], dword_4456F8[7 * a1], dword_445700[7 * a1], dword_445704[7 * a1], checked);
  createPopup(dword_4456F4[menuType], dword_4456F8[menuType], dword_445700[menuType], dword_445704[menuType], top);
  result = dword_4456F0[menuType];
  //result = dword_4456F0[7 * a1];
  v5 = 0;
  v6 = 3232;
  v13 = 7049;
  if ( result > 0 )
  {
    v7 = 9 * v2;
    v12 = 9 * v2;
   // v8 = &aStartRacing[450 * v2];

	///si el menu es 6 keyboard definition hay que poner la tecla
	v8 = getMenuText(menuType, menuEntryIndex);
	
    while ( dword_445708[v3] != v5 )
    {
      if ( *(&menuActive_4457F0[v7] + v5) != 1 )
      {
        v9 = dword_4456F8[v3];
LABEL_13:
        drawTextWithFont((int)fbig3dBpk, (int)&unk_445848, v8, v6 + dword_4456F4[v3] + 640 * v9);
        goto LABEL_14;
      }
      if (top == 1 )
      {
        drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, v8, v6 + dword_4456F4[v3] + 640 * dword_4456F8[v3]);
      }
      else if ( !top)
      {
        drawTextWithFont((int)fbig3dBpk, (int)&unk_445848, v8, v6 + dword_4456F4[v3] + 640 * dword_4456F8[v3]);
      }
LABEL_14:
      v10 = 640 * dword_4456FC[v3];
      v11 = v10 + v13;
      v6 += v10;
      result = dword_4456F0[v3];
      ++v5;
	  v8 = getMenuText(menuType, ++menuEntryIndex);
      v13 = v11;
      if ( v5 >= result )
        return result;
      v7 = v12;
    }
    v9 = dword_4456F8[v3];
    if (top > 0 )
    {
      drawImageWithPosition(
        (int)((char *)cursorBpk + 400 * cursorBpkFrame),
        20,  20,
        (int)((char *)screenBuffer + 640 * v9 + dword_4456F4[v3] + v13));
      drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, v8, v6 + dword_4456F4[v3] + 640 * dword_4456F8[v3]);
      goto LABEL_14;
    }
    goto LABEL_13;
  }
  return result;
}


//----- (0041AA40) --------------------------------------------------------
int __cdecl drawKeyCursor(signed int a1, const void *a2, unsigned int a3, int a4)
{
  signed int v4; // ebx@1
  signed int v5; // edi@1
  int result; // eax@1
  const void *v7; // ebp@2
  unsigned int v8; // esi@3
  signed int v9; // esi@9
  bool v10; // zf@11
  unsigned int v11; // [sp+8h] [bp+4h]@8

  v4 = a1;
  v5 = a1 >> 16;
  updateScreenPtr(a1 >> 16);
  result = a4;
  if ( a4 > 0 )
  {
    v7 = a2;
    while ( 1 )
    {
      v8 = a3;
      if ( (signed int)(a3 + v4 % 0x10000) < 0xFFFF )
        break;
      if ( (signed int)a3 > 0 )
      {
        v11 = a3;
        do
        {
          v9 = v4 >> 16;
          if ( v5 != v4 >> 16 )
            updateScreenPtr(v4 >> 16);
          *(byte *)(v4++ % 0x10000 + screenPtr) = *(byte *)v7;
          v7 = (char *)v7 + 1;
          v10 = v11 == 1;
          v5 = v9;
          --v11;
        }
        while ( !v10 );
        goto LABEL_12;
      }
LABEL_13:
      v4 += 640 - v8;
      v7 = (char *)v7 + 640 - v8;
      result = a4-- - 1;
      if ( !a4 )
        return result;
    }
    if ( v5 != v4 >> 16 )
      updateScreenPtr(v4 >> 16);
    memcpy((void *)(v4 % 0x10000 + screenPtr), v7, a3);
    v5 = v4 >> 16;
    v4 += a3;
    v7 = (char *)v7 + a3;
LABEL_12:
    v8 = a3;
    goto LABEL_13;
  }
  return result;
}
// 456BF0: using guessed type int screenPtr;

//----- (0041AB50) --------------------------------------------------------
int __cdecl updateCursor(int a1)
{
  int v1; // esi@1
  int v2; // edi@1
  signed int v3; // ecx@1
  char *v4; // eax@2
  int v5; // eax@3
  int result; // eax@3
  bool v7; // zf@3
  bool v8; // sf@3
  unsigned __int8 v9; // of@3

  v1 = a1;
  //v1 = 7 * a1;
  v2 = 640 * dword_4456FC[ a1] * dword_445708[ a1] + 7049;
  //v2 = 640 * dword_4456FC[7 * a1] * dword_445708[7 * a1] + 7049;
  v3 = 0;
  do
  {
    v4 = (char *)screenBuffer + 640 * (v3 + dword_4456F8[v1]) + v2 + dword_4456F4[v1];
    *(_DWORD *)v4 = -993737532;
    *((_DWORD *)v4 + 1) = -993737532;
    *((_DWORD *)v4 + 2) = -993737532;
    ++v3;
    *((_DWORD *)v4 + 3) = -993737532;
    *((_DWORD *)v4 + 4) = -993737532;
  }
  while ( v3 < 20 );
  drawImageWithPosition(
    (int)((char *)cursorBpk + 400 * cursorBpkFrame),
    20,
    20,
    (int)((char *)screenBuffer + 640 * dword_4456F8[v1] + v2 + dword_4456F4[v1]));
  v5 = dword_4456F4[v1] + 640 * dword_4456F8[v1];
  drawKeyCursor(v2 + v5, (char *)screenBuffer + v5 + v2, 0x14u, 20);
  result = cursorBpkFrame + 1;
  v9 = __OFSUB__(cursorBpkFrame + 1, 49);
  v7 = cursorBpkFrame == 48;
  v8 = cursorBpkFrame++ - 48 < 0;
  if ( !((unsigned __int8)(v8 ^ v9) | v7) )
    cursorBpkFrame = 0;
  return result;
}


//----- (0041AC50) --------------------------------------------------------
int __cdecl drawCursor(int a1, int a2)
{
  signed int v2; // esi@1
  signed int v3; // eax@1
  char *v4; // edx@2
  int result; // eax@3
  bool v6; // zf@3
  bool v7; // sf@3
  unsigned __int8 v8; // of@3

  v2 = a1 + 640 * a2;
  v3 = 0;
  do
  {
    v4 = (char *)screenBuffer + v3 + v2;
    *(_DWORD *)v4 = -993737532;
    *((_DWORD *)v4 + 1) = -993737532;
    *((_DWORD *)v4 + 2) = -993737532;
    v3 += 640;
    *((_DWORD *)v4 + 3) = -993737532;
    *((_DWORD *)v4 + 4) = -993737532;
  }
  while ( v3 < 12800 );
  drawImageWithPosition((int)((char *)cursorBpk + 400 * cursorBpkFrame), 20, 20, (int)((char *)screenBuffer + v2));
  drawKeyCursor(v2, (char *)screenBuffer + v2, 0x14u, 20);
  result = cursorBpkFrame + 1;
  v8 = __OFSUB__(cursorBpkFrame + 1, 49);
  v6 = cursorBpkFrame == 48;
  v7 = cursorBpkFrame++ - 48 < 0;
  if ( !((unsigned __int8)(v7 ^ v8) | v6) )
    cursorBpkFrame = 0;
  return result;
}
// 45FBF8: using guessed type int cursorBpkFrame;

//----- (0041ACF0) --------------------------------------------------------
int __cdecl sub_41ACF0(int a1)
{
  int v1; // esi@1
  int v2; // ebx@1
  int v3; // edx@1
  int v4; // eax@3
  int v5; // edx@3
  int v6; // eax@3
  int v7; // ebp@3
  bool v8; // zf@4
  int v9; // edx@5
  int v10; // eax@5
  int v11; // edi@5
  signed int v13; // [sp+10h] [bp-10h]@1
  signed int v14; // [sp+10h] [bp-10h]@3
  unsigned int v15; // [sp+14h] [bp-Ch]@1
  unsigned int v16; // [sp+18h] [bp-8h]@1
  int v17; // [sp+18h] [bp-8h]@3
  int v18; // [sp+1Ch] [bp-4h]@1
  int v19; // [sp+24h] [bp+4h]@3

  v1 =  a1;
  v2 = dword_4456F4[ a1];
  v15 = dword_445700[ a1] - 10;
  v16 = dword_445700[ a1] - 20;
  v18 = 640 * (dword_445708[ a1] * dword_4456FC[ a1] + dword_4456F8[ a1] + 6);
  v3 = 640 * (dword_445708[ a1] * dword_4456FC[a1] + dword_4456F8[ a1] + 6);
  /*v1 = 7 * a1;
  v2 = dword_4456F4[7 * a1];
  v15 = dword_445700[7 * a1] - 10;
  v16 = dword_445700[7 * a1] - 20;
  v18 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 6);
  v3 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 6);*/
  v13 = 22;
  do
  {
    memset((char *)screenBuffer + v3 + v2 + 2569, 0xC4u, v16);
    v3 += 640;
    --v13;
  }
  while ( v13 );
  v17 = 9 * a1;
  drawTextWithFont(
    (int)fbig3bBpk,
    (int)&unk_445848,
    &aStartRacing[50 * (dword_445708[v1] + 9 * a1)],
    640 * (dword_4456F8[v1] + dword_445708[v1] * dword_4456FC[v1]) + dword_4456F4[v1] + 3232);
  v4 = dword_4456F0[v1] - 1;
  v5 = v4 * dword_4456FC[v1];
  dword_445708[v1] = v4;
  v6 = dword_4456F8[v1];
  v7 = 640 * (v5 + v6 + 6);
  v19 = 640 * (v5 + v6 + 6);
  v14 = 22;
  do
  {
    memset((char *)screenBuffer + v19 + v2 + 2569, 0xC4u, v15 - 10);
    v8 = v14 == 1;
    v19 += 640;
    --v14;
  }
  while ( !v8 );
  v9 = dword_445708[v1];
  v10 = v9 * dword_4456FC[v1];
  v11 = 640 * v10 + 7049;
  drawTextWithFont(
    (int)graphicsGeneral.fbig3aBpk,
    (int)&unk_445848,
    &aStartRacing[50 * (v9 + v17)],
    640 * (v10 + dword_4456F8[v1]) + dword_4456F4[v1] + 3232);
  drawImageWithPosition(
    (int)((char *)cursorBpk + 400 * cursorBpkFrame),
    20,
    20,
    (int)((char *)screenBuffer + 640 * dword_4456F8[v1] + dword_4456F4[v1] + v11));
  drawKeyCursor(v18 + v2 + 7, (char *)screenBuffer + v18 + v2 + 7, v15, 32);
  return drawKeyCursor(v2 + v7 + 7, (char *)screenBuffer + v7 + v2 + 7, v15, 32);
}
// 4456F0: using guessed type int dword_4456F0[];
// 4456F4: using guessed type int dword_4456F4[];
// 4456F8: using guessed type int dword_4456F8[];
// 4456FC: using guessed type int dword_4456FC[];
// 445700: using guessed type int dword_445700[];
// 445708: using guessed type int dword_445708[];
// 45FBF8: using guessed type int cursorBpkFrame;

//----- (0041AF40) --------------------------------------------------------
int __cdecl refreshMenuUp(int a1)
{
  int v1; // esi@1
  int v2; // ebx@1
  int v3; // edx@1
  int v4; // eax@3
  int v6; // edx@7
  int v7; // eax@7
  int v8; // ebp@7
  bool v9; // zf@8
  int v10; // edx@9
  int v11; // eax@9
  int v12; // edi@9
  signed int v14; // [sp+10h] [bp-10h]@1
  signed int v15; // [sp+10h] [bp-10h]@7
  unsigned int v16; // [sp+14h] [bp-Ch]@1
  unsigned int v17; // [sp+18h] [bp-8h]@1
  int v18; // [sp+18h] [bp-8h]@3
  int v19; // [sp+1Ch] [bp-4h]@1
  int v20; // [sp+24h] [bp+4h]@7

  v1 = a1;
  v2 = dword_4456F4[ a1];
  v16 = dword_445700[ a1] - 10;
  v17 = dword_445700[ a1] - 20;
  v19 = 640 * (dword_445708[ a1] * dword_4456FC[ a1] + dword_4456F8[ a1] + 6);
  v3 = 640 * (dword_445708[ a1] * dword_4456FC[ a1] + dword_4456F8[ a1] + 6);
  /*v1 = 7 * a1;
  v2 = dword_4456F4[7 * a1];
  v16 = dword_445700[7 * a1] - 10;
  v17 = dword_445700[7 * a1] - 20;
  v19 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 6);
  v3 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 6);*/
  v14 = 22;
  do
  {
    memset((char *)screenBuffer + v3 + v2 + 2569, 0xC4u, v17);
    v3 += 640;
    --v14;
  }
  while ( v14 );
  v18 = 9 * a1;
  /*drawTextWithFont(
    (int)fbig3bBpk,
    (int)&unk_445848,
    &aStartRacing[50 * (9 * a1 + dword_445708[v1])],
    640 * (dword_4456F8[v1] + dword_445708[v1] * dword_4456FC[v1]) + dword_4456F4[v1] + 3232);*/
  drawTextWithFont(
	  (int)fbig3bBpk,
	  (int)&unk_445848,
	  getMenuText(a1, dword_445708[v1]),
	  640 * (dword_4456F8[v1] + dword_445708[v1] * dword_4456FC[v1]) + dword_4456F4[v1] + 3232);


  
  v4 = dword_445708[v1];
  do
  {
    if ( v4 <= 0 )
      v4 = dword_4456F0[v1];
  }
  
  while ( !*(&menuActive_4457F0[9 * a1]-1 + v4--) );
  //while (!*(&byte_4457EF[9 * a1] + v4--));
  v6 = v4 * dword_4456FC[v1];
  dword_445708[v1] = v4;
  v7 = dword_4456F8[v1];
  v8 = 640 * (v6 + v7 + 6);
  v20 = 640 * (v6 + v7 + 6);
  v15 = 22;
  do
  {
    memset((char *)screenBuffer + v20 + v2 + 2569, 0xC4u, v16 - 10);
    v9 = v15 == 1;
    v20 += 640;
    --v15;
  }
  while ( !v9 );
  v10 = dword_445708[v1];
  v11 = v10 * dword_4456FC[v1];
  v12 = 640 * v11 + 7049;
 /* drawTextWithFont(
    (int)graphicsGeneral.fbig3aBpk,
    (int)&unk_445848,
    &aStartRacing[50 * (v10 + v18)],
    640 * (v11 + dword_4456F8[v1]) + dword_4456F4[v1] + 3232);*/
  drawTextWithFont(
	  (int)graphicsGeneral.fbig3aBpk,
	  (int)&unk_445848,
	  getMenuText(a1, v9),
	  640 * (v11 + dword_4456F8[v1]) + dword_4456F4[v1] + 3232);
 
  drawImageWithPosition(
    (int)((char *)cursorBpk + 400 * cursorBpkFrame),
    20,
    20,
    (int)((char *)screenBuffer + 640 * dword_4456F8[v1] + dword_4456F4[v1] + v12));
  drawKeyCursor(v19 + v2 + 7, (char *)screenBuffer + v19 + v2 + 7, v16, 32);
  return drawKeyCursor(v2 + v8 + 7, (char *)screenBuffer + v8 + v2 + 7, v16, 32);
}



//----- (0041B1A0) --------------------------------------------------------
int __cdecl refreshMenuDown(int a1)
{
  int v1; // esi@1
  int v2; // ebx@1
  int v3; // edx@1
  int v4; // eax@3
  int v5; // edx@8
  int v6; // eax@8
  int v7; // ebp@8
  bool v8; // zf@9
  int v9; // edx@10
  int v10; // eax@10
  int v11; // edi@10
  signed int v13; // [sp+10h] [bp-10h]@1
  signed int v14; // [sp+10h] [bp-10h]@8
  unsigned int v15; // [sp+14h] [bp-Ch]@1
  unsigned int v16; // [sp+18h] [bp-8h]@1
  int v17; // [sp+18h] [bp-8h]@3
  int v18; // [sp+1Ch] [bp-4h]@1
  int v19; // [sp+24h] [bp+4h]@8

  v1 =  a1;
  v2 = dword_4456F4[ a1];
  v15 = dword_445700[ a1] - 10;
  v16 = dword_445700[ a1] - 20;
  v18 = 640 * (dword_445708[ a1] * dword_4456FC[ a1] + dword_4456F8[ a1] + 5);
  v3 = 640 * (dword_445708[a1] * dword_4456FC[ a1] + dword_4456F8[ a1] + 5);
 /*v1 = 7 * a1;
  v2 = dword_4456F4[7 * a1];
  v15 = dword_445700[7 * a1] - 10;
  v16 = dword_445700[7 * a1] - 20;
  v18 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 5);
  v3 = 640 * (dword_445708[7 * a1] * dword_4456FC[7 * a1] + dword_4456F8[7 * a1] + 5);*/
  v13 = 22;
  do
  {
    memset((char *)screenBuffer + v3 + v2 + 2569, 0xC4u, v16);
    v3 += 640;
    --v13;
  }
  while ( v13 );
  v17 = 9 * a1;
  /*drawTextWithFont(
	  (int)fbig3bBpk,
	  (int)&unk_445848,
	  &aStartRacing[50 * (9 * a1 + dword_445708[v1])],
	  640 * (dword_4456F8[v1] + dword_445708[v1] * dword_4456FC[v1]) + dword_4456F4[v1] + 3232);*/
  drawTextWithFont(
    (int)fbig3bBpk,
    (int)&unk_445848,
	  getMenuText(a1, dword_445708[v1]),
    640 * (dword_4456F8[v1] + dword_445708[v1] * dword_4456FC[v1]) + dword_4456F4[v1] + 3232);
  v4 = dword_445708[v1];
  do
  {
    if ( v4 >= dword_4456F0[v1] - 1 )
      v4 = 0;
    else
      ++v4;
  }
  while ( !*(&menuActive_4457F0[9 * a1] + v4) );
  v5 = v4 * dword_4456FC[v1];
  dword_445708[v1] = v4;
  v6 = dword_4456F8[v1];
  v7 = 640 * (v5 + v6 + 5);
  v19 = 640 * (v5 + v6 + 5);
  v14 = 22;
  do
  {
    memset((char *)screenBuffer + v19 + v2 + 2569, 0xC4u, v15 - 10);
    v8 = v14 == 1;
    v19 += 640;
    --v14;
  }
  while ( !v8 );
  v9 = dword_445708[v1];
  v10 = v9 * dword_4456FC[v1];
  v11 = 640 * v10 + 7049;
  /*drawTextWithFont(
	  (int)graphicsGeneral.fbig3aBpk,
	  (int)&unk_445848,
	  &aStartRacing[50 * (v9 + v17)],
	  640 * (v10 + dword_4456F8[v1]) + dword_4456F4[v1] + 3232);*/
  drawTextWithFont(
    (int)graphicsGeneral.fbig3aBpk,
    (int)&unk_445848,
	  getMenuText(a1, v9 ), 
    640 * (v10 + dword_4456F8[v1]) + dword_4456F4[v1] + 3232);
  drawImageWithPosition(
    (int)((char *)cursorBpk + 400 * cursorBpkFrame),
    20,
    20,
    (int)((char *)screenBuffer + 640 * dword_4456F8[v1] + dword_4456F4[v1] + v11));
  drawKeyCursor(v18 + v2 + 7, (char *)screenBuffer + v18 + v2 + 7, v15, 32);
  return drawKeyCursor(v2 + v7 + 7, (char *)screenBuffer + v7 + v2 + 7, v15, 32);
}


//----- (0041B400) --------------------------------------------------------
unsigned int lappedPopUp()
{
  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)spons1bBpk, 104, 128, (int)((char *)screenBuffer + 107565));
  writeTextInScreen((const char *)&unk_44CB08, 87201);
  writeTextInScreen((const char *)&unk_44CB58, 97441);
  writeTextInScreen(aYouWereLappedY, 107681);
  writeTextInScreen((const char *)&unk_44CBF8, 117921);
  writeTextInScreen(aThePainTheHumi, 128161);
  writeTextInScreen(aMadeMeTheLaugh, 138401);
  writeTextInScreen(aRaces_WhatWere, 148641);
  writeTextInScreen(aMimicSlowMotio, 158881);
  writeTextInScreen(aToTakeMeSeriou, 169121);
  writeTextInScreen(aNoMoneyOrPoint, 179361);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}

//----- (0041B4F0) --------------------------------------------------------
unsigned int winStreakPopUp()
{
  signed int v0; // esi@1
  
  int v2; // esi@13

  v0 = 0;
  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)spons1bBpk, 104, 128, (int)((char *)screenBuffer + 107565));
  
  if ( drivers[driverId].carType == DELIVERATOR )
  {
	  drivers[driverId].money += 5000;
    v0 = 5;
  }
  if (drivers[driverId].carType == WRAITH)
  {
	  drivers[driverId].money += 4000;
    v0 = 4;
  }
  if (drivers[driverId].carType == SHRIEKER)
  {
	  drivers[driverId].money += 3000;
    v0 = 3;
  }
  if (drivers[driverId].carType ==SENTINEL)
  {
	  drivers[driverId].money += 2000;
    v0 = 2;
  }
  if (drivers[driverId].carType == DERVISH)
  {
	  drivers[driverId].money += 1000;
    v0 = 1;
  }
  if (drivers[driverId].carType == VAGABOND)
  {
	  drivers[driverId].money += 600;
    v0 = 0;
  }
  v2 = 800 * v0;
  writeTextInScreen(&byte_447388[v2], 87201);
  writeTextInScreen(&byte_4473D8[v2], 97441);
  writeTextInScreen(&aNotTooShabbyDr[v2], 107681);
  writeTextInScreen(&byte_447478[v2], 117921);
  writeTextInScreen(&aYourWildWinnin[v2], 128161);
  writeTextInScreen(&aYouAnExtra600B[v2], 138401);
  writeTextInScreen(&aGetCockyThoseO[v2], 148641);
  writeTextInScreen(&aVictoryHoundsA[v2], 158881);
  writeTextInScreen(&aRightIntoYourB[v2], 169121);
  writeTextInScreen(&aAndTheyWantToG[v2], 179361);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}

//----- (0041B6A0) --------------------------------------------------------
unsigned int noPaintJobPopUp()
{
  signed int v0; // esi@1
  int v1; // eax@1
  int v2; // esi@13

  v0 = 0;
  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)event2Bpk, 104, 128, (int)((char *)screenBuffer + 107565));
 
  if (drivers[driverId].carType == DELIVERATOR)
  {
	  drivers[driverId].money += 6000;
    v0 = 5;
  }
  if (drivers[driverId].carType == WRAITH)
  {
	  drivers[driverId].money += 4500;
    v0 = 4;
  }
  if (drivers[driverId].carType == SHRIEKER)
  {
	  drivers[driverId].money += 3000;
    v0 = 3;
  }
  if (drivers[driverId].carType == SENTINEL)
  {
	  drivers[driverId].money += 1500;
    v0 = 2;
  }
  if (drivers[driverId].carType == DERVISH)
  {
	  drivers[driverId].money += 750;
    v0 = 1;
  }
  if (drivers[driverId].carType == VAGABOND)
  {
	  drivers[driverId].money += 350;
    v0 = 0;
  }
  v2 = 800 * v0;
  writeTextInScreen(&byte_448648[v2], 87201);
  writeTextInScreen(&byte_448698[v2], 97441);
  writeTextInScreen(&aInconceivableD[v2], 107681);
  writeTextInScreen(&byte_448738[v2], 117921);
  writeTextInScreen(&aItWasASnowball[v2], 128161);
  writeTextInScreen(&aThroughThatBli[v2], 138401);
  writeTextInScreen(&aNotAShadowOfAS[v2], 148641);
  writeTextInScreen(&aPaintJob_MyBet[v2], 158881);
  writeTextInScreen(&aItPaidMeBackBi[v2], 169121);
  writeTextInScreen(&aShare350_GoKno[v2], 179361);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}
// 46085C: using guessed type int dword_46085C[];
// 460870: using guessed type int dword_460870[];
// 463CE8: using guessed type int driverId;

//----- (0041B850) --------------------------------------------------------
unsigned int allCarsCrashPopUp()
{
  signed int v0; // esi@1
  int v1; // eax@1
  int v2; // esi@13

  v0 = 0;
  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)reaperxBpk, 104, 128, (int)((char *)screenBuffer + 107565));
  v1 = 27 * driverId;

  //segun el tipo de coche
  if (drivers[driverId].carType == DELIVERATOR)
  {
	  drivers[driverId].money += 5000;
    v0 = 5;
  }
  if (drivers[driverId].carType == WRAITH)
  {
	  drivers[driverId].money += 4000;
    v0 = 4;
  }
  if (drivers[driverId].carType == SHRIEKER)
  {
	  drivers[driverId].money += 3000;
    v0 = 3;
  }
  if (drivers[driverId].carType == SENTINEL)
  {
	  drivers[driverId].money += 2000;
    v0 = 2;
  }
  if (drivers[driverId].carType == DERVISH)
  {
	  drivers[driverId].money += 1000;
    v0 = 1;
  }
  if (drivers[driverId].carType == VAGABOND)
  {
	  drivers[driverId].money += 600;
    v0 = 0;
  }
  v2 = 800 * v0;
  writeTextInScreen(&byte_449908[v2], 87201);
  writeTextInScreen(&byte_449958[v2], 97441);
  writeTextInScreen(&aIAmOneGrateful[v2], 107681);
  writeTextInScreen(&byte_4499F8[v2], 117921);
  writeTextInScreen(&aMoreCarCorpses[v2], 128161);
  writeTextInScreen(&aAreMySweetestM[v2], 138401);
  writeTextInScreen(&aSeriousDedicat[v2], 148641);
  writeTextInScreen(&aAParkingSpaceA[v2], 158881);
  writeTextInScreen(&aABonusOf600ToY[v2], 169121);
  writeTextInScreen(&aPoweredSerialA[v2], 179361);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}
// 46085C: using guessed type int dword_46085C[];
// 460870: using guessed type int dword_460870[];
// 463CE8: using guessed type int driverId;

//----- (0041BA00) --------------------------------------------------------
int steriodsNotFoundPopup()
{
  int v0; // ecx@3
  int *v1; // eax@3
  int v2; // ecx@3
  int v3; // ecx@5
  int v4; // ecx@9
  int v5; // ecx@11
  int v6; // eax@15
  char v7; // cl@16
  unsigned int v8; // eax@17
  void *v9; // edi@17
  char v10; // cl@18
  char *v11; // edi@19
  char v12; // al@20
  signed int v13; // esi@23
  int v14; // ecx@34
  int v15; // eax@34
  int v16; // eax@35
  int v17; // eax@36
  signed int v19; // [sp+4h] [bp-44h]@0
  int v20; // [sp+8h] [bp-40h]@3
  __int16 v21; // [sp+Ch] [bp-3Ch]@3
  char v22; // [sp+13h] [bp-35h]@17
  char v23[52]; // [sp+14h] [bp-34h]@16

  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)drugdealBpk, 104, 128, (int)((char *)screenBuffer + 107565));
  if ( drugQuest_456BB4 <= 0 )
  {
    switch ( drugQuest_456BB4 )
    {
      case -1:
        v13 = 6000;
        break;
      case -2:
        v13 = 4000;
        break;
      case -3:
        v13 = 3000;
        break;
      case -4:
        v13 = 2000;
        break;
      case -5:
        v13 = 1000;
        break;
      default:
        v13 = 500;
        if ( drugQuest_456BB4 != -6 )
          v13 = v19;
        break;
    }
    writeTextInScreen(aWhereReMyStero, 107681);
    writeTextInScreen((const char *)&unk_44AF38, 117921);
    writeTextInScreen(aTheWholeDealWe, 128161);
    writeTextInScreen(aOfYourIncompet, 138401);
    writeTextInScreen(aTurnsOfTheWhee, 148641);
    writeTextInScreen(aIMNotHappyAndW, 158881);
    writeTextInScreen(aHappyIAmMadAnd, 169121);
    writeTextInScreen(aMadBadThingsHa, 179361);
    writeTextInScreen((const char *)&unk_44B168, 189601);
    writeTextInScreen((const char *)&unk_44B1B8, 199841);
    
    v15 = drivers[driverId].money;
    if ( v15 < v13 )
    {
      v17 = drivers[driverId].engine;
      if ( v17 > 0 )
      {
		  drivers[driverId].engine = v17 - 1;
        goto LABEL_40;
      }
      v16 = drivers[driverId].money / 2;
    }
    else
    {
      v16 = v15 - v13;
    }
	drivers[driverId].money = v16;
    goto LABEL_40;
  }
  switch ( drugQuest_456BB4 )
  {
    case 1:
      v21 = 48;
      v0 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v20 = 808464945;
      v2 = v0 + 12000;
      break;
    case 2:
      v20 = 808464440;
      v3 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      LOBYTE(v21) = 0;
      v2 = v3 + 8000;
      break;
    case 3:
      v20 = 808464438;
      LOBYTE(v21) = 0;
      v1 = &drivers[driverId].money;
      v2 = drivers[driverId].money + 6000;
      break;
    case 4:
      LOBYTE(v21) = 0;
      v4 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v20 = 808464436;
      v2 = v4 + 4000;
      break;
    case 5:
      v20 = 808464434;
      v5 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      LOBYTE(v21) = 0;
      v2 = v5 + 2000;
      break;
    default:
      if ( drugQuest_456BB4 != 6 )
        goto LABEL_15;
      v20 = 808464433;
      LOBYTE(v21) = 0;
      v1 = &drivers[driverId].money;
      v2 = drivers[driverId].money + 1000;
      break;
  }
  *v1 = v2;
LABEL_15:
  writeTextInScreen(aWhatMotorizedS, 107681);
  writeTextInScreen((const char *)&unk_44AC18, 117921);
  writeTextInScreen(aWowMyMainMan_I, 128161);
  writeTextInScreen(aThereWasThatMu, 138401);
  writeTextInScreen(aWholeBurningHe, 148641);
  writeTextInScreen(aItAllBearingGi, 158881);
  writeTextInScreen(aBlessedBeastYo, 169121);
  v6 = 0;
  do
  {
    v7 = byte_44ADF8[v6];
    v23[v6++] = v7;
  }
  while ( v7 );
  v8 = strlen((const char *)&v20) + 1;
  v9 = &v22;
  do
  {
    v10 = *((byte *)v9 + 1);
    v9 = (char *)v9 + 1;
  }
  while ( v10 );
  memcpy(v9, &v20, v8);
  v11 = &v22;
  do
    v12 = (v11++)[1];
  while ( v12 );
  *(_DWORD *)v11 = 1869881388;
  *((_DWORD *)v11 + 1) = 1970239776;
  *((_WORD *)v11 + 4) = 46;
  writeTextInScreen(v23, 179361);
  writeTextInScreen((const char *)&unk_44AE48, 189601);
  writeTextInScreen((const char *)&unk_44AE98, 199841);
LABEL_40:
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
  return 0;
}
// 456BB4: using guessed type int drugQuest_456BB4;
// 460850: using guessed type int dword_460850[];
// 460870: using guessed type int dword_460870[];
// 463CE8: using guessed type int driverId;
// 41BA00: using guessed type char var_34[52];

//----- (0041BDE0) --------------------------------------------------------
int killOnePopup()
{
  int v0; // ecx@3
  int *v1; // eax@3
  int v2; // ecx@3
  int v3; // ecx@5
  int v4; // ecx@9
  int v5; // ecx@11
  int v6; // ecx@13
  int v7; // eax@15
  char v8; // cl@16
  unsigned int v9; // eax@17
  void *v10; // edi@17
  char v11; // cl@18
  char *v12; // edi@19
  char v13; // al@20
  int v14; // eax@21
  char v15; // cl@22
  unsigned int v16; // eax@23
  void *v17; // edi@23
  char v18; // cl@24
  char *v19; // edi@25
  char v20; // al@26
  signed int v21; // esi@29
  int v22; // ecx@40
  int v23; // eax@40
  int v24; // eax@41
  int v25; // eax@42
  signed int v27; // [sp+4h] [bp-44h]@0
  int v28; // [sp+8h] [bp-40h]@3
  char v29; // [sp+Ch] [bp-3Ch]@3
  char v30; // [sp+13h] [bp-35h]@17
  char v31[52]; // [sp+14h] [bp-34h]@16

  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition((int)event2Bpk, 104, 128, (int)((char *)screenBuffer + 107565));
  if ( killOneQuest_456BB8 <= 0 )
  {
    switch ( killOneQuest_456BB8 )
    {
      case -1:
        v21 = 3000;
        break;
      case -2:
        v21 = 2000;
        break;
      case -3:
        v21 = 1000;
        break;
      case -4:
        v21 = 750;
        break;
      case -5:
        v21 = 500;
        break;
      default:
        v21 = 250;
        if ( killOneQuest_456BB8 != -6 )
          v21 = v27;
        break;
    }
    writeTextInScreen(aYourHitMissed, 107681);
    writeTextInScreen((const char *)&unk_44B578, 117921);
    writeTextInScreen(aYouSissySunday, 128161);
    writeTextInScreen(aSimplestJobAnd, 138401);
    writeTextInScreen(aIBetYouAreAfra, 148641);
    writeTextInScreen(aWell_ILlShowYo, 158881);
    writeTextInScreen(aWhenYouBreakYo, 169121);
    writeTextInScreen(aIMGonnaMakeYou, 179361);
    writeTextInScreen((const char *)&unk_44B7A8, 189601);
    writeTextInScreen((const char *)&unk_44B7F8, 199841);
   
    v23 = drivers[driverId].money;
    if ( v23 < v21 )
    {
      v25 = drivers[driverId].engine;
      if ( v25 > 0 )
      {
		  drivers[driverId].engine = v25 - 1;
        goto LABEL_46;
      }
      v24 = drivers[driverId].money / 2;
    }
    else
    {
      v24 = v23 - v21;
    }
	drivers[driverId].money = v24;
    goto LABEL_46;
  }
  switch ( killOneQuest_456BB8 )
  {
    case 1:
      v29 = 0;
      v0 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v28 = 808464438;
      v2 = v0 + 6000;
      break;
    case 2:
      v28 = 808464436;
      v3 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v29 = 0;
      v2 = v3 + 4000;
      break;
    case 3:
      v28 = 808464435;
      v29 = 0;
      v1 = &drivers[driverId].money;
      v2 = drivers[driverId].money + 3000;
      break;
    case 4:
      v29 = 0;
      v4 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v28 = 808464434;
      v2 = v4 + 2000;
      break;
    case 5:
      v28 = 808464433;
      v5 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v29 = 0;
      v2 = v5 + 1000;
      break;
    default:
      if ( killOneQuest_456BB8 != 6 )
        goto LABEL_15;
      v6 = drivers[driverId].money;
      v1 = &drivers[driverId].money;
      v28 = 3158069;
      v2 = v6 + 500;
      break;
  }
  *v1 = v2;
LABEL_15:
  writeTextInScreen(aYouTotallySlew, 107681);
  writeTextInScreen((const char *)&unk_44B258, 117921);
  writeTextInScreen(aAKillerRaceThe, 128161);
  writeTextInScreen(aSkyLikeCloudsO, 138401);
  writeTextInScreen(aTheScreamsOfMo, 148641);
  writeTextInScreen(aBansheeWail_De, 158881);
  v7 = 0;
  do
  {
    v8 = byte_44B3E8[v7];
    v31[v7++] = v8;
  }
  while ( v8 );
  v9 = strlen((const char *)&unk_45FBE0) + 1;
  v10 = &v30;
  do
  {
    v11 = *((byte *)v10 + 1);
    v10 = (char *)v10 + 1;
  }
  while ( v11 );
  memcpy(v10, &unk_45FBE0, v9);
  v12 = &v30;
  do
    v13 = (v12++)[1];
  while ( v13 );
  *(_DWORD *)v12 = 544434464;
  *((_DWORD *)v12 + 1) = 1629515369;
  *((_DWORD *)v12 + 2) = 1918984992;
  *((_WORD *)v12 + 6) = 45;
  writeTextInScreen(v31, 169121);
  v14 = 0;
  do
  {
    v15 = byte_44B438[v14];
    v31[v14++] = v15;
  }
  while ( v15 );
  v16 = strlen((const char *)&v28) + 1;
  v17 = &v30;
  do
  {
    v18 = *((byte *)v17 + 1);
    v17 = (char *)v17 + 1;
  }
  while ( v18 );
  memcpy(v17, &v28, v16);
  v19 = &v30;
  do
    v20 = (v19++)[1];
  while ( v20 );
  *(_DWORD *)v19 = 1870209068;
  *((_DWORD *)v19 + 1) = 1830842997;
  *((_DWORD *)v19 + 2) = 2036690543;
  *((_WORD *)v19 + 6) = 46;
  writeTextInScreen(v31, 179361);
  writeTextInScreen((const char *)&unk_44B488, 189601);
  writeTextInScreen((const char *)&unk_44B4D8, 199841);
LABEL_46:
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
  return 0;
}


//----- (0041C230) --------------------------------------------------------
unsigned int welcomeShopPopup()
{
  createPopup(45, 131, 458, 230, 1);
  writeTextInScreen((const char *)&unk_44B848, 90300);
  writeTextInScreen(aWelcomeToTheSh, 100540);
  writeTextInScreen((const char *)&unk_44B8E8, 110780);
  writeTextInScreen(aZillionsMoreMi, 121020);
  writeTextInScreen(aIsNoJuggernaut, 131260);
  writeTextInScreen(aTheWay_YouNeed, 141500);
  writeTextInScreen(aMakeHeadlongHe, 151740);
  writeTextInScreen(aStrideToStrive, 161980);
  writeTextInScreen(aBest_BuyBeOneS, 172220);
  writeTextInScreen((const char *)&unk_44BB18, 182460);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}

//----- (0041C300) --------------------------------------------------------
unsigned int endGamePopup()
{
  unsigned int result; // eax@4

  createPopup(33, 131, 482, 230, 1);
  if ( isMultiplayerGame )
  {
    drawImageWithPosition((int)event2Bpk, 104, 128, (int)((char *)screenBuffer + 107565));
    writeTextInScreen((const char *)&unk_454F58, 87201);
    writeTextInScreen((const char *)&unk_454F8A, 97441);
    writeTextInScreen(aItAinTOverTill, 107681);
    writeTextInScreen((const char *)&unk_454FEE, 117921);
    writeTextInScreen(aSoTheyThinkThe, 128161);
    writeTextInScreen(aEh_IThinkThatT, 138401);
    writeTextInScreen(aOnlyMadeYouStr, 148641);
    writeTextInScreen(aTemperedWicked, 158881);
    writeTextInScreen(aThereAndLetThe, 169121);
    writeTextInScreen(aTheirCost_This, 179361);
  }
  else
  {
    writeTextInScreen((const char *)&unk_454C38, 90300);
    writeTextInScreen(aEndOfTheRoadDr, 100540);
    writeTextInScreen((const char *)&unk_454CD8, 110780);
    writeTextInScreen(aThisThenIsHowI, 121020);
    writeTextInScreen(aWithAWhimper_Y, 131260);
    writeTextInScreen(aRoadButYouBlew, 141500);
    writeTextInScreen(aThat_InDeathRa, 151740);
    writeTextInScreen(aTheBestCanMake, 161980);
    writeTextInScreen(aSideAtLeastYou, 172220);
    writeTextInScreen((const char *)&unk_454F08, 182460);
  }
  result = drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
  dword_456B10 = 0;
  byte_45E0DC = 0;
  return result;
}


//----- (0041C4C0) --------------------------------------------------------
int payBackTimePopup()
{
  int v0; // eax@1
  int v1; // ecx@1
  int v2; // esi@1
  int v3; // eax@17
  int v4; // ecx@27
  int v5; // eax@27

  v0 =  driverId;
  v1 = drivers[driverId].loanType;
  v2 = 0;
  if ( v1== LOAN_DELIVERATOR && drivers[driverId].money < 18000 )
    v2 = 1;
  if ( v1 == LOAN_WRAIGHT && drivers[driverId].money < 13500 )
    v2 = drivers[driverId].loanType;
  if ( v1 == LOAN_SHRIEKER && drivers[driverId].money < 9000 )
    v2 = 1;
  if ( v1 == LOAN_SENTINEL && drivers[driverId].money < 4500 )
    v2 = 1;
  if ( v1 == LOAN_DERVISH && drivers[driverId].money < 2250 )
    v2 = 1;
  createPopup(33, 131, 482, 230, 1);
  drawImageWithPosition2((int)dealer2bBpk, 96, 96, (int)((char *)screenBuffer + 117805));
  if ( v2 )
  {
    writeTextInScreen((const char *)&unk_44C7E8, 87168);
    writeTextInScreen(aItSPayBackTi_0, 97408);
    writeTextInScreen((const char *)&unk_44C888, 107648);
    writeTextInScreen(aTutTutHotshotI, 117888);
    writeTextInScreen(aMoneyAnywhere_, 128128);
    writeTextInScreen(aJoker_ADealIsA, 138368);
    writeTextInScreen(aReputationToLo, 148608);
    writeTextInScreen(aNothingPersona, 158848);
    writeTextInScreen(aYouSomeNow_Hur, 169088);
    writeTextInScreen((const char *)&unk_44CAB8, 179328);
    v4 = driverId;
    v5 = drivers[driverId].engine;
    if ( v5 <= 0 )
		drivers[driverId].money /= 2;
    else
		drivers[driverId].engine = v5 - 1;
  }
  else
  {
    writeTextInScreen((const char *)&unk_44C4C8, 87168);
    writeTextInScreen(aItSPayBackTime, 97408);
    writeTextInScreen((const char *)&unk_44C568, 107648);
    writeTextInScreen(aThisIsWhatILik, 117888);
    writeTextInScreen(aWhoKeepsHisPar, 128128);
    writeTextInScreen(aAhTheSweetSmel, 138368);
    writeTextInScreen(aToPapaMyBabies, 148608);
    writeTextInScreen(aBusinessWithYo, 158848);
    writeTextInScreen(aThanksAndGoodR, 169088);
    writeTextInScreen((const char *)&unk_44C798, 179328);
    v3 = 27 * driverId;
    if (drivers[driverId].loanType == LOAN_DELIVERATOR )
		drivers[driverId].money -= 18000;
    if (drivers[driverId].loanType == LOAN_WRAIGHT )
		drivers[driverId].money -= 13500;
    if (drivers[driverId].loanType == LOAN_SHRIEKER )
		drivers[driverId].money -= 9000;
    if (drivers[driverId].loanType == LOAN_SENTINEL )
		drivers[driverId].money -= 4500;
    if (drivers[driverId].loanType == LOAN_DERVISH )
		drivers[driverId].money -= 2250;
  }
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
  return 0;
}


//----- (0041C770) --------------------------------------------------------
unsigned int undergroundMarketPopup()
{
  createPopup(45, 131, 458, 230, 1);
  writeTextInScreen((const char *)&unk_44BE88, 90300);
  writeTextInScreen(aPsst___yeahYou, 100540);
  writeTextInScreen((const char *)&unk_44BF28, 110780);
  writeTextInScreen(aJealousyBurnsY, 121020);
  writeTextInScreen(aWantThatRoadAl, 131260);
  writeTextInScreen(aThoseRivalSuck, 141500);
  writeTextInScreen(aBlazeYouTakeTh, 151740);
  writeTextInScreen(aUndergroundM_0, 161980);
  writeTextInScreen(aDigOutTheDough, 172220);
  writeTextInScreen((const char *)&unk_44C158, 182460);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}

//----- (0041C840) --------------------------------------------------------
unsigned int welcomePopup()
{
  createPopup(45, 131, 458, 230, 1);
  writeTextInScreen((const char *)&unk_44C1A8, 90300);
  writeTextInScreen(aWelcomeToDea_0, 100540);
  writeTextInScreen((const char *)&unk_44C248, 110780);
  writeTextInScreen(aTheRaceIsOnInD, 121020);
  writeTextInScreen(aShortHotFastDe, 131260);
  writeTextInScreen(aHearTheRumble_, 141500);
  writeTextInScreen(aFeelOfIt_ButRe, 151740);
  writeTextInScreen(aFryTheRulesPla, 161980);
  writeTextInScreen(aRideYourMachin, 172220);
  writeTextInScreen((const char *)&unk_44C478, 182460);
  return drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
}


//----- (0041C9F0) --------------------------------------------------------
int __cdecl sub_41C9F0(const char *a1)
{
  const char *v1; // ecx@1
  int result; // eax@1
  unsigned int v3; // esi@1
  char v4; // dl@2

  v1 = a1;
  result = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
      result += (unsigned __int8)menuActive_4457F0[58+a1[v3++]];
    while ( v3 < strlen(a1) );
  }
  return result;
}

//----- (0041CA40) --------------------------------------------------------
unsigned int sub_41CA40()
{
  char *v0; // eax@1
  char *v1; // eax@1
  char *v2; // eax@1
  char *v3; // eax@1
  char *v4; // eax@1
  char *v5; // eax@1
  char *v6; // eax@1
  char *v7; // eax@1
  char *v8; // eax@1
  signed int v9; // eax@1
  signed int v10; // ebx@2
  char *v11; // eax@3
  char v12; // dl@4
  unsigned int v13; // eax@5
  char *v14; // esi@5
  char *v15; // edi@5
  char v16; // cl@6
  void *v17; // edi@7
  const void *v18; // esi@7
  int v19; // ecx@7
  char *v20; // eax@7
  char *v21; // ecx@7
  char v22; // dl@8
  unsigned int v23; // eax@9
  const void *v24; // esi@9
  char *v25; // edi@9
  char v26; // cl@10
  void *v27; // edi@11
  const void *v28; // esi@11
  int v29; // ecx@11
  char *v30; // eax@11
  char *v31; // ecx@11
  char v32; // dl@12
  unsigned int v33; // eax@13
  const void *v34; // esi@13
  char *v35; // edi@13
  char v36; // cl@14
  void *v37; // edi@15
  const void *v38; // esi@15
  int v39; // ecx@15
  char *v40; // eax@15
  char *v41; // ecx@15
  char v42; // dl@16
  unsigned int v43; // eax@17
  const void *v44; // esi@17
  char *v45; // edi@17
  char v46; // cl@18
  void *v47; // edi@19
  const void *v48; // esi@19
  int v49; // ecx@19
  char *v50; // eax@19
  char *v51; // ecx@19
  char v52; // dl@20
  unsigned int v53; // eax@21
  const void *v54; // esi@21
  char *v55; // edi@21
  char v56; // cl@22
  void *v57; // edi@23
  const void *v58; // esi@23
  int v59; // ecx@23
  char *v60; // eax@23
  char *v61; // ecx@23
  char v62; // dl@24
  unsigned int v63; // eax@25
  const void *v64; // esi@25
  char *v65; // edi@25
  char v66; // cl@26
  void *v67; // edi@27
  const void *v68; // esi@27
  int v69; // ecx@27
  char *v70; // eax@27
  char *v71; // ecx@27
  char v72; // dl@28
  unsigned int v73; // eax@29
  const void *v74; // esi@29
  void *v75; // edi@29
  char v76; // cl@30
  void *v77; // edi@31
  const void *v78; // esi@31
  int v79; // ecx@31
  char *v80; // eax@31
  const void *v81; // esi@31
  char v82; // cl@32
  unsigned int v83; // eax@33
  char *v84; // edi@33
  char v85; // cl@34
  int v86; // eax@35
  char *v87; // eax@35
  char *v88; // ecx@35
  char v89; // dl@36
  unsigned int v90; // eax@37
  const void *v91; // esi@37
  char *v92; // edi@37
  char v93; // cl@38
  void *v94; // edi@39
  const void *v95; // esi@39
  int v96; // ecx@39
  char *v97; // eax@39
  char *v98; // ecx@39
  char v99; // dl@40
  unsigned int v100; // eax@41
  const void *v101; // esi@41
  char *v102; // edi@41
  char v103; // cl@42
  void *v104; // edi@43
  const void *v105; // esi@43
  int v106; // ecx@43
  char *v107; // eax@43
  char *v108; // ecx@43
  char v109; // dl@44
  unsigned int v110; // eax@45
  const void *v111; // esi@45
  char *v112; // edi@45
  char v113; // cl@46
  void *v114; // edi@47
  const void *v115; // esi@47
  int v116; // ecx@47
  char *v117; // eax@47
  char *v118; // ecx@47
  char v119; // dl@48
  unsigned int v120; // eax@49
  const void *v121; // esi@49
  char *v122; // edi@49
  char v123; // cl@50
  void *v124; // edi@51
  const void *v125; // esi@51
  int v126; // ecx@51
  char *v127; // eax@51
  char *v128; // ecx@51
  char v129; // dl@52
  unsigned int v130; // eax@53
  const void *v131; // esi@53
  char *v132; // edi@53
  char v133; // cl@54
  void *v134; // edi@55
  const void *v135; // esi@55
  int v136; // ecx@55
  char *v137; // eax@55
  char *v138; // ecx@55
  char v139; // dl@56
  unsigned int v140; // eax@57
  const void *v141; // esi@57
  char *v142; // edi@57
  char v143; // cl@58
  void *v144; // edi@59
  const void *v145; // esi@59
  int v146; // ecx@59
  char *v147; // eax@59
  char *v148; // ecx@59
  char v149; // dl@60
  unsigned int result; // eax@61
  const void *v151; // esi@61
  void *v152; // edi@61
  char v153; // cl@62

  v0 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)byte_456B01;
  *(_DWORD *)v0 = 538976301;
  *((_DWORD *)v0 + 1) = 538976288;
  *((_DWORD *)v0 + 2) = 538976288;
  v0[12] = 0;
  v1 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultLeftSteeringGamepad;
  *(_DWORD *)v1 = 1952867692;
  *((_DWORD *)v1 + 1) = 538976288;
  *((_DWORD *)v1 + 2) = 538976288;
  v1[12] = 0;
  v2 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultRightSteeringGamepad;
  *(_DWORD *)v2 = 1751607666;
  *((_DWORD *)v2 + 1) = 538976372;
  *((_DWORD *)v2 + 2) = 538976288;
  v2[12] = 0;
  v3 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)byte_44512A;
  *(_DWORD *)v3 = 538996853;
  *((_DWORD *)v3 + 1) = 538976288;
  *((_DWORD *)v3 + 2) = 538976288;
  v3[12] = 0;
  v4 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultBrakeGamepad;
  *(_DWORD *)v4 = 1853321060;
  *((_DWORD *)v4 + 1) = 538976288;
  *((_DWORD *)v4 + 2) = 538976288;
  v4[12] = 0;
  v5 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultAccelerateGamepad;
  *(_DWORD *)v5 = 1953789282;
  *((_DWORD *)v5 + 1) = 824209007;
  *((_DWORD *)v5 + 2) = 538976288;
  v5[12] = 0;
  v6 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultTurboGamepad;
  *(_DWORD *)v6 = 1953789282;
  *((_DWORD *)v6 + 1) = 840986223;
  *((_DWORD *)v6 + 2) = 538976288;
  v6[12] = 0;
  v7 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultGunGamepad;
  *(_DWORD *)v7 = 1953789282;
  *((_DWORD *)v7 + 1) = 857763439;
  *((_DWORD *)v7 + 2) = 538976288;
  v7[12] = 0;
  v8 = (char *)&unk_45EAC0 + 15 * (unsigned __int8)configuration.defaultMineGamepad;
  *(_DWORD *)v8 = 1953789282;
  *((_DWORD *)v8 + 1) = 874540655;
  *((_DWORD *)v8 + 2) = 538976288;
  v8[12] = 0;
  v9 = (signed int)&unk_462DA0;
  do
  {
    v10 = v9;
    *(_DWORD *)v9 = 1447120469;
    *(_DWORD *)(v9 + 4) = 1095518529;
    v9 += 15;
    *(_DWORD *)(v10 + 8) = 541412418;
    *(byte *)(v10 + 12) = 0;
  }
  while ( v9 < (signed int)&numberOfLaps );
  dword_462DAF = 543388517;
  dword_462DB3 = 538976288;
  dword_462DB7 = 538976288;
  byte_462DBB = 0;
  dword_462DBE = 538976305;
  dword_462DC2 = 538976288;
  dword_462DC6 = 538976288;
  byte_462DCA = 0;
  dword_462DCD = 538976306;
  dword_462DD1 = 538976288;
  dword_462DD5 = 538976288;
  byte_462DD9 = 0;
  dword_462DDC = 538976307;
  dword_462DE0 = 538976288;
  dword_462DE4 = 538976288;
  byte_462DE8 = 0;
  dword_462DEB = 538976308;
  dword_462DEF = 538976288;
  dword_462DF3 = 538976288;
  byte_462DF7 = 0;
  dword_462DFA = 538976309;
  dword_462DFE = 538976288;
  dword_462E02 = 538976288;
  byte_462E06 = 0;
  dword_462E09 = 538976310;
  dword_462E0D = 538976288;
  dword_462E11 = 538976288;
  byte_462E15 = 0;
  dword_462E18 = 538976311;
  dword_462E1C = 538976288;
  dword_462E20 = 538976288;
  byte_462E24 = 0;
  dword_462E27 = 538976312;
  dword_462E2B = 538976288;
  dword_462E2F = 538976288;
  byte_462E33 = 0;
  dword_462E36 = 538976313;
  dword_462E3A = 538976288;
  dword_462E3E = 538976288;
  byte_462E42 = 0;
  dword_462E45 = 538976304;
  dword_462E49 = 538976288;
  dword_462E4D = 538976288;
  byte_462E51 = 0;
  dword_462E54 = 1970170221;
  dword_462E58 = 538976371;
  dword_462E5C = 538976288;
  byte_462E60 = 0;
  dword_462E63 = 1635086693;
  dword_462E67 = 538976364;
  dword_462E6B = 538976288;
  byte_462E6F = 0;
  dword_462E72 = 1801675106;
  dword_462E76 = 1667330163;
  dword_462E7A = 538976357;
  byte_462E7E = 0;
  dword_462E81 = 543318388;
  dword_462E85 = 538976288;
  dword_462E89 = 538976288;
  byte_462E8D = 0;
  dword_462E90 = 538976369;
  dword_462E94 = 538976288;
  dword_462E98 = 538976288;
  byte_462E9C = 0;
  dword_462E9F = 538976375;
  dword_462EA3 = 538976288;
  dword_462EA7 = 538976288;
  byte_462EAB = 0;
  dword_462EAE = 538976357;
  dword_462EB2 = 538976288;
  dword_462EB6 = 538976288;
  byte_462EBA = 0;
  dword_462EBD = 538976370;
  dword_462EC1 = 538976288;
  dword_462EC5 = 538976288;
  byte_462EC9 = 0;
  dword_462ECC = 538976372;
  dword_462ED0 = 538976288;
  dword_462ED4 = 538976288;
  byte_462ED8 = 0;
  dword_462EDB = 538976377;
  dword_462EDF = 538976288;
  dword_462EE3 = 538976288;
  byte_462EE7 = 0;
  dword_462EEA = 538976373;
  dword_462EEE = 538976288;
  dword_462EF2 = 538976288;
  byte_462EF6 = 0;
  dword_462EF9 = 538976361;
  dword_462EFD = 538976288;
  dword_462F01 = 538976288;
  byte_462F05 = 0;
  dword_462F08 = 538976367;
  dword_462F0C = 538976288;
  dword_462F10 = 538976288;
  byte_462F14 = 0;
  dword_462F17 = 538976368;
  dword_462F1B = 538976288;
  dword_462F1F = 538976288;
  byte_462F23 = 0;
  dword_462F26 = 1952867692;
  dword_462F2A = 1634886176;
  dword_462F2E = 1952803683;
  byte_462F32 = 0;
  dword_462F35 = 1751607666;
  dword_462F39 = 1919033460;
  dword_462F3D = 1701536609;
  word_462F41 = 116;
  dword_462F44 = 1702129253;
  dword_462F48 = 538976370;
  dword_462F4C = 538976288;
  byte_462F50 = 0;
  dword_462F53 = 1952867692;
  dword_462F57 = 1852793632;
  dword_462F5B = 1819243124;
  byte_462F5F = 0;
  dword_462F62 = 538976353;
  dword_462F66 = 538976288;
  dword_462F6A = 538976288;
  byte_462F6E = 0;
  dword_462F71 = 538976371;
  dword_462F75 = 538976288;
  dword_462F79 = 538976288;
  byte_462F7D = 0;
  dword_462F80 = 538976356;
  dword_462F84 = 538976288;
  dword_462F88 = 538976288;
  byte_462F8C = 0;
  dword_462F8F = 538976358;
  dword_462F93 = 538976288;
  dword_462F97 = 538976288;
  byte_462F9B = 0;
  dword_462F9E = 538976359;
  dword_462FA2 = 538976288;
  dword_462FA6 = 538976288;
  byte_462FAA = 0;
  dword_462FAD = 538976360;
  dword_462FB1 = 538976288;
  dword_462FB5 = 538976288;
  byte_462FB9 = 0;
  dword_462FBC = 538976362;
  dword_462FC0 = 538976288;
  dword_462FC4 = 538976288;
  byte_462FC8 = 0;
  dword_462FCB = 538976363;
  dword_462FCF = 538976288;
  dword_462FD3 = 538976288;
  byte_462FD7 = 0;
  dword_462FDA = 538976364;
  dword_462FDE = 538976288;
  dword_462FE2 = 538976288;
  byte_462FE6 = 0;
  dword_462FE9 = 1768777075;
  dword_462FED = 1869377379;
  dword_462FF1 = 538976366;
  byte_462FF5 = 0;
  dword_462FF8 = 1801677172;
  dword_462FFC = 538976288;
  dword_463000 = 538976288;
  byte_463004 = 0;
  dword_463007 = 1936683105;
  dword_46300B = 1886351988;
  dword_46300F = 538994024;
  byte_463013 = 0;
  dword_463016 = 1952867692;
  dword_46301A = 1768452896;
  dword_46301E = 538997862;
  byte_463022 = 0;
  dword_463025 = 1801675106;
  dword_463029 = 1935764595;
  dword_46302D = 538976360;
  byte_463031 = 0;
  dword_463034 = 538976378;
  dword_463038 = 538976288;
  dword_46303C = 538976288;
  byte_463040 = 0;
  dword_463043 = 538976376;
  dword_463047 = 538976288;
  dword_46304B = 538976288;
  byte_46304F = 0;
  dword_463052 = 538976355;
  dword_463056 = 538976288;
  dword_46305A = 538976288;
  byte_46305E = 0;
  dword_463061 = 538976374;
  dword_463065 = 538976288;
  dword_463069 = 538976288;
  byte_46306D = 0;
  dword_463070 = 538976354;
  dword_463074 = 538976288;
  dword_463078 = 538976288;
  byte_46307C = 0;
  dword_46307F = 538976366;
  dword_463083 = 538976288;
  dword_463087 = 538976288;
  byte_46308B = 0;
  dword_46308E = 538976365;
  dword_463092 = 538976288;
  dword_463096 = 538976288;
  byte_46309A = 0;
  dword_46309D = 1835888483;
  dword_4630A1 = 538976353;
  dword_4630A5 = 538976288;
  byte_4630A9 = 0;
  dword_4630AC = 1769104752;
  dword_4630B0 = 538993775;
  dword_4630B4 = 538976288;
  byte_4630B8 = 0;
  dword_4630BB = 1935764595;
  dword_4630BF = 538976360;
  dword_4630C3 = 538976288;
  byte_4630C7 = 0;
  dword_4630CA = 1751607666;
  dword_4630CE = 1752375412;
  dword_4630D2 = 544499305;
  byte_4630D6 = 0;
  dword_4630D9 = 1887004011;
  dword_4630DD = 1932354657;
  dword_4630E1 = 544366964;
  byte_4630E5 = 0;
  dword_4630E8 = 1952867692;
  dword_4630EC = 1953259808;
  dword_4630F0 = 538976288;
  byte_4630F4 = 0;
  dword_4630F7 = 1667330163;
  dword_4630FB = 538976357;
  dword_4630FF = 538976288;
  byte_463103 = 0;
  dword_463106 = 1936744803;
  dword_46310A = 1801678700;
  dword_46310E = 538976288;
  byte_463112 = 0;
  dword_463115 = 538980710;
  dword_463119 = 538976288;
  dword_46311D = 538976288;
  byte_463121 = 0;
  dword_463124 = 538980966;
  dword_463128 = 538976288;
  dword_46312C = 538976288;
  byte_463130 = 0;
  dword_463133 = 538981222;
  dword_463137 = 538976288;
  dword_46313B = 538976288;
  byte_46313F = 0;
  dword_463142 = 538981478;
  dword_463146 = 538976288;
  dword_46314A = 538976288;
  byte_46314E = 0;
  dword_463151 = 538981734;
  dword_463155 = 538976288;
  dword_463159 = 538976288;
  byte_46315D = 0;
  dword_463160 = 538981990;
  dword_463164 = 538976288;
  dword_463168 = 538976288;
  byte_46316C = 0;
  dword_46316F = 538982246;
  dword_463173 = 538976288;
  dword_463177 = 538976288;
  byte_46317B = 0;
  dword_46317E = 538982502;
  dword_463182 = 538976288;
  dword_463186 = 538976288;
  byte_46318A = 0;
  dword_46318D = 538982758;
  dword_463191 = 538976288;
  dword_463195 = 538976288;
  byte_463199 = 0;
  dword_46319C = 540029286;
  dword_4631A0 = 538976288;
  dword_4631A4 = 538976288;
  byte_4631A8 = 0;
  dword_4631AB = 1819112814;
  dword_4631AF = 543908719;
  dword_4631B3 = 538976288;
  byte_4631B7 = 0;
  dword_4631BA = 1869767539;
  dword_4631BE = 1869376620;
  dword_4631C2 = 538995555;
  byte_4631C6 = 0;
  dword_4631C9 = 1887004011;
  dword_4631CD = 925721697;
  dword_4631D1 = 538976288;
  byte_4631D5 = 0;
  dword_4631D8 = 1887004011;
  dword_4631DC = 942498913;
  dword_4631E0 = 538976288;
  byte_4631E4 = 0;
  dword_4631E7 = 1887004011;
  dword_4631EB = 959276129;
  dword_4631EF = 538976288;
  byte_4631F3 = 0;
  dword_4631F6 = 1887004011;
  dword_4631FA = 1831691361;
  dword_4631FE = 1937075817;
  byte_463202 = 0;
  dword_463205 = 1887004011;
  dword_463209 = 875390049;
  dword_46320D = 538976288;
  byte_463211 = 0;
  dword_463214 = 1887004011;
  dword_463218 = 892167265;
  dword_46321C = 538976288;
  byte_463220 = 0;
  dword_463223 = 1887004011;
  dword_463227 = 908944481;
  dword_46322B = 538976288;
  byte_46322F = 0;
  dword_463232 = 1887004011;
  dword_463236 = 1882023009;
  dword_46323A = 544437612;
  byte_46323E = 0;
  dword_463241 = 1887004011;
  dword_463245 = 825058401;
  dword_463249 = 538976288;
  byte_46324D = 0;
  dword_463250 = 1887004011;
  dword_463254 = 841835617;
  dword_463258 = 538976288;
  byte_46325C = 0;
  dword_46325F = 1887004011;
  dword_463263 = 858612833;
  dword_463267 = 538976288;
  byte_46326B = 0;
  dword_46326E = 1887004011;
  dword_463272 = 808281185;
  dword_463276 = 538976288;
  byte_46327A = 0;
  dword_46327D = 1887004011;
  dword_463281 = 1680696417;
  dword_463285 = 538995813;
  byte_463289 = 0;
  dword_46328C = 1920170355;
  dword_463290 = 538997093;
  dword_463294 = 538976288;
  byte_463298 = 0;
  dword_4632B9 = 540094822;
  dword_4632BD = 538976288;
  dword_4632C1 = 538976288;
  byte_4632C5 = 0;
  dword_4632C8 = 540160358;
  dword_4632CC = 538976288;
  dword_4632D0 = 538976288;
  byte_4632D4 = 0;
  dword_4636C4 = 1887004011;
  dword_4636C8 = 1697473633;
  dword_4636CC = 1919251566;
  byte_4636D0 = 0;
  dword_4636D3 = 1751607666;
  dword_4636D7 = 1868767348;
  dword_4636DB = 1869771886;
  word_4636DF = 108;
  dword_46383B = 1887004011;
  dword_46383F = 1932354657;
  dword_463843 = 1752392044;
  byte_463847 = 0;
  dword_463859 = 1852404336;
  dword_46385D = 1919120244;
  dword_463861 = 538976288;
  byte_463865 = 0;
  dword_463868 = 1751607666;
  dword_46386C = 1818304628;
  dword_463870 = 538976372;
  byte_463874 = 0;
  dword_463949 = 1701670760;
  dword_46394D = 538976288;
  dword_463951 = 538976288;
  byte_463955 = 0;
  dword_463958 = 1629515893;
  dword_46395C = 2003792498;
  dword_463960 = 538976288;
  byte_463964 = 0;
  dword_463967 = 1701273968;
  dword_46396B = 544240928;
  dword_46396F = 538976288;
  byte_463973 = 0;
  dword_463985 = 1952867692;
  dword_463989 = 1920098592;
  dword_46398D = 538998639;
  byte_463991 = 0;
  dword_4639A3 = 1751607666;
  dword_4639A7 = 1918967924;
  dword_4639AB = 544698226;
  byte_4639AF = 0;
  dword_4639C1 = 543452773;
  dword_4639C5 = 538976288;
  dword_4639C9 = 538976288;
  byte_4639CD = 0;
  dword_4639D0 = 1853321060;
  dword_4639D4 = 1920098592;
  dword_4639D8 = 538998639;
  byte_4639DC = 0;
  dword_4639DF = 1701273968;
  dword_4639E3 = 2003788832;
  dword_4639E7 = 538976366;
  byte_4639EB = 0;
  dword_4639EE = 544435817;
  dword_4639F2 = 538976288;
  dword_4639F6 = 538976288;
  byte_4639FA = 0;
  dword_4639FD = 543974756;
  dword_463A01 = 538976288;
  dword_463A05 = 538976288;
  byte_463A09 = 0;
  dword_446DF4 = 1701012289;
  byte_446E02 = 0;
  word_446E00 = 8224;
  dword_446E2E = 538976288;
  dword_446DFC = 538994036;
  dword_446E2A = 538976357;
  dword_446E5C = 1699487858;
  dword_446E26 = 1801548354;
  dword_446E58 = 1701147731;
  byte_446E68 = 0;
  word_446E32 = 32;
  dword_446E64 = -84271072;
  dword_446E92 = 544499815;
  dword_446E60 = 538997862;
  dword_446E8E = 1766989938;
  byte_446E9E = 0;
  dword_446E8A = 1701147731;
  dword_446E9A = -84215046;
  dword_446DF8 = 1634887020;
  dword_446E96 = -84271072;
  memcpy(&unk_446EBC, word_442A18, 0x1Au);
  memcpy(&unk_446EEE, word_4429FC, 0x1Au);
  memcpy(byte_446F20, byte_4429E0, 0x19u);
  v11 = (char *)&unk_462DA0 + 15 * configuration.accelerateKey;
  memcpy(&unk_446F52, &unk_4429C0, 0x20u);
  do
    v12 = *v11++;
  while ( v12 );
  v13 = v11 - ((char *)&unk_462DA0 + 15 * configuration.accelerateKey);
  v14 = (char *)&unk_462DA0 + 15 * configuration.accelerateKey;
  v15 = (char *)&dword_446DF4 - 1;
  do
    v16 = (v15++)[1];
  while ( v16 );
  memcpy(v15, v14, 4 * (v13 >> 2));
  v18 = &v14[4 * (v13 >> 2)];
  v17 = &v15[4 * (v13 >> 2)];
  v19 = v13 & 3;
  v20 = (char *)&unk_462DA0 + 15 * configuration.brakeKey;
  memcpy(v17, v18, v19);
  v21 = v20;
  do
    v22 = *v20++;
  while ( v22 );
  v23 = v20 - v21;
  v24 = v21;
  v25 = (char *)&dword_446E26 - 1;
  do
    v26 = (v25++)[1];
  while ( v26 );
  memcpy(v25, v24, 4 * (v23 >> 2));
  v28 = (char *)v24 + 4 * (v23 >> 2);
  v27 = &v25[4 * (v23 >> 2)];
  v29 = v23 & 3;
  v30 = (char *)&unk_462DA0 + 15 * configuration.leftSteeringKey;
  memcpy(v27, v28, v29);
  v31 = v30;
  do
    v32 = *v30++;
  while ( v32 );
  v33 = v30 - v31;
  v34 = v31;
  v35 = (char *)&dword_446E58 - 1;
  do
    v36 = (v35++)[1];
  while ( v36 );
  memcpy(v35, v34, 4 * (v33 >> 2));
  v38 = (char *)v34 + 4 * (v33 >> 2);
  v37 = &v35[4 * (v33 >> 2)];
  v39 = v33 & 3;
  v40 = (char *)&unk_462DA0 + 15 * configuration.rightSteeringKey;
  memcpy(v37, v38, v39);
  v41 = v40;
  do
    v42 = *v40++;
  while ( v42 );
  v43 = v40 - v41;
  v44 = v41;
  v45 = (char *)&dword_446E8A - 1;
  do
    v46 = (v45++)[1];
  while ( v46 );
  memcpy(v45, v44, 4 * (v43 >> 2));
  v48 = (char *)v44 + 4 * (v43 >> 2);
  v47 = &v45[4 * (v43 >> 2)];
  v49 = v43 & 3;
  v50 = (char *)&unk_462DA0 + 15 * configuration.turboKey;
  memcpy(v47, v48, v49);
  v51 = v50;
  do
    v52 = *v50++;
  while ( v52 );
  v53 = v50 - v51;
  v54 = v51;
  v55 = (char *)&unk_446EBC - 1;
  do
    v56 = (v55++)[1];
  while ( v56 );
  memcpy(v55, v54, 4 * (v53 >> 2));
  v58 = (char *)v54 + 4 * (v53 >> 2);
  v57 = &v55[4 * (v53 >> 2)];
  v59 = v53 & 3;
  v60 = (char *)&unk_462DA0 + 15 * configuration.gunKey;
  memcpy(v57, v58, v59);
  v61 = v60;
  do
    v62 = *v60++;
  while ( v62 );
  v63 = v60 - v61;
  v64 = v61;
  v65 = (char *)&unk_446EEE - 1;
  do
    v66 = (v65++)[1];
  while ( v66 );
  memcpy(v65, v64, 4 * (v63 >> 2));
  v68 = (char *)v64 + 4 * (v63 >> 2);
  v67 = &v65[4 * (v63 >> 2)];
  v69 = v63 & 3;
  v70 = (char *)&unk_462DA0 + 15 * configuration.mineKey;
  memcpy(v67, v68, v69);
  v71 = v70;
  do
    v72 = *v70++;
  while ( v72 );
  v73 = v70 - v71;
  v74 = v71;
  v75 = &byte_446F20[-1];
  do
  {
    v76 = *((byte *)v75 + 1);
    v75 = (char *)v75 + 1;
  }
  while ( v76 );
  memcpy(v75, v74, 4 * (v73 >> 2));
  v78 = (char *)v74 + 4 * (v73 >> 2);
  v77 = (char *)v75 + 4 * (v73 >> 2);
  v79 = v73 & 3;
  v80 = (char *)&unk_462DA0 + 15 * configuration.hornKey;
  memcpy(v77, v78, v79);
  v81 = v80;
  do
    v82 = *v80++;
  while ( v82 );
  //TODO fix
  v83 = v80 - (byte *)v81;
  v84 = (char *)&unk_446F52 - 1;
  do
    v85 = (v84++)[1];
  while ( v85 );
  memcpy(v84, v81, v83);
  byte_447186 = 0;
  word_447184 = 8224;
  dword_4471B2 = 538976288;
  dword_447180 = 538994036;
  dword_4471AE = 538976357;
  dword_4471E0 = 1699487858;
  dword_4471AA = 1801548354;
  dword_4471DC = 1701147731;
  byte_4471EC = 0;
  word_4471B6 = 32;
  dword_4471E8 = -84271072;
  dword_447216 = 544499815;
  dword_4471E4 = 538997862;
  dword_447212 = 1766989938;
  byte_447222 = 0;
  dword_44720E = 1701147731;
  dword_44721E = -84215046;
  dword_447178 = 1701012289;
  dword_44717C = 1634887020;
  dword_44721A = -84271072;
  memcpy(&unk_447240, word_442A18, 0x18u);
  v86 = configuration.accelerateGamepad;
  *((_WORD *)&unk_447240 + 12) = word_442A18[12];
  memcpy(&unk_447272, word_4429FC, 0x1Au);
  memcpy(byte_4472A4, byte_4429E0, 0x18u);
  v87 = (char *)&unk_45EAC0 + 15 * v86;
  byte_4472A4[24] = byte_4429E0[24];
  v88 = v87;
  do
    v89 = *v87++;
  while ( v89 );
  v90 = v87 - v88;
  v91 = v88;
  v92 = (char *)&dword_447178 - 1;
  do
    v93 = (v92++)[1];
  while ( v93 );
  memcpy(v92, v91, 4 * (v90 >> 2));
  v95 = (char *)v91 + 4 * (v90 >> 2);
  v94 = &v92[4 * (v90 >> 2)];
  v96 = v90 & 3;
  v97 = (char *)&unk_45EAC0 + 15 * configuration.brakeGamepad;
  memcpy(v94, v95, v96);
  v98 = v97;
  do
    v99 = *v97++;
  while ( v99 );
  v100 = v97 - v98;
  v101 = v98;
  v102 = (char *)&dword_4471AA - 1;
  do
    v103 = (v102++)[1];
  while ( v103 );
  memcpy(v102, v101, 4 * (v100 >> 2));
  v105 = (char *)v101 + 4 * (v100 >> 2);
  v104 = &v102[4 * (v100 >> 2)];
  v106 = v100 & 3;
  v107 = (char *)&unk_45EAC0 + 15 * configuration.leftSteeringGamepad;
  memcpy(v104, v105, v106);
  v108 = v107;
  do
    v109 = *v107++;
  while ( v109 );
  v110 = v107 - v108;
  v111 = v108;
  v112 = (char *)&dword_4471DC - 1;
  do
    v113 = (v112++)[1];
  while ( v113 );
  memcpy(v112, v111, 4 * (v110 >> 2));
  v115 = (char *)v111 + 4 * (v110 >> 2);
  v114 = &v112[4 * (v110 >> 2)];
  v116 = v110 & 3;
  v117 = (char *)&unk_45EAC0 + 15 * configuration.rightSteeringGamepad;
  memcpy(v114, v115, v116);
  v118 = v117;
  do
    v119 = *v117++;
  while ( v119 );
  v120 = v117 - v118;
  v121 = v118;
  v122 = (char *)&dword_44720E - 1;
  do
    v123 = (v122++)[1];
  while ( v123 );
  memcpy(v122, v121, 4 * (v120 >> 2));
  v125 = (char *)v121 + 4 * (v120 >> 2);
  v124 = &v122[4 * (v120 >> 2)];
  v126 = v120 & 3;
  v127 = (char *)&unk_45EAC0 + 15 * configuration.turboGamepad;
  memcpy(v124, v125, v126);
  v128 = v127;
  do
    v129 = *v127++;
  while ( v129 );
  v130 = v127 - v128;
  v131 = v128;
  v132 = (char *)&unk_447240 - 1;
  do
    v133 = (v132++)[1];
  while ( v133 );
  memcpy(v132, v131, 4 * (v130 >> 2));
  v135 = (char *)v131 + 4 * (v130 >> 2);
  v134 = &v132[4 * (v130 >> 2)];
  v136 = v130 & 3;
  v137 = (char *)&unk_45EAC0 + 15 * configuration.gunGamepad;
  memcpy(v134, v135, v136);
  v138 = v137;
  do
    v139 = *v137++;
  while ( v139 );
  v140 = v137 - v138;
  v141 = v138;
  v142 = (char *)&unk_447272 - 1;
  do
    v143 = (v142++)[1];
  while ( v143 );
  memcpy(v142, v141, 4 * (v140 >> 2));
  v145 = (char *)v141 + 4 * (v140 >> 2);
  v144 = &v142[4 * (v140 >> 2)];
  v146 = v140 & 3;
  v147 = (char *)&unk_45EAC0 + 15 * configuration.mineGamepad;
  memcpy(v144, v145, v146);
  v148 = v147;
  do
    v149 = *v147++;
  while ( v149 );
  result = v147 - v148;
  v151 = v148;
  v152 = &byte_4472A4[-1];
  do
  {
    v153 = *((byte *)v152 + 1);
    v152 = (char *)v152 + 1;
  }
  while ( v153 );
  memcpy(v152, v151, result);
  return result;
}

//----- (0041E3B0) --------------------------------------------------------
char sub_41E3B0()
{
  loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
  memcpy((char *)screenBuffer + 67200, (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
  drawMenu(INITIAL_MENU, 0);
  drawMenu(CONFIGURE_MENU, 0);
  createPopup(28, 198, 595, 86, 1);
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "Gamepad not detected!", 133260);
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "Press any key to continue.", 153697);
  refreshAllScreen();
  eventDetected();
  sub_418090();
  while ( !eventDetected() )
    wait();
  eventDetected();
  return sub_418090();
}
// 4451A4: using guessed type int dword_4451A4;
// 45DC18: using guessed type int configuration.musicVolume;

//----- (0041E490) --------------------------------------------------------
int __cdecl drawRecordByCircuit(int a1)
{
  signed int v1; // eax@1
  char *v2; // esi@2
  char *v3; // edi@2
  signed int v4; // eax@3
  char *v5; // esi@4
  char *v6; // edi@4
  char *v7; // eax@5
  char *v8; // edx@5
  char v9; // cl@6
  char *v10; // eax@7
  signed int v11; // ecx@7
  unsigned int v12; // esi@7
  char v13; // dl@8
  signed int v14; // edx@11
  signed int v15; // esi@11
  int v16; // ebx@11
  char *v17; // ebp@11
  int v18; // eax@13
  char v19; // cl@14
  int v20; // eax@15
  char v21; // cl@16
  int v22; // eax@23
  char v23; // cl@24
  char *v24; // edi@25
  char v25; // al@26
  unsigned int v26; // eax@27
  char *v27; // edi@27
  char v28; // cl@28
  char *v29; // edi@29
  char v30; // al@30
  unsigned int v31; // eax@31
  char *v32; // edi@31
  char v33; // cl@32
  int v34; // edx@33
  bool v35; // zf@33
  int result; // eax@33
  int v37; // [sp+10h] [bp-5Ch]@11
  signed int v38; // [sp+14h] [bp-58h]@11
  int v39; // [sp+18h] [bp-54h]@11
  char Str[20]; // [sp+1Ch] [bp-50h]@5
  char *DstBuf = malloc(20); // [sp+30h] [bp-3Ch]@17
  char v42; // [sp+31h] [bp-3Bh]@18
  char v43; // [sp+32h] [bp-3Ah]@18
  char v44; // [sp+44h] [bp-28h]@17
  char v45; // [sp+45h] [bp-27h]@20
  char v46; // [sp+46h] [bp-26h]@20
  char v47; // [sp+58h] [bp-14h]@17
  char v48; // [sp+59h] [bp-13h]@22
  char v49; // [sp+5Ah] [bp-12h]@22
  signed int v50; // [sp+70h] [bp+4h]@11
  char *name = malloc(20);

  v1 = 0;
  do
  {
    v2 = (char *)graphicsGeneral.menubg5Bpk + v1 + 85345;
    v3 = (char *)screenBuffer + v1 + 85345;
    memcpy(v3, v2, 0x17Cu);
    v1 += 640;
    v3[380] = v2[380];
  }
  while ( v1 < 18560 );
  v4 = 0;
  do
  {
    v5 = (char *)graphicsGeneral.menubg5Bpk + v4 + 132064;
    v6 = (char *)screenBuffer + v4 + 132064;
    v4 += 640;
    memcpy(v6, v5, 0x170u);
  }
  while ( v4 < 83200 );
  drawImageWithPosition((int)recobarBpk, 640, 68, (int)((char *)screenBuffer + 84480));
  strcpy(Str, circuits[a1]);
  /*v8 = (char *)(Str - v7);
  do
  {
    v9 = *v7;
    v7[(_DWORD)v8] = *v7;
    ++v7;
  }
  while ( v9 );
  v10 = Str;
  v11 = 0;
  v12 = 0;
  do
    v13 = *v10++;
  while ( v13 );*/
  //if ( v10 != &Str[1] )
  //{
  v11 = 0;
  v12 = 0;
    do
      v11 += (unsigned __int8)menuActive_4457F0[58 + (unsigned __int8)Str[v12++]];
    while ( v12 < strlen(Str) );
  //}
	//escribe el circuito
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, Str, 87453 - (v11 >> 1));
  v14 = Str - aDeliverator;
  v15 = &Str[-24 * a1] - (char *)&unk_45F8B0;
  v16 = 133480;
  v37 = (int)aDeliverator;
  v17 = (char *)&unk_45F8BC + 24 * a1;
  v50 = Str - aDeliverator;
  v38 = v15;
  v39 = 6;
  int index = 5;
  while (index>-1)
  {
    /*v18 = v37;
    do
    {
      v19 = *(byte *)v18;
      *(byte *)(v18 + v14) = *(byte *)v18;
      ++v18;
    }
    while ( v19 );
	
    strupr(Str);*/
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, getCarName(index), v16 - 132);
    /*v20 = (int)(v17 - 12);
    do
    {
      v21 = *(byte *)v20;
      *(byte *)(v20 + v15) = *(byte *)v20;
      ++v20;
    }
    while ( v21 );
    strupr(Str);*/
	memset(name, "\0",strlen(name));
	strcpy(name, configuration.circuitRecords[a1  + index*18].name);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, name, v16);
    itoa(configuration.circuitRecords[a1  + index*18].min, DstBuf, 10);
    itoa(configuration.circuitRecords[a1  + index*18].sec, &v44, 10);
    itoa(configuration.circuitRecords[a1  + index*18].cen, &v47, 10);
    /*if ( strlen(DstBuf) == 1 )
    {
      v42 = DstBuf;
      DstBuf = 48;
      v43 = 0;
    }
    if ( strlen(&v44) == 1 )
    {
      v45 = v44;
      v44 = 48;
      v46 = 0;
    }
    if ( strlen(&v47) == 1 )
    {
      v48 = v47;
      v47 = 48;
      v49 = 0;
    }
    v22 = 0;
    do
    {
      v23 = *(DstBuf + v22);
      Str[v22++] = v23;
    }
    while ( v23 );
    v24 = (char *)&v39 + 3;
    do
      v25 = (v24++)[1];
    while ( v25 );
    *(_WORD *)v24 = 58;
    v26 = strlen(&v44) + 1;
    v27 = (char *)&v39 + 3;
    do
      v28 = (v27++)[1];
    while ( v28 );
    memcpy(v27, &v44, v26);
    v29 = (char *)&v39 + 3;
    do
      v30 = (v29++)[1];
    while ( v30 );
    *(_WORD *)v29 = 46;
    v31 = strlen(&v47) + 1;
    v32 = (char *)&v39 + 3;
    do
      v33 = (v32++)[1];
    while ( v33 );
	memcpy(v32, &v47, v31);*/
    v34 = (int)graphicsGeneral.fmed1aBpk;
    
	
	memset(Str, "\0" ,strlen(Str));
	strcpy(Str, DstBuf);
	strcat(Str, ":");
	strcat(Str, &v44);
	strcat(Str, ".");
	strcat(Str, &v47);
    drawTextWithFont(v34, (int)&unk_445928, Str, v16 + 154);
    v17 -= 432;
    v16 += 14080;
    result = v39 - 1;
    v35 = v39 == 1;
    v50 += 1760;
    v37 -= 1760;
    v38 += 432;
    --v39;
    if ( v35 )
      break;
    v15 = v38;
    v14 = v50;
	index--;
  }
  return result;
}
// 41E490: using guessed type char Str[20];

//----- (0041E810) --------------------------------------------------------
char drawBottomMenuText()
{
  signed int v0; // eax@1
  char *v1; // esi@2
  char *v2; // edi@2
  int v3; // ebp@3
  const char *v4; // edi@3
  int v5; // esi@3
  char result; // al@4


  drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "         Welcome to Death Rally(tm) - Windows Version 1.0", 640 * 395);
  drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "              Port by Jari Komppa - http://iki.fi/sol/", 640 * 410);
  drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "       (c)Remedy Entertainment - http://www.remedygames.com", 640 * 425);
  drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "  Use arrow keys to change selection and press enter to confirm.", 640 * 455);

  /*

  v0 = 243200;
  do
  {
    v1 = (char *)graphicsGeneral.menubg5Bpk + v0;
    v2 = (char *)screenBuffer + v0;
    v0 += 640;
    memcpy(v2, v1, 0x280u);
  }
  while ( v0 < 300160 );
  v3 = 0;
  v4 = (const char *)&unk_462960;
  v5 = 241932;
  do
  {
    result = *((byte *)&word_461ED0 + v3);
    if ( !result )
      result = drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, v4, v5);
    if ( *((byte *)&word_461ED0 + v3) == 1 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, v4, v5);
    if ( *((byte *)&word_461ED0 + v3) == 2 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, v4, v5);
    v5 += 9600;
    ++v3;
    v4 += 150;
  }
  while ( v5 < 299532 );
  return result;*/
}
// 4458B0: using guessed type char byte_4458B0;
// 461ED0: using guessed type __int16 word_461ED0;

//----- (0041E8D0) --------------------------------------------------------
char sub_41E8D0()
{
  signed int v0; // eax@1
  char *v1; // esi@2
  char *v2; // edi@2
  int v3; // ebp@3
  const char *v4; // edi@3
  int v5; // esi@3
  char result; // al@4

  v0 = 0;
  do
  {
    v1 = (char *)graphicsGeneral.menubg5Bpk + v0 + 76812;
    v2 = (char *)screenBuffer + v0 + 76812;
    memcpy(v2, v1, 0x274u);
    v0 += 640;
    *((_WORD *)v2 + 314) = *((_WORD *)v1 + 314);
  }
  while ( v0 < 224000 );
  v3 = 0;
  v4 = (const char *)&unk_462000;
  v5 = 76172;
  do
  {
    result = unk_461EC0[v3];
    if ( !result )
      result = drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, v4, v5);
    if ( unk_461EC0[v3] == 1 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, v4, v5);
    if ( unk_461EC0[v3] == 2 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, v4, v5);
    v5 += 9600;
    ++v3;
    v4 += 150;
  }
  while ( v5 < 287372 );
  return result;
}
// 4458B0: using guessed type char byte_4458B0;

//----- (0041E9A0) --------------------------------------------------------
char sub_41E9A0()
{
  signed int v0; // eax@1
  char *v1; // esi@2
  char *v2; // edi@2
  int v3; // ebp@3
  const char *v4; // edi@3
  int v5; // esi@3
  char result; // al@4

  v0 = 0;
  do
  {
    v1 = (char *)graphicsGeneral.menubg5Bpk + v0 + 76812;
    v2 = (char *)screenBuffer + v0 + 76812;
    memcpy(v2, v1, 0x274u);
    v0 += 640;
    *((_WORD *)v2 + 314) = *((_WORD *)v1 + 314);
  }
  while ( v0 < 212480 );
  v3 = 0;
  v4 = (const char *)&unk_462000;
  v5 = 76172;
  do
  {
    result = unk_461EC0[v3];
    if ( !result )
      result = drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, v4, v5);
    if ( unk_461EC0[v3] == 1 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, v4, v5);
    if ( unk_461EC0[v3] == 2 )
      result = drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, v4, v5);
    v5 += 9600;
    ++v3;
    v4 += 150;
  }
  while ( v5 < 287372 );
  return result;
}
// 4458B0: using guessed type char byte_4458B0;

//----- (0041EA70) --------------------------------------------------------
void __cdecl sub_41EA70(int a1, int a2, char a3)
{
  char v3; // al@2
  int i; // ecx@2

  if ( isMultiplayerGame )
  {
    v3 = 10 * a3;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = 10 * a3;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = 10 * a3 + 1;
    for ( i = 0; i < a2; ++i )
      *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = *(byte *)(i + a1);
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = a2;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = v3 + 2;
    *(byte *)(((*(_WORD *)dword_45E064)++ & 0xFFF) + dword_45E064 + 4) = v3 + 3;
    nullsub_1();
  }
}
// 45E064: using guessed type int dword_45E064;
// 45EA04: using guessed type int isMultiplayerGame;

//----- (0041EB80) --------------------------------------------------------
signed int __cdecl sub_41EB80(int a1, int a2)
{
  int v2; // eax@2
  int v3; // ecx@2
  int v4; // esi@2
  signed int v5; // edx@2
  int v6; // edi@2
  int v7; // ecx@3
  int v8; // esi@5
  int i; // esi@10
  int j; // eax@12
  int v12; // edi@13
  int v13; // [sp+0h] [bp-4h]@2

  return 0;
  //TODO fix dword_45DC24 no se que es pero hace que pete

  if ( !isMultiplayerGame )
    return 0;
  nullsub_1();
  v2 = dword_45DC24;
  v3 = *(_WORD *)dword_45DC24;
  v4 = v3 - 1;
  v5 = 0;
  v6 = 10 * a2;
  v13 = v3 - 1;
  while ( 1 )
  {
    v7 = *(byte *)((((_WORD)v4 - 2) & 0xFFF) + dword_45DC24 + 4);
    if ( *(byte *)((v4 & 0xFFF) + dword_45DC24 + 4) != v6 + 3
      || *(byte *)((((_WORD)v4 - 1) & 0xFFF) + dword_45DC24 + 4) != v6 + 2 )
      goto LABEL_8;
    v8 = *(_WORD *)dword_45DC24 - v7 - v5;
    if ( *(byte *)((((_WORD)v8 - 4) & 0xFFF) + dword_45DC24 + 4) == v6 + 1
      && *(byte *)((((_WORD)v8 - 5) & 0xFFF) + dword_45DC24 + 4) == v6 )
      break;
    v4 = v13;
LABEL_8:
    ++v5;
    --v4;
    v13 = v4;
    if ( v5 >= 1000 )
      return 0;
  }
  for ( i = 0; i < v7; ++i )
  {
    *(byte *)(i + a1) = *(byte *)(v2 + ((i + *(_WORD *)v2 - v7 - v5 - 3) & 0xFFF) + 4);
    v2 = dword_45DC24;
  }
  *(byte *)(((*(_WORD *)v2 - (_WORD)v5 - 1) & 0xFFF) + v2 + 4) = 0;
  *(byte *)(((*(_WORD *)dword_45DC24 - (_WORD)v5 - 2) & 0xFFF) + dword_45DC24 + 4) = 0;
  *(byte *)(((*(_WORD *)dword_45DC24 - (_WORD)v5 - 3) & 0xFFF) + dword_45DC24 + 4) = 0;
  *(byte *)(((*(_WORD *)dword_45DC24 - (_WORD)v7 - (_WORD)v5 - 4) & 0xFFF) + dword_45DC24 + 4) = 0;
  *(byte *)(((*(_WORD *)dword_45DC24 - (_WORD)v7 - (_WORD)v5 - 5) & 0xFFF) + dword_45DC24 + 4) = 0;
  for ( j = 0; j < v7; *(byte *)(v12 + dword_45DC24 + 4) = 0 )
    v12 = (*(_WORD *)dword_45DC24 - v7 - v5 + j++ - 3) & 0xFFF;
  return 1;
}


//----- (0041ED20) --------------------------------------------------------
int __cdecl sub_41ED20(float a1, float a2, float a3)
{
  float v3; // ST2C_4@2
  signed int v4; // esi@1
  float v5; // ST30_4@4
  float v6; // ST34_4@6
  double v7; // st7@2
  signed int v8; // ebx@4
  signed int v9; // edi@6
  int result; // eax@8
  signed int v11; // [sp+0h] [bp-2Ch]@1
  signed int v12; // [sp+4h] [bp-28h]@2

  v11 = 0;
  v4 = 528;
  
  do
  {
  v7 = (double)v11;
  v3 = a1 * 0.14285715;
  v12 = (unsigned __int64)(v3 * v7 + a1 * 0.1666666666666667);
  if ( v12 > 63 )
  v12 = 63;
  v5 = a2 * 0.14285715;
  v8 = (unsigned __int64)(v5 * v7 + a2 * 0.1666666666666667);
  if ( v8 > 63 )
  v8 = 63;
  v6 = a3 * 0.14285715;
  v9 = (unsigned __int64)(v7 * v6 + a3 * 0.1666666666666667);
  if ( v9 > 63 )
  v9 = 63;
  palette1[v4] = sub_43B290(v12 << 16, 6553600);
  palette1[v4+1] = sub_43B290(v8 << 16, 6553600);
  result = sub_43B290(v9 << 16, 6553600);
  palette1[v4+2] = result;
  v4 += 3;
  ++v11;
  }
  while ( v4 < 16 );
  /*v4 = (signed int)&unk_460484;
  do
  {
    v7 = (double)v11;
    v3 = a1 * 0.14285715;
    v12 = (unsigned __int64)(v3 * v7 + a1 * 0.1666666666666667);
    if ( v12 > 63 )
      v12 = 63;
    v5 = a2 * 0.14285715;
    v8 = (unsigned __int64)(v5 * v7 + a2 * 0.1666666666666667);
    if ( v8 > 63 )
      v8 = 63;
    v6 = a3 * 0.14285715;
    v9 = (unsigned __int64)(v7 * v6 + a3 * 0.1666666666666667);
    if ( v9 > 63 )
      v9 = 63;
    *(_DWORD *)(v4 - 4) = sub_43B290(v12 << 16, 6553600);
    *(_DWORD *)v4 = sub_43B290(v8 << 16, 6553600);
    result = sub_43B290(v9 << 16, 6553600);
    *(_DWORD *)(v4 + 4) = result;
    v4 += 12;
    ++v11;
  }
  while ( v4 < (signed int)&unk_4604D8 );*/
  
  return result;
}

void * getEngineBpkById(int engineId) {
	if (engineId == 0) {
		return engi1Bpk;
	}
	else if (engineId == 1) {
		return engi2Bpk;
	}
	else if (engineId == 2) {
		return engi3Bpk;
	}
	else if (engineId == 3) {
		return engi4Bpk;
	}
}


void * getSceneCarBpkById(int carId) {
	if (carId == 0) {
		return scenecar1Bpk;
	}
	else if (carId == 1) {
		return scenecar2Bpk;
	}
	else if (carId == 2) {
		return scenecar3Bpk;
	}
	else if (carId == 3) {
		return scenecar4Bpk;
	}
	else if (carId == 4) {
		return scenecar5Bpk;
	}
	else if (carId == 5) {
		return scenecar6Bpk;
	}

}


void * getArmourBpkById(int armourId) {
	if (armourId == 0) {
		return armor1Bpk;
	}
	else if (armourId == 1) {
		return armor2Bpk;
	}
	else if (armourId == 2) {
		return armor3Bpk;
	}
	else if (armourId == 3) {
		return armor4Bpk;
	}
}
void * getTireBpkById(int tireId) {
	if (tireId == 0) {
		return tire1Bpk;
	}
	else if (tireId == 1) {
		return tire2Bpk;
	}
	else if (tireId == 2) {
		return tire3Bpk;
	}
	else if (tireId == 3) {
		return tire4Bpk;
	}
}


void * getCarBpkById(int carId) {
	if (carId == 0) {
		return kuplaBpk;
	}
	else if (carId == 1) {
		return pickupBpk;
	}
	else if (carId == 2) {
		return sedanBpk;
	}
	else if (carId == 3) {
		return camaroBpk;
	}
	else if (carId == 4) {
		return porscheBpk;
	}
	else if (carId == 5) {
		return lotusBpk;
	}
	

}

//----- (0041EE40) --------------------------------------------------------
void loadGraphics3()
{
  
  int v0;
  v0 = drivers[driverId].carType;
  dword_45EAA4 = 100;
  dword_461EEC = 0;
  continueAnimCurrentFrame_4611D0 = 0;
  armourAnimFrameDirection_45F034 = 0;
  armourAnimCurrentFrame_461288 = 0;
  tireAnimCurrentFrame_45F034 = 0;
  engineAnimCurrentFrame_462D80 = 0;
  carAnimCurrentFrame_45FBA0 = 0;
  menuOptionSelected_463DF0 = 5;
  if ( v0 >= 5 )
    actualCarSelected = 5;
  else
    actualCarSelected = v0 + 1;
  
  dword_461ED8 = malloc(0x4B000u);
  dword_45FC00 = (int)dword_461ED8;
  drugdealBpk = malloc(0x3400u);
  spons1bBpk = malloc(0x3400u);
  event2Bpk = malloc(0x3400u);
  reaperxBpk = malloc(0x3400u);
  
  statbas7Bpk = malloc(0x5400u);
  
  statpop4Bpk = malloc(0x4B0u);
  
  fsma3fBpk = malloc(0x8F0u);
  
  choo2Bpk = malloc(0x900u);
  
  arrows1dBpk = malloc(0x1000u);
  
  maxi1fBpk = malloc(0x12000u);
  kuplaBpk = malloc(0x1AF00u);
  pickupBpk = malloc(0x1A77Bu);
  sedanBpk = malloc(0x18F14u);
  camaroBpk = malloc(0x18F51u);
  porscheBpk = malloc(0x1A060u);
  lotusBpk = malloc(0x1BEA2u);
  scenecar1Bpk = malloc(0x1800u);
  scenecar2Bpk = malloc(0x1800u);
  scenecar3Bpk = malloc(0x1800u);
  scenecar4Bpk = malloc(0x1800u);
  scenecar5Bpk = malloc(0x1800u);
  scenecar6Bpk = malloc(0x1800u);
  engi1Bpk = malloc(0xA235u);
  engi2Bpk = malloc(0xAE36u);
  engi3Bpk = malloc(0xB413u);
  engi4Bpk = malloc(0xD788u);
  tire1Bpk = malloc(0x511Cu);
  tire2Bpk = malloc(0x52B8u);
  tire3Bpk = malloc(0x5724u);
  tire4Bpk = malloc(0x5F1Eu);
  armor1Bpk = malloc(0x5FFBu);
  armor2Bpk = malloc(0x6DD9u);
  armor3Bpk = malloc(0x7922u);
  armor4Bpk = malloc(0x7801u);
  repaaniBpk = malloc(0x878Bu);
  contaniBpk = malloc(0x8AE9u);
  dword_461EA4 = malloc(0x2800u);
  volcur2Bpk = malloc(0xF0u);
  slidcur3Bpk = malloc(0xF0u);
  slidcop2Bpk = malloc(0x1260u);
  slidmus2Bpk = malloc(0x1020u);
  carnameBpk = malloc(0x2400u);
  carbas2Bpk = malloc(0x2400u);
  bases41Bpk = malloc(0x2400u);
  bases42Bpk = malloc(0x2400u);
  bases43Bpk = malloc(0x2400u);
  bases44Bpk = malloc(0x2400u);
  bases45Bpk = malloc(0x2400u);
  maret1eBpk = malloc(0x1B000u);
  dealer2bBpk = malloc(0x2400u);
  blacktx1Bpk = malloc(0x2800u);
  blacktx2Bpk = malloc(0x2800u);
  extractFromBpa("MENU.BPA", textureTemp, "statbas7.bpk");
  copyImageToBuffer((int)textureTemp, (int)statbas7Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "statpop4.bpk");
  copyImageToBuffer((int)textureTemp, (int)statpop4Bpk);
  extractFromBpa("MENU.BPA", textureTemp,"f-sma3f.bpk");
  copyImageToBuffer((int)textureTemp, (int)fsma3fBpk);
  extractFromBpa("MENU.BPA", kuplaBpk,"kupla.bpk");
  extractFromBpa("MENU.BPA", pickupBpk, "pickup.bpk");
  extractFromBpa("MENU.BPA", sedanBpk, "sedan.bpk");
  extractFromBpa("MENU.BPA", camaroBpk, "camaro.bpk");
  extractFromBpa("MENU.BPA", porscheBpk, "porsche.bpk");
  extractFromBpa("MENU.BPA", lotusBpk, "lotus.bpk");
  extractFromBpa("MENU.BPA", engi1Bpk, "engi1.bpk");
  extractFromBpa("MENU.BPA", engi2Bpk, "engi2.bpk");
  extractFromBpa("MENU.BPA", engi3Bpk, "engi3.bpk");
  extractFromBpa("MENU.BPA", engi4Bpk, "engi4.bpk");
  extractFromBpa("MENU.BPA", tire1Bpk, "tire1.bpk");
  extractFromBpa("MENU.BPA", tire2Bpk, "tire2.bpk");
  extractFromBpa("MENU.BPA", tire3Bpk, "tire3.bpk");
  extractFromBpa("MENU.BPA", tire4Bpk, "tire4.bpk");
  extractFromBpa("MENU.BPA", armor1Bpk, "armor1.bpk");
  extractFromBpa("MENU.BPA", armor2Bpk, "armor2.bpk");
  extractFromBpa("MENU.BPA", armor3Bpk, "armor3.bpk");
  extractFromBpa("MENU.BPA", armor4Bpk, "armor4.bpk");
  extractFromBpa("MENU.BPA", contaniBpk, "contani.bpk");
  extractFromBpa("MENU.BPA", repaaniBpk, "repaani.bpk");
  extractFromBpa("MENU.BPA", textureTemp, "carbas2.bpk");
  copyImageToBuffer((int)textureTemp, (int)carbas2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "spons1b.bpk");
  copyImageToBuffer((int)textureTemp, (int)spons1bBpk);
  extractFromBpa("MENU.BPA", textureTemp, "drugdeal.bpk");
  copyImageToBuffer((int)textureTemp, (int)drugdealBpk);
  extractFromBpa("MENU.BPA", textureTemp, "event_2.bpk");
  copyImageToBuffer((int)textureTemp, (int)event2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "reaper_x.bpk");
  copyImageToBuffer((int)textureTemp, (int)reaperxBpk);
  extractFromBpa("MENU.BPA", textureTemp, "blacktx1.bpk");
  copyImageToBuffer((int)textureTemp, (int)blacktx1Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "blacktx2.bpk");
  copyImageToBuffer((int)textureTemp, (int)blacktx2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "dealer2b.bpk");
  copyImageToBuffer((int)textureTemp, (int)dealer2bBpk);
  extractFromBpa("MENU.BPA", textureTemp, "market1e.bpk");
  copyImageToBuffer((int)textureTemp, (int)maret1eBpk);
  extractFromBpa("MENU.BPA", textureTemp, "bases4.bpk");
  decryptTexture((int)textureTemp, (int)bases41Bpk, 0, 9216);
  decryptTexture((int)textureTemp, (int)bases42Bpk, 9216, 9216);
  decryptTexture((int)textureTemp, (int)bases43Bpk, 18432, 9216);
  decryptTexture((int)textureTemp, (int)bases44Bpk, 27648, 9216);
  decryptTexture((int)textureTemp, (int)bases45Bpk, 36864, 9216);
  extractFromBpa("MENU.BPA", textureTemp, "scenecar.bpk");
  decryptTexture((int)textureTemp, (int)scenecar1Bpk, 0, 6144);
  decryptTexture((int)textureTemp, (int)scenecar2Bpk, 6144, 6144);
  decryptTexture((int)textureTemp, (int)scenecar3Bpk, 12288, 6144);
  decryptTexture((int)textureTemp, (int)scenecar4Bpk, 18432, 6144);
  decryptTexture((int)textureTemp, (int)scenecar5Bpk, 24576, 6144);
  decryptTexture((int)textureTemp, (int)scenecar6Bpk, 30720, 6144);
  extractFromBpa("MENU.BPA", textureTemp,"choo2.bpk");
  copyImageToBuffer((int)textureTemp, (int)choo2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "arrows1d.bpk");
  copyImageToBuffer((int)textureTemp, (int)arrows1dBpk);
  extractFromBpa("MENU.BPA", textureTemp, "maxi1f.bpk");
  copyImageToBuffer((int)textureTemp, (int)maxi1fBpk);
  extractFromBpa("MENU.BPA", textureTemp, "carname.bpk");
  copyImageToBuffer((int)textureTemp, (int)carnameBpk);
  extractFromBpa("MENU.BPA", textureTemp, "slidmus2.bpk");
  copyImageToBuffer((int)textureTemp, (int)slidmus2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "slidcur3.bpk");
  copyImageToBuffer((int)textureTemp, (int)slidcur3Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "volcur2.bpk");
  copyImageToBuffer((int)textureTemp, (int)volcur2Bpk);
  extractFromBpa("MENU.BPA", textureTemp, "slidcop2.bpk");
  copyImageToBuffer((int)textureTemp, (int)slidcop2Bpk);
}


//----- (0041F7D0) --------------------------------------------------------
void freeMemoryGraphics3()
{
  free(dword_461ED8);
  free(statbas7Bpk);
  free(statpop4Bpk);
  free(fsma3fBpk);
  free(choo2Bpk);
  free(arrows1dBpk);
  free(maxi1fBpk);
  free(scenecar1Bpk);
  free(scenecar2Bpk);
  free(scenecar3Bpk);
  free(scenecar4Bpk);
  free(scenecar5Bpk);
  free(scenecar6Bpk);
  free(kuplaBpk);
  free(pickupBpk);
  free(sedanBpk);
  free(camaroBpk);
  free(porscheBpk);
  free(lotusBpk);
  free(engi1Bpk);
  free(engi2Bpk);
  free(engi3Bpk);
  free(engi4Bpk);
  free(tire1Bpk);
  free(tire2Bpk);
  free(tire3Bpk);
  free(tire4Bpk);
  free(armor1Bpk);
  free(armor2Bpk);
  free(armor3Bpk);
  free(armor4Bpk);
  free(repaaniBpk);
  free(contaniBpk);
  free(dword_461EA4);
  free(drugdealBpk);
  free(spons1bBpk);
  free(event2Bpk);
  free(reaperxBpk);
  free(volcur2Bpk);
  free(slidcur3Bpk);
  free(slidcop2Bpk);
  free(slidmus2Bpk);
  free(carnameBpk);
  free(carbas2Bpk);
  free(bases41Bpk);
  free(bases42Bpk);
  free(bases43Bpk);
  free(bases44Bpk);
  free(bases45Bpk);
  free(maret1eBpk);
  free(dealer2bBpk);
  free(blacktx1Bpk);
  free(blacktx2Bpk);
}

//----- (0041FA50) --------------------------------------------------------
int __cdecl sub_41FA50(const char *a1)
{
  const char *v1; // eax@1
  int v2; // ebx@1
  unsigned int v3; // edx@1
  char v4; // cl@2

  v1 = a1;
  v2 = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
      v2 += (unsigned __int8)byte_445892[a1[v3++]];
    while ( v3 < strlen(a1) );
  }
  return (96 - v2) / 2;
}

//----- (0041FAB0) --------------------------------------------------------
int __cdecl sub_41FAB0(const char *a1)
{
  const char *v1; // eax@1
  int v2; // ebp@1
  unsigned int v3; // edx@1
  char v4; // cl@2
  char v5; // al@4
  int v6; // eax@5

  v1 = a1;
  v2 = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
    {
      v5 = a1[v3];
      if ( v5 == 36 )
        v6 = (unsigned __int8)byte_445916;
      else
        v6 = (unsigned __int8)byte_4458E7[(unsigned __int8)v5];
      v2 += v6;
      ++v3;
    }
    while ( v3 < strlen(a1) );
  }
  return (96 - v2) / 2;
}
// 445916: using guessed type char byte_445916;

//----- (0041FB20) --------------------------------------------------------
int __cdecl sub_41FB20(const char *a1)
{
  const char *v1; // ecx@1
  int result; // eax@1
  unsigned int v3; // esi@1
  char v4; // dl@2

  v1 = a1;
  result = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
      result += (unsigned __int8)byte_44590A[a1[v3++]];
    while ( v3 < strlen(a1) );
  }
  return result;
}

//----- (0041FB70) --------------------------------------------------------
/*esto creo que no es necesario*/
int __cdecl getNamePositionRight(const char *a1)
{
  const char *v1; // eax@1
  int v2; // ebx@1
  unsigned int v3; // edx@1
  char v4; // cl@2

  v1 = a1;
  v2 = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
      v2 += (unsigned __int8)byte_44590A[a1[v3++]];
    while ( v3 < strlen(a1) );
  }
  return (96 - v2) / 2;
}

//----- (0041FBD0) --------------------------------------------------------
int __cdecl sub_41FBD0(const char *a1)
{
  const char *v1; // ecx@1
  signed int v2; // eax@1
  unsigned int v3; // esi@1
  char v4; // dl@2

  v1 = a1;
  v2 = 0;
  v3 = 0;
  do
    v4 = *v1++;
  while ( v4 );
  if ( v1 != a1 + 1 )
  {
    do
      v2 += (unsigned __int8)menuActive_4457F0[58 + a1[v3++]];
    while ( v3 < strlen(a1) );
  }
  return v2 / 2;
}
// 41FBD0: could not find valid save-restore pair for edi
// 41FBD0: could not find valid save-restore pair for esi

//----- (0041FC20) --------------------------------------------------------
int drawCarRightSide()
{
  char *v0; // eax@1
  char *v1; // edx@1
  char v2; // cl@2
  int namePosition; // eax@3
  int *v4; // eax@3
  unsigned int v5; // eax@5
  char *v6; // edi@5
  char v7; // cl@6
  int money; // eax@7
  unsigned int v9; // eax@9
  char *v10; // edi@9
  char v11; // cl@10
  int v12; // edx@11
  char *v13; // edi@13
  char v14; // al@14
  unsigned int v15; // eax@15
  char *v16; // edi@15
  char v17; // cl@16
  int v18; // edx@17
  signed int v19; // esi@17
  unsigned __int64 v20; // rax@18
  char *v21; // edi@18
  int v22; // eax@19
  char v23; // cl@20
  char *v24; // eax@21
  int v25; // edi@21
  unsigned int v26; // edx@21
  char v27; // cl@22
  int v28; // eax@25
  int v29; // esi@25
  int v30; // edi@26
  int v31; // esi@28
  int v32; // edi@29
  int v33; // esi@31
  int v34; // edi@32
  int v35; // ebp@34
  int v36; // edi@35
  int v37; // esi@35
  int v38; // ebp@37
  int v39; // edi@38
  int v40; // esi@38
  int result; // eax@40
  int v42; // ebx@40
  int v43; // edi@41
  int v44; // esi@41
  int v45; // [sp+1Ch] [bp-2Ch]@5
 
  char *DstBuf=malloc(20); // [sp+34h] [bp-14h]@
  char *Str=malloc(20); // [sp+20h] [bp-28h]@1
  char *moneyCount = malloc(20);
  drawImageWithPosition2((int)statbas7Bpk, 96, 224, (int)((char *)screenBuffer + 80544));
  drawImageWithPosition2(getSceneCarBpkById(drivers[driverId].carType), 96, 64, (int)((char *)screenBuffer + 90784));
  //drawImageWithPosition2((int)*(&scenecar1Bpk + dword_46085C[27 * driverId]), 96, 64, (int)((char *)screenBuffer + 90784));
  /*v0 = &byte_460840[108 * driverId];
  v0 = &byte_460840[108 * driverId];
  v1 = (char *)(Str - v0);
  do
  {
    v2 = *v0;
    v0[(_DWORD)v1] = *v0;
    ++v0;
  }
  while ( v2 );
  strupr(Str);
  /*esto creo que no es necesario*/
  //name = getNamePositionRight(Str);
  memcpy(Str, drivers[driverId].name, strlen(drivers[driverId].name));
  memset(&Str[strlen(drivers[driverId].name) + 1], '\0', 1);
  strupr(Str);
  namePosition = getNamePositionRight(Str);
  
  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, namePosition + 81184);
  v4 = drivers[driverId].money;
  //v4 = &dword_460870[27 * driverId];
  if (drivers[driverId].money > 9999999 )
  //if (dword_460870[27 * driverId] > 9999999)
	  drivers[driverId].money = 9999999;
  itoa(v4, DstBuf, 10);
  strcpy(moneyCount, "$");
  memcpy(&moneyCount[1], DstBuf, strlen(DstBuf));
  memset(&moneyCount[strlen(DstBuf)+1], '\0',1);
  
  v5 = strlen(DstBuf) + 1;
  v6 = (char *)&v45 + 3;
  do
    v7 = (v6++)[1];
  while ( v7 );
  memcpy(v6, DstBuf, v5);
  money = sub_41FA50(moneyCount);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, moneyCount, money + 131744);
  
  ///calculo de la velocidad a partir de la velocidad inicial que es  initialVelocity (55)
  itoa(initialVelocity + drivers[driverId].engine*5 + 5 * drivers[driverId].carType, DstBuf, 10);
  //itoa(*(&initialVelocity + dword_460850[27 * driverId] + 5 * dword_46085C[27 * driverId]), DstBuf, 10);
  Str[0] = 0;
  Str[1] = 0;
  Str[2] = 0;
  Str[3] = 0;
  if ( strlen(DstBuf) == 2 )
    strcpy(Str, " ");
  v12 = (int)graphicsGeneral.fmed1aBpk;
  

  memcpy( &Str[3- strlen(DstBuf)], DstBuf, strlen(DstBuf));
  
  //pinta la velocidad de motor
  drawTextWithFont(v12, (int)&unk_445928, Str, 204768);
  itoa(drivers[driverId].rank, DstBuf, 10);
  //itoa(dword_460888[27 * driverId], DstBuf, 10);
  Str[0] = 0;
  Str[1] = "#";
  Str[2] = 0;
  Str[3] = 0;
  if (strlen(DstBuf) == 1) {
	  strcpy(Str, " #");
	  memcpy(&Str[2], DstBuf, strlen(DstBuf));
  }
  else {
	  strcpy(Str, "#");
	  memcpy(&Str[1], DstBuf, strlen(DstBuf));
  }
  v18 = (int)graphicsGeneral.fmed1aBpk;
  
  //pinta #20
  drawTextWithFont(v18, (int)&unk_445928, Str, 214368);
  v19 = 0;
  do
  {
    v20 = (unsigned __int64)ceil((double)drivers[driverId].damage * 0.44);
    v21 = (char *)screenBuffer + v19 + 196388;
    memset(v21, 0x3Fu, 4 * ((unsigned int)v20 >> 2));
    v19 += 640;
    memset(&v21[4 * ((unsigned int)v20 >> 2)], 63, v20 & 3);
  }
  while ( v19 < 3200 );
  itoa(dword_46084C[27 * driverId], DstBuf, 10);
  v22 = 0;
  do
  {
    v23 = DstBuf[v22];
    Str[v22++] = v23;
  }
  while ( v23 );
  v24 = Str;
  v25 = 0;
  v26 = 0;
  do
    v27 = *v24++;
  while ( v27 );
  v45 = v24 - &Str[1];
  if ( v24 != &Str[1] )
  {
    do
      v25 += (unsigned __int8)byte_445892[(unsigned __int8)Str[v26++]];
    while ( v26 < strlen(Str) );
  }
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, Str, 193903 - v25);
  v28 = driverId;
  v29 = 0;
  //dword_44E5F0 contiene los datos del coche dword_44E5F4 dword_44E5F8 engine tire armour muestra los upgrades posibles
   
	if (cars[drivers[driverId].carType].engineUpgrades> 0 )
//if (dword_44E5F0[440 * dword_46085C[27 * driverId]] > 0 )
  {
    v30 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + 800), 20, 10, (int)((char *)screenBuffer + v30 + 149667));
      v28 = driverId;
      ++v29;
      v30 += 23;
    }
	//while (v29 < dword_44E5F0[440 * dword_46085C[27 * driverId]]);
    while ( v29 < cars[drivers[driverId].carType].engineUpgrades);
  }
  v31 = 0;
  if (cars[drivers[driverId].carType].tireUpgrades > 0 )
//	  if (dword_44E5F4[440 * dword_46085C[27 * v28]] > 0)
  {
    v32 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + 800), 20, 10, (int)((char *)screenBuffer + v32 + 165027));
      v28 = driverId;
      ++v31;
      v32 += 23;
    }
    while ( v31 < cars[drivers[driverId].carType].tireUpgrades);
//  while ( v31 < dword_44E5F4[440 * dword_46085C[27 * driverId]] );
  }
  v33 = 0;
  if (cars[drivers[driverId].carType].armourUpgrades > 0 )
	  //if (dword_44E5F8[440 * dword_46085C[27 * v28]] > 0)
  {
    v34 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + 800), 20, 10, (int)((char *)screenBuffer + v34 + 180387));
      v28 = driverId;
      ++v33;
      v34 += 23;
    }
    while ( v33 < cars[drivers[driverId].carType].armourUpgrades);
	//while (v33 < dword_44E5F8[440 * dword_46085C[27 * driverId]]);
  }
  v35 = 0;
  //pinta los upgrades
  if (drivers[driverId].engine> 0 )
	  //if (dword_460850[27 * v28] > 0)
  {
    v36 = 0;
    v37 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + v36), 20, 10, (int)((char *)screenBuffer + v37 + 149667));
      v28 = driverId;
      ++v35;
      v37 += 23;
      v36 += 200;
    }
    while ( v35 < drivers[driverId].engine);
	//while (v35 < dword_460850[27 * driverId]);
  }
  v38 = 0;
  if (drivers[driverId].tire > 0 )
	  //if (dword_460854[27 * v28] > 0)
  {
    v39 = 0;
    v40 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + v39), 20, 10, (int)((char *)screenBuffer + v40 + 165027));
      v28 = driverId;
      ++v38;
      v40 += 23;
      v39 += 200;
    }
    while ( v38 < drivers[driverId].tire);
	//while (v38 < dword_460854[27 * driverId]);
  }
  result = 27 * v28;
  v42 = 0;
  if (drivers[driverId].armour > 0 )
//if ( dword_460858[result] > 0 )
  {
    v43 = 0;
    v44 = 0;
    do
    {
      drawImageWithPosition2((int)((char *)statpop4Bpk + v43), 20, 10, (int)((char *)screenBuffer + v44 + 180387));
      result = 27 * driverId;
      ++v42;
      v44 += 23;
      v43 += 200;
    }
    while ( v42 < drivers[driverId].armour);
	//while ( v42 < dword_460858[27 * driverId] );

  }
  return result * 4;
}

//----- (004201F0) --------------------------------------------------------
int __cdecl drawMenuAnimation(int x, int y, int frame, int animation, int frameSizes[])
{
  int v5; // ecx@1
  int i; // eax@1

  v5 = 0;
  for ( i = 0; i < frame; ++i )
    v5 += frameSizes[i];
  copyImageToBuffer(animation + v5, (int)dword_461EA4);
  return drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 640 * y + x));
}

//----- (00420250) --------------------------------------------------------
int reloadCarAnimation2()
{
  unsigned int v0; // eax@1
  char *v1; // edi@1
  char v2; // cl@2
  int v3; // eax@3
  const char *v4; // edx@4
  signed int v6; // [sp-4h] [bp-2Ch]@3
  int v7; // [sp-4h] [bp-2Ch]@4
  int v8; // [sp-4h] [bp-2Ch]@5
  __int16 v9; // [sp+0h] [bp-28h]@1
  char *DstBuf=malloc(100); // [sp+14h] [bp-14h]@1

  drawImageWithPosition2((int)carbas2Bpk, 96, 96, (int)((char *)screenBuffer + 80016));
  drawImageWithPosition2((int)((char *)carnameBpk + 1536 * actualCarSelected), 96, 16, (int)((char *)screenBuffer + 80016));
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  itoa(*(&dword_44DF5C + 440 * actualCarSelected), DstBuf, 10);
  v9 = 36;
  v0 = strlen(DstBuf) + 1;
  v1 = (char *)&v6 + 3;
  do
    v2 = (v1++)[1];
  while ( v2 );
  memcpy(v1, DstBuf, v0);
  v3 = sub_41FAB0((const char *)&v9);
  sub_41A370((const char *)&v9, v3 + 132496);
  createPopup(144, 114, 384, 119, 1);
  v6 = 79530;
  if ( useWeapons )
  {
	  //todo fix
    writeTextInScreen(&aVagabondSpeed5[1760 * actualCarSelected], 89770-(100010- 89770));
    writeTextInScreen((const char *)&unk_44E078 + 1760 * actualCarSelected, 89770);
    writeTextInScreen(&aSpeedCanBeBoos[1760 * actualCarSelected], 100010);
    writeTextInScreen(&aASingleRevolve[1760 * actualCarSelected], 110250);
    writeTextInScreen(&aAnd1ArmorUpgra[1760 * actualCarSelected], 120490);
    v4 = (char *)&unk_44E118 + 1760 * actualCarSelected;
  }
  else
  {
    writeTextInScreen(&aVagabondSpee_0[1760 * actualCarSelected], 89770 - (100010 - 89770));
    writeTextInScreen((const char *)&unk_44DF88 + 1760 * actualCarSelected, 89770);
    writeTextInScreen(&aSpeedCanBeBo_0[1760 * actualCarSelected], 100010);
    writeTextInScreen(&aOnly2TireAnd1A[1760 * actualCarSelected], 110250);
    writeTextInScreen(&aUpgrades_[1760 * actualCarSelected], 120490);
    v4 = (char *)&unk_44E028 + 1760 * actualCarSelected;
  }
  writeTextInScreen(v4, 130730);
  drawImageWithPosition((int)arrows1dBpk, 16, 64, (int)((char *)screenBuffer + 90240));
  return drawImageWithPosition((int)((char *)arrows1dBpk + 1024), 16, 64, (int)((char *)screenBuffer + 90352));
}
// 4456E4: using guessed type int useWeapons;
// 445968: using guessed type int carAnimFrameSize_45FBA0[];
// 45FBA0: using guessed type int carAnimCurrentFrame_45FBA0;
// 45FC30: using guessed type int actualCarSelected;

//----- (004204F0) --------------------------------------------------------
int reloadEngineAnimation2()
{
  int v0; // ecx@1
  int v1; // edx@1
  unsigned int v2; // eax@2
  void *v3; // edi@2
  char v4; // cl@3
  int v5; // eax@4
  int result; // eax@4
  char v7; // [sp-1h] [bp-29h]@2
  __int16 v8; // [sp+0h] [bp-28h]@2
  char *DstBuf =malloc(100); // [sp+14h] [bp-14h]@2

  drawImageWithPosition2((int)bases41Bpk, 96, 96, (int)((char *)screenBuffer + 161936));
  v0 = cars[drivers[driverId].carType].engineUpgrades;
  v1 = drivers[driverId].engine;
  if ( v1 >= v0 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 6144 * v0 - 6144), 96, 64, (int)((char *)screenBuffer + 172176));
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(aNoMoreEngineUp, 79530);
    writeTextInScreen((const char *)&unk_450B10, 89770);
    writeTextInScreen(aYouVeGotTheMos, 100010);
    writeTextInScreen(aMonsterThisVeh, 110250);
    writeTextInScreen(aHearItsPowerfu, 120490);
    result = writeTextInScreen((const char *)&unk_450BB0, 130730);
  }
  else
  {
    drawMenuAnimation(
      16,
      269,
      engineAnimCurrentFrame_462D80,
		getEngineBpkById(v1),
      (int)((char *)&engineAnimFrameSize_445F68 + 96 * drivers[driverId].engine));
    itoa(cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].engine], DstBuf, 10);
    v8 = 36;
    v2 = strlen(DstBuf) + 1;
    v3 = &v7;
    do
    {
      v4 = *((byte *)v3 + 1);
      v3 = (char *)v3 + 1;
    }
    while ( v4 );
    memcpy(v3, DstBuf, v2);
    v5 = sub_41FAB0((const char *)&v8);
    sub_41A370((const char *)&v8, v5 + 214416);
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(&a4CylinderMotor[1760 * drivers[driverId].carType + 240 * drivers[driverId].engine], 79530);
    writeTextInScreen(
      (const char *)&unk_44E258 + 1760 * drivers[driverId].carType + 240 * drivers[driverId].engine,
      89770);
    writeTextInScreen(&aSickOfHearingY[1760 * drivers[driverId].carType + 240 * drivers[driverId].engine], 100010);
    writeTextInScreen(&aBurnerMoanInCo[1760 * drivers[driverId].carType + 240 * drivers[driverId].engine], 110250);
    writeTextInScreen(&aThisMotorIsThe[1760 * drivers[driverId].carType + 240 * drivers[driverId].engine], 120490);
    result = writeTextInScreen(
               (const char *)&unk_44E2F8
             + 1760 * drivers[driverId].carType
             + 240 * drivers[driverId].engine,
               130730);
  }
  return result;
}


//----- (004207E0) --------------------------------------------------------
int reloadTireAnimation2()
{
  int v0; // ecx@1
  int v1; // edx@1
  unsigned int v2; // eax@2
  void *v3; // edi@2
  char v4; // cl@3
  int v5; // eax@4
  int result; // eax@4
  char v7; // [sp-1h] [bp-29h]@2
  __int16 v8; // [sp+0h] [bp-28h]@2
  char *DstBuf=malloc(100); // [sp+14h] [bp-14h]@2

  drawImageWithPosition2((int)bases42Bpk, 96, 96, (int)((char *)screenBuffer + 162040));
  v0 = cars[drivers[driverId].carType].tireUpgrades;
  v1 = drivers[driverId].tire;
  if ( v1 >= v0 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 2048 * (3 * v0 + 9)), 96, 64, (int)((char *)screenBuffer + 172280));
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(aNoMoreTireUpgr, 79530);
    writeTextInScreen((const char *)&unk_450C00, 89770);
    writeTextInScreen(aYouVeGotTheBes, 100010);
    writeTextInScreen(aTiresThisVehic, 110250);
    writeTextInScreen(aAreInCloseTouc, 120490);
    result = writeTextInScreen((const char *)&unk_450CA0, 130730);
  }
  else
  {
    drawMenuAnimation(
      120,
      269,
      tireAnimCurrentFrame_45F034,
		getTireBpkById(v1),
      (int)((char *)&tireAnimFrameSize_4460E8 + 48 * drivers[driverId].tire));
    itoa(cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].tire], DstBuf, 10);
    v8 = 36;
    v2 = strlen(DstBuf) + 1;
    v3 = &v7;
    do
    {
      v4 = *((byte *)v3 + 1);
      v3 = (char *)v3 + 1;
    }
    while ( v4 );
    memcpy(v3, DstBuf, v2);
    v5 = sub_41FAB0((const char *)&v8);
    sub_41A370((const char *)&v8, v5 + 214520);
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(&aTrackmaster155[240 * drivers[driverId].tire], 79530);
    writeTextInScreen((const char *)&unk_4511A0 + 240 * drivers[driverId].tire, 89770);
    writeTextInScreen(&aTheseWheelsWil[240 * drivers[driverId].tire], 100010);
    writeTextInScreen(&aRapidFireCorne[240 * drivers[driverId].tire], 110250);
    writeTextInScreen(&aShimmeringSilv[240 * drivers[driverId].tire], 120490);
    result = writeTextInScreen(&byte_451240[240 * drivers[driverId].tire], 130730);
  }
  return result;
}


//----- (00420A80) --------------------------------------------------------
int reloadArmourAnimation2()
{
  int v0; // ecx@1
  int v1; // edx@1
  unsigned int v2; // eax@2
  void *v3; // edi@2
  char v4; // cl@3
  int v5; // eax@4
  int result; // eax@4
  char v7; // [sp-1h] [bp-29h]@2
  __int16 v8; // [sp+0h] [bp-28h]@2
  char *DstBuf=malloc(100); // [sp+14h] [bp-14h]@2

  drawImageWithPosition2((int)bases43Bpk, 96, 96, (int)((char *)screenBuffer + 162144));
  v0 = cars[drivers[driverId].carType].engineUpgrades;
  v1 = drivers[driverId].armour;
  if ( v1 >= v0 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 2048 * (3 * v0 + 21)), 96, 64, (int)((char *)screenBuffer + 172384));
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(aNoMoreArmorUpg, 79530);
    writeTextInScreen((const char *)&unk_450CF0, 89770);
    writeTextInScreen(aYouGotTheBestS, 100010);
    writeTextInScreen(aArmorThisWarho, 110250);
    writeTextInScreen(aCanCarryToAnyR, 120490);
    result = writeTextInScreen((const char *)&unk_450D90, 130730);
  }
  else
  {
    drawMenuAnimation(
      224,
      269,
      armourAnimCurrentFrame_461288,
      getArmourBpkById(v1),
      (int)((char *)&armourAnimFrameSize_4461A8 + 16 * drivers[driverId].armour));
    itoa(cars[drivers[driverId].carType].armourUpgradeCosts[drivers[driverId].armour], DstBuf, 10);//esto son textos
    v8 = 36;
    v2 = strlen(DstBuf) + 1;
    v3 = &v7;
    do
    {
      v4 = *((byte *)v3 + 1);
      v3 = (char *)v3 + 1;
    }
    while ( v4 );
    memcpy(v3, DstBuf, v2);
    v5 = sub_41FAB0((const char *)&v8);
	//aui genera el texto a pintar con el coste de la armadura
    sub_41A370((const char *)&v8, v5 + 214624);
    createPopup(144, 114, 384, 119, 1);
    writeTextInScreen(&aSteelTriumphPl[240 * drivers[ driverId].armour], 79530);
    writeTextInScreen((const char *)&unk_451920 + 240 * drivers[driverId].armour, 89770);
    writeTextInScreen(&aSteelTriumphWo[240 * drivers[driverId].armour], 100010);
    writeTextInScreen(&aButItJustMight[240 * drivers[driverId].armour], 110250);
    writeTextInScreen(&aPieceToTheFini[240 * drivers[driverId].armour], 120490);
    result = writeTextInScreen(&byte_4519C0[240 * drivers[driverId].armour], 130730);
  }
  return result;
}


//----- (00420D20) --------------------------------------------------------
int reloadRepairAnimation()
{
  int v0; // eax@1
  int v1; // eax@2
  int v2; // eax@2
  __int64 v3; // rax@3
  int v4; // eax@3
  unsigned int v5; // eax@5
  char *v6; // edx@5
  void *v7; // edi@5
  char v8; // cl@6
  int v9; // eax@8
  int v10; // eax@8
  char v11; // cl@11
  int v12; // eax@12
  int v13; // eax@12
  signed int v14; // esi@12
  bool v15; // sf@12
  unsigned __int8 v16; // of@12
  int v17; // esi@36
  char *DstBuf =malloc(100); // [sp+8h] [bp-28h]@2
  char v20; // [sp+1Bh] [bp-15h]@5
  __int16 v21; // [sp+1Ch] [bp-14h]@5

  drawImageWithPosition2((int)bases44Bpk, 96, 96, (int)((char *)screenBuffer + 162248));
  drawMenuAnimation(328, 269, repairAnimCurrentFrame_45EEAC, (int)repaaniBpk, (int)&repairAnimFrameSize_446308);
  v0 = drivers[driverId].damage;
  if ( v0 >= 10 )
  {
    v9 = sub_41FB20((const char *)&unk_4433D4);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, (const char *)&unk_4433D4, 163610 - v9);
    v10 = cars[drivers[driverId].carType].repairCost;
    if ( useWeapons )
      v10 /= 2;
    itoa(v10, DstBuf, 10);
    v21 = 36;
    v6 = DstBuf;
    v5 = strlen(DstBuf) + 1;
    v7 = &v20;
    do
    {
      v11 = *((byte *)v7 + 1);
      v7 = (char *)v7 + 1;
    }
    while ( v11 );
  }
  else
  {
    itoa(v0, DstBuf, 10);
    v1 = sub_41FB20(DstBuf);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, 163610 - v1);
    v2 = drivers[driverId].carType;
    if ( useWeapons )
    {
      v3 = cars[v2].repairCost / 10;
      v4 = ((signed int)v3 - HIDWORD(v3)) >> 1;
    }
    else
    {
      v4 = cars[v2].repairCost / 10;
    }
    itoa(drivers[driverId].damage * v4, DstBuf, 10);
    v21 = 36;
    v6 = DstBuf;
    v5 = strlen(DstBuf) + 1;
    v7 = &v20;
    do
    {
      v8 = *((byte *)v7 + 1);
      v7 = (char *)v7 + 1;
    }
    while ( v8 );
  }
  memcpy(v7, v6, v5);
  v12 = sub_41FAB0((const char *)&v21);
  sub_41A370((const char *)&v21, v12 + 214728);
  v13 = drivers[driverId].damage;
  v14 = 0;
  v16 = __OFSUB__(v13, 100);
  v15 = v13 - 100 < 0;
  if ( v13 == 100 )
  {
    v16 = 0;
    v15 = 0;
  }
  if ( v15 ^ v16 )
    v14 = 1;
  if ( v13 < 90 )
    v14 = 2;
  if ( v13 < 80 )
    v14 = 3;
  if ( v13 < 70 )
    v14 = 4;
  if ( v13 < 60 )
    v14 = 5;
  if ( v13 < 50 )
    v14 = 6;
  if ( v13 < 40 )
    v14 = 7;
  if ( v13 < 30 )
    v14 = 8;
  if ( v13 < 20 )
    v14 = 9;
  if ( v13 < 10 )
    v14 = 10;
  if ( !v13 )
    v14 = 11;
  createPopup(144, 114, 384, 119, 1);
  v17 = 240 * v14;
  writeTextInScreen(&aRepair[v17], 79530);
  writeTextInScreen(&byte_453E50[v17], 89770);
  writeTextInScreen(&aThisUsedToBeAC[v17], 100010);
  writeTextInScreen(&aTheRestOfItInH[v17], 110250);
  writeTextInScreen(&aWhatCanBeDone_[v17], 120490);
  return writeTextInScreen(&byte_453EF0[v17], 130730);
}


//----- (00421010) --------------------------------------------------------
int loadAcceptedText()
{
  char v0; // bl@1
  int v1; // esi@3

  v0 = 5 - drivers[driverId].carType;
  if ( !drivers[driverId].carType )
    v0 = 4;
  createPopup(144, 114, 384, 119, 1);
  v1 = 240 * (unsigned __int8)v0;
  writeTextInScreen(&aLoanOf12000Gra[v1], 79530);
  writeTextInScreen(&byte_452550[v1], 89770);
  writeTextInScreen(&aYouHave3RacesT[v1], 100010);
  writeTextInScreen(&a18000_FairIsFa[v1], 110250);
  writeTextInScreen(&byte_4525C8[v1], 120490);
  return writeTextInScreen(&aPressEscToGoBa[v1], 130730);
}
// 46085C: using guessed type int dword_46085C[];
// 463CE8: using guessed type int driverId;

//----- (004210C0) --------------------------------------------------------
int showCarBought()
{
  unsigned int v0; // eax@1
  void *v1; // edi@1
  char v2; // cl@2
  int v3; // eax@3
  char v5; // [sp-1h] [bp-29h]@1
  __int16 v6; // [sp+0h] [bp-28h]@1
  char DstBuf; // [sp+14h] [bp-14h]@1

  drawImageWithPosition2((int)carbas2Bpk, 96, 96, (int)((char *)screenBuffer + 80016));
  drawImageWithPosition2((int)((char *)carnameBpk + 1536 * actualCarSelected), 96, 16, (int)((char *)screenBuffer + 80016));
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  /*itoa(*(&dword_44DF5C + 440 * actualCarSelected), &DstBuf, 10);
  v6 = 36;
  v0 = strlen(&DstBuf) + 1;
  v1 = &v5;
  do
  {
    v2 = *((byte *)v1 + 1);
    v1 = (char *)v1 + 1;
  }
  while ( v2 );
  memcpy(v1, &DstBuf, v0);*/
  v3 = sub_41FAB0((const char *)&v6);
  sub_41A370((const char *)&v6, v3 + 132496);
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&aVagabondBought[1760 * drivers[driverId].carType], 79530);
  writeTextInScreen((const char *)&unk_44E168 + 1760 * drivers[driverId].carType, 89770);
  writeTextInScreen(&aFaceItNotTheHo[1760 * drivers[driverId].carType], 100010);
  writeTextInScreen(&aAroundButSheLl[1760 * drivers[driverId].carType], 110250);
  writeTextInScreen(&aOnHerOwnSweetT[1760 * drivers[driverId].carType], 120490);
  writeTextInScreen((const char *)&unk_44E208 + 1760 * drivers[driverId].carType, 130730);
  drawImageWithPosition((int)arrows1dBpk, 16, 64, (int)((char *)screenBuffer + 90240));
  return drawImageWithPosition((int)((char *)arrows1dBpk + 1024), 16, 64, (int)((char *)screenBuffer + 90352));
}
// 445968: using guessed type int carAnimFrameSize_45FBA0[];
// 45FBA0: using guessed type int carAnimCurrentFrame_45FBA0;
// 45FC30: using guessed type int actualCarSelected;
// 46085C: using guessed type int dword_46085C[];
// 463CE8: using guessed type int driverId;

//----- (004212F0) --------------------------------------------------------
int reloadEngineAnimation()
{
  int v0; // ecx@1
  unsigned int v1; // eax@3
  void *v2; // edi@3
  char v3; // cl@4
  int v4; // eax@5
  char v6; // [sp+3h] [bp-29h]@3
  __int16 v7; // [sp+4h] [bp-28h]@3
  char DstBuf; // [sp+18h] [bp-14h]@3

  drawImageWithPosition2((int)bases41Bpk, 96, 96, (int)((char *)screenBuffer + 161936));
  v0 = cars[drivers[driverId].carType].engineUpgrades;
  if (drivers[driverId].engine == v0 - 1 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 6144 * v0 - 6144), 96, 64, (int)((char *)screenBuffer + 172176));
  }
  else
  {
    drawMenuAnimation(
      16,
      269,
      engineAnimCurrentFrame_462D80,
		getEngineBpkById(drivers[driverId].engine),
      (int)((char *)&engineAnimFrameSize_445F68 + 96 * drivers[driverId].engine));
    itoa(cars[drivers[driverId].carType].engineUpgradeCosts[drivers[driverId].engine], &DstBuf, 10);
    v7 = 36;
    v1 = strlen(&DstBuf) + 1;
    v2 = &v6;
    do
    {
      v3 = *((byte *)v2 + 1);
      v2 = (char *)v2 + 1;
    }
    while ( v3 );
    memcpy(v2, &DstBuf, v1);
    v4 = sub_41FAB0((const char *)&v7);
    sub_41A370((const char *)&v7, v4 + 214416);
  }
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&a4CylinderMot_0[240 * drivers[driverId].engine], 79530);
  writeTextInScreen((const char *)&unk_450DE0 + 240 * drivers[driverId].engine, 89770);
  writeTextInScreen(&aThisEngineGeni[240 * drivers[driverId].engine], 100010);
  writeTextInScreen(&aWin_ItWillGran[240 * drivers[driverId].engine], 110250);
  writeTextInScreen(&aWishes_[240 * drivers[driverId].engine], 120490);
  return writeTextInScreen(&byte_450E80[240 * drivers[driverId].engine], 130730);
}


//----- (00421520) --------------------------------------------------------
int reloadTireAnimation()
{
  int v0; // ecx@1
  unsigned int v1; // eax@3
  void *v2; // edi@3
  char v3; // cl@4
  int v4; // eax@5
  char v6; // [sp+3h] [bp-29h]@3
  __int16 v7; // [sp+4h] [bp-28h]@3
  char DstBuf; // [sp+18h] [bp-14h]@3

  drawImageWithPosition2((int)bases42Bpk, 96, 96, (int)((char *)screenBuffer + 162040));
  v0 = cars[drivers[driverId].carType].tireUpgrades;
  if (drivers[driverId].tire == v0 - 1 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 2048 * (3 * v0 + 9)), 96, 64, (int)((char *)screenBuffer + 172280));
  }
  else
  {
    drawMenuAnimation(
      120,
      269,
      tireAnimCurrentFrame_45F034,
		getTireBpkById(drivers[driverId].tire),
      (int)((char *)&tireAnimFrameSize_4460E8 + 48 * drivers[driverId].tire));
    itoa(cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].tire], &DstBuf, 10);
    v7 = 36;
    v1 = strlen(&DstBuf) + 1;
    v2 = &v6;
    do
    {
      v3 = *((byte *)v2 + 1);
      v2 = (char *)v2 + 1;
    }
    while ( v3 );
    memcpy(v2, &DstBuf, v1);
    v4 = sub_41FAB0((const char *)&v7);
    sub_41A370((const char *)&v7, v4 + 214520);
  }
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&aTrackmaster1_0[240 * drivers[driverId].tire], 79530);
  writeTextInScreen((const char *)&unk_451560 + 240 * drivers[driverId].tire, 89770);
  writeTextInScreen(&aWarp9Captain_N[240 * drivers[driverId].tire], 100010);
  writeTextInScreen(&aTractionNow_Th[240 * drivers[driverId].tire], 110250);
  writeTextInScreen(&aSheSClosingFas[240 * drivers[driverId].tire], 120490);
  return writeTextInScreen(&byte_451600[240 * drivers[driverId].tire], 130730);
}

//----- (00421750) --------------------------------------------------------
int reloadArmourAnimation()
{
  int v0; // ecx@1
  unsigned int v1; // eax@3
  void *v2; // edi@3
  char v3; // cl@4
  int v4; // eax@5
  char v6; // [sp+3h] [bp-29h]@3
  __int16 v7; // [sp+4h] [bp-28h]@3
  char DstBuf; // [sp+18h] [bp-14h]@3

  drawImageWithPosition2((int)bases43Bpk, 96, 96, (int)((char *)screenBuffer + 162144));
  v0 = cars[drivers[driverId].carType].armourUpgrades;
  if ( drivers[driverId].armour == v0 - 1 )
  {
    drawImageWithPosition2((int)((char *)maxi1fBpk + 2048 * (3 * v0 + 21)), 96, 64, (int)((char *)screenBuffer + 172384));
  }
  else
  {
    drawMenuAnimation(
      224,
      269,
      armourAnimCurrentFrame_461288,
		getArmourBpkById(drivers[driverId].armour),
		
      (int)((char *)&armourAnimFrameSize_4461A8 + 64 * drivers[driverId].armour));
    itoa(cars[drivers[driverId].carType].armourUpgradeCosts[drivers[driverId].armour], &DstBuf, 10);
    v7 = 36;
    v1 = strlen(&DstBuf) + 1;
    v2 = &v6;
    do
    {
      v3 = *((byte *)v2 + 1);
      v2 = (char *)v2 + 1;
    }
    while ( v3 );
    memcpy(v2, &DstBuf, v1);
    v4 = sub_41FAB0((const char *)&v7);
    sub_41A370((const char *)&v7, v4 + 214624);
  }
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&aSteelTriumphBo[240 * drivers[driverId].armour], 79530);
  writeTextInScreen((const char *)&unk_451CE0 + 240 * drivers[driverId].armour, 89770);
  writeTextInScreen(&aStraightFromTh[240 * drivers[driverId].armour], 100010);
  writeTextInScreen(&aShieldingSteel[240 * drivers[driverId].armour], 110250);
  writeTextInScreen(&aThatExtraEdgeY[240 * drivers[driverId].armour], 120490);
  return writeTextInScreen(&byte_451D80[240 * drivers[driverId].armour], 130730);
}


//----- (00421980) --------------------------------------------------------
int __cdecl sub_421980(int a1, int a2, int a3, int a4)
{
  int v4; // edi@1
  int v5; // ebx@1
  int result; // eax@1
  int i; // ecx@1
  char *v8; // edx@2
  int j; // ecx@3
  char *v10; // edx@4
  int v11; // ecx@6
  char *v12; // edx@7
  char *v13; // edx@10

  v4 = 640 * a2;
  drawImageWithPosition((int)choo2Bpk, 24, 12, (int)((char *)screenBuffer + 640 * a2 + a1));
  drawImageWithPosition((int)((char *)choo2Bpk + 576), 24, 12, (int)((char *)screenBuffer + 640 * a2 + a1 + a3 - 24));
  drawImageWithPosition((int)((char *)choo2Bpk + 1440), 24, 12, (int)((char *)screenBuffer + 128 * (5 * (a4 + a2) - 60) + a1));
  v5 = 640 * (a4 + a2);
  drawImageWithPosition((int)((char *)choo2Bpk + 2016), 24, 12, (int)((char *)screenBuffer + v5 + a1 + a3 - 7704));
  result = a3 - 48;
  for ( i = 0; i < result; v8[a1 + 1304] = 22 )
    v8 = (char *)screenBuffer + v4 + i++;
  for ( j = 0; j < result; v10[a1 - 1896] = 22 )
    v10 = (char *)screenBuffer + v5 + j++;
  if ( a4 - 48 > 0 )
  {
    result = 640 * a2;
    v11 = a4 - 48;
    do
    {
      v12 = (char *)screenBuffer + result;
      result += 640;
      --v11;
      v12[a1 + 15362] = 22;
    }
    while ( v11 );
    if ( a4 - 48 > 0 )
    {
      result = a4 - 48;
      do
      {
        v13 = (char *)screenBuffer + v4 + a1;
        v4 += 640;
        --result;
        v13[a3 + 15357] = 22;
      }
      while ( result );
    }
  }
  return result;
}

//----- (00421AE0) --------------------------------------------------------
int __cdecl drawBorder(int a1, int a2, int a3, int a4)
{
  int v4; // edi@1
  int v5; // ebx@1
  int result; // eax@1
  int i; // ecx@1
  char *v8; // edx@2
  int j; // ecx@3
  char *v10; // edx@4
  int v11; // ecx@6
  char *v12; // edx@7
  char *v13; // edx@10

  v4 = 640 * a2;
  drawImageWithPosition((int)choo2Bpk, 24, 24, (int)((char *)screenBuffer + 640 * a2 + a1));
  drawImageWithPosition((int)((char *)choo2Bpk + 576), 24, 24, (int)((char *)screenBuffer + 640 * a2 + a1 + a3 - 24));
  drawImageWithPosition((int)((char *)choo2Bpk + 1152), 24, 24, (int)((char *)screenBuffer + 128 * (5 * (a4 + a2) - 120) + a1));
  v5 = 640 * (a4 + a2);
  drawImageWithPosition((int)((char *)choo2Bpk + 1728), 24, 24, (int)((char *)screenBuffer + v5 + a1 + a3 - 15384));
  result = a3 - 48;
  for ( i = 0; i < result; v8[a1 + 1304] = 22 )
    v8 = (char *)screenBuffer + v4 + i++;
  for ( j = 0; j < result; v10[a1 - 1896] = 22 )
    v10 = (char *)screenBuffer + v5 + j++;
  if ( a4 - 48 > 0 )
  {
    result = 640 * a2;
    v11 = a4 - 48;
    do
    {
      v12 = (char *)screenBuffer + result;
      result += 640;
      --v11;
      v12[a1 + 15362] = 22;
    }
    while ( v11 );
    if ( a4 - 48 > 0 )
    {
      result = a4 - 48;
      do
      {
        v13 = (char *)screenBuffer + v4 + a1;
        v4 += 640;
        --result;
        v13[a3 + 15357] = 22;
      }
      while ( result );
    }
  }
  return result;
}

//----- (00421C40) --------------------------------------------------------
int __cdecl drawBorder2(int a1, int a2, unsigned int a3, int a4)
{
  int result; // eax@1
  int v5; // edx@1
  int v6; // edx@3
  int v7; // ecx@6
  int v8; // edi@6
  char *v9; // edx@7
  char *v10; // esi@7
  int v11; // esi@8
  int v12; // ecx@9
  char *v13; // edx@10
  char *v14; // edi@10
  signed int v15; // [sp+10h] [bp-8h]@1
  signed int v16; // [sp+10h] [bp-8h]@3

  result = a1;
  v5 = 640 * a2;
  v15 = 5;
  do
  {
    memcpy((char *)screenBuffer + v5 + a1, (char *)graphicsGeneral.menubg5Bpk + v5 + a1, a3);
    v5 += 640;
    --v15;
  }
  while ( v15 );
  v6 = 640 * (a2 + a4 - 5);
  v16 = 5;
  do
  {
    memcpy((char *)screenBuffer + v6 + a1, (char *)graphicsGeneral.menubg5Bpk + v6 + a1, a3);
    v6 += 640;
    --v16;
  }
  while ( v16 );
  if ( a4 > 0 )
  {
    v7 = 640 * a2;
    v8 = a4;
    do
    {
      v9 = (char *)graphicsGeneral.menubg5Bpk + v7 + a1;
      v10 = (char *)screenBuffer + v7 + a1;
      *(_DWORD *)v10 = *(_DWORD *)v9;
      v7 += 640;
      --v8;
      v10[4] = v9[4];
    }
    while ( v8 );
    v11 = a4;
    if ( a4 > 0 )
    {
      v12 = 640 * a2;
      do
      {
        v13 = (char *)graphicsGeneral.menubg5Bpk + v12 + a1 + a3 - 5;
        v14 = (char *)screenBuffer + v12 + a1 + a3 - 5;
        *(_DWORD *)v14 = *(_DWORD *)v13;
        v12 += 640;
        --v11;
        v14[4] = v13[4];
      }
      while ( v11 );
    }
  }
  return result;
}

//----- (00421D90) --------------------------------------------------------
void sub_421D90()
{
  if ( menuOptionSelected_463DF0 == 1 )
  {
    loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
    menuOptionSelected_463DF0 = 0;
    reloadCarAnimation2();
    drawBorder2(10, 243, 0x6Cu, 114);
    drawBorder(0, 115, 128, 114);
    refreshAllScreen();
  }
}


//----- (00421DF0) --------------------------------------------------------
void sub_421DF0()
{
  if ( !menuOptionSelected_463DF0 )
  {
    loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
    menuOptionSelected_463DF0 = 1;
    reloadEngineAnimation2();
    drawBorder2(0, 115, 0x80u, 114);
    drawBorder(10, 243, 108, 114);
    refreshAllScreen();
  }
}
// 445198: using guessed type int dword_445198;
// 45DC18: using guessed type int configuration.musicVolume;
// 463DF0: using guessed type int menuOptionSelected_463DF0;

//----- (00421E50) --------------------------------------------------------
signed int __cdecl hasInsuficientMoneyToBuy(int a1)
{
  signed int v1; // edx@2
  char *v2; // edi@3
  unsigned int v3; // eax@4
  void *v4; // edi@4
  char v5; // cl@5
  char *v6; // edi@6
  char v7; // al@7
  signed int result; // eax@8
  char *DstBuf = malloc(100); // [sp+4h] [bp-34h]@4
  char v10; // [sp+17h] [bp-21h]@4
  int v11; // [sp+18h] [bp-20h]@4
  int v12; // [sp+1Ch] [bp-1Ch]@4
  int v13; // [sp+20h] [bp-18h]@4
  int v14; // [sp+24h] [bp-14h]@4
  __int16 v15; // [sp+28h] [bp-10h]@4

  if ( drivers[driverId].money >= a1 )
  {
    result = 0;
  }
  else
  {
    v1 = 0;
    do
    {
      v2 = (char *)screenBuffer + v1 + 89770;
      memset(v2, 0xC4u, 0x158u);
      v2 += 344;
      *(_WORD *)v2 = -15164;
      v1 += 640;
      v2[2] = -60;
    }
    while ( v1 < 51200 );
    itoa(a1 - drivers[driverId].money, DstBuf, 10);
    v11 = 1701736296;
    v12 = 1528835705;
    v14 = 543519329;
    v13 = 544567129;
    v15 = 36;
    v3 = strlen(DstBuf) + 1;
    v4 = &v10;
    do
    {
      v5 = *((byte *)v4 + 1);
      v4 = (char *)v4 + 1;
    }
    while ( v5 );
    memcpy(v4, DstBuf, v3);
    v6 = &v10;
    do
      v7 = (v6++)[1];
    while ( v7 );
   // *(_DWORD *)v6 = 1752390432; //hs[
   // *((_DWORD *)v6 + 1) = 779383407; //.tro
    //v6[8] = 0;
    writeTextInScreen("No dough, no go, bro. No money,", 100010);
    writeTextInScreen((const char *)&v11, 110250);
    writeTextInScreen("Gotta earn it. Go do it already.", 120490);
    refreshAllScreen();
    loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
    dword_456B70 = 310;
    result = 1;
  }
  return result;
}
// 44518C: using guessed type int dword_44518C;
// 456B70: using guessed type int dword_456B70;
// 45DC18: using guessed type int configuration.musicVolume;
// 460870: using guessed type int dword_460870[];
// 463CE8: using guessed type int driverId;

//----- (00421FB0) --------------------------------------------------------
signed int setUndergroundMarketPrices()
{
  int v0; // eax@1
  bool v1; // zf@11
  signed int result; // eax@11

  v0 = drivers[driverId].carType;
  if ( v0 == DELIVERATOR )
  {
    minesCost_462D40 = 2525;
    spikesCost_dword_462D44 = 2750;
    rocket_462D48 = 3275;
    sabotage_462D4C = 2625;
  }
  if ( v0 == WRAITH )
  {
    minesCost_462D40 = 1250;
    spikesCost_dword_462D44 = 1750;
    rocket_462D48 = 2250;
    sabotage_462D4C = 2125;
  }
  if ( v0 == SHRIEKER )
  {
    minesCost_462D40 = 500;
    spikesCost_dword_462D44 = 550;
    rocket_462D48 = 625;
    sabotage_462D4C = 570;
  }
  if ( v0 == SENTINEL )
  {
    minesCost_462D40 = 450;
    spikesCost_dword_462D44 = 500;
    rocket_462D48 = 675;
    sabotage_462D4C = 550;
  }
  if ( v0 == DERVISH )
  {
    minesCost_462D40 = 200;
    spikesCost_dword_462D44 = 225;
    rocket_462D48 = 350;
    sabotage_462D4C = 325;
  }
  v1 = v0 == 0;
  result = 1;
  if ( v1 ) //si es vagabond
  {
    minesCost_462D40 = 150;
    spikesCost_dword_462D44 = 200;
    rocket_462D48 = 275;
    sabotage_462D4C = 250;
  }
  return result;
}
// 46085C: using guessed type int dword_46085C[];
// 463CE8: using guessed type int driverId;

//----- (004220D0) --------------------------------------------------------
int sub_4220D0()
{
  unsigned __int8 v0; // di@1
  signed int v1; // esi@1
  int v2; // ST0C_4@2
  int v3; // ST08_4@2
  int v4; // eax@2
  int result; // eax@5

  v0 = 16;
  v1 = (signed int)dword_461364;
  do
  {
    v2 = (convertColorToPaletteColor(*(_DWORD *)(v1 + 4), dword_45EAA4 << 16) + 0x8000) >> 16;
    v3 = (convertColorToPaletteColor(*(_DWORD *)v1, dword_45EAA4 << 16) + 0x8000) >> 16;
    v4 = convertColorToPaletteColor(*(_DWORD *)(v1 - 4), dword_45EAA4 << 16);
    setPaletteAndGetValue(v0, (v4 + 0x8000) >> 16, v3, v2);
    v1 += 12;
    ++v0;
  }
  //while ( v1 < (signed int)&unk_461424 );
  while (v1 < maxPaletteEntries*3);
  if ( dword_45EAA4 == 49 )
  {
    dword_461EEC = 1;
LABEL_5:
    result = dword_45EAA4 + 3;
    dword_45EAA4 += 3;
    return result;
  }
  if ( dword_45EAA4 == 100 )
  {
    result = 97;
    dword_461EEC = 0;
    dword_45EAA4 = 97;
  }
  else
  {
    if ( dword_461EEC )
      goto LABEL_5;
    result = dword_45EAA4 - 3;
    dword_45EAA4 -= 3;
  }
  return result;
}


//----- (004221A0) --------------------------------------------------------
signed int autoLoadSave()
{
  signed int v0; // ebp@1
  void *v1=malloc(0x883u); // eax@3
  int v2; // edi@3
  int v3; // eax@3
  int v4; // edx@3
  int *v5; // eax@3
  unsigned int v6; // ecx@3
  char v7; // bl@4
  unsigned int v8; // ebx@7
  FILE *v9; // esi@10
  void *v10=malloc(0x883u); // eax@12
  int v11; // edi@12
  FILE *v12; // eax@12
  FILE *v13; // esi@12
  unsigned int v14; // ebx@13
  int v15; // ebx@15
  int v16; // edi@15
  int v17; // esi@15
  signed int result; // eax@16
  char v19; // [sp+4h] [bp-18h]@3
  char v20; // [sp+4h] [bp-18h]@13
  int v21; // [sp+Ch] [bp-10h]@3
  int v22; // [sp+10h] [bp-Ch]@3
  int v23; // [sp+14h] [bp-8h]@3
  __int16 v24; // [sp+18h] [bp-4h]@3
  char v25; // [sp+1Ah] [bp-2h]@3

  v0 = 0;
  if ( isMultiplayerGame )
  {
    result = 0;
  }
  else
  {
    if ( byte_45E0FC )
    {
      v0 = 1;
      //allocateMemory(0x883u);
      Str = v1;
      memset(v1, 0, 0x880u);
      v2 = (int)((char *)v1 + 2176);
      *(_WORD *)v2 = 0;
      *(byte *)(v2 + 2) = 0;
      v3 = rand();
      v4 = v3 % 255;
      *(byte *)Str = v3 % 255;
      *((byte *)Str + 1) = driverId;
      *((byte *)Str + 2) = useWeapons;
      *((byte *)Str + 3) = configuration.difficulty;
      v21 = 1667855697;
      v22 = 1986098027;
      v23 = 1817387109;
      v24 = 29807;
      v5 = &v21;
      v25 = 0;
      v19 = v4;
      v6 = 0;
      do
      {
        v7 = *(byte *)v5;
        v5 = (int *)((char *)v5 + 1);
      }
      while ( v7 );
      if ( v5 != (int *)((char *)&v21 + 1) )
      {
        do
        {
          *((byte *)Str + v6 + 4) = *((byte *)&v21 + v6);
          ++v6;
        }
        while ( v6 < strlen((const char *)&v21) );
      }
      memcpy((char *)Str + 19, byte_460840, 0x870u);
      v8 = 1;
      while ( 1 )
      {
        *((byte *)Str + v8) -= v4;
        *((byte *)Str + v8) += 17 * v8;
        encryptByteSavegame((int)((char *)Str + v8), v8 % 6);
        ++v8;
        if ( (signed int)v8 >= 2179 )
          break;
        LOBYTE(v4) = v19;
      }
      v9 = fopen("DR.SG7", "wb");
      fwrite(Str, 0x883u, 1u, v9);
      fclose(v9);
      free(Str);
    }
    if ( !byte_45E0FD )
      return v0;
    v0 = 2;
    dword_464F44 = 0;
    dword_456BC4 = 0;
    //allocateMemory(0x883u);
    Str = v10;
    memset(v10, 0, 0x880u);
    v11 = (int)((char *)v10 + 2176);
    *(_WORD *)v11 = 0;
    *(byte *)(v11 + 2) = 0;
    v12 = fopen("DR.SG7", "rb");
    v13 = v12;
    if ( v12 )
    {
      fread(Str, 0x883u, 1u, v12);
      fclose(v13);
      v20 = *(byte *)Str;
      v14 = 1;
      do
      {
        decryptByteSavegame((int)((char *)Str + v14), v14 % 6);
        *((byte *)Str + v14) += -17 * v14;
        *((byte *)Str + v14++) += v20;
      }
      while ( (signed int)v14 < 2179 );
      driverId = *((byte *)Str + 1);
      useWeapons = *((byte *)Str + 2);
	  configuration.difficulty = *((byte *)Str + 3);
      memcpy(byte_460840, (char *)Str + 19, 0x870u);
      free(Str);
      v15 = dword_4608A0[27 * driverId];
      v16 = dword_4608A4[27 * driverId];
      v17 = dword_4608A8[27 * driverId];
      minesAvailable_45EFF0 = dword_46089C[27 * driverId] != 8;
      spikesAvailable_45EFF4 = v15 != 1;
      rocketAvailable_45EFF8 = v16 != 1;
      sabotageAvailable_45EFFC = v17 != 1;
      return v0;
    }
    result = 3;
  }
  return result;
}


//----- (004224E0) --------------------------------------------------------
int sub_4224E0()
{
  int v0; // eax@2
  char *v1; // ecx@2
  signed int v2; // edx@2
  int v3; // eax@2
  float v4; // ST30_4@2
  float v5; // ST2C_4@2
  float v6; // ST28_4@2
  int v7; // eax@2
  char *v8; // edx@2
  signed int v9; // ecx@2
  int v10; // eax@2
  float v11; // ST30_4@2
  float v12; // ST2C_4@2
  float v13; // ST28_4@2
  signed int v14; // esi@4
  float v15; // ST34_4@5
  int v16; // eax@5
  void *v17; // ecx@5
  int v18; // eax@5
  void *v19; // ecx@5
  signed int v20; // esi@6
  int v21; // eax@7
  int v22; // eax@7
  int v23; // ecx@7
  int v24; // eax@7
  int v25; // eax@7
  int v26; // edx@7
  int v27; // eax@7
  int result; // eax@7
  signed int v29; // [sp+10h] [bp-8h]@4

  loadPaletteMenu();
  if (graphicsGeneral.copperPal)
  {
    ///v0 = dword_46086C[27 * driverId];
	v0 = drivers[driverId].colour;
    v1 = (char *)graphicsGeneral.copperPal + 2 * v0;
    v2 = (unsigned __int8)v1[v0 + 2];
    v3 = (int)&v1[v0];
    v4 = (double)v2;
    v5 = (double)*(byte *)(v3 + 1);
    v6 = (double)*(byte *)v3;
    sub_418B00(v6, v5, v4);
    //v7 = dword_46086C[27 * driverId];
	v7 = drivers[driverId].colour;
    v8 = (char *)graphicsGeneral.copperPal + 2 * v7;
    v9 = (unsigned __int8)v8[v7 + 2];
    v10 = (int)&v8[v7];
    v11 = (double)v9;
    v12 = (double)*(byte *)(v10 + 1);
    v13 = (double)*(byte *)v10;
    sub_41ED20(v13, v12, v11);
  }
  if (graphicsGeneral.bgcopPal)
  {
    v29 = 0;
    v14 =0;
	int index = 192; //offset de la paleta
	//int index = 192;
	//v14 = (signed int)&unk_460544;
    do
    {
      v15 = (double)v29;
      v16 = sub_43B290(
              (unsigned int)(unsigned __int64)((double)*((byte *)graphicsGeneral.bgcopPal + 2 * dword_456754 + dword_456754)
                                             * 0.015625
                                             * v15) << 16,
              6553600);
      v17 = graphicsGeneral.bgcopPal;
      palette1[index] = v16;
      v18 = sub_43B290(
              (unsigned int)(unsigned __int64)((double)*((byte *)v17 + 2 * dword_456754 + dword_456754 + 1)
                                             * 0.015625
                                             * v15) << 16,
              6553600);
      v19 = graphicsGeneral.bgcopPal;
	  palette1[index+1] = v18;
	  palette1[index+2] = sub_43B290(
                               (unsigned int)(unsigned __int64)((double)*((byte *)v19
                                                                        + 2 * dword_456754
                                                                        + dword_456754
                                                                        + 2)
                                                              * 0.015625
                                                              * v15) << 16,
                               6553600);
      v14 += 12;
	  index = index + 3;
	 /* v15 = (double)v29;
	  v16 = sub_43B290(
		  (unsigned int)(unsigned __int64)((double)*((byte *)graphicsGeneral.bgcopPal + 2 * dword_456754 + dword_456754)
			  * 0.015625
			  * v15) << 16,
		  6553600);
	  v17 = graphicsGeneral.bgcopPal;
	  *(_DWORD *)(v14 - 4) = v16;
	  v18 = sub_43B290(
		  (unsigned int)(unsigned __int64)((double)*((byte *)v17 + 2 * dword_456754 + dword_456754 + 1)
			  * 0.015625
			  * v15) << 16,
		  6553600);
	  v19 = graphicsGeneral.bgcopPal;
	  *(_DWORD *)v14 = v18;
	  *(_DWORD *)(v14 + 4) = sub_43B290(
		  (unsigned int)(unsigned __int64)((double)*((byte *)v19
			  + 2 * dword_456754
			  + dword_456754
			  + 2)
			  * 0.015625
			  * v15) << 16,
		  6553600);
	  v14 += 12;*/
      ++v29;
    }
    while ( v29 < 32 );
	//while (v14 < (signed int)&unk_4606C4);
  }
  v20 = 0;
  int palette1Index = 48;
  int palette2Index = 48;
  do
  {
    v21 = convertColorToPaletteColor(palette2[palette2Index], dword_45EAA4 << 16);
	//v21 = convertColorToPaletteColor(dword_461360[v20], dword_45EAA4 << 16);
    v22 = sub_43B290((v21 + 0x8000) >> 16 << 16, 6553600);
    v23 = palette2[palette2Index +1];
	//v23 = dword_461364[v20];
//    dword_45FD00[v20] = v22;
	palette1[palette1Index + 16] = v22;
    v24 = convertColorToPaletteColor(v23, dword_45EAA4 << 16);
    v25 = sub_43B290((v24 + 0x8000) >> 16 << 16, 6553600);
    v26 = dword_45EAA4 << 16;
	palette1[palette1Index +16] = v25;
    ///dword_45FD04[v20] = v25;
    v27 = convertColorToPaletteColor(palette2[palette2Index +2], v26);
	//v27 = convertColorToPaletteColor(dword_461368[v20], v26);
    result = sub_43B290((v27 + 0x8000) >> 16 << 16, 6553600);
	palette1[palette1Index +16] = result;
	
    //dword_45FD08[v20] = result;
    v20 += 3;
	palette1Index = palette1Index + 3;
	palette2Index = palette2Index + 3;
  }
  while ( v20 < 48 );
  return result;
}


//----- (00422740) --------------------------------------------------------
int copyPalette1toPalette()
{
  unsigned __int8 v0; // di@1
  signed int v1; // esi@1
  int v2; // ST0C_4@2
  int v3; // ST08_4@2
  int v4; // eax@2
  int result; // eax@2

  v0 = 0;
  //FIXED
 // v1 = (signed int)dword_45FC44;
  v1 = 0;
  do
  {
	  
    v2 = (convertColorToPaletteColor((palette1[v1+2]), 6553600) + 0x8000) >> 16;
    v3 = (convertColorToPaletteColor(palette1[v1 + 1], 6553600) + 0x8000) >> 16;
    v4 = convertColorToPaletteColor((palette1[v1] - 4), 6553600);
    result = setPaletteAndGetValue(v0, (v4 + 0x8000) >> 16, v3, v2);
    //v1 += 12;
	v1 += 3;
    ++v0;
  }
  while ( v1 < maxPaletteEntries );
  return result;
}


//----- (004227C0) --------------------------------------------------------
int getReapirCostByCarType()
{
  __int64 v0; // rax@2
  int result; // eax@2

  if ( useWeapons )
  {
    v0 = cars[drivers[ driverId].carType].repairCost;
    result = ((signed int)v0 - HIDWORD(v0)) >> 1;
  }
  else
  {
    result = cars[drivers[driverId].carType].repairCost;
  }
  return result;
}

//----- (00422810) --------------------------------------------------------
int __cdecl getBlackMarketElementText(int a1)
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&aMines[240 * a1], 79530);
  writeTextInScreen((const char *)&unk_453400 + 240 * a1, 89770);
  writeTextInScreen(&aSowTheseSeedsO[240 * a1], 100010);
  writeTextInScreen(&aAfterABlindBen[240 * a1], 110250);
  writeTextInScreen(&aEyesAreTireSmo[240 * a1], 120490);
  return writeTextInScreen(&byte_4534A0[240 * a1], 130730);
}

//----- (004228A0) --------------------------------------------------------
int __cdecl getBlackMarketElementPurchasedText(int a1)
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(&a8MinesLoadedIn[240 * a1], 79530);
  writeTextInScreen((const char *)&unk_453A90 + 240 * a1, 89770);
  writeTextInScreen(&aNowThoseRivalW[240 * a1], 100010);
  writeTextInScreen(&aOnlyBurningEng[240 * a1], 110250);
  writeTextInScreen(&aThatRoadWillBe[240 * a1], 120490);
  return writeTextInScreen(&byte_453B30[240 * a1], 130730);
}

//----- (00422930) --------------------------------------------------------
int sub_422930()
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(aOutOfStock, 79530);
  writeTextInScreen((const char *)&unk_4538B0, 89770);
  writeTextInScreen(aSorryNoCanDo_T, 100010);
  writeTextInScreen(aStock_HoldYour, 110250);
  writeTextInScreen(aTillAfterTheNe, 120490);
  return writeTextInScreen((const char *)&unk_453950, 130730);
}

//----- (004229B0) --------------------------------------------------------
int sub_4229B0()
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(aHeldFromThisRa, 79530);
  writeTextInScreen((const char *)&unk_4539A0, 89770);
  writeTextInScreen(aThisItemIsAlwa, 100010);
  writeTextInScreen(aFullVersion_Re, 110250);
  writeTextInScreen(aTheDirtyStuffI, 120490);
  return writeTextInScreen((const char *)&unk_453A40, 130730);
}

//----- (00422A30) --------------------------------------------------------
int drawLoanShark()
{
 
  char v1; // cl@1
  int v2; // edi@3
  int v3; // esi@4
  int result; // eax@4
  int v5; // ecx@5
  char v6; // dl@6
  unsigned int v7; // eax@17
  void *v8; // edi@17
  char v9; // cl@18
  char *v10; // edi@19
  char v11; // al@20
  char *DstBuf=malloc(100); // [sp+4h] [bp-60h]@8
  char v13; // [sp+13h] [bp-51h]@17
  char v14[80]; // [sp+14h] [bp-50h]@6

  createPopup(144, 114, 384, 119, 1);
  v1 = 5 - drivers[driverId].carType;
  if ( !drivers[driverId].carType)
    v1 = 4;
  v2 = drivers[driverId].loanRaces;
  if ( v2 == -1 )
  {
    v3 = 240 * (unsigned __int8)v1;
    writeTextInScreen(&aBorrow12000Pay[v3], 79530);
    writeTextInScreen(&byte_4520A0[v3], 89770);
    writeTextInScreen(&aWithBetterGear[v3], 100010);
    writeTextInScreen(&aOnTheTopEh_SoH[v3], 110250);
    writeTextInScreen(&aShortTermLoanO[v3], 120490);
    result = writeTextInScreen(&byte_452140[v3], 130730);
  }
  else
  {
    v5 = 0;
    do
    {
      v6 = byte_452AC8[v5];
      v14[v5++] = v6;
    }
    while ( v6 );
    if ( drivers[driverId].loanType == LOAN_DELIVERATOR)
      itoa((unsigned __int64)((double)(drivers[driverId].loanRaces - 1) * 0.3333333333333333 * 6000.0 + 12000.0), DstBuf, 10);
    if (drivers[driverId].loanType == LOAN_WRAIGHT )
      itoa(
        (unsigned __int64)((double)(drivers[driverId].loanRaces - 1) * 0.3333333333333333 * 4500.0 + 9000.0),
        DstBuf,
        10);
    if (drivers[driverId].loanType == LOAN_SHRIEKER )
      itoa(
        (unsigned __int64)((double)(drivers[driverId].loanRaces - 1) * 0.3333333333333333 * 3000.0 + 6000.0),
        DstBuf,
        10);
    if (drivers[driverId].loanType == LOAN_SENTINEL )
      itoa(
        (unsigned __int64)((double)(drivers[driverId].loanRaces - 1) * 0.3333333333333333 * 1500.0 + 3000.0),
        DstBuf,
        10);
    if (drivers[driverId].loanType == LOAN_DERVISH )
      itoa(
        (unsigned __int64)((double)(drivers[driverId].loanRaces - 1) * 0.3333333333333333 * 750.0 + 1500.0),
        DstBuf,
        10);
    v7 = strlen(DstBuf) + 1;
    v8 = &v13;
    do
    {
      v9 = *((byte *)v8 + 1);
      v8 = (char *)v8 + 1;
    }
    while ( v9 );
    memcpy(v8, DstBuf, v7);
    v10 = &v13;
    do
      v11 = (v10++)[1];
    while ( v11 );
    *(_WORD *)v10 = 46;
    writeTextInScreen(v14, 79530);
    writeTextInScreen((const char *)&unk_452AF0, 89770);
    writeTextInScreen(aPetrolBrainYou, 100010);
    writeTextInScreen(aBetterBeHereTo, 110250);
    writeTextInScreen(aElseWeHaveNoth, 120490);
    result = writeTextInScreen((const char *)&unk_452B90, 130730);
  }
  return result;
}

//----- (00422D00) --------------------------------------------------------
int loanDeniedVagabondPopUp()
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(aLoanDeniedVaga, 79530);
  writeTextInScreen((const char *)&unk_452A00, 89770);
  writeTextInScreen(aThisIsABusines, 100010);
  writeTextInScreen(aWeDonTInvestIn, 110250);
  writeTextInScreen(aCards_SoBuzzOf, 120490);
  return writeTextInScreen((const char *)&unk_452AA0, 130730);
}

//----- (00422D80) --------------------------------------------------------
int sub_422D80()
{
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(aLoanPaidBack_, 79530);
  writeTextInScreen((const char *)&unk_452BE0, 89770);
  writeTextInScreen(aItSAllHere_IKn, 100010);
  writeTextInScreen(aTheStartThatIC, 110250);
  writeTextInScreen(aLetSDoThisAgai, 120490);
  return writeTextInScreen((const char *)&unk_452C80, 130730);
}

//----- (00422E00) --------------------------------------------------------
int drawBlackMarketElement0()
{
  unsigned int v0; // eax@2
  void *v1; // edi@2
  char v2; // cl@3
  int v3; // eax@4
  int result; // eax@5
  char v5; // [sp-1h] [bp-29h]@2
  __int16 v6; // [sp+0h] [bp-28h]@2
  char *DstBuf=malloc(100); // [sp+14h] [bp-14h]@2

  if ( minesAvailable_45EFF0 == 1 )
  {
    drawImageWithPosition2((int)maret1eBpk, 96, 96, (int)((char *)screenBuffer + 161936));
    getBlackMarketElementText(0);
    itoa(minesCost_462D40, DstBuf, 10);
    v6 = 36;
    v0 = strlen(DstBuf) + 1;
    v1 = &v5;
    do
    {
      v2 = *((byte *)v1 + 1);
      v1 = (char *)v1 + 1;
    }
    while ( v2 );
    memcpy(v1, DstBuf, v0);
    v3 = sub_41FAB0((const char *)&v6);
    sub_41A370((const char *)&v6, v3 + 214416);
  }
  result = minesAvailable_45EFF0;
  if ( !minesAvailable_45EFF0 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 73728), 96, 96, (int)((char *)screenBuffer + 161936));
    result = sub_422930();
  }
  if ( minesAvailable_45EFF0 == -1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 36864), 96, 96, (int)((char *)screenBuffer + 161936));
    result = sub_4229B0();
  }
  return result;
}
// 45EFF0: using guessed type int minesAvailable_45EFF0;

//----- (00422F10) --------------------------------------------------------
int drawBlackMarketElement1()
{
  unsigned int v0; // eax@2
  void *v1; // edi@2
  char v2; // cl@3
  int v3; // eax@4
  int result; // eax@5
  char v5; // [sp-1h] [bp-29h]@2
  __int16 v6; // [sp+0h] [bp-28h]@2
  char *DstBuf = malloc(100); // [sp+14h] [bp-14h]@2

  if ( spikesAvailable_45EFF4 == 1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 9216), 96, 96, (int)((char *)screenBuffer + 162040));
    getBlackMarketElementText(1);
    itoa(spikesCost_dword_462D44, DstBuf, 10);
    v6 = 36;
    v0 = strlen(DstBuf) + 1;
    v1 = &v5;
    do
    {
      v2 = *((byte *)v1 + 1);
      v1 = (char *)v1 + 1;
    }
    while ( v2 );
    memcpy(v1, DstBuf, v0);
    v3 = sub_41FAB0((const char *)&v6);
    sub_41A370((const char *)&v6, v3 + 214520);
  }
  result = spikesAvailable_45EFF4;
  if ( !spikesAvailable_45EFF4 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 82944), 96, 96, (int)((char *)screenBuffer + 162040));
    result = sub_422930();
  }
  if ( spikesAvailable_45EFF4 == -1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 46080), 96, 96, (int)((char *)screenBuffer + 162040));
    result = sub_4229B0();
  }
  return result;
}
// 45EFF4: using guessed type int spikesAvailable_45EFF4;

//----- (00423020) --------------------------------------------------------
int drawBlackMarketElement2()
{
  unsigned int v0; // eax@2
  void *v1; // edi@2
  char v2; // cl@3
  int v3; // eax@4
  int result; // eax@5
  char v5; // [sp-1h] [bp-29h]@2
  __int16 v6; // [sp+0h] [bp-28h]@2
  char *DstBuf = malloc(100); // [sp+14h] [bp-14h]@2

  if ( rocketAvailable_45EFF8 == 1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 18432), 96, 96, (int)((char *)screenBuffer + 162144));
    getBlackMarketElementText(2);
    itoa(rocket_462D48, DstBuf, 10);
    v6 = 36;
    v0 = strlen(DstBuf) + 1;
    v1 = &v5;
    do
    {
      v2 = *((byte *)v1 + 1);
      v1 = (char *)v1 + 1;
    }
    while ( v2 );
    memcpy(v1, DstBuf, v0);
    v3 = sub_41FAB0((const char *)&v6);
    sub_41A370((const char *)&v6, v3 + 214624);
  }
  result = rocketAvailable_45EFF8;
  if ( !rocketAvailable_45EFF8 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 92160), 96, 96, (int)((char *)screenBuffer + 162144));
    result = sub_422930();
  }
  if ( rocketAvailable_45EFF8 == -1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 55296), 96, 96, (int)((char *)screenBuffer + 162144));
    result = sub_4229B0();
  }
  return result;
}
// 45EFF8: using guessed type int rocketAvailable_45EFF8;

//----- (00423130) --------------------------------------------------------
int drawBlackMarketElement3()
{
  int v0; // ebx@1
  signed int v1; // ecx@1
  int v2; // eax@1
  unsigned int v3; // eax@19
  void *v4; // edi@19
  char v5; // cl@20
  int v6; // eax@21
  int result; // eax@22
  char v8; // [sp+Bh] [bp-29h]@19
  __int16 v9; // [sp+Ch] [bp-28h]@19
  char *DstBuf = malloc(100); // [sp+14h] [bp-14h]@2

  v0 = 0;
  v1 = 2;
  v2 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v2 - 108) > v0 && v1 - 2 != driverId )
      v0 = *(_DWORD *)(v2 - 108);
    if ( *(_DWORD *)v2 > v0 && v1 - 1 != driverId )
      v0 = *(_DWORD *)v2;
    if ( *(_DWORD *)(v2 + 108) > v0 && v1 != driverId )
      v0 = *(_DWORD *)(v2 + 108);
    if ( *(_DWORD *)(v2 + 216) > v0 && v1 + 1 != driverId )
      v0 = *(_DWORD *)(v2 + 216);
    if ( *(_DWORD *)(v2 + 324) > v0 && v1 + 2 != driverId )
      v0 = *(_DWORD *)(v2 + 324);
    v1 += 5;
    v2 += 540;
  }
  while ( v1 - 2 < 20 );
  if ( sabotageAvailable_45EFFC == 1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 27648), 96, 96, (int)((char *)screenBuffer + 162248));
    getBlackMarketElementText(3);
    itoa(sabotage_462D4C, DstBuf, 10);
    v9 = 36;
    v3 = strlen(DstBuf) + 1;
    v4 = &v8;
    do
    {
      v5 = *((byte *)v4 + 1);
      v4 = (char *)v4 + 1;
    }
    while ( v5 );
    memcpy(v4, DstBuf, v3);
    v6 = sub_41FAB0((const char *)&v9);
    sub_41A370((const char *)&v9, v6 + 214728);
  }
  result = sabotageAvailable_45EFFC;
  if ( !sabotageAvailable_45EFFC )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 101376), 96, 96, (int)((char *)screenBuffer + 162248));
    if ( isMultiplayerGame || drivers[driverId].points <= v0 )
    {
      result = sub_422930();
    }
    else
    {
      createPopup(144, 114, 384, 119, 1);
      writeTextInScreen(aNoSabotage_NoW, 79530);
      writeTextInScreen((const char *)&unk_4537C0, 89770);
      writeTextInScreen(aWhat_YouCrazyM, 100010);
      writeTextInScreen(aTouchesTheAdve, 110250);
      writeTextInScreen(aMobileAndLives, 120490);
      result = writeTextInScreen((const char *)&unk_453860, 130730);
    }
  }
  if ( sabotageAvailable_45EFFC == -1 )
  {
    drawImageWithPosition2((int)((char *)maret1eBpk + 64512), 96, 96, (int)((char *)screenBuffer + 162248));
    result = sub_4229B0();
  }
  return result;
}


//----- (00423350) --------------------------------------------------------
int sub_423350()
{
  drawImageWithPosition2((int)bases45Bpk, 96, 96, (int)((char *)screenBuffer + 162352));
  createPopup(144, 114, 384, 119, 1);
  writeTextInScreen(aContinue_2, 79530);
  writeTextInScreen((const char *)&unk_454B70, 89770);
  writeTextInScreen(aExitTheUndergr, 100010);
  writeTextInScreen(aEnterTheRaceSi, 110250);
  writeTextInScreen((const char *)&unk_454BE8, 120490);
  writeTextInScreen(aPressEscForP_1, 130730);
  return drawMenuAnimation(432, 269, continueAnimCurrentFrame_4611D0, (int)contaniBpk, (int)continueAnimFramesSize_4611D0);
}
// 4462A8: using guessed type int continueAnimFramesSize_4611D0[];
// 4611D0: using guessed type int continueAnimCurrentFrame_4611D0;

//----- (00423410) --------------------------------------------------------
void underGroundMenuLeft()
{
  if ( undergroundOptionSelected_dword_461278 > 0 )
    loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
  switch ( undergroundOptionSelected_dword_461278 )
  {
    case MINES:
      undergroundOptionSelected_dword_461278 = LOANSHARK;
      drawLoanShark();
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder(10, 115, 108, 114);
      refreshAllScreen();
      break;
    case SPIKES:
      undergroundOptionSelected_dword_461278 = MINES;
      drawBlackMarketElement0();
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder(10, 243, 108, 114);
      refreshAllScreen();
      break;
    case ROCKET:
      undergroundOptionSelected_dword_461278 = SPIKES;
      drawBlackMarketElement1();
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder(114, 243, 108, 114);
      refreshAllScreen();
      break;
    case SABOTAGE:
      undergroundOptionSelected_dword_461278 = ROCKET;
      drawBlackMarketElement2();
      drawBorder2(322, 243, 0x6Cu, 114);
      drawBorder(218, 243, 108, 114);
      refreshAllScreen();
      break;
    case CONTINUE:
      undergroundOptionSelected_dword_461278 = SABOTAGE;
      drawBlackMarketElement3();
      drawBorder2(426, 243, 0x6Cu, 114);
      drawBorder(322, 243, 108, 114);
      refreshAllScreen();
      break;
    default:
      return;
  }
}
// 445198: using guessed type int dword_445198;
// 45DC18: using guessed type int configuration.musicVolume;
// 461278: using guessed type int undergroundOptionSelected_dword_461278;

//----- (00423590) --------------------------------------------------------
void underGroundMenuRight()
{
  if ( undergroundOptionSelected_dword_461278 < 5 )
    loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
  switch ( undergroundOptionSelected_dword_461278 )
  {
    case MINES:
      undergroundOptionSelected_dword_461278 = SPIKES;
      drawBlackMarketElement1();
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder(114, 243, 108, 114);
      refreshAllScreen();
      break;
    case SPIKES:
      undergroundOptionSelected_dword_461278 = ROCKET;
      drawBlackMarketElement2();
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder(218, 243, 108, 114);
      refreshAllScreen();
      break;
    case ROCKET:
      undergroundOptionSelected_dword_461278 = SABOTAGE;
      drawBlackMarketElement3();
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder(322, 243, 108, 114);
      refreshAllScreen();
      break;
    case 4:
      undergroundOptionSelected_dword_461278 = SABOTAGE;
      sub_423350();
      drawBorder2(322, 243, 0x6Cu, 114);
      drawBorder(426, 243, 108, 114);
      refreshAllScreen();
      break;
    default:
      return;
  }
}
// 445198: using guessed type int dword_445198;
// 45DC18: using guessed type int configuration.musicVolume;
// 461278: using guessed type int undergroundOptionSelected_dword_461278;

//----- (004236D0) --------------------------------------------------------
int sub_4236D0()
{
  int result; // eax@3
  signed int v1; // edx@3
  int v2; // ecx@3

  minesAvailable_45EFF0 = 1;
  spikesAvailable_45EFF4 = 1;
  rocketAvailable_45EFF8 = 1;
  if ( isMultiplayerGame )
  {
    minesAvailable_45EFF0 = 1;
    spikesAvailable_45EFF4 = 1;
    rocketAvailable_45EFF8 = 1;
  }
  result = 0;
  v1 = 2;
  v2 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v2 - 108) > result && v1 - 2 != driverId )
      result = *(_DWORD *)(v2 - 108);
    if ( *(_DWORD *)v2 > result && v1 - 1 != driverId )
      result = *(_DWORD *)v2;
    if ( *(_DWORD *)(v2 + 108) > result && v1 != driverId )
      result = *(_DWORD *)(v2 + 108);
    if ( *(_DWORD *)(v2 + 216) > result && v1 + 1 != driverId )
      result = *(_DWORD *)(v2 + 216);
    if ( *(_DWORD *)(v2 + 324) > result && v1 + 2 != driverId )
      result = *(_DWORD *)(v2 + 324);
    v1 += 5;
    v2 += 540;
  }
  while ( v1 - 2 < 20 );
  if ( !isMultiplayerGame && dword_460884[27 * driverId] > result || (sabotageAvailable_45EFFC = 1, isMultiplayerGame) )
    sabotageAvailable_45EFFC = 0;
  return result;
}


//----- (004237A0) --------------------------------------------------------
int drawBlackMarketScreen()
{
  void *v1; // [sp-8h] [bp-10h]@2
  int v2; // [sp+4h] [bp-4h]@2

  memcpy((char *)screenBuffer + 58880, (char *)graphicsGeneral.menubg5Bpk + 58880, 0x2A580u);
  if ( isMultiplayerGame )
  {
    v2 = (int)((char *)screenBuffer + 58880);
    v1 = blacktx2Bpk;
  }
  else
  {
    v2 = (int)((char *)screenBuffer + 58880);
    v1 = blacktx1Bpk;
  }
  drawImageWithPosition((int)v1, 640, 16, v2);
  drawCarRightSide();
  drawImageWithPosition2((int)dealer2bBpk, 96, 96, (int)((char *)screenBuffer + 80016));
  drawImageWithPosition2((int)bases45Bpk, 96, 96, (int)((char *)screenBuffer + 162352));
  drawBlackMarketElement0();
  drawBlackMarketElement1();
  drawBlackMarketElement2();
  drawBlackMarketElement3();
  return sub_423350();
}

//----- (00423A20) --------------------------------------------------------
void __cdecl addParticipantToRace(signed int a1)
{
  signed int v1; // esi@2
  int race; // ebx@3
  signed int v3; // edx@7
  signed int v4; // esi@9
  int v5; // eax@10
  int v6; // eax@10
  signed int v7; // esi@16
  int v8; // eax@17
  int v9; // ecx@19
  int v10; // eax@23
  signed int v11; // esi@28
  int v12; // eax@29
  int v13; // eax@29
  unsigned __int8 v14; // al@34
  int v15; // ebp@34
  char *v16; // edi@35
  char v17; // al@36
  unsigned int v18; // eax@38
  void *v19; // edi@38
  char v20; // cl@39
  char *v21; // edi@40
  char v22; // al@41
  char *v23; // eax@42
  char *v24; // edx@42
  char v25; // cl@43
  unsigned int v26; // eax@44
  void *v27; // edi@44
  char v28; // cl@45
  void *v29; // edi@46
  const void *v30; // esi@46
  int v31; // ecx@46
  int v32; // eax@46
 
  char v34; // [sp+17h] [bp-51h]@35
  char v35; // [sp+18h] [bp-50h]@34
  char* DstBuf; // [sp+4h] [bp-64h]@34
  DstBuf = malloc(0x1000);
  if ( !(rand() % a1) )
  {
    v1 = 0;
    while ( 1 )
    {
      ++v1;
	  race = rand() % 3;
      if (participantsRace[race] <= 3u )
        break;
      if ( v1 >= 50 )
        return;
    }
    if ( v1 < 50 )
    {
      v3 = a1;
      do
      {
        if (race)
        {
          if (race == 1 )
          {
            v7 = 0;
            do
            {
              v3 = rand() % 20;
			  v8 = drivers[driverId].carType;
			  //v8 = dword_46085C[27 * driverId];
              ++v7;
              if ( v8 >= 0 && v8 <= 2 )
              {
                v9 = drivers[v3].carType;
				//v9 = dword_46085C[27 * v3];
                if ( v9 >= 1 && v9 <= 3 )
                  break;
              }
              if ( v8 >= 3 && v8 <= 5 )
              {
                v10 = drivers[v3].carType;
				//v10 = dword_46085C[27 * v3];
                if ( v10 >= 2 && v10 <= 4 )
                  break;
              }
            }
            while ( v7 < 100 );
          }
          else if (race == 2 )
          {
            v11 = 0;
            do
            {
              v12 = rand();
              v3 = v12 % 20;
              ++v11;
              v13 = drivers[(v12 % 20)].carType;
			  //v13 = dword_46085C[27 * (v12 % 20)];
            }
            while ( v13 != 3 && v13 != 4 && v13 != 5 && v11 < 100 );
          }
        }
        else
        {
          v4 = 0;
          do
          {
            v5 = rand();
            v3 = v5 % 20;
            ++v4;
            v6 = drivers[(v5 % 20)].carType;
			//v6 = dword_46085C[27 * (v5 % 20)];
          }
          while ( v6 && v6 != 1 && v6 != 2 && v4 < 100 );
        }
      }
      while ( *((byte *)&dword_45EA80 + v3) == 1 );
      v14 = participantsRace[race];
	  //v14 = *((byte *)&word_461EB4 + race);
	  
      v15 = v3;
	  //v15 = 108 * v3;
      *((byte *)&dword_45EA80 + v3) = 1;
	  
	  racePositions[race][v14] = v3;
	  //*((byte *)&dword_45EB50[race] + v14) = v3;

	 
	 //* ((byte *)&word_461EB4 + race) = v14 + 1;
	  participantsRace[race ] = v14 + 1;
      itoa(drivers[v3].rank, &DstBuf, 10);
	  //itoa(dword_460888[27 * v3], &DstBuf, 10);
      v35 = 0;
      if ( strlen(&DstBuf) < 2 )
      {
        v16 = &v34;
        do
          v17 = (v16++)[1];
        while ( v17 );
        *(_WORD *)v16 = 32;
      }
      v18 = strlen(&DstBuf) + 1;
      v19 = &v34;
      do
      {
        v20 = *((byte *)v19 + 1);
        v19 = (char *)v19 + 1;
      }
      while ( v20 );
      memcpy(v19, &DstBuf, v18);
      /*v21 = &v34;
      do
        v22 = (v21++)[1];
      while ( v22 );*/
      //v23 =drivers[v15].name;
	  //v23 = &byte_460840[v15];
     // *(_WORD *)v21 = 46;
	  v24 = malloc(24);
	  char * buffer=malloc(2);
	  itoa(drivers[v15].rank, buffer, 10);
	  strcpy(v24, buffer);
	  strcat(v24, ".");
	  strcat(v24, drivers[v15].name);
	  //v24 = &byte_460840[v15];
     /* do
        v25 = *v23++;
      while ( v25 );
      v26 = v23 - v24;
      v27 = &v34;
      do
      {
        v28 = *((byte *)v27 + 1);
        v27 = (char *)v27 + 1;
      }
      while ( v28 );
      memcpy(v27, v24, 4 * (v26 >> 2));
      v30 = &v24[4 * (v26 >> 2)];
      v29 = (char *)v27 + 4 * (v26 >> 2);
      v31 = v26 & 3;
	  */
	  //v32 = 9 * *((byte *)&word_461EB4 + race);
	  v32 = 9 * participantsRace[race];
      //memcpy(v29, v30, v31);
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, v24, 160 * (race  + 8 * v32) + 163874);
      refreshAllScreen();
    }
  }
}


//----- (00423C90) --------------------------------------------------------
int __cdecl sub_423C90(int a1, int a2)
{
  int v2; // esi@1
  int v3; // ecx@1
  int v4; // ebp@1
  int v5; // ebx@1
  int *v6; // eax@2
  int v7; // edx@3
  int result; // eax@4
  int v9; // edx@5
  char *v10; // edx@12
  bool v11; // zf@12
  signed int v12; // eax@13
  int v13; // ecx@14
  char *v14; // edx@19
  bool v15; // sf@20
  unsigned __int8 v16; // of@20
  int v17; // [sp+10h] [bp-4h]@1

  while ( 1 )
  {
    v2 = a1;
    v3 = a2;
    v4 = drivers[((a1 + a2) / 2)].points;
    v5 = a1;
    v17 = a2;
    do
    {
      v6 = &drivers[v5].points;
      if (drivers[v5].points < v4 )
      {
        do
        {
          v7 = v6[27];
          v6 += 27;
          ++v5;
        }
        while ( v7 < v4 );
      }
      result = (int)&drivers[v3].points;
      if ( v4 < *(_DWORD *)result )
      {
        do
        {
          v9 = *(_DWORD *)(result - 108);
          result -= 108;
          --v3;
        }
        while ( v4 < v9 );
        v17 = v3;
      }
      if ( v5 > v3 )
        break;
      if ( driverId == v5 )
      {
        driverId = v3;
      }
      else if ( driverId == v3 )
      {
        driverId = v5;
      }
      memcpy(&unk_4611E0, &drivers[v5].name, 0x6Cu);
      v10 = &drivers[v17].name;
      v11 = isMultiplayerGame == 0;
      memcpy(&drivers[v5].name, v10, 0x6Cu);
      memcpy(v10, &unk_4611E0, 0x6Cu);
      if ( !v11 )
      {
        v12 = 0;
        do
        {
          v13 = *((byte *)&dword_45FA74 + v12);
          if ( v13 == v5 )
          {
            *((byte *)&dword_45FA74 + v12) = v17;
          }
          else if ( v13 == v17 )
          {
            *((byte *)&dword_45FA74 + v12) = v5;
          }
          ++v12;
        }
        while ( v12 < 4 );
        memcpy(&unk_4611E0, &dword_4A7A60[84 * v5], 0x54u);
        v14 = &dword_4A7A60[84 * v17];
        memcpy(&dword_4A7A60[84 * v5], v14, 0x54u);
        memcpy(v14, &unk_4611E0, 0x54u);
      }
      v2 = a1;
      ++v5;
      result = v17 - 1;
      v3 = v17 - 1;
      v16 = __OFSUB__(v5, v17 - 1);
      v15 = v5 - (v17-- - 1) < 0;
    }
    while ( v15 ^ v16 );
    if ( v2 < v3 )
      result = sub_423C90(v2, v3);
    if ( v5 >= a2 )
      break;
    a1 = v5;
  }
  return result;
}
// 45EA04: using guessed type int isMultiplayerGame;
// 45FA74: using guessed type int dword_45FA74;
// 460884: using guessed type int dword_460884[];
// 463CE8: using guessed type int driverId;

//----- (00423E20) --------------------------------------------------------
void __cdecl sub_423E20(int a1)
{
	void *v1 = malloc(0x870u); // eax@1
  int v2; // ebx@1
  int v3; // ebp@2
  int v4; // edx@2
  int v5; // ecx@4
  signed int v6; // eax@5
  int v7; // edx@8
  void *v8=malloc(0x870u); // eax@12
  int v9; // edx@13
  void *v10; // ebp@13
  int v11; // eax@13
  const void *v12; // esi@14
  void *v13; // edi@14
  void *v14; // [sp+14h] [bp+4h]@12

  //allocateMemory(0x870u);
  v2 = a1;
  memcpy(v1, drivers, 0x870u);
  if ( a1 > 0 )
  {
    v3 = 0;
	v4 = a1 - 1;
    do
    {
      memcpy(&drivers[v3], &drivers[v4], sizeof(drivers[v3]));
      v4 = v4-1;
	  v3 = v3 + 1;
      --a1;
    }
    while ( a1 );
  }
  free(v1);
  v5 = 0;
  driverId = v2 - driverId - 1;
  if ( v2 > 0 )
  {
    v6 = (signed int)drivers[0].rank;
    do
    {
      if ( *(_DWORD *)(v6 - 4) != *(_DWORD *)(v6 - 112) || v6 <= (signed int)dword_460888 )
        v7 = v5 + 1;
      else
        v7 = *(_DWORD *)(v6 - 108);
      *(_DWORD *)v6 = v7;
      ++v5;
      v6 += 108;
    }
    while ( v5 < v2 );
  }
  //al no haber multiplayer pasamos
  if ( isMultiplayerGame )
  {
    //allocateMemory(0x870u);
    v14 = v8;
    memcpy(v8, byte_460840, 0x870u);
    if ( v2 > 0 )
    {
      v9 = (int)((char *)v8 + 108 * v2 - 108);
      v10 = byte_460840;
      v11 = v2;
      do
      {
        v12 = (const void *)v9;
        v13 = v10;
        v9 -= 108;
        v10 = (char *)v10 + 108;
        --v11;
        memcpy(v13, v12, 0x6Cu);
      }
      while ( v11 );
      v8 = v14;
    }
    free(v8);
    driverId = v2 - driverId - 1;
  }
}
// 45EA04: using guessed type int isMultiplayerGame;
// 460888: using guessed type int dword_460888[];
// 463CE8: using guessed type int driverId;

//----- (00423F40) --------------------------------------------------------
//
int drawSelectRaceScreen()
{
  memcpy((char *)screenBuffer + 234880, (char *)graphicsGeneral.menubg5Bpk + 234880, 0x2800u);
  drawTransparentBlock(0, 371, 639, 109);
  drawBottomMenuText();
  drawImageWithPosition2(trsnap2m1Bpk[byte_46126C[0]], 128, 112, (int)((char *)screenBuffer + 81952));
  drawImageWithPosition2(trsnap2m1Bpk[byte_46126C[1]], 128, 112, (int)((char *)screenBuffer + 82112));
  drawImageWithPosition2(trsnap2m1Bpk[byte_46126C[2]], 128, 112, (int)((char *)screenBuffer + 82272));
  /*drawImageWithPosition2((int)*(&trsnap2m1Bpk + (unsigned __int8)byte_46126D), 128, 112, (int)((char *)screenBuffer + 82112));
  drawImageWithPosition2((int)*(&trsnap2m1Bpk + (unsigned __int8)byte_46126E), 128, 112, (int)((char *)screenBuffer + 82272));*/
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "$750", 143433);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "$3000", 143586);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "$12000", 143743);
  createPopup(22, 256, 148, 105, 1);
  createPopup(182, 256, 148, 105, 1);
  createPopup(342, 256, 148, 105, 1);
  drawImageWithPosition((int)enterx2Bpk, 640, 32, (int)((char *)screenBuffer + 51200));
  return drawCarRightSide();
}


//----- (004240B0) --------------------------------------------------------
int calculateNextRaces()
{
  char *v0; // edi@1
  int v1; // ecx@1
  int v2; // edx@5
  signed int v3; // eax@5
  char v4; // bl@8
  bool v5; // zf@10
  unsigned int v6; // eax@10
  bool v7; // zf@16
  unsigned int v8; // eax@16
  char v9; // al@18
  int result; // eax@23

  v0 = (char *)driverId;
  v1 = driverId - 7;
  if ( driverId - 7 >= 0 )
  {
    if ( v1 > 5 )
      v1 = 5;
  }
  else
  {
    v1 = 0;
  }
  v2 = 0;
  v3 = 0;
  do
  {
    if ( &byte_461F00[v1 - (signed int)byte_461F00] + v3 == v0 )
      ++v2;
    v4 = v2++ + v1;
    byte_461F00[v3++] = v4;
  }
  while ( v3 < 14 );
  dword_45EA80 = 0;
  dword_45EA84 = 0;
  dword_45EA88 = 0;
  dword_45EA8C = 0;
  //dword_45EB50[0] = 0;
  //dword_45EB54 = 0;
  // dword_45EB58 = 0;
  racePositions[0][0] = 0;
  racePositions[0][1] = 0;
  racePositions[0][2] = 0;
  racePositions[0][3] = 0;
  racePositions[1][0] = 0;
  racePositions[1][1] = 0;
  racePositions[1][2] = 0;
  racePositions[1][3] = 0;
  racePositions[2][0] = 0;
  racePositions[2][1] = 0;
  racePositions[2][2] = 0;
  racePositions[2][3] = 0;
  //word_461EB4 = 0;
  //byte_461EB6 = 0;
  participantsRace[0] = 0;
  participantsRace[1] = 0;
  participantsRace[2] = 0;
  //dword_45EB54 = 0;
  dword_45EA90 = 0;
  v0[(_DWORD)&dword_45EA80] = 1;
  
 
  do
  {
    byte_46126C[0] = circuitOrder_45673C[rand() % 5];
    v6 = rand() & 0x80000001;
    v5 = v6 == 0;
    if ( (v6 & 0x80000000) != 0 )
      v5 = (((byte)v6 - 1) | 0xFFFFFFFE) == -1;
    if ( v5 )
      byte_46126C[0] += 9;
  }  
  while (dword_456780 == (unsigned __int8)byte_46126C[0]);
  dword_456780 = (unsigned __int8)byte_46126C[0];
  do
  {
    byte_46126C[1] = circuitOrder_45673C[rand() % 6];
	//byte_46126C[1] = byte_45673E[rand() % 6];
	//byte_46126D = byte_45673E[rand() % 6];
    v8 = rand() & 0x80000001;
    v7 = v8 == 0;
    if ( (v8 & 0x80000000) != 0 )
      v7 = (((byte)v8 - 1) | 0xFFFFFFFE) == -1;
    v9 = byte_46126C[1];
	//v9 = byte_46126D;
    if ( v7 )
    {
      v9 = byte_46126C[1] + 9;
	  byte_46126C[1] += 9;
	  /*v9 = byte_46126D + 9;
	  byte_46126D += 9;*/
    }
  }
  while (dword_456784 == (unsigned __int8)v9 || byte_46126C[0] == v9);
  dword_456784 = (unsigned __int8)v9;
  do
  {
    byte_46126C[2] = circuitOrder_45673C[rand() % 4];
	//byte_46126E = byte_456741[rand() % 4];
    result = rand() % 2;
    v5 = result == 0;
    LOBYTE(result) = byte_46126C[2];
	//LOBYTE(result) = byte_46126E;
    if ( v5 )
    {
      LOBYTE(result) = byte_46126C[2] + 9;
	  byte_46126C[2] += 9;
	  //LOBYTE(result) = byte_46126E + 9;
	  //byte_46126E += 9;
    }
  }
  //while ( dword_456788 == (unsigned __int8)result || byte_46126D == (byte)result );
  while (dword_456788 == (unsigned __int8)result || byte_46126C[1] == (byte)result);
  dword_456788 = (unsigned __int8)result;

  //TODO esto es para que salgan fijas

  /*byte_46126C[0] = 0;
  byte_46126C[1] = 1;
  byte_46126C[2] = 2;*/
  return result;
}


//----- (00424240) --------------------------------------------------------
int __cdecl sub_424240(int a1, float a2, float a3, float a4)
{
  signed int v4; // edi@1
  int v5; // esi@1
  float v6; // ST2C_4@2
  float v7; // ST30_4@2
  float v8; // ST34_4@2
  float v9; // ST28_4@2
  signed int v10; // edi@3
  int v11; // esi@3
  float v12; // ST2C_4@4
  float v13; // ST30_4@4
  float v14; // ST34_4@4
  float v15; // ST28_4@4
  int result; // eax@4
  signed int v17; // [sp+4h] [bp-28h]@1
  signed int v18; // [sp+4h] [bp-28h]@3
  double v19; // [sp+14h] [bp-18h]@1
  double v20; // [sp+1Ch] [bp-10h]@1
  double v21; // [sp+24h] [bp-8h]@1

  v4 = 0;
  v19 = 0.1 * a2;
  v17 = 0;
  
  v5 = ((12 * a1) / 4)-1;
  //v5 = 12 * a1 + 4586564; //45FC44
  int index = 0;
  v20 = 0.1 * a3;
  v21 = 0.1 * a4;
  do
  {
    v9 = (double)v17;
    v6 = (a2 - v19) * 0.125;
    palette1[v5] = sub_43B290((unsigned int)(unsigned __int64)(v9 * v6 + v19) << 16, 6553600);
    v7 = (a3 - v20) * 0.125;
	palette1[v5+1] = sub_43B290((unsigned int)(unsigned __int64)(v9 * v7 + v20) << 16, 6553600);
    v8 = (a4 - v21) * 0.125;
	palette1[v5+2] = sub_43B290((unsigned int)(unsigned __int64)(v9 * v8 + v21) << 16, 6553600);
    v5 += 3;
    ++v4;
    v17 = v4;
	
  }
  while ( v4 < 8 );
 /* do
  {
	  v9 = (double)v17;
	  v6 = (a2 - v19) * 0.125;
	  *(_DWORD *)(v5 - 4) = sub_43B290((unsigned int)(unsigned __int64)(v9 * v6 + v19) << 16, 6553600);
	  v7 = (a3 - v20) * 0.125;
	  *(_DWORD *)v5 = sub_43B290((unsigned int)(unsigned __int64)(v9 * v7 + v20) << 16, 6553600);
	  v8 = (a4 - v21) * 0.125;
	  *(_DWORD *)(v5 + 4) = sub_43B290((unsigned int)(unsigned __int64)(v9 * v8 + v21) << 16, 6553600);
	  v5 += 12;
	  ++v4;
	  v17 = v4;
  } while (v4 < 8);*/
  v10 = 0;
  v18 = 0;
  v11 = (12 * (a1+8) / 4)-1;
  //v11 = 12 * (a1 + 8) + 4586564;//45FC44
  do
  {
    v15 = (double)v18;
    v12 = (63.0 - a2) * 0.125;
   palette1[v11] = sub_43B290((unsigned int)(unsigned __int64)(v15 * v12 + a2) << 16, 6553600);
    v13 = (63.0 - a3) * 0.125;
	palette1[v11+1] = sub_43B290((unsigned int)(unsigned __int64)(v15 * v13 + a3) << 16, 6553600);
    v14 = (63.0 - a4) * 0.125;
    result = sub_43B290((unsigned int)(unsigned __int64)(v15 * v14 + a4) << 16, 6553600);
	palette1[v11+2] = result;
    v11 += 3;
    ++v10;
    v18 = v10;
  }
  while ( v10 < 8 );
  /*do
  {
    v15 = (double)v18;
    v12 = (63.0 - a2) * 0.125;
    *(_DWORD *)(v11 - 4) = sub_43B290((unsigned int)(unsigned __int64)(v15 * v12 + a2) << 16, 6553600);
    v13 = (63.0 - a3) * 0.125;
    *(_DWORD *)v11 = sub_43B290((unsigned int)(unsigned __int64)(v15 * v13 + a3) << 16, 6553600);
    v14 = (63.0 - a4) * 0.125;
    result = sub_43B290((unsigned int)(unsigned __int64)(v15 * v14 + a4) << 16, 6553600);
    *(_DWORD *)(v11 + 4) = result;
    v11 += 12;
    ++v10;
    v18 = v10;
  }
  while ( v10 < 8 );*/
  return result;
}

//----- (00424420) --------------------------------------------------------
int sub_424420()
{
  signed int v0; // ecx@1
  int v1; // eax@3
  int v2; // edi@3
  int v3; // ebp@3
  int result; // eax@3
  int v5; // esi@6
  int v6; // ebx@6
  char *DstBuf=malloc(100); // [sp+0h] [bp-Ch]@6
  int v8; // [sp+4h] [bp-8h]@1
  int v9; // [sp+8h] [bp-4h]@3

  v0 = 4;
  v8 = 4;
  if ( isMultiplayerGame )
  {
    v8 = dword_456758;
    v0 = dword_456758;
  }
  v1 = (350 - 79 * v0) / (v0 + 1);
  v2 = 0;
  v3 = v1 + 108;
  result = v1 + 79;
  v9 = result;
  if ( v0 > 0 )
  {
    while ( 1 )
    {
      v5 = 640 * (v3 + v2 * result);
      drawImageWithPosition((int)graphicsGeneral.placingBpk, 202, 74, (int)((char *)screenBuffer + v5 + 389));
      v6 = v2 + 1;
      itoa(v2 + 1, DstBuf, 10);
      if ( v2 )
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, DstBuf, v5 + 4876);
      else
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, DstBuf, 640 * v3 + 4881);
      result = v8;
      ++v2;
      if ( v6 >= v8 )
        break;
      result = v9;
    }
  }
  return result;
}
// 45EA04: using guessed type int isMultiplayerGame;

//----- (00424510) --------------------------------------------------------
int __cdecl sub_424510(int a1, int a2, int raceId)
{
  int v3; // ebx@1
  int v4; // edi@1
  
  int result; // eax@2
  int v7; // esi@2
  int v8; // ecx@2
  int v9; // edx@4
  int v10; // edx@6
  char v11; // dl@8

  v3 = a2;
  v4 = a1;
  
  //v5 = 4 * a3 + 4582224;
  while ( 1 )
  {
    result = drivers[racePositions[raceId][(v4 + v3) / 2]].carType;
	//result = dword_46085C[27 * *((byte *)&dword_45EB50[a3] + (v4 + v3) / 2)];
    v7 = v4;
    v8 = v3;
    do
    {
      if (drivers[racePositions[raceId][v7]].carType < result )
		  ///if (dword_46085C[27 * *(byte *)(v7 + v5)] < result)
      {
        do
          v9 = racePositions[raceId][v7++ + 1];
		//v9 = *(byte *)(v7++ + v5 + 1);
        while (drivers[v9].carType < result );
		//while (dword_46085C[27 * v9] < result);
      }
      if ( result < drivers[racePositions[raceId][v8]].carType )
		  //if (result < dword_46085C[27 * *(byte *)(v8 + v5)])
      {
        do
          v10 = racePositions[raceId][v8-- - 1];
		//v10 = *(byte *)(v8-- + v5 - 1);
        while ( result < drivers[v10].carType );
		//while (result < dword_46085C[27 * v10]);
      }
      if ( v7 > v8 )
        break;
      v11 = racePositions[raceId][v7];
	  racePositions[raceId][v7] = racePositions[raceId][v8];
	 // v11 = *(byte *)(v7 + v5);
	 // *(byte *)(v7 + v5) = *(byte *)(v8 + v5);
      v3 = a2;
      ++v7;
	  racePositions[raceId][v8--] = v11;
	  //*(byte *)(v8-- + v5) = v11;
    }
    while ( v7 < v8 );
    if ( v4 < v8 )
      result = sub_424510(v4, v8, raceId);
    if ( v7 >= v3 )
      break;
    v4 = v7;
  }
  return result;
}
// 45EB50: using guessed type int dword_45EB50[];
// 46085C: using guessed type int dword_46085C[];

//----- (004245D0) --------------------------------------------------------
unsigned int drawStadistics()
{
  unsigned int v0; // eax@2
  char *v1; // edi@2
  char v2; // cl@3
  char *v3; // edi@4
  char v4; // al@5
  int v5; // ST24_4@6
  char *v6; // edi@8
  char v7; // al@9
  int v8; // ecx@10
  unsigned int v9; // eax@10
  char *v10; // edi@10
  char v11; // cl@11
  int v12; // edx@12
  unsigned int v13; // eax@12
  char *v14; // edi@12
  char v15; // cl@13
  int v16; // edx@14
  unsigned int v17; // eax@14
  char *v18; // edi@14
  char v19; // cl@15
  bool v20; // zf@16
  char *v21; // edi@17
  char v22; // al@18
  int v23; // ST28_4@19
  unsigned int v24; // eax@19
  char *v25; // edi@19
  char v26; // cl@20
  unsigned int v27; // eax@22
  char *v28; // edi@22
  char v29; // cl@23
  unsigned int v30; // eax@24
  char *v31; // edi@24
  char v32; // cl@25
  int v33; // edx@26
  unsigned int result; // eax@26
  int v35; // esi@27
  int v36; // edx@27
  char *v37; // eax@27
  signed int v38; // ecx@27
  char v39; // dl@28
  int v40; // ecx@30
  char *v41; // eax@30
  signed int v42; // edx@30
  char v43; // cl@31
  char *v44; // edi@32
  char v45; // al@33
  unsigned int v46; // eax@34
  char *v47; // edi@34
  char v48; // cl@35
  char *v49; // edi@36
  char v50; // al@37
  char *v51; // edi@39
  char v52; // al@40
  unsigned int v53; // eax@41
  char *v54; // edi@41
  char v55; // cl@42
  unsigned int v56; // eax@43
  char *v57; // edi@43
  char v58; // cl@44
  unsigned int v59; // eax@45
  char *v60; // edi@45
  char v61; // cl@46
  int v62; // edx@47
  unsigned int v63; // eax@47
  char *v64; // edi@47
  char v65; // cl@48
  int v66; // edx@49
  unsigned int v67; // eax@49
  char *v68; // edi@49
  char v69; // cl@50
  int v70; // ST24_4@51
  int v71; // eax@57
  char v72; // cl@58
  char *v73; // edi@59
  char v74; // al@60
  unsigned int v75; // eax@61
  void *v76; // edi@61
  char v77; // cl@62
  char *v78; // edi@63
  char v79; // al@64
  unsigned int v80; // eax@65
  void *v81; // edi@65
  char v82; // cl@66
  unsigned int v83; // eax@67
  char *v84; // edi@67
  char v85; // cl@68
  int v86; // edx@69
  int v87; // eax@69
  char *v88; // edx@69
  int v89; // ecx@69
  int v90; // edi@69
  int v91; // esi@69
  char *v92; // ecx@71
  int v93; // eax@71
  char *v94; // esi@71
  char *v95; // edx@71
  char v96; // al@72
  int v97; // ebx@73
  int v98; // ecx@73
  int v99; // ecx@74
  char *v100; // ecx@76
  int v101; // eax@76
  char *v102; // esi@76
  char *v103; // edx@76
  char v104; // bl@76
  char v105; // al@77
  int v106; // edx@78
  int v107; // ecx@78
  int v108; // eax@78
  char *v109; // edi@80
  char v110; // al@81
  char *v111; // edi@84
  char v112; // al@85
  char *v113; // edi@88
  char v114; // al@89
  char *v115; // eax@94
  char v116; // cl@95
  char *v117; // eax@98
  char v118; // cl@99
  char *v119; // eax@102
  char v120; // cl@103
  int v121; // eax@106
  char v122; // cl@107
  char *v123; // edi@108
  char v124; // al@109
  char *v125; // eax@110
  char v126; // cl@111
  unsigned int v127; // eax@112
  void *v128; // edi@112
  char v129; // cl@113
  char *v130; // edi@114
  char v131; // al@115
  char *v132; // eax@116
  char v133; // cl@117
  unsigned int v134; // eax@118
  void *v135; // edi@118
  char v136; // cl@119
  char *v137; // eax@120
  char v138; // cl@121
  unsigned int v139; // eax@122
  char *v140; // edi@122
  char v141; // cl@123
  int v142; // ST24_4@124
  char *v143; // eax@124
  char v144; // dl@125
  char *v145; // eax@128
  char v146; // cl@129
  char *v147; // eax@132
  char v148; // cl@133
  int v149; // eax@136
  char v150; // cl@137
  char *v151; // edi@138
  char v152; // al@139
  char *v153; // eax@140
  char v154; // cl@141
  unsigned int v155; // eax@142
  void *v156; // edi@142
  char v157; // cl@143
  char *v158; // edi@144
  char v159; // al@145
  char *v160; // eax@146
  char v161; // cl@147
  unsigned int v162; // eax@148
  void *v163; // edi@148
  char v164; // cl@149
  char *v165; // eax@150
  char v166; // dl@151
  unsigned int v167; // eax@152
  char *v168; // edi@152
  char v169; // cl@153
  int v170; // ST24_4@154
  char v171; // [sp+Fh] [bp-A1h]@8
  char DstBuf[20]; // [sp+10h] [bp-A0h]@2
  int v173; // [sp+24h] [bp-8Ch]@2
  int v174; // [sp+28h] [bp-88h]@2
  int v175; // [sp+2Ch] [bp-84h]@2
  int v176; // [sp+30h] [bp-80h]@2
  __int16 v177; // [sp+34h] [bp-7Ch]@47
  char v178; // [sp+74h] [bp-3Ch]@51
  char v179; // [sp+75h] [bp-3Bh]@54
  char v180; // [sp+76h] [bp-3Ah]@54
  char v181; // [sp+88h] [bp-28h]@51
  char v182; // [sp+89h] [bp-27h]@56
  char v183; // [sp+8Ah] [bp-26h]@56
  char v184; // [sp+9Ch] [bp-14h]@51
  char v185; // [sp+9Dh] [bp-13h]@52
  char v186; // [sp+9Eh] [bp-12h]@52

  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
  drawImageWithPosition((int)graphicsGeneral.rank1cBpk, 54, 386, (int)((char *)screenBuffer + 54060));
  drawImageWithPosition((int)graphicsGeneral.resupok1Bpk, 272, 386, (int)((char *)screenBuffer + 54114));
  if ( isMultiplayerGame )
  {
    drawImageWithPosition((int)graphicsGeneral.resupok1Bpk, 272, 386, (int)((char *)screenBuffer + 53770));
    v175 = 1919251558;
    v173 = 1952543827;
    v174 = 1629516661;
    LOWORD(v176) = 32;
    itoa(dword_460890[27 * driverId], DstBuf, 10);
    v0 = strlen(DstBuf) + 1;
    v1 = &DstBuf[19];
    do
      v2 = (v1++)[1];
    while ( v2 );
    memcpy(v1, DstBuf, v0);
    v3 = &DstBuf[19];
    do
      v4 = (v3++)[1];
    while ( v4 );
    *(_DWORD *)v3 = 1667330592;
    *((_DWORD *)v3 + 1) = 695412837;
    v5 = (int)graphicsGeneral.fsma3aBpk;
    v3[8] = 0;
    drawTextWithFont(v5, (int)&byte_4458B0, (const char *)&v173, 289326);
    if ( isMultiplayerGame )
      drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Multiplayer Ranking", 55096);
  }
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Your Statistics:", 55456);
  
  /*v6 = &v171;
  do
    v7 = (v6++)[1];
  while ( v7 );
  */
  
  v8 = (int)graphicsGeneral.fsma3aBpk;
  /**(_WORD *)v6 = 46;
  LOBYTE(v175) = 0;*/
  drawTextWithFont(v8, (int)&byte_4458B0, "Position", 73960);
  char *tmp = malloc(15);
  memset(DstBuf, 0, 20);
  memset(tmp, 0, 15);

  strcat(DstBuf, ":  ");
  itoa(drivers[driverId].rank, tmp, 10);
  strcat(DstBuf, tmp);
  strcat(DstBuf, ".");

  /*BYTE2(v173) = 0;
  LOWORD(v173) = 8250;
  v9 = strlen(DstBuf) + 1;
  v10 = &DstBuf[19];
  do
    v11 = (v10++)[1];
  while ( v11 );
  
  memcpy(v10, DstBuf, v9);*/
  v12 = (int)graphicsGeneral.fsma3aBpk;
  drawTextWithFont(v12, (int)&byte_4458B0, DstBuf, 74126);

  memset(DstBuf, 0, 20);
  memset(tmp, 0, 15);
  strcpy(DstBuf, ":  ");
  
  itoa(drivers[driverId].racesWon, tmp, 10);
  strcat(DstBuf, tmp);
  
  
  //LOWORD(v175) = 110;
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Races won", 88680);
  /*BYTE2(v173) = 0;
  LOWORD(v173) = 8250;
  v13 = strlen(DstBuf) + 1;
  v14 = &DstBuf[19];
  do
    v15 = (v14++)[1];
  while ( v15 );
  
  memcpy(v14, DstBuf, v13);*/
  v16 = (int)graphicsGeneral.fsma3aBpk;
  drawTextWithFont(v16, (int)&byte_4458B0, DstBuf, 88846);

  memset(DstBuf, 0, 20);
  memset(tmp, 0, 15);
  strcpy(DstBuf, ":  ");
  
  itoa(drivers[driverId].totalRaces, tmp, 10);
  strcat(DstBuf, tmp);

 
  
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Total races", 103400);
  /*BYTE2(v173) = 0;
  LOWORD(v173) = 8250;
  v17 = strlen(DstBuf) + 1;
  v18 = &DstBuf[19];
  do
    v19 = (v18++)[1];
  while ( v19 );
  memcpy(v18, DstBuf, 4 * (v17 >> 2));
  v20 = isMultiplayerGame == 0;
  memcpy(&v18[4 * (v17 >> 2)], &DstBuf[4 * (v17 >> 2)], v17 & 3);
  if ( !v20 )
  {
    v21 = &DstBuf[19];
    do
      v22 = (v21++)[1];
    while ( v22 );
    v23 = dword_456BC8;
    *(_DWORD *)v21 = 2109216;
    itoa(v23, DstBuf, 10);
    v24 = strlen(DstBuf) + 1;
    v25 = &DstBuf[19];
    do
      v26 = (v25++)[1];
    while ( v26 );
    memcpy(v25, DstBuf, v24);
  }*/
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, DstBuf, 103566);
  memset(DstBuf, 0, 20);
  memset(tmp, 0, 15);
  strcpy(DstBuf, ":  $");
 
  itoa(drivers[driverId].totalIncome, tmp, 10);
  strcat(DstBuf, tmp);

  //v175 = 1701670755;
  //v173 = 1635020628;
  //LOBYTE(v176) = 0;
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Total income", 118120);
 /* v173 = 2367546;
  v27 = strlen(DstBuf) + 1;
  v28 = &DstBuf[19];
  do
    v29 = (v28++)[1];
  while ( v29 );
  memcpy(v28, DstBuf, v27);*/
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, DstBuf, 118286);
  memset(DstBuf, 0, 20);
  memset(tmp, 0, 15);
  strcpy(DstBuf, ":  $");
  
  itoa(drivers[driverId].money, tmp, 10);
  strcat(DstBuf, tmp);
  
  //v174 = 1869422700;
  //v175 = 7955822;
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Total money", 132840);
/*  v173 = 2367546;
  v30 = strlen(DstBuf) + 1;
  v31 = &DstBuf[19];
  do
    v32 = (v31++)[1];
  while ( v32 );*/
  v33 = (int)graphicsGeneral.fsma3aBpk;
 // memcpy(v31, DstBuf, v30);
  drawTextWithFont(v33, (int)&byte_4458B0, DstBuf, 133006);
  result = dword_456BD8;
  if ( dword_456BD8 <= 0 )
  {
    dword_456BD8 = 0;
  }
  else
  {
    v35 = selectedRace_462CE8;
    v36 = (unsigned __int8)byte_46126C[selectedRace_462CE8];
    v37 = &aSuburbia[15 * v36];
    v38 = (char *)&v173 - 15 * v36 - aSuburbia;
    do
    {
      v39 = *v37;
      v37[v38] = *v37;
      ++v37;
    }
    while ( v39 );
    if ( isMultiplayerGame )
    {
      v40 = (unsigned __int8)byte_45FC0F[dword_456BCC];
      v41 = &aSuburbia[15 * v40];
      v42 = (char *)&v173 - 15 * v40 - aSuburbia;
      do
      {
        v43 = *v41;
        v41[v42] = *v41;
        ++v41;
      }
      while ( v43 );
      itoa(dword_456758, DstBuf, 10);
      v44 = &DstBuf[19];
      do
        v45 = (v44++)[1];
      while ( v45 );
      *(_WORD *)v44 = 32;
      v46 = strlen(DstBuf) + 1;
      v47 = &DstBuf[19];
      do
        v48 = (v47++)[1];
      while ( v48 );
      memcpy(v47, DstBuf, v46);
      v49 = &DstBuf[19];
      do
        v50 = (v49++)[1];
      while ( v50 );
      *(_DWORD *)v49 = 1634496557;
      *((_DWORD *)v49 + 1) = 544367993;
      *((_DWORD *)v49 + 2) = 1701011826;
      *((_WORD *)v49 + 6) = 58;
    }
    else if ( v35 )
    {
      switch ( v35 )
      {
        case 1:
          v111 = &DstBuf[19];
          do
            v112 = (v111++)[1];
          while ( v112 );
          *(_DWORD *)v111 = 1684368672;
          *((_DWORD *)v111 + 1) = 544044393;
          *((_DWORD *)v111 + 2) = 1701011826;
          *((_WORD *)v111 + 6) = 58;
          break;
        case 2:
          v113 = &DstBuf[19];
          do
            v114 = (v113++)[1];
          while ( v114 );
          *(_DWORD *)v113 = 1918986272;
          *((_DWORD *)v113 + 1) = 1634869348;
          *((_DWORD *)v113 + 2) = 3827043;
          break;
        case 3:
          v173 = 543516756;
          v174 = 1852142145;
          LOWORD(v175) = 14945;
          BYTE2(v175) = 0;
          break;
      }
    }
    else
    {
      v109 = &DstBuf[19];
      do
        v110 = (v109++)[1];
      while ( v110 );
      *(_DWORD *)v109 = 1935762720;
      *((_DWORD *)v109 + 1) = 1634869369;
      *((_DWORD *)v109 + 2) = 3827043;
    }
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 158440);
    itoa(dword_456BD8, DstBuf, 10);
    v51 = &v171;
    do
      v52 = (v51++)[1];
    while ( v52 );
    *(_WORD *)v51 = 46;
    v173 = 1667329104;
    v174 = 6778473;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 173160);
    LOWORD(v173) = 8250;
    BYTE2(v173) = 0;
    v53 = strlen(DstBuf) + 1;
    v54 = &DstBuf[19];
    do
      v55 = (v54++)[1];
    while ( v55 );
    memcpy(v54, DstBuf, v53);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 173326);
    itoa(dword_456BDC, DstBuf, 10);
    v173 = 1701011794;
    v174 = 1668180256;
    v175 = 6647151;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 187880);
    v173 = 2367546;
    v56 = strlen(DstBuf) + 1;
    v57 = &DstBuf[19];
    do
      v58 = (v57++)[1];
    while ( v58 );
    memcpy(v57, DstBuf, v56);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 188046);
    itoa(dword_456BE0, DstBuf, 10);
    v174 = 1852383347;
    v175 = 1701670755;
    v173 = 1970171714;
    LOBYTE(v176) = 0;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 202600);
    v173 = 2367546;
    v59 = strlen(DstBuf) + 1;
    v60 = &DstBuf[19];
    do
      v61 = (v60++)[1];
    while ( v61 );
    v62 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(v60, DstBuf, v59);
    drawTextWithFont(v62, (int)&byte_4458B0, (const char *)&v173, 202766);
    itoa(dword_456BDC + dword_456BE0, DstBuf, 10);
    v173 = 1635020628;
    v175 = 1763730787;
    v176 = 1836016494;
    v174 = 1634869356;
    v177 = 101;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 217320);
    v173 = 2367546;
    v63 = strlen(DstBuf) + 1;
    v64 = &DstBuf[19];
    do
      v65 = (v64++)[1];
    while ( v65 );
    v66 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(v64, DstBuf, v63);
    drawTextWithFont(v66, (int)&byte_4458B0, (const char *)&v173, 217486);
    itoa(numberOfLaps, DstBuf, 10);
    v173 = 1651340622;
    v175 = 1634476134;
    LOWORD(v176) = 29552;
    v174 = 1864397413;
    BYTE2(v176) = 0;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 232040);
    LOWORD(v173) = 8250;
    BYTE2(v173) = 0;
    v67 = strlen(DstBuf) + 1;
    v68 = &DstBuf[19];
    do
      v69 = (v68++)[1];
    while ( v69 );
    memcpy(v68, DstBuf, 4 * (v67 >> 2));
    v70 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(&v68[4 * (v67 >> 2)], &DstBuf[4 * (v67 >> 2)], v67 & 3);
    drawTextWithFont(v70, (int)&byte_4458B0, (const char *)&v173, 232206);
    itoa(dword_45EEC0, &v184, 10);
    itoa(dword_45EEBC, &v178, 10);
    itoa(dword_462D74, &v181, 10);
    if ( strlen(&v184) == 1 )
    {
      v185 = v184;
      v184 = 48;
      v186 = 0;
    }
    if ( strlen(&v178) == 1 )
    {
      v179 = v178;
      v178 = 48;
      v180 = 0;
    }
    if ( strlen(&v181) == 1 )
    {
      v182 = v181;
      v181 = 48;
      v183 = 0;
    }
    v71 = 0;
    do
    {
      v72 = *(&v184 + v71);
      DstBuf[v71++] = v72;
    }
    while ( v72 );
    v73 = &v171;
    do
      v74 = (v73++)[1];
    while ( v74 );
    *(_WORD *)v73 = 58;
    v75 = strlen(&v178) + 1;
    v76 = &v171;
    do
    {
      v77 = *((byte *)v76 + 1);
      v76 = (char *)v76 + 1;
    }
    while ( v77 );
    memcpy(v76, &v178, v75);
    v78 = &v171;
    do
      v79 = (v78++)[1];
    while ( v79 );
    *(_WORD *)v78 = 46;
    v80 = strlen(&v181) + 1;
    v81 = &v171;
    do
    {
      v82 = *((byte *)v81 + 1);
      v81 = (char *)v81 + 1;
    }
    while ( v82 );
    memcpy(v81, &v181, v80);
    v173 = 1701011794;
    v174 = 1835627552;
    LOWORD(v175) = 101;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 246760);
    BYTE2(v173) = 0;
    LOWORD(v173) = 8250;
    v83 = strlen(DstBuf) + 1;
    v84 = &DstBuf[19];
    do
      v85 = (v84++)[1];
    while ( v85 );
    v86 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(v84, DstBuf, v83);
    drawTextWithFont(v86, (int)&byte_4458B0, (const char *)&v173, 246926);
    v87 = 27 * driverId;
    v88 = &byte_46126C[selectedRace_462CE8];
    v89 = 24 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * drivers[driverId].carType);
    v90 = dword_45EB48;
    v91 = dword_463CAC;
    if ( dword_461FEC + 100 * (dword_45EB48 + 60 * dword_463CAC) < *(int *)((char *)&dword_45F054 + v89)
                                                                 + 100
                                                                 * (*(int *)((char *)&dword_45F050 + v89)
                                                                  + 60 * *(int *)((char *)&dword_45F04C + v89))
      && dword_463CAC + dword_45EB48 + dword_461FEC )
    {
      v92 = &byte_460840[v87 * 4];
      v93 = (unsigned __int8)*v88 + 18 * drivers[driverId].carType;
      v94 = (char *)(24 * v93 + 4583488);
      //TODO FIX configuration.circuitRecords v95 = &configuration.byte_45F040[24 * v93 - (_DWORD)v92];
      do
      {
        v96 = *v92;
        v95[(_DWORD)v92] = *v92;
        ++v92;
      }
      while ( v96 );
      strupr(v94);
      v87 = 27 * driverId;
      v90 = dword_45EB48;
      v97 = dword_461FEC;
      v88 = &byte_46126C[selectedRace_462CE8];
      v91 = dword_463CAC;
      v98 = 24 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * drivers[driverId].carType);
      *(int *)((char *)&dword_45F04C + v98) = dword_463CAC;
      *(int *)((char *)&dword_45F050 + v98) = v90;
      *(int *)((char *)&dword_45F054 + v98) = v97;
    }
    v99 = 24 * ((unsigned __int8)*v88 + 18 * drivers[driverId].carType);
    if ( *(int *)((char *)&dword_45F04C + v99)
       + *(int *)((char *)&dword_45F050 + v99)
       + *(int *)((char *)&dword_45F054 + v99)
      || dword_461FEC + 100 * (v90 + 60 * v91) <= 0 )
    {
      v104 = 0;
    }
    else
    {
      v100 = &byte_460840[v87 * 4];
      v101 = (unsigned __int8)*v88 + 18 * drivers[driverId].carType;
      v102 = (char *)(24 * v101 + 4583488);
      //TODO FIX configuration.circuitRecords v103 = &configuration.byte_45F040[24 * v101 - (_DWORD)v100];
      v104 = 0;
      do
      {
        v105 = *v100;
        v103[(_DWORD)v100] = *v100;
        ++v100;
      }
      while ( v105 );
      strupr(v102);
      v91 = dword_463CAC;
      v106 = dword_461FEC;
      v107 = dword_45EB48;
      v108 = 24 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * drivers[driverId].carType);
      *(int *)((char *)&dword_45F04C + v108) = dword_463CAC;
      *(int *)((char *)&dword_45F050 + v108) = v107;
      *(int *)((char *)&dword_45F054 + v108) = v106;
    }
    itoa(v91, &v184, 10);
    itoa(dword_45EB48, &v178, 10);
    itoa(dword_461FEC, &v181, 10);
    v115 = &v184;
    do
      v116 = *v115++;
    while ( v116 != v104 );
    if ( v115 - &v185 == 1 )
    {
      v185 = v184;
      v184 = 48;
      v186 = v104;
    }
    v117 = &v178;
    do
      v118 = *v117++;
    while ( v118 != v104 );
    if ( v117 - &v179 == 1 )
    {
      v179 = v178;
      v178 = 48;
      v180 = v104;
    }
    v119 = &v181;
    do
      v120 = *v119++;
    while ( v120 != v104 );
    if ( v119 - &v182 == 1 )
    {
      v182 = v181;
      v181 = 48;
      v183 = v104;
    }
    v121 = 0;
    do
    {
      v122 = *(&v184 + v121);
      DstBuf[v121++] = v122;
    }
    while ( v122 != v104 );
    v123 = &v171;
    do
      v124 = (v123++)[1];
    while ( v124 != v104 );
    v125 = &v178;
    *(_WORD *)v123 = 58;
    do
      v126 = *v125++;
    while ( v126 != v104 );
    v127 = v125 - &v178;
    v128 = &v171;
    do
    {
      v129 = *((byte *)v128 + 1);
      v128 = (char *)v128 + 1;
    }
    while ( v129 != v104 );
    memcpy(v128, &v178, v127);
    v130 = &v171;
    do
      v131 = (v130++)[1];
    while ( v131 != v104 );
    *(_WORD *)v130 = 46;
    v132 = &v181;
    do
      v133 = *v132++;
    while ( v133 != v104 );
    v134 = v132 - &v181;
    v135 = &v171;
    do
    {
      v136 = *((byte *)v135 + 1);
      v135 = (char *)v135 + 1;
    }
    while ( v136 != v104 );
    memcpy(v135, &v181, v134);
    v173 = 1953719618;
    v174 = 1885432864;
    LOBYTE(v175) = 0;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 261480);
    LOWORD(v173) = 8250;
    v137 = DstBuf;
    BYTE2(v173) = 0;
    do
      v138 = *v137++;
    while ( v138 != v104 );
    v139 = v137 - DstBuf;
    v140 = &DstBuf[19];
    do
      v141 = (v140++)[1];
    while ( v141 != v104 );
    memcpy(v140, DstBuf, 4 * (v139 >> 2));
    v142 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(&v140[4 * (v139 >> 2)], &DstBuf[4 * (v139 >> 2)], v139 & 3);
    drawTextWithFont(v142, (int)&byte_4458B0, (const char *)&v173, 261646);
    itoa(
      *(&dword_45F04C + 6 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * dword_46085C[27 * driverId])),
      &v184,
      10);
    itoa(
      *(&dword_45F050 + 6 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * dword_46085C[27 * driverId])),
      &v178,
      10);
    itoa(
      *(&dword_45F054 + 6 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * dword_46085C[27 * driverId])),
      &v181,
      10);
    v143 = &v184;
    do
      v144 = *v143++;
    while ( v144 != v104 );
    if ( v143 - &v185 == 1 )
    {
      v185 = v184;
      v184 = 48;
      v186 = v104;
    }
    v145 = &v178;
    do
      v146 = *v145++;
    while ( v146 != v104 );
    if ( v145 - &v179 == 1 )
    {
      v179 = v178;
      v178 = 48;
      v180 = v104;
    }
    v147 = &v181;
    do
      v148 = *v147++;
    while ( v148 != v104 );
    if ( v147 - &v182 == 1 )
    {
      v182 = v181;
      v181 = 48;
      v183 = v104;
    }
    v149 = 0;
    do
    {
      v150 = *(&v184 + v149);
      DstBuf[v149++] = v150;
    }
    while ( v150 != v104 );
    v151 = &v171;
    do
      v152 = (v151++)[1];
    while ( v152 != v104 );
    v153 = &v178;
    *(_WORD *)v151 = 58;
    do
      v154 = *v153++;
    while ( v154 != v104 );
    v155 = v153 - &v178;
    v156 = &v171;
    do
    {
      v157 = *((byte *)v156 + 1);
      v156 = (char *)v156 + 1;
    }
    while ( v157 != v104 );
    memcpy(v156, &v178, v155);
    v158 = &v171;
    do
      v159 = (v158++)[1];
    while ( v159 != v104 );
    v160 = &v181;
    *(_WORD *)v158 = 46;
    do
      v161 = *v160++;
    while ( v161 != v104 );
    v162 = v160 - &v181;
    v163 = &v171;
    do
    {
      v164 = *((byte *)v163 + 1);
      v163 = (char *)v163 + 1;
    }
    while ( v164 != v104 );
    memcpy(v163, &v181, v162);
    v174 = 1885432864;
    v175 = 1702257952;
    v173 = 1953719618;
    LOWORD(v176) = 114;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v173, 276200);
    LOWORD(v173) = 8250;
    v165 = DstBuf;
    BYTE2(v173) = 0;
    do
      v166 = *v165++;
    while ( v166 != v104 );
    v167 = v165 - DstBuf;
    v168 = &DstBuf[19];
    do
      v169 = (v168++)[1];
    while ( v169 != v104 );
    memcpy(v168, DstBuf, 4 * (v167 >> 2));
    v170 = (int)graphicsGeneral.fsma3aBpk;
    memcpy(&v168[4 * (v167 >> 2)], &DstBuf[4 * (v167 >> 2)], v167 & 3);
    result = drawTextWithFont(v170, (int)&byte_4458B0, (const char *)&v173, 276366);
    dword_456BD8 = 0;
  }
  return result;
}

//----- (00425980) --------------------------------------------------------
int __cdecl writeDriverList(int a1)
{
  int result; // eax@1
  int v2; // esi@1
  int v3; // ebp@2
  void *v4; // eax@4
  char *v5; // edi@6
  char v6; // al@7
  char *v7; // eax@8
  int v8; // ebx@8
  unsigned int v9; // edx@8
  char v10; // cl@9
  int v11; // eax@12
  char v12; // cl@13
  char *v13; // eax@14
  int v14; // edi@14
  unsigned int v15; // ecx@14
  char v16; // dl@15
  bool v17; // sf@18
  unsigned __int8 v18; // of@18
  int v19; // [sp-10h] [bp-34h]@3
  int v20; // [sp+4h] [bp-20h]@1
  signed int v21; // [sp+8h] [bp-1Ch]@2
  int v22; // [sp+Ch] [bp-18h]@6
  char DstBuf[20]; // [sp+10h] [bp-14h]@2
  int indexDriver = 0;
  result = a1;
  v2 = 0;
  v20 = 0;
  if (a1 > 0)
  {
	 
	  do
	  {
		  v19 = (int)((char *)screenBuffer + v2 + 55709);
		  if (v20 == driverId)
		  {
			  drawImageWithPosition((int)graphicsGeneral.prankBpk, 31, 18, v19);
			  drawImageWithPosition((int)graphicsGeneral.pnameBpk, 101, 18, (int)((char *)screenBuffer + v2 + 55741));
			  v4 = graphicsGeneral.ppistBpk;
		  }
		  else
		  {
			  drawImageWithPosition((int)graphicsGeneral.rankinf1Bpk, 31, 18, v19);
			  drawImageWithPosition((int)graphicsGeneral.rankinf2Bpk, 101, 18, (int)((char *)screenBuffer + v2 + 55741));
			  v4 = graphicsGeneral.rankinf3Bpk;
		  }
		  drawImageWithPosition((int)v4, 53, 18, (int)((char *)screenBuffer + v2 + 55843));
		 

		  memset(DstBuf, "\0", 20);
		  itoa(drivers[indexDriver].rank, DstBuf, 10);
		  
		  

		  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2  + 57662);
		  
		  memset(DstBuf, "\0", 20);
		  strcpy(DstBuf, drivers[indexDriver].name);
		  
		  
		  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2 + 57026);
		  /*********byte_44590A es para sacar el tamao de la letra!/
		 /* itoa(*(_DWORD *)(v3 + 68), DstBuf, 10);
		  v13 = DstBuf;
		  v14 = 0;
		  v15 = 0;
		  do
			  v16 = *v13++;
		  while (v16);
		  v22 = v13 - &DstBuf[1];
		  if (v13 != &DstBuf[1])
		  {
			  do
				  v14 += (unsigned __int8)byte_44590A[(unsigned __int8)DstBuf[v15++]];
			  while (v15 < strlen(DstBuf));
		  }*/
		  memset(DstBuf, "\0", 20);
		  
		  itoa(drivers[indexDriver].points, DstBuf, 10);
		  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2 - (strlen(DstBuf) - 1) + 57160);
		  result = v20 + 1;
		 // v3 += 108;
		  v2 += 12160;
		  
		  indexDriver++;
	  } while (indexDriver <20);
  }
  return result;
  /*if ( a1 > 0 )
  {
    v3 = (int)byte_460840;
    v21 = DstBuf - byte_460840;
    do
    {
      v19 = (int)((char *)screenBuffer + v2 + 55709);
      if ( v20 == driverId )
      {
        drawImageWithPosition((int)graphicsGeneral.prankBpk, 31, 18, v19);
        drawImageWithPosition((int)graphicsGeneral.pnameBpk, 101, 18, (int)((char *)screenBuffer + v2 + 55741));
        v4 = graphicsGeneral.ppistBpk;
      }
      else
      {
        drawImageWithPosition((int)graphicsGeneral.rankinf1Bpk, 31, 18, v19);
        drawImageWithPosition((int)graphicsGeneral.rankinf2Bpk, 101, 18, (int)((char *)screenBuffer + v2 + 55741));
        v4 = graphicsGeneral.rankinf3Bpk;
      }
      drawImageWithPosition((int)v4, 53, 18, (int)((char *)screenBuffer + v2 + 55843));
      itoa(*(_DWORD *)(v3 + 72), DstBuf, 10);
      v5 = (char *)&v22 + 3;
      do
        v6 = (v5++)[1];
      while ( v6 );
      *(_WORD *)v5 = 46;
      v7 = DstBuf;
      v8 = 0;
      v9 = 0;
      do
        v10 = *v7++;
      while ( v10 );
      v22 = v7 - &DstBuf[1];
      if ( v7 != &DstBuf[1] )
      {
        do
          v8 += (unsigned __int8)byte_44590A[(unsigned __int8)DstBuf[v9++]];
        while ( v9 < strlen(DstBuf) );
      }
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2 - v8 + 57662);
      v11 = v3;
      do
      {
        v12 = *(byte *)v11;
        *(byte *)(v21 + v11) = *(byte *)v11;
        ++v11;
      }
      while ( v12 );
      strupr(DstBuf);
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2 + 57026);
      itoa(*(_DWORD *)(v3 + 68), DstBuf, 10);
      v13 = DstBuf;
      v14 = 0;
      v15 = 0;
      do
        v16 = *v13++;
      while ( v16 );
      v22 = v13 - &DstBuf[1];
      if ( v13 != &DstBuf[1] )
      {
        do
          v14 += (unsigned __int8)byte_44590A[(unsigned __int8)DstBuf[v15++]];
        while ( v15 < strlen(DstBuf) );
      }
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v2 - v14 + 57160);
      result = v20 + 1;
      v3 += 108;
      v2 += 12160;
     // v18 = __OFSUB__(v20 + 1, a1);
      v17 = v20++ + 1 - a1 < 0;
      v21 -= 108;
    }
    while ( v17 ^ v18 );
  }
  return result;*/
}
// 463CE8: using guessed type int driverId;
// 425980: using guessed type char DstBuf[20];

//----- (00425BD0) --------------------------------------------------------
int __cdecl drawRightPositions(int a1, int a2)
{
  int v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  int v5; // eax@1
  int v6; // esi@2
  int v7; // ebx@3
  int v8; // ebp@3
  char *v9=malloc(100); // edi@3
  char v10; // al@4
  unsigned int v11; // edx@5
  char *v12 = malloc(100); // eax@5
  char v13; // cl@6
  char *v14 = malloc(100); // ecx@9
  char v15; // dl@10
  int v16; // eax@15
  char *v17 = malloc(100); // edx@15
  signed int v18; // ecx@15
  int v19; // eax@15
  double v20; // st7@15
  int v21; // eax@16
  char *v22 = malloc(100); // edx@16
  signed int v23; // ecx@16
  int v24; // eax@16
  float v25; // ST30_4@17
  int v26; // eax@19
  char *v27 = malloc(100); // edx@19
  signed int v28; // ecx@19
  int v29; // eax@19
  double v30; // st7@19
  int v31; // eax@20
  char *v32 = malloc(100); // edx@20
  signed int v33; // ecx@20
  int v34; // eax@20
  float v35; // ST38_4@21
  int v36; // eax@24
  char *v37 = malloc(100); // edx@24
  signed int v38; // ecx@24
  int v39; // eax@24
  double v40; // st7@24
  int v41; // eax@25
  char *v42 = malloc(100); // edx@25
  signed int v43; // ecx@25
  int v44; // eax@25
  float v45; // ST38_4@26
  int v46; // eax@29
  char *v47 = malloc(100); // edx@29
  signed int v48; // ecx@29
  int v49; // eax@29
  float v50; // ST40_4@29
  float v51; // ST3C_4@29
  float v52; // ST38_4@29
  int result; // eax@29
  int v54; // eax@30
  char *v55 = malloc(100); // edx@30
  signed int v56; // ecx@30
  int v57; // eax@30
  float v58; // ST40_4@30
  float v59; // ST3C_4@30
  float v60; // ST38_4@30
  float v61; // [sp+4h] [bp-34h]@15
  float v62; // [sp+8h] [bp-30h]@15
  float v63; // [sp+Ch] [bp-2Ch]@19
  float v64; // [sp+Ch] [bp-2Ch]@24
  float v65; // [sp+10h] [bp-28h]@19
  float v66; // [sp+10h] [bp-28h]@24
  int v67; // [sp+14h] [bp-24h]@5
  int v68; // [sp+18h] [bp-20h]@1
  int v69; // [sp+1Ch] [bp-1Ch]@2
  int v70; // [sp+20h] [bp-18h]@3
  char DstBuf[20]; // [sp+24h] [bp-14h]@3

  v2 = *(_DWORD *)a2;
  v3 = (350 - 79 * a1) / (a1 + 1);
  a2 = *(_DWORD *)a2;
  v68 = 0;
  v4 = v3 + 108;
  v5 = v3 + 79;
  if ( a1 > 0 )
  {
    v69 = 640 * v5;
    v6 = 640 * v4;
    do
    {
      v7 = *((byte *)&a2 + v68);
      //v8 = 27 * v7;
	  v8 =  v7;
	  memset(DstBuf, 0, 20);
	  char *tmp = malloc(20);
	  memset(tmp, 0, 20);
      itoa(drivers[v7].rank, tmp, 10);
	  strcpy(DstBuf, tmp);
	  strcat(DstBuf, ".");
	  //itoa(dword_460888[27 * v7], DstBuf, 10);
      /*v9 = (char *)&v70 + 3;
      do
        v10 = (v9++)[1];
      while ( v10 );
    //  *(_WORD *)v9 = 46;
      
      v12 = DstBuf;*/
	  v11 = 0;
      v67 = 0;
      /*do
        v13 = *v12++;
      while ( v13 );
      v70 = v12 - &DstBuf[1];*/
      //if ( v12 != &DstBuf[1] )
      //{
        do
          v67 += (unsigned __int8)byte_44590A[(unsigned __int8)DstBuf[v11++]];
        while ( v11 < strlen(DstBuf) );
      //}
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v6 - v67 + 33700);	  
	  strcpy(DstBuf,drivers[v8].name,strlen(drivers[v8].name));
	  //v14 = &byte_460840[v8 * 4];
     /* do
      {
        v15 = *v14;
        v14[&DstBuf[-108 * v7] - byte_460840] = *v14;
        ++v14;
      }
	  
      while ( v15 );*/
      strupr(DstBuf);
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v6 + 36975);
      drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + drivers[v8].face), 64, 64, (int)((char *)screenBuffer + v6 + 2342));
	  //drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + dword_460880[v8]), 64, 64, (int)((char *)screenBuffer + v6 + 2342));
      drawImageWithPosition2(
        (int)((char *)graphicsGeneral.carresBpk + 5200 * (v68 + 4 * drivers[v8].carType)),
        100,
        52,
        (int)((char *)screenBuffer + v6 + 490));
	  /*drawImageWithPosition2(
		  (int)((char *)graphicsGeneral.carresBpk + 5200 * (v68 + 4 * dword_46085C[v8])),
		  100,
		  52,
		  (int)((char *)screenBuffer + v6 + 490));*/
      v6 += v69;
      ++v68;
    }
    while ( v68 < a1 );
    LOWORD(v2) = a2;
  }
  sub_4224E0();
	  if ( (unsigned __int8)v2 == driverId || isMultiplayerGame )
  {
	v21 = drivers[(unsigned __int8)v2].colour;
	//v21 = dword_46086C[27 * (unsigned __int8)v2];
    v22 = (char *)graphicsGeneral.copperPal + 2 * v21;
    v23 = (unsigned __int8)v22[v21 + 2];
    v24 = (int)&v22[v21];
    v62 = (double)v23;
    v61 = (double)*(byte *)(v24 + 1);
    v20 = (double)*(byte *)v24;
  }
  else
  {
    v16 = drivers[(unsigned __int8)v2].colour;
	///v16 = dword_46086C[27 * (unsigned __int8)v2];
    v17 = (char *)graphicsGeneral.carcolPal + 2 * v16;
    v18 = (unsigned __int8)v17[v16 + 2];
    v19 = (int)&v17[v16];
    v62 = (double)v18;
    v61 = (double)*(byte *)(v19 + 1);
    v20 = (double)*(byte *)v19;
  }
  v25 = v20;
  sub_424240(64, v25, v61, v62);
  if ( BYTE1(v2) == driverId || isMultiplayerGame )
  {
    v31 = drivers[BYTE1(v2)].colour;
	//v31 = dword_46086C[27 * BYTE1(v2)];
    v32 = (char *)graphicsGeneral.copperPal + 2 * v31;
    v33 = (unsigned __int8)v32[v31 + 2];
    v34 = (int)&v32[v31];
    v65 = (double)v33;
    v63 = (double)*(byte *)(v34 + 1);
    v30 = (double)*(byte *)v34;
  }
  else
  {
    v26 = drivers[BYTE1(v2)].colour;
	//v26 = dword_46086C[27 * BYTE1(v2)];
    v27 = (char *)graphicsGeneral.carcolPal + 2 * v26;
    v28 = (unsigned __int8)v27[v26 + 2];
    v29 = (int)&v27[v26];
    v65 = (double)v28;
    v63 = (double)*(byte *)(v29 + 1);
    v30 = (double)*(byte *)v29;
  }
  v35 = v30;
  sub_424240(80, v35, v63, v65);
  if ( BYTE2(a2) == driverId || isMultiplayerGame && dword_456758 > 2 )
  {
    v41 = drivers[BYTE2(v2)].colour;
	//v41 = dword_46086C[27 * BYTE2(a2)];
    v42 = (char *)graphicsGeneral.copperPal + 2 * v41;
    v43 = (unsigned __int8)v42[v41 + 2];
    v44 = (int)&v42[v41];
    v66 = (double)v43;
    v64 = (double)*(byte *)(v44 + 1);
    v40 = (double)*(byte *)v44;
  }
  else
  {
    v36 = drivers[BYTE2(v2)].colour;
	//v36 = dword_46086C[27 * BYTE2(a2)];
    v37 = (char *)graphicsGeneral.carcolPal + 2 * v36;
    v38 = (unsigned __int8)v37[v36 + 2];
    v39 = (int)&v37[v36];
    v66 = (double)v38;
    v64 = (double)*(byte *)(v39 + 1);
    v40 = (double)*(byte *)v39;
  }
  v45 = v40;
  sub_424240(224, v45, v64, v66);
  if ( BYTE3(a2) == driverId || isMultiplayerGame && dword_456758 > 3 )
  {
    v54 = drivers[BYTE3(v2)].colour;
	//v54 = dword_46086C[27 * BYTE3(a2)];
    v55 = (char *)graphicsGeneral.copperPal + 2 * v54;
    v56 = (unsigned __int8)v55[v54 + 2];
    v57 = (int)&v55[v54];
    v58 = (double)v56;
    v59 = (double)*(byte *)(v57 + 1);
    v60 = (double)*(byte *)v57;
    result = sub_424240(240, v60, v59, v58);
  }
  else
  {
    v46 = drivers[BYTE3(v2)].colour;
	//v46 = dword_46086C[27 * BYTE3(a2)];
    v47 = (char *)graphicsGeneral.carcolPal + 2 * v46;
    v48 = (unsigned __int8)v47[v46 + 2];
    v49 = (int)&v47[v46];
    v50 = (double)v48;
    v51 = (double)*(byte *)(v49 + 1);
    v52 = (double)*(byte *)v49;
    result = sub_424240(240, v52, v51, v50);
  }
  return result;
}


//----- (00426080) --------------------------------------------------------
signed int sub_426080()
{
  int v0; // edx@1
  signed int result; // eax@1
  char *v2; // esi@2
  char *v3; // edi@2

  v0 = 0;
  result = 100368;
  do
  {
    v2 = (char *)graphicsGeneral.resupok1Bpk + result;
    v3 = (char *)screenBuffer + v0 + 290274;
    result += 272;
    v0 += 640;
    memcpy(v3, v2, 0x110u);
  }
  while ( result < 104992 );
  return result;
}

//----- (004260D0) --------------------------------------------------------
int sub_4260D0()
{
  int result; // eax@1

  result = dword_456BE4++ + 1;
  if ( dword_456BE4 == 30 )
  {
    sub_426080();
    drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
    result = drawKeyCursor(289634, (char *)screenBuffer + 289634, 0x10Eu, 16);
  }
  if ( dword_456BE4 == 60 )
  {
    sub_426080();
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
    result = drawKeyCursor(289634, (char *)screenBuffer + 289634, 0x10Eu, 16);
    dword_456BE4 = 0;
  }
  return result;
}
// 4458B0: using guessed type char byte_4458B0;
// 456BE4: using guessed type int dword_456BE4;

//----- (00426180) --------------------------------------------------------
signed int sub_426180()
{
  int v0; // edx@1
  signed int result; // eax@1
  char *v2; // esi@2
  char *v3; // edi@2

  v0 = 0;
  result = 0;
  do
  {
    v2 = (char *)dword_45EB5C + result;
    v3 = (char *)screenBuffer + v0 + 64264;
    result += 360;
    v0 += 640;
    memcpy(v3, v2, 0x168u);
  }
  while ( result < 7200 );
  return result;
}

//----- (004261D0) --------------------------------------------------------
int sub_4261D0()
{
  int result; // eax@1

  result = dword_456BE8++ + 1;
  if ( dword_456BE8 == 15 )
  {
    sub_426180();
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "waiting for other players...", 66238);
    result = drawKeyCursor(64264, (char *)screenBuffer + 64264, 0x168u, 20);
  }
  if ( dword_456BE8 == 30 )
  {
    sub_426180();
    drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "waiting for other players...", 66238);
    result = drawKeyCursor(64264, (char *)screenBuffer + 64264, 0x168u, 20);
    dword_456BE8 = 0;
  }
  return result;
}
// 4458B0: using guessed type char byte_4458B0;
// 456BE8: using guessed type int dword_456BE8;

//----- (00426280) --------------------------------------------------------
int sub_426280()
{
  int v0; // eax@1
  int v1; // esi@1
  int v2; // ebp@1
  int result; // eax@1
  int v4; // ebp@2
  char *v5; // eax@6
  char *v6; // edx@6
  char v7; // cl@7
  char *v8; // eax@8
  int v9; // ebx@8
  unsigned int v10; // ecx@8
  char v11; // dl@9
  int v12; // [sp+Ch] [bp-18h]@2
  char DstBuf[20]; // [sp+10h] [bp-14h]@3

  v0 = (350 - (dword_456758 << 6)) / (dword_456758 + 1);
  v1 = 0;
  v2 = v0 + 108;
  result = v0 + 64;
  if ( dword_456758 > 0 )
  {
    v12 = 640 * result;
    v4 = 640 * v2 + 10306;
    do
    {
      drawImageWithPosition2((int)graphicsGeneral.mulsbg2Bpk, 184, 64, (int)((char *)screenBuffer + v4 - 10252));
      itoa(dword_460888[27 * (dword_456758 - v1 - 1)], DstBuf, 10);
      if ( dword_460888[27 * (dword_456758 - v1 - 1)] == 1 )
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, DstBuf, v4 + 4);
      else
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, DstBuf, v4);
      v5 = &byte_460840[108 * (dword_456758 - v1 - 1)];
      v6 = (char *)(DstBuf - v5);
      do
      {
        v7 = *v5;
        v5[(_DWORD)v6] = *v5;
        ++v5;
      }
      while ( v7 );
      strupr(DstBuf);
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v4 + 5790);
      itoa(dword_460884[27 * (dword_456758 - v1 - 1)], DstBuf, 10);
      v8 = DstBuf;
      v9 = 0;
      v10 = 0;
      do
        v11 = *v8++;
      while ( v11 );
      if ( v8 != &DstBuf[1] )
      {
        do
          v9 += (unsigned __int8)byte_44590A[(unsigned __int8)DstBuf[v10++]];
        while ( v10 < strlen(DstBuf) );
      }
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v4 - 10306 - v9 + 16226);
      result = dword_456758;
      ++v1;
      v4 += v12;
    }
    while ( v1 < dword_456758 );
  }
  return result;
}
// 456754: using guessed type int dword_456754;
// 460884: using guessed type int dword_460884[];
// 460888: using guessed type int dword_460888[];
// 426280: using guessed type char DstBuf[20];

//----- (00426460) --------------------------------------------------------
int __cdecl sub_426460(unsigned __int8 a1, unsigned __int8 a2)
{
  int result; // eax@4

  if ( a2 )
  {
    if ( a2 != 1 || (a1 & 0xC0) == -64 )
    {
      if ( putc(a2 | 0xC0, File) == -1 )
        result = 0;
      else
        result = putc(a1, File) != -1 ? 2 : 0;
    }
    else
    {
      result = putc(a1, File) != -1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004271F0) --------------------------------------------------------
int __cdecl openPalFromBpa(char * filename)
{
  signed int v1; // esi@1
  char *v2 = malloc(768); // edi@1
  int result; // eax@2
  void * v6 = malloc(768); // [sp+8h] [bp-300h]@1
  
  
  extractFromBpa("MENU.BPA", v6, filename);
  v1 = 0;
  //v1=(signed int)dword_45FC44;
  v2 = v6; 
 // v2 = &v7;
  do
  {
	  
    palette1[v1] = sub_43B290((unsigned __int8)*(&v2[0]) << 16, 6553600);
	palette1[v1 + 1] = sub_43B290((unsigned __int8)*&v2[1] << 16, 6553600);
    result = sub_43B290((unsigned __int8)*&v2[2] << 16, 6553600);
	palette1[v1+2] = result;
	
    v1 += 3;
    v2 += 3;
	
  }
 while ( v1 <256*3);
  
  return result;
}


//----- (00427280) --------------------------------------------------------
int transitionToCurrentImage()///esto huele a que esta pintando la pantalla con la paleta
{
  int v0; // edi@1
  unsigned __int8 v1; // bl@2
  signed int v2; // esi@2
  int v3; // ST0C_4@3
  int v4; // ST08_4@3
  int v5; // eax@3
  int result; // eax@3

  v0 =0;
  do
  {
    wait();
    v1 = 0;
	v2 = 0;
    //v2 = (signed int)dword_45FC44;
    do
    {
      v3 = (convertColorToPaletteColor(palette1[v2+2], v0) + 0x8000) >> 16;
      v4 = (convertColorToPaletteColor(palette1[v2 + 1], v0) + 0x8000) >> 16;
      v5 = convertColorToPaletteColor(palette1[v2], v0);
      result = setPaletteAndGetValue(v1, (v5 + 0x8000) >> 16, v4, v3);
      v2 += 3;
	  //v2 += 12;
      ++v1;
    }
    while (v2 < maxPaletteEntries);
    v0 += 0x40000;
  }
  while ( v0 < 6553600 );
  return result;
}


//----- (00427300) --------------------------------------------------------
int transitionToBlack()
{
  int v0; // edi@1
  unsigned __int8 v1; // bl@2
  signed int v2; // esi@2
  int v3; // ST0C_4@3
  int v4; // ST08_4@3
  int v5; // eax@3
  int result; // eax@3

  v0 = 6553600;
  do
  {
    wait();
    v1 = 0;
	v2 = 0;
	//v2 = (signed int)dword_45FC44;
	
    do
    {
		v3 = (convertColorToPaletteColor((palette1[v2 + 2]), v0) + 0x8000) >> 16;
		v4 = (convertColorToPaletteColor(palette1[v2 + 1], v0) + 0x8000) >> 16;
		v5 = convertColorToPaletteColor((palette1[v2] - 4), v0);
      result = setPaletteAndGetValue(v1, (v5 + 0x8000) >> 16, v4, v3);
      v2 += 3;
      ++v1;
    }
    while ( v2 < maxPaletteEntries );
	v0 -= 0x40000;
  }
  while ( v0 >= 0 );
  return result;
}


//----- (00427380) --------------------------------------------------------
int apogeeScreen()
{
  signed int v0; // esi@1
  signed int v1; // esi@3
  int file; // eax@6
  int image; // ebx@6
//  SDL_RWops * file; // eax@6
 // SDL_Surface * image; // ebx@6

  int v4; // edi@6
  signed int v5; // esi@6
  signed int v6; // esi@8

  v0 = 0;
  do
    setPaletteAndGetValue(v0++, 0, 0, 0);
  while ( v0 < 256 );
  openPalFromBpa("apogee.pal");
  extractFromBpa("MENU.BPA", textureTemp, "apogee.bpk");
  copyImageToBuffer(textureTemp, screenBuffer);
  refreshAllScreen();
  transitionToCurrentImage();
  v1 = 0;
  do
  {
    wait();
    ++v1;
  }
  //espera de tres segundos
  while ( !eventDetected() && v1 < 180 );
  transitionToBlack();
  do
	  setPaletteAndGetValue(v0++, 0, 0, 0);
  while (v0 < 256);
  openPalFromBpa("GTLOGO4.PAL");
  extractFromBpa("MENU.BPA", textureTemp, "GTLOGO4.BPK");
  copyImageToBuffer((int)textureTemp, (int)screenBuffer);
  refreshAllScreen();
  transitionToCurrentImage();
  v1 = 0;
  do
  {
	  wait();
	  ++v1;
  }
  //espera de tres segundos
  while (!eventDetected() && v1 < 180);
  transitionToBlack();



  

  file = SDL_RWFromFile("rmd.bmp", "rb");
  image = SDL_LoadBMP_RW(file, 1);
  v4 = 0;
  v5 = 0;
  //v5 = (signed int)dword_45FC44;
  do
  {
   palette1[v5] = sub_43B290(
                            (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(image + 4) + 4) + v4) & 0xFC) << 14,
                            6553600);
   palette1[v5+1] = sub_43B290(
                      (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(image + 4) + 4) + v4 + 1) & 0xFC) << 14,
                      6553600);
   palette1[v5+2] = sub_43B290(
                            (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(image + 4) + 4) + v4 + 2) & 0xFC) << 14,
                            6553600);
    v5 += 3;
	//v5 += 12;
    v4 += 4;
  }
  while ( v5 <maxPaletteEntries );
  memcpy(screenBuffer, *(const void **)(image + 20), 0x4B000u);
  SDL_FreeSurface(image);
  refreshAllScreen();
  transitionToCurrentImage();
  v6 = 0;
  do
  {
    wait();
    ++v6;
  }
  //espera de tres segundos
  while ( !eventDetected() && v6 < 180 );
  return transitionToBlack();
}


//----- (004274E0) --------------------------------------------------------
int showCredits()
{
  signed int v0; // ebp@1
  unsigned __int8 v1; // bl@4
  signed int v2; // esi@4
  int blue1; // ST14_4@5
  int green1; // ST10_4@5
  int red1; // eax@5
  signed int v6; // ebp@11
  unsigned __int8 v7; // bl@14
  signed int v8; // esi@14
  int blue; // ST14_4@15
  int green; // ST10_4@15
  int red; // eax@15
  int result; // eax@15
  
  memcpy(dword_461ED8, screenBuffer, 0x4B000u);
  sub_4224E0();
  v0 = 50;
  do
  {
    wait();
    if ( v0 % 2 )
      updateCursor(0);
    v1 = 0;
	v2 = 0;
	//v2 = (signed int)dword_45FC44;
    do
    {
	  blue1 = (convertColorToPaletteColor((palette1[v2+2]), v0 << 17) + 0x8000) >> 16;
	  green1 = (convertColorToPaletteColor(palette1[v2 + 1], v0 << 17) + 0x8000) >> 16;
	  red1 = convertColorToPaletteColor((palette1[v2]), v0 << 17);
      setPaletteAndGetValue(v1, (red1 + 0x8000) >> 16, green1, blue1);
      v2 += 3;
      ++v1;
    }
    while ( v2 < maxPaletteEntries );
    --v0;
  }
  while ( v0 >= 0 );
  openPalFromBpa((int)"credit1.pal");
  extractFromBpa("MENU.BPA", textureTemp, "credit1.bpk");
  copyImageToBuffer((int)textureTemp, (int)screenBuffer);
  refreshAllScreen();
  transitionToCurrentImage();
  while ( !eventDetected() )
    wait();
  transitionToBlack();
  openPalFromBpa((int)"credit2.pal");
  extractFromBpa("MENU.BPA", textureTemp, "credit2.bpk");
  copyImageToBuffer((int)textureTemp, (int)screenBuffer);
  refreshAllScreen();
  transitionToCurrentImage();
  while ( !eventDetected() )
    wait();
  transitionToBlack();
  sub_4224E0();
  memcpy(screenBuffer, dword_461ED8, 0x4B000u);
  refreshAllScreen();
  v6 = 0;
  do
  {
    wait();
    if ( v6 % 2 )
      updateCursor(0);
    v7 = 0;
    //v8 = (signed int)dword_45FC44;
	v8 = 0;
    do
    {
		blue = (convertColorToPaletteColor((palette1[v8+2]), v6 << 17) + 0x8000) >> 16;
      green = (convertColorToPaletteColor(palette1[v8 + 1], v6 << 17) + 0x8000) >> 16;
	  red = convertColorToPaletteColor((palette1[v8]) ,v6 << 17);
      result = setPaletteAndGetValue(v7, (red + 0x8000) >> 16, green, blue);
      v8 += 3;
      ++v7;
    }
    while ( v8 < maxPaletteEntries );
    ++v6;
  }
  while ( v6 < 50 );
  return result;
}


//----- (00427700) --------------------------------------------------------
int showEndScreen()
{
  int v0; // eax@1
  int v1; // ebx@1
  int v2; // edi@1
  signed int v3; // esi@1
  signed int v4; // esi@3
  int v5; // edi@6
  signed int v6; // ebp@6
  unsigned __int8 v7; // bl@7
  signed int v8; // esi@7
  int v9; // ST14_4@8
  int v10; // ST10_4@8
  int v11; // eax@8
  int result; // eax@8

  sub_4224E0();
  transitionToBlack();
  v0 = SDL_RWFromFile((int)"end.bmp", (int)"rb");
  v1 = SDL_LoadBMP_RW(v0, 1);
  v2 = 0;
  v3 = 0;
  //v3 = (signed int)dword_45FC44;
  do
  {
    palette1[v3] = sub_43B290(
                            (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(v1 + 4) + 4) + v2) & 0xFC) << 14,
                            6553600);
	palette1[v3+1] = sub_43B290(
                      (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(v1 + 4) + 4) + v2 + 1) & 0xFC) << 14,
                      6553600);
	palette1[v3+2] = sub_43B290(
                            (unsigned __int8)(*(byte *)(*(_DWORD *)(**(_DWORD **)(v1 + 4) + 4) + v2 + 2) & 0xFC) << 14,
                            6553600);
    v3 += 3;
    v2 += 4;
  }
  while ( v3 < maxPaletteEntries );
  memcpy(screenBuffer, *(const void **)(v1 + 20), 0x4B000u);
  SDL_FreeSurface(v1);
  refreshAllScreen();
  transitionToCurrentImage();
  v4 = 0;
  do
  {
    wait();
    ++v4;
  }
  while ( !eventDetected() && v4 < 560 );
  v5 = 6553600;
  v6 = 65500;
  do
  {
    wait();
    setMusicVolume(v6);
    v7 = 0;
	v8 = 0;
	//v8 = (signed int)dword_45FC44;
    do
    {
      v9 = (convertColorToPaletteColor((palette1[v8+2]), v5) + 0x8000) >> 16;
      v10 = (convertColorToPaletteColor(palette1[v8 + 1], v5) + 0x8000) >> 16;
      v11 = convertColorToPaletteColor((palette1[v8] - 4), v5);
      result = setPaletteAndGetValue(v7, (v11 + 0x8000) >> 16, v10, v9);
      v8 += 3;
      ++v7;
    }
    while ( v8 < maxPaletteEntries );
    v6 -= 2620;
    v5 -= 0x40000;
  }
  while ( v6 >= 0 );
  return result;
}


//----- (00427880) --------------------------------------------------------
int showStartScreen()
{
  signed int v0; // esi@1

  v0 = 0;
  do
    setPaletteAndGetValue(v0++, 0, 0, 0);
  while ( v0 < 256 );
  openPalFromBpa("startscr.pal");
  extractFromBpa("MENU.BPA", textureTemp, "startscr.bpk");
  copyImageToBuffer((int)textureTemp, (int)screenBuffer);//esta variable huele a palete
  refreshAllScreen();  
  return transitionToCurrentImage();
}
// 481E20: using guessed type int textureTemp[];

//----- (004278E0) --------------------------------------------------------
FILE *checkAndOpenAnimation()
{
  unsigned int v0; // eax@2
  void *v1; // edi@2
  char v2; // cl@3
  char *v3; // edi@5
  char v4; // al@6
  FILE *result; // eax@7
  FILE *v6; // esi@7
  __int32 v7; // edi@8
  char v8; // [sp+7h] [bp-65h]@2
  char Filename; // [sp+8h] [bp-64h]@1

  Filename = 0;
  if ( byte_462D50 == 2 )
  {
    v0 = strlen(byte_45FAA0) + 1;
    v1 = &v8;
    do
    {
      v2 = *((byte *)v1 + 1);
      v1 = (char *)v1 + 1;
    }
    while ( v2 );
    memcpy(v1, byte_45FAA0, v0);
  }
  v3 = &v8;
 /* do
    v4 = (v3++)[1];
  while ( v4 );
  *(_DWORD *)v3 = 1768841587;
  *((_DWORD *)v3 + 1) = 1634217581;
  *((_WORD *)v3 + 4) = 102;
  result = fopen(&Filename, "rb");*/
  result = fopen("SANIM.haf", "rb");
  v6 = result;
  if ( result )
  {
    fseek(result, 0, 2);
    v7 = ftell(v6);
    result = (FILE *)fclose(v6);
    if ( v7 > 0 )
    {
      openAnimation("SANIM.haf", 1, (int)"tr0-mus.cmf", 2, (int)"sanim-e.cmf", 1, 120);
	  //openAnimation(dword_443798, 1, (int)"tr0-mus.cmf", 2, (int)"sanim-e.cmf", 1, 120);
	  //openAnimation((const char *)&dword_443798, 1, (int)"tr0-mus.cmf", 2, (int)"sanim-e.cmf", 1, 120);
      stopSong();
      result = (FILE *)stopAndOpenMusic();
    }
  }
  return result;
}


//----- (004279C0) --------------------------------------------------------
char sub_4279C0()
{
  char v0; // bl@1
  signed int v1; // edi@1
  char v2; // al@2
  signed int v3; // edx@2
  signed int v4; // eax@3
  char v5; // cl@4
  int v6; // edx@8
  int v7; // edx@9
  char *v8; // eax@9
  char v9; // cl@10
  char *v10; // eax@11
  char v11; // cl@12
  char *v12; // eax@13
  char v13; // cl@14
  char *v14; // eax@15
  signed int v15; // edx@15
  char v16; // cl@16
  char result; // al@17
  bool v18; // cf@17
  bool v19; // zf@17

  v0 = unk_461EC1;
  v1 = 6;
  do
  {
    v2 = unk_461EC3;
    unk_461EC3 = word_461EC4;
    unk_461EC0[0] = v0;
    v0 = unk_461EC2;
    unk_461EC2 = v2;
    HIBYTE(word_461EC4) = unk_461EC6;
    unk_461EC6 = unk_461EC7;
    unk_461EC7 = word_461EC8;
    HIBYTE(word_461EC8) = unk_461ECA;
    unk_461ECA = unk_461ECB;
    unk_461ECB = word_461ECC;
    HIBYTE(word_461ECC) = unk_461ECE;
    unk_461ECE = unk_461ECF;
    unk_461ECF = word_461ED0;
    HIBYTE(word_461ED0) = unk_461ED2;
    unk_461ED2 = unk_461ED3;
    v3 = (signed int)&unk_462096;
    unk_461ED3 = word_461ED4;
    do
    {
      v4 = v3;
      do
      {
        v5 = *(byte *)v4;
        *(byte *)(v4 - 150) = *(byte *)v4;
        ++v4;
      }
      while ( v5 );
      v3 += 150;
    }
    while ( v3 < (signed int)&blacktx1Bpk );
    --v1;
  }
  while ( v1 );
  unk_461EC1 = v0;
  do
    v6 = rand() % 19;
  while ( *((byte *)&dword_45F000 + v6) == 1 );
  *((byte *)&dword_45F000 + v6) = 1;
  v7 = 280 * v6;
  v8 = &aThisIsIt_Here_[v7];
  do
  {
    v9 = *v8;
    v8[byte_4629F6 - &aThisIsIt_Here_[v7]] = *v8;
    ++v8;
  }
  while ( v9 );
  v10 = &aFastAndDeadly_[v7];
  HIBYTE(word_461ED0) = 1;
  do
  {
    v11 = *v10;
    v10[byte_462A8C - &aFastAndDeadly_[v7]] = *v10;
    ++v10;
  }
  while ( v11 );
  v12 = &aRumble_WannaPl[v7];
  unk_461ED2 = 1;
  do
  {
    v13 = *v12;
    v12[byte_462B22 - &aRumble_WannaPl[v7]] = *v12;
    ++v12;
  }
  while ( v13 );
  v14 = &aFryTheRulesThe[v7];
  unk_461ED3 = 1;
  v15 = byte_462BB8 - &aFryTheRulesThe[v7];
  do
  {
    v16 = *v14;
    v14[v15] = *v14;
    ++v14;
  }
  while ( v16 );
  result = byte_45FB84 + 1;
  v18 = (unsigned __int8)(byte_45FB84 + 1) < 0x12u;
  v19 = byte_45FB84 == 17;
  LOBYTE(word_461ED4) = 1;
  ++byte_45FB84;
  if ( !v18 && !v19 )
  {
    dword_45F000 = 0;
    dword_45F004 = 0;
    dword_45F008 = 0;
    dword_45F00C = 0;
    word_45F010 = 0;
    byte_45F012 = 0;
    byte_45FB84 = 0;
  }
  return result;
}


//----- (00427BC0) --------------------------------------------------------
int sub_427BC0()
{
  char v0; // bl@1
  signed int v1; // edi@1
  char v2; // al@2
  signed int v3; // edx@2
  signed int v4; // eax@3
  char v5; // cl@4
  int v6; // eax@7
  char v7; // cl@8
  int v8; // eax@9
  char v9; // cl@10
  int v10; // eax@11
  char v11; // cl@12
  int result; // eax@13
  char v13; // cl@14

  v0 = unk_461EC1;
  v1 = 6;
  do
  {
    v2 = unk_461EC3;
    unk_461EC3 = word_461EC4;
    unk_461EC0[0] = v0;
    v0 = unk_461EC2;
    unk_461EC2 = v2;
    HIBYTE(word_461EC4) = unk_461EC6;
    unk_461EC6 = unk_461EC7;
    unk_461EC7 = word_461EC8;
    HIBYTE(word_461EC8) = unk_461ECA;
    unk_461ECA = unk_461ECB;
    unk_461ECB = word_461ECC;
    HIBYTE(word_461ECC) = unk_461ECE;
    unk_461ECE = unk_461ECF;
    unk_461ECF = word_461ED0;
    HIBYTE(word_461ED0) = unk_461ED2;
    unk_461ED2 = unk_461ED3;
    v3 = (signed int)&unk_462096;
    unk_461ED3 = word_461ED4;
    do
    {
      v4 = v3;
      do
      {
        v5 = *(byte *)v4;
        *(byte *)(v4 - 150) = *(byte *)v4;
        ++v4;
      }
      while ( v5 );
      v3 += 150;
    }
    while ( v3 < (signed int)&blacktx1Bpk );
    --v1;
  }
  while ( v1 );
  unk_461EC1 = v0;
  v6 = 0;
  do
  {
    v7 = byte_456618[v6];
    byte_4629F6[v6++] = v7;
  }
  while ( v7 );
  HIBYTE(word_461ED0) = 1;
  v8 = 0;
  do
  {
    v9 = byte_45665E[v8];
    byte_462A8C[v8++] = v9;
  }
  while ( v9 );
  unk_461ED2 = 1;
  v10 = 0;
  do
  {
    v11 = byte_4566A4[v10];
    byte_462B22[v10++] = v11;
  }
  while ( v11 );
  unk_461ED3 = 1;
  result = 0;
  do
  {
    v13 = byte_4566EA[result];
    byte_462BB8[result++] = v13;
  }
  while ( v13 );
  LOBYTE(word_461ED4) = 1;
  return result;
}


//----- (00427D60) --------------------------------------------------------
int checkIntro()
{
  int v0; // ebx@1
  signed int v1; // ebp@1
  FILE *v2; // eax@2
  FILE *v3; // esi@2
  __int32 v4; // edi@3
  int v5; // eax@6
  char v6; // cl@7
  unsigned int v7; // eax@8
  char *v8; // edi@8
  char v9; // cl@9
  FILE *v10; // eax@10
  FILE *v11; // esi@10
  __int32 (__cdecl *v12)(FILE *); // ebp@11
  __int32 v13; // edi@11
  unsigned int v14; // eax@20
  char *v15; // edi@20
  char v16; // cl@21
  int v17; // eax@23
  const void *v18; // esi@23
  char v19; // cl@24
  unsigned int v20; // eax@25
  char *v21; // edi@25
  char v22; // cl@26
  FILE *v23; // eax@27
  FILE *v24; // esi@27
  __int32 v25; // edi@28
  int result; // eax@30
  bool v27; // sf@30
  unsigned __int8 v28; // of@30
  const char *v29; // [sp-8h] [bp-120h]@13
  int v30; // [sp-4h] [bp-11Ch]@13
  _UNKNOWN *v31; // [sp+10h] [bp-108h]@18
  int v32; // [sp+14h] [bp-104h]@8
  char Filename[256]; // [sp+18h] [bp-100h]@7

  v0 = 0;
  v1 = (signed int)&unk_4568D8;
  do
  {
    v2 = fopen((const char *)(v1 - 16), "rb");
    v3 = v2;
    if ( !v2 || (fseek(v2, 0, 2), v4 = ftell(v3), fclose(v3), v4 < 1) )
    {
      v30 = 20 * v0 + 4548808;
      v29 = "\nDEATH RALLY ERROR: File %s is not found!\n";
LABEL_33:
      printf(v29, v30);
      printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
      nullsub_1();
      freeMusic();
      exit(112);
    }
    if ( v4 != *(_DWORD *)v1 )
    {
      printf("\nDEATH RALLY ERROR: File %s is not in original form!\n", 20 * v0 + 4548808);
      printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
      nullsub_1();
      freeMusic();
      exit(112);
    }
    v1 += 20;
    ++v0;
  }
  while ( v1 < (signed int)&unk_4569F0 );
  byte_462D50 = 2;
  v5 = 0;
  do
  {
    v6 = byte_45FAA0[v5];
    Filename[v5++] = v6;
  }
  while ( v6 );
  v7 = strlen(aSanim_haf) + 1;
  v8 = (char *)&v32 + 3;
  do
    v9 = (v8++)[1];
  while ( v9 );
  memcpy(v8, aSanim_haf, v7);
  v10 = fopen(Filename, "rb");
 
  v11 = v10;
  if ( !v10 )
  {
    v12 = ftell;
    goto LABEL_17;
  }
  fseek(v10, 0, 2);
  v12 = ftell;
  v13 = ftell(v11);
  fclose(v11);
  if ( v13 < 1 )
LABEL_17:
    byte_462D50 = 1;
  v32 = 0;
  v31 = &unk_4569F0;
  while ( 2 )
  {
    Filename[0] = 0;
    if ( byte_462D50 == 2 )
    {
      v14 = strlen(byte_45FAA0) + 1;
      v15 = (char *)&v32 + 3;
      do
        v16 = (v15++)[1];
      while ( v16 );
      memcpy(v15, byte_45FAA0, v14);
    }
    v17 = (int)((char *)v31 - 16);
    v18 = (char *)v31 - 16;
    do
      v19 = *(byte *)v17++;
    while ( v19 );
    v20 = v17 - (_DWORD)v18;
    v21 = (char *)&v32 + 3;
    do
      v22 = (v21++)[1];
    while ( v22 );
    memcpy(v21, v18, v20);
    v23 = fopen(aSanim_haf, "rb");
	//v23 = fopen(Filename, "rb");
    v24 = v23;
    if ( v23 )
    {
      fseek(v23, 0, 2);
      v25 = v12(v24);
      fclose(v24);
     if ( v25 > 0 && v25 != *(_DWORD *)v31 )
      {
        v30 = 20 * v32 + 4549088;
        v29 = "\nDEATH RALLY ERROR: File %s is not in original form!\n";
        goto LABEL_33;
      }
    }
    result = (int)((char *)v31 + 20);
    v28 = __OFSUB__((char *)v31 + 20, &dword_456A2C);
    v27 = (_UNKNOWN *)((char *)v31 + 20) - (_UNKNOWN *)&dword_456A2C < 0;
    ++v32;
    v31 = (char *)v31 + 20;
    if ( v27 ^ v28 )
      continue;
    return result;
  }
}


//----- (00428070) --------------------------------------------------------
void __cdecl sub_428070(int a1)
{
  char v1; // al@2
  char v2; // bl@2
  signed int v3; // edx@2
  signed int v4; // eax@3
  char v5; // cl@4
  char *v6; // eax@6
  char *v7; // edx@6
  char v8; // cl@7
  unsigned int v9; // eax@8
  char *v10; // edi@8
  char v11; // cl@9
  char *v12; // edi@10
  char v13; // al@11
  signed int v14; // edx@12
  signed int v15; // eax@13
  char v16; // cl@14

  dword_4466EC = 1953066569;
  dword_4466F0 = 1768710505;
  dword_4466F4 = 1092642170;
  dword_4466F8 = 2003127840;
  dword_4466FC = 1835091744;
  word_446700 = 101;
  dword_44671E = 1852403530;
  dword_446722 = 544096544;
  dword_446726 = 1936291909;
  dword_44672A = 1735289204;
  dword_44672E = 1835091744;
  word_446732 = 101;
  dword_446782 = 1769104723;
  dword_446786 = 1126198369;
  dword_44678A = 1701736047;
  dword_44678E = 1869182051;
  word_446792 = 110;
  dword_4467B4 = 1818323268;
  dword_4467B8 = 1685015840;
  word_4467BC = 28005;
  byte_4467BE = 0;
  dword_4467E6 = 2004053569;
  dword_456B9C = 1;
  dword_456B94 = 1;
  menuActive_4457F0[0] = 1;
  menuActive_4457F0[18] = 0;
  menuActive_4457F0[19] = 0;
  menuActive_4457F0[20] = 1;
  menuActive_4457F0[21] = 1;
  menuActive_4457F0[22] = 1;
  menuActive_4457F0[23] = 1;
  menuActive_4457F0[24] = 1;
  dword_4467EA = 1293972069;
  dword_4467EE = 1835361391;
  byte_4467F2 = 0;
  dword_445740 = 2;
  nullsub_1();
  nullsub_1();
  if ( a1 == 1 )
  {
    v1 = unk_461EC3;
    unk_461EC0[0] = unk_461EC1;
    unk_461EC3 = word_461EC4;
    v2 = unk_461EC2;
    unk_461EC2 = v1;
    HIBYTE(word_461EC4) = unk_461EC6;
    unk_461EC6 = unk_461EC7;
    unk_461EC7 = word_461EC8;
    HIBYTE(word_461EC8) = unk_461ECA;
    unk_461ECA = unk_461ECB;
    unk_461ECB = word_461ECC;
    HIBYTE(word_461ECC) = unk_461ECE;
    unk_461ECE = unk_461ECF;
    unk_461ECF = word_461ED0;
    HIBYTE(word_461ED0) = unk_461ED2;
    unk_461ED2 = unk_461ED3;
    dword_456B8C = 0;
    v3 = (signed int)&unk_462096;
    unk_461ED3 = word_461ED4;
    do
    {
      v4 = v3;
      do
      {
        v5 = *(byte *)v4;
        *(byte *)(v4 - 150) = *(byte *)v4;
        ++v4;
      }
      while ( v5 );
      v3 += 150;
    }
    while ( v3 < (signed int)&blacktx1Bpk );
    v6 = &byte_460840[108 * driverId];
    dword_462C4E = 2108717;
    v7 = &byte_460840[108 * driverId];
    do
      v8 = *v6++;
    while ( v8 );
    v9 = v6 - v7;
    v10 = (char *)&dword_462C4E - 1;
    do
      v11 = (v10++)[1];
    while ( v11 );
    memcpy(v10, v7, v9);
    v12 = (char *)&dword_462C4E - 1;
    do
      v13 = (v12++)[1];
    while ( v13 );
    memcpy(v12, " has left from Death Rally.", 0x1Cu);
    unk_461EC1 = unk_461EC2;
    unk_461EC2 = unk_461EC3;
    unk_461EC3 = word_461EC4;
    HIBYTE(word_461EC4) = unk_461EC6;
    unk_461EC6 = unk_461EC7;
    unk_461EC7 = word_461EC8;
    HIBYTE(word_461EC8) = unk_461ECA;
    unk_461ECA = unk_461ECB;
    unk_461ECB = word_461ECC;
    HIBYTE(word_461ECC) = unk_461ECE;
    unk_461ECE = unk_461ECF;
    unk_461ECF = word_461ED0;
    HIBYTE(word_461ED0) = unk_461ED2;
    unk_461ED2 = unk_461ED3;
    unk_461EC0[0] = v2;
    v14 = (signed int)&unk_462096;
    unk_461ED3 = word_461ED4;
    word_461ED4 = 0;
    do
    {
      v15 = v14;
      do
      {
        v16 = *(byte *)v15;
        *(byte *)(v15 - 150) = *(byte *)v15;
        ++v15;
      }
      while ( v16 );
      v14 += 150;
    }
    while ( v14 < (signed int)&blacktx1Bpk );
    LOBYTE(dword_462C4E) = 0;
  }
  if ( dword_456B90 )
  {
    drawMenu(2, 1);
    dword_456B9C = 0;
    dword_456B94 = 0;
    isMultiplayerGame = 0;
    dword_45E0A8 = 0;
    drawTransparentBlock(0, 371, 639, 109);
    drawBottomMenuText();
    refreshAllScreen();
  }
}
// 445740: using guessed type int dword_445740;
// 445802: using guessed type char byte_445802;
// 445803: using guessed type char byte_445803;
// 445804: using guessed type char byte_445804;
// 445805: using guessed type char byte_445805;
// 445806: using guessed type char byte_445806;
// 445807: using guessed type char byte_445807;
// 445808: using guessed type char byte_445808;
// 4466EC: using guessed type int dword_4466EC;
// 4466F0: using guessed type int dword_4466F0;
// 4466F4: using guessed type int dword_4466F4;
// 4466F8: using guessed type int dword_4466F8;
// 4466FC: using guessed type int dword_4466FC;
// 446700: using guessed type __int16 word_446700;
// 44671E: using guessed type int dword_44671E;
// 446722: using guessed type int dword_446722;
// 446726: using guessed type int dword_446726;
// 44672A: using guessed type int dword_44672A;
// 44672E: using guessed type int dword_44672E;
// 446732: using guessed type __int16 word_446732;
// 446782: using guessed type int dword_446782;
// 446786: using guessed type int dword_446786;
// 44678A: using guessed type int dword_44678A;
// 44678E: using guessed type int dword_44678E;
// 446792: using guessed type __int16 word_446792;
// 4467B4: using guessed type int dword_4467B4;
// 4467B8: using guessed type int dword_4467B8;
// 4467BC: using guessed type __int16 word_4467BC;
// 4467BE: using guessed type char byte_4467BE;
// 4467E6: using guessed type int dword_4467E6;
// 4467EA: using guessed type int dword_4467EA;
// 4467EE: using guessed type int dword_4467EE;
// 4467F2: using guessed type char byte_4467F2;
// 456B8C: using guessed type int dword_456B8C;
// 456B90: using guessed type int dword_456B90;
// 456B94: using guessed type int dword_456B94;
// 456B9C: using guessed type int dword_456B9C;
// 45E0A8: using guessed type int dword_45E0A8;
// 45EA04: using guessed type int isMultiplayerGame;
// 461EC4: using guessed type __int16;
// 461EC8: using guessed type __int16;
// 461ECC: using guessed type __int16;
// 461ED0: using guessed type __int16;
// 461ED4: using guessed type __int16;
// 462C4E: using guessed type int dword_462C4E;
// 463CE8: using guessed type int driverId;

//----- (004284E0) --------------------------------------------------------
signed int sub_4284E0()
{
  char *v0; // edx@1
  signed int v1; // ebp@1
  int v2; // eax@2
  signed int result; // eax@41
  int v4; // eax@42
  char v5; // [sp+13h] [bp-39h]@1
  char v6; // [sp+14h] [bp-38h]@1
  char v7; // [sp+15h] [bp-37h]@1
  char v8; // [sp+16h] [bp-36h]@1
  char v9; // [sp+17h] [bp-35h]@1
  char v10; // [sp+18h] [bp-34h]@1
  char v11; // [sp+19h] [bp-33h]@1
  char v12; // [sp+1Ah] [bp-32h]@1
  char v13; // [sp+1Bh] [bp-31h]@1
  char v14; // [sp+1Ch] [bp-30h]@1
  char v15; // [sp+1Dh] [bp-2Fh]@1
  char v16; // [sp+1Eh] [bp-2Eh]@1
  char v17; // [sp+1Fh] [bp-2Dh]@1
  char v18; // [sp+20h] [bp-2Ch]@1
  char v19; // [sp+21h] [bp-2Bh]@1
  char v20; // [sp+22h] [bp-2Ah]@1
  char v21; // [sp+24h] [bp-28h]@42

  v6 = 25;
  v7 = 15;
  v8 = 59;
  v9 = 60;
  v10 = 61;
  v11 = 62;
  v12 = 63;
  v13 = 64;
  v14 = 65;
  v15 = 66;
  v16 = 67;
  v17 = 68;
  v18 = 87;
  v19 = 88;
  v20 = 1;
  v5 = 0;
  v0 = &v6;
  v1 = 15;
  do
  {
    v2 = (unsigned __int8)*v0;
    if (configuration.accelerateKey == v2
      || configuration.brakeKey == v2
      || configuration.leftSteeringKey == v2
      || configuration.rightSteeringKey == v2
      || configuration.turboKey == v2
      || configuration.gunKey == v2
      || configuration.mineKey == v2
      || configuration.hornKey == v2 )
      v5 = 1;
    ++v0;
    --v1;
  }
  while ( v1 );
  if (configuration.accelerateKey == configuration.brakeKey
    || configuration.accelerateKey == configuration.leftSteeringKey
    || configuration.accelerateKey == configuration.rightSteeringKey
    || configuration.accelerateKey == configuration.turboKey
    || configuration.accelerateKey == configuration.gunKey
    || configuration.accelerateKey == configuration.mineKey
    || configuration.accelerateKey == configuration.hornKey
    || configuration.brakeKey == configuration.leftSteeringKey
    || configuration.brakeKey == configuration.rightSteeringKey
    || configuration.brakeKey == configuration.turboKey
    || configuration.brakeKey == configuration.gunKey
    || configuration.brakeKey == configuration.mineKey
    || configuration.brakeKey == configuration.hornKey
    || configuration.leftSteeringKey == configuration.rightSteeringKey
    || configuration.leftSteeringKey == configuration.turboKey
    || configuration.leftSteeringKey == configuration.gunKey
    || configuration.leftSteeringKey == configuration.mineKey
    || configuration.leftSteeringKey == configuration.hornKey
    || configuration.rightSteeringKey == configuration.turboKey
    || configuration.rightSteeringKey == configuration.gunKey
    || configuration.rightSteeringKey == configuration.mineKey
    || configuration.rightSteeringKey == configuration.hornKey
    || configuration.turboKey == configuration.gunKey
    || configuration.turboKey == configuration.mineKey
    || configuration.turboKey == configuration.hornKey
    || configuration.gunKey == configuration.mineKey
    || configuration.gunKey == configuration.hornKey
    || configuration.mineKey == configuration.hornKey
    || v5 == 1 )
  {
    memcpy(dword_461ED8, screenBuffer, 0x4B000u);
    createPopup(26, 194, 595, 86, 1);
    memcpy(&v21, "Invalid key configuration!", 0x1Bu);
    v4 = sub_41FBD0(&v21);
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, &v21, 130242 - v4);
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "Press any key to re-enter.", 150495);
    refreshAllScreen();
    loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
    eventDetected();
    sub_418090();
    while ( !eventDetected() )
      wait();
    eventDetected();
    sub_418090();
    memcpy(screenBuffer, dword_461ED8, 0x4B000u);
    refreshAllScreen();
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 4451A4: using guessed type int dword_4451A4;
// 45DC18: using guessed type int configuration.musicVolume;
// 45EA68: using guessed type int configuration.rightSteeringKey;
// 45FBF4: using guessed type int configuration.turboKey;
// 461270: using guessed type int configuration.mineKey;
// 461EA8: using guessed type int configuration.accelerateKey;
// 461FF8: using guessed type int configuration.leftSteeringKey;
// 463CA8: using guessed type int configuration.brakeKey;
// 463CE4: using guessed type int configuration.gunKey;
// 463D18: using guessed type int configuration.hornKe;

//----- (00428740) --------------------------------------------------------
signed int sub_428740()
{
  int v0; // ebp@1
  char v1; // bl@1
  int v2; // eax@15
  int v3; // ecx@24
  int v4; // eax@40
  signed int result; // eax@42
  char v6; // [sp+10h] [bp-28h]@40

  v0 = configuration.turboGamepad;
  v1 = 0;
  if (configuration.accelerateGamepad == (unsigned __int8)byte_456B01 )
    goto LABEL_11;
  if (configuration.accelerateGamepad != configuration.brakeGamepad
    && configuration.accelerateGamepad != configuration.leftSteeringGamepad
    && configuration.accelerateGamepad != configuration.rightSteeringGamepad
    && configuration.accelerateGamepad != configuration.turboGamepad)
  {
    if (configuration.accelerateGamepad != configuration.gunGamepad && configuration.accelerateGamepad != configuration.mineGamepad)
    {
      v0 = configuration.turboGamepad;
      goto LABEL_11;
    }
    v0 = configuration.turboGamepad;
  }
  v1 = 1;
LABEL_11:
  if (configuration.brakeGamepad != (unsigned __int8)byte_456B01 )
  {
    if (configuration.brakeGamepad == configuration.leftSteeringGamepad || configuration.brakeGamepad == configuration.rightSteeringGamepad || configuration.brakeGamepad == v0 )
      goto LABEL_46;
    v2 = configuration.gunGamepad;
    if (configuration.brakeGamepad == configuration.gunGamepad)
    {
LABEL_18:
      v1 = 1;
      goto LABEL_20;
    }
    if (configuration.brakeGamepad == configuration.mineGamepad)
    {
LABEL_46:
      v2 = configuration.gunGamepad;
      goto LABEL_18;
    }
  }
  v2 = configuration.gunGamepad;
LABEL_20:
  if (configuration.leftSteeringGamepad == (unsigned __int8)byte_456B01 )
  {
    v3 = configuration.mineGamepad;
  }
  else if (configuration.leftSteeringGamepad == configuration.rightSteeringGamepad || configuration.leftSteeringGamepad == v0 || configuration.leftSteeringGamepad == v2 )
  {
    v3 = configuration.mineGamepad;
    v1 = 1;
  }
  else
  {
    v3 = configuration.mineGamepad;
    if (configuration.leftSteeringGamepad == configuration.mineGamepad)
      v1 = 1;
  }
  if (configuration.rightSteeringGamepad != (unsigned __int8)byte_456B01 && (configuration.rightSteeringGamepad == v0 || configuration.rightSteeringGamepad == v2 || configuration.rightSteeringGamepad == v3) )
    v1 = 1;
  if ( v0 != (unsigned __int8)byte_456B01 && (v0 == v2 || v0 == v3) )
    v1 = 1;
  if ( (v2 == (unsigned __int8)byte_456B01 || v2 != v3) && v1 != 1 )
  {
    result = 0;
  }
  else
  {
    memcpy(dword_461ED8, screenBuffer, 0x4B000u);
    createPopup(26, 194, 595, 86, 1);
    memcpy(&v6, "Invalid gamepad configuration!", 0x1Fu);
    v4 = sub_41FBD0(&v6);
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, &v6, 130242 - v4);
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "Press any key to re-enter.", 150495);
    refreshAllScreen();
    loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
    eventDetected();
    sub_418090();
    while ( !eventDetected() )
      wait();
    eventDetected();
    sub_418090();
    memcpy(screenBuffer, dword_461ED8, 0x4B000u);
    refreshAllScreen();
    result = 1;
  }
  return result;
}


//----- (00428930) --------------------------------------------------------
int initDrivers()
{

	//TODO aqui hay que acoquinar todos los bucles porque se esta haciendo mal!

  signed int v0; // eax@1
  signed int v1; // esi@3
  int v2; // eax@3
  int v3; // edi@3
  int v4; // edi@5
  signed int v5; // esi@5
  int v6; // eax@6
  signed int v7; // ST10_4@6
  int v8; // eax@6
  int v9; // ecx@6
  signed int v10; // ST10_4@6
  int v11; // edx@6
  signed int v12; // ST10_4@6
  int v13; // eax@6
  int v14; // ecx@6
  char *v15; // edi@10
  int v16; // edx@10
  char v17; // al@11
  int v18; // ecx@13
  int v19; // eax@13
  int result; // eax@13
  int v21; // [sp+10h] [bp-F8h]@6
  signed int v22; // [sp+14h] [bp-F4h]@3
  int v23; // [sp+18h] [bp-F0h]@1
  int v24; // [sp+1Ch] [bp-ECh]@1
  __int16 v25; // [sp+20h] [bp-E8h]@1
  char v26; // [sp+22h] [bp-E6h]@1
  int v27; // [sp+23h] [bp-E5h]@1
  int v28; // [sp+27h] [bp-E1h]@1
  __int16 v29; // [sp+2Bh] [bp-DDh]@1
  char v30; // [sp+2Dh] [bp-DBh]@1
  int v31; // [sp+2Eh] [bp-DAh]@1
  int v32; // [sp+32h] [bp-D6h]@1
  __int16 v33; // [sp+36h] [bp-D2h]@1
  char v34; // [sp+38h] [bp-D0h]@1
  int v35; // [sp+39h] [bp-CFh]@1
  int v36; // [sp+3Dh] [bp-CBh]@1
  __int16 v37; // [sp+41h] [bp-C7h]@1
  char v38; // [sp+43h] [bp-C5h]@1
  int v39; // [sp+44h] [bp-C4h]@1
  int v40; // [sp+48h] [bp-C0h]@1
  __int16 v41; // [sp+4Ch] [bp-BCh]@1
  char v42; // [sp+4Eh] [bp-BAh]@1
  int v43; // [sp+4Fh] [bp-B9h]@1
  int v44; // [sp+53h] [bp-B5h]@1
  __int16 v45; // [sp+57h] [bp-B1h]@1
  char v46; // [sp+59h] [bp-AFh]@1
  int v47; // [sp+5Ah] [bp-AEh]@1
  int v48; // [sp+5Eh] [bp-AAh]@1
  __int16 v49; // [sp+62h] [bp-A6h]@1
  char v50; // [sp+64h] [bp-A4h]@1
  int v51; // [sp+65h] [bp-A3h]@1
  int v52; // [sp+69h] [bp-9Fh]@1
  __int16 v53; // [sp+6Dh] [bp-9Bh]@1
  char v54; // [sp+6Fh] [bp-99h]@1
  int v55; // [sp+70h] [bp-98h]@1
  int v56; // [sp+74h] [bp-94h]@1
  char v57; // [sp+78h] [bp-90h]@1
  __int16 v58; // [sp+79h] [bp-8Fh]@1
  int v59; // [sp+7Bh] [bp-8Dh]@1
  int v60; // [sp+7Fh] [bp-89h]@1
  __int16 v61; // [sp+83h] [bp-85h]@1
  char v62; // [sp+85h] [bp-83h]@1
  int v63; // [sp+86h] [bp-82h]@1
  int v64; // [sp+8Ah] [bp-7Eh]@1
  __int16 v65; // [sp+8Eh] [bp-7Ah]@1
  char v66; // [sp+90h] [bp-78h]@1
  int v67; // [sp+91h] [bp-77h]@1
  int v68; // [sp+95h] [bp-73h]@1
  __int16 v69; // [sp+99h] [bp-6Fh]@1
  char v70; // [sp+9Bh] [bp-6Dh]@1
  int v71; // [sp+9Ch] [bp-6Ch]@1
  int v72; // [sp+A0h] [bp-68h]@1
  __int16 v73; // [sp+A4h] [bp-64h]@1
  char v74; // [sp+A6h] [bp-62h]@1
  int v75; // [sp+A7h] [bp-61h]@1
  int v76; // [sp+ABh] [bp-5Dh]@1
  __int16 v77; // [sp+AFh] [bp-59h]@1
  char v78; // [sp+B1h] [bp-57h]@1
  int v79; // [sp+B2h] [bp-56h]@1
  int v80; // [sp+B6h] [bp-52h]@1
  __int16 v81; // [sp+BAh] [bp-4Eh]@1
  char v82; // [sp+BCh] [bp-4Ch]@1
  int v83; // [sp+BDh] [bp-4Bh]@1
  int v84; // [sp+C1h] [bp-47h]@1
  __int16 v85; // [sp+C5h] [bp-43h]@1
  char v86; // [sp+C7h] [bp-41h]@1
  int v87; // [sp+C8h] [bp-40h]@1
  int v88; // [sp+CCh] [bp-3Ch]@1
  char v89; // [sp+D0h] [bp-38h]@1
  __int16 v90; // [sp+D1h] [bp-37h]@1
  int v91; // [sp+D3h] [bp-35h]@1
  int v92; // [sp+D7h] [bp-31h]@1
  __int16 v93; // [sp+DBh] [bp-2Dh]@1
  char v94; // [sp+DDh] [bp-2Bh]@1
  int v95; // [sp+DEh] [bp-2Ah]@1
  int v96; // [sp+E2h] [bp-26h]@1
  __int16 v97; // [sp+E6h] [bp-22h]@1
  char v98; // [sp+E8h] [bp-20h]@1
  int v99; // [sp+E9h] [bp-1Fh]@1
  int v100; // [sp+EDh] [bp-1Bh]@1
  __int16 v101; // [sp+F1h] [bp-17h]@1
  char v102; // [sp+F3h] [bp-15h]@1
  int v103; // [sp+F4h] [bp-14h]@1
  int v104; // [sp+F8h] [bp-10h]@1
  int v105; // [sp+FCh] [bp-Ch]@1
  int v106; // [sp+100h] [bp-8h]@1
  int v107; // [sp+104h] [bp-4h]@1

  v23 = 541933907; //SAM
  v27 = 1162756426; //JANE
  v24 = 1162170451; //SPEED
  v25 = 68;
  v30 = 0;
  v28 = 1313818656;
  v29 = 16708;
  v33 = 19781;
  v31 = 1162564932;
  v32 = 1263881760;
  v36 = 1229856857;
  v34 = 0;
  v35 = 1414742350;
  v39 = 1330925389;
  v37 = 19267;
  v38 = 0;
  v42 = 0;
  v40 = 1095573586;
  v41 = 22866;
  v45 = 0;
  v43 = 541344077;
  v44 = (int)((char *)&loc_43414A + 3);
  v46 = 0;
  v47 = 1414807885;
  v48 = 1279872288;
  v49 = 21061;
  v50 = 0;
  v51 = 1313426499;
  v52 = 1163337812;
  v53 = 21587;
  v54 = 0;
  v55 = 541410636;
  v56 = 1162037590;
  v57 = 0;
  v59 = 1263681860;
  v26 = 0;
  v58 = 0;
  v60 = 1146704416;
  v61 = 21061;
  v62 = 0;
  v65 = 75;
  v69 = 19267;
  v72 = 1213155872;
  v63 = 1195725383;
  v64 = 1128615968;
  v76 = 1413567264;
  v67 = 1499092307;
  v68 = 1330926368;
  v80 = 1330926368;
  v70 = 0;
  v71 = 1313821257;
  v83 = 1397049668;
  v73 = 78;
  v75 = 1230131021;
  v86 = 0;
  v77 = 79;
  v79 = 1380272195;
  v89 = 0;
  v81 = 17742;
  v82 = 0;
  v93 = 78;
  v84 = 1243630661;
  v85 = 17743;
  v97 = 19532;
  v87 = 541280589;
  v88 = 1380532548;
  v100 = 1411404357;
  v91 = 542787916;
  v92 = 1162105409;
  v103 = 0;
  v95 = 1430736706;
  v96 = 1229070419;
  v104 = 0;
  v98 = 0;
  v99 = 1297236294;
  v105 = 0;
  v66 = 0;
  v74 = 0;
  v78 = 0;
  v90 = 0;
  v94 = 0;
  v101 = 17477;
  v102 = 0;
  v106 = 0;
  v107 = 0;
  driverId = 19;
  dword_456B9C = 0;
  consecutiveWins_456BA8 = 0;
  noPaintJob_456BAC = 0;
  allCarsCrash_456BB0 = 0;
  selectedRaceId = 0;
  sub_4236D0(); //esto calcula la posicion con los putnos pero no se usa :S
  dword_456B10 = 0;
  dword_456B68 = 0;

  //108 es el tamao de cada estructura de piloto esta seteando a cero cosas
  int index = 0;
  do {
	  drivers[index].mines = 0;
	  drivers[index].spikes = 0;
	  drivers[index].rocket = 0;
	  drivers[index].sabotage = 0;
  } while (++index < 20);
  /*v0 = (signed int)dword_4608A0;
  
  do
  {
    *(_DWORD *)(v0 - 4) = 0;
    *(_DWORD *)v0 = 0;
    *(_DWORD *)(v0 + 4) = 0;
    *(_DWORD *)(v0 + 8) = 0;
    v0 += 108;
  }
  while ( v0 < (signed int)&unk_461110 );*/

  //define los coches
  drivers[0].carType = 5;
  drivers[1].carType = 5;
  drivers[2].carType = 5;
  drivers[3].carType = 4;
  drivers[4].carType = 4;
  drivers[5].carType = 4;
  drivers[6].carType = 4;
  drivers[7].carType = 3;
  drivers[8].carType = 3;
  drivers[9].carType = 3;
  drivers[10].carType = 2;
  drivers[11].carType = 2;
  drivers[12].carType = 2;
  drivers[13].carType = 2;
  drivers[14].carType = 1;
  drivers[15].carType = 1;
  drivers[16].carType = 1;
  drivers[17].carType = 0;
  drivers[18].carType = 0;
  drivers[19].carType = 0;

  /*dword_46085C[0] = 5;
  dword_4608C8 = 5;
  dword_460934 = 5;
  dword_4609A0 = 4;
  dword_460A0C = 4;
  dword_460A78 = 4;
  dword_460AE4 = 4;
  dword_460B50 = 3;
  dword_460BBC = 3;
  dword_460C28 = 3;
  dword_460C94 = 2;
  dword_460D00 = 2;
  dword_460D6C = 2;
  dword_460DD8 = 2;
 
  dword_460E44 = 1;
  dword_460EB0 = 1;
  dword_460F1C = 1;
  dword_460F88 = 0;
  dword_460FF4 = 0;
  dword_461060 = 0;*/


  
  /*v1 = 18;
  v2 = 0;
  v3 = (int)dword_460884;
  v22 = 18;
  //esto esta seteando los puntos iniciales de los compatidores solo de los 19 primeros*/
  drivers[0].points = 100;
  drivers[1].points = 86;
  drivers[2].points = 77;
  drivers[3].points = 69;
  drivers[4].points = 63;
  drivers[5].points = 57;
  drivers[6].points = 51;
  drivers[7].points = 46;
  drivers[8].points = 42;
  drivers[9].points = 37;
  drivers[10].points = 33;
  drivers[11].points = 28;
  drivers[12].points = 25;
  drivers[13].points = 20;
  drivers[14].points = 17;
  drivers[15].points = 13;
  drivers[16].points = 9;
  drivers[17].points = 5;
  drivers[18].points = 2;
  drivers[19].points = 0;
  /*do
  {
	   /**(_DWORD *)v3 = (unsigned __int64)((100.0
                                      - (double)(signed int)(unsigned __int64)(__FYL2X__(
                                                                                 (double)(v2 + 1),
                                                                                 0.30102999566398119802)
                                                                             * 77.0)
                                      + (double)v22 * 5.5
                                      + 2.0)
                                     * 0.5);*/
   /* *(_DWORD *)v3 = (unsigned __int64)((100.0
                                      - (double)(signed int)(unsigned __int64)(((double)(v2 + 1)*log(0.30102999566398119802)
                                                                             * 77.0) * 1.44269504088896340736)
                                      + (double)v22 * 5.5
                                      + 2.0)
                                     * 0.5);
    --v1;
    v3 += 108;
    ++v2;
    v22 = v1;
  }
  while ( v1 > -1 );
  v4 = 0;*/

  int offset = 0;
  index = 0;
  do {
	  if (drivers[driverId].face == index) {
		  offset = 1;
	  }
	  drivers[index].face = index+ offset;
	  memcpy(drivers[index].name, driverNames[index+ offset], strlen(driverNames[index+offset]));
	  drivers[index].racesWon = 0;
	  drivers[index].totalRaces = 0;
	  drivers[index].unk_460894 = 0;
	  drivers[index].totalIncome = 0;
	  v6 = rand();
	  drivers[index].damage = 0;
	  drivers[index].money = v6 % 100000;
	  v7 = cars[drivers[index].carType].engineUpgrades;
	  v8 = rand();
	  v9 = drivers[index].carType;
	  drivers[index].engine= v8 % v7;
	  v10 = cars[v9].tireUpgrades;
	  v11 = rand() % v10;
	  v12 = cars[v9].armourUpgrades;
	  drivers[index].tire = v11; //este es el nivel de ruedas
	  v13 = rand();
	  v14 = index;
	  drivers[index].armour = v13 % v12; //este es el nivel de armour
	  drivers[index].carMoneyCost = cars[v9].cost;
	  v21 = index + 1;
	  drivers[index].rank = index + 1; ///esta es la posicion
	  
	  
  } while (++index < 20);
 /* v5 = (signed int)dword_460890;
  do
  {
    *(_DWORD *)(v5 - 4) = 0; //puntos
    *(_DWORD *)v5 = 0; //no se lo que es
    *(_DWORD *)(v5 + 4) = 0; //no se que es
    *(_DWORD *)(v5 + 8) = 0;//no se que es
    v6 = rand();
    *(_DWORD *)(v5 - 68) = 0;   //esto no se loo que es 4c
    *(_DWORD *)(v5 - 32) = v6 % 100000; //el dinero que se tiene
   v7 = dword_44E5F0[440 * *(_DWORD *)(v5 - 52)];  //este es el coche
    v8 = rand();
    v9 = 440 * *(_DWORD *)(v5 - 52);
	*(_DWORD *)(v5 - 64) = v8 % v7; //este es el nivel de motor
    v10 = dword_44E5F4[v9];
    v11 = rand() % v10;
    v12 = dword_44E5F8[440 * *(_DWORD *)(v5 - 52)];
    *(_DWORD *)(v5 - 60) = v11; //este es el nivel de ruedas
    v13 = rand();
    v14 = v4;
    *(_DWORD *)(v5 - 56) = v13 % v12; //este es el nivel de armour
    *(_DWORD *)(v5 - 20) = *(&dword_44DF5C + 440 * *(_DWORD *)(v5 - 52));  //el coste del coche
    v21 = v4 + 1;
    *(_DWORD *)(v5 - 8) = v4 + 1; ///esta es la posicion

	//esto setea el nombre
    while ( *((byte *)&v103 + v14) || v14 == dword_460880[27 * driverId] )
      ++v14;
	  //esto devuelve el nombre del piloto
    v15 = (char *)&v23 + 11 * v14;
    *((byte *)&v103 + v14) = 1;
    v16 = v5 - (_DWORD)v15 - 80;
    do
    {
      v17 = *v15;
      v15[v16] = *v15;
      ++v15;
    }
    while ( v17 );
    v4 = v21;
    *(_DWORD *)(v5 - 16) = v14;
    *(_DWORD *)(v5 - 36) = v14; //es el color
    v5 += 108;
  }
  while ( v5 < (signed int)&unk_461094 );*/
 // v18 = dword_44DF5C;

  drivers[19].money = INITIAL_MONEY;
  drivers[19].damage = 0;
  drivers[19].engine = 0;
  drivers[19].tire = 0;
  drivers[19].armour= 0;
  drivers[19].carType = 0;
  drivers[19].totalRaces = 0;
  drivers[19].unk_460894 = 0;
  drivers[19].points = 0;
  drivers[19].totalIncome = 0;
  drivers[19].loanType = NO_LOAN;
  drivers[19].loanRaces = -1;
  
  /*v19 = 27 * driverId;
  dword_460870[v19] = 495;
  dword_46084C[v19] = 0;
  dword_460850[v19] = 0;
  dword_460858[v19] = 0;
  dword_460854[v19] = 0;
  dword_46085C[v19] = 0;
  dword_46087C[v19] = v18;
  dword_460888[v19] = 20;
  dword_46088C[v19] = 0;
  dword_460890[v19] = 0;
  dword_460894[v19] = 0;
  dword_460884[v19] = 0;
  dword_460898[v19] = 0;
  dword_460874[v19] = -1;
  dword_460878[v19] = -1;*/
  result = sub_4224E0();
  continueAnimCurrentFrame_4611D0 = 0;
  armourAnimFrameDirection_45F034 = 0;
  armourAnimCurrentFrame_461288 = 0;
  tireAnimCurrentFrame_45F034 = 0;
  engineAnimCurrentFrame_462D80 = 0;
  carAnimCurrentFrame_45FBA0 = 0;
  actualCarSelected = 1;
  return result;
}

//----- (00428FD0) --------------------------------------------------------
int reloadContinueAnimation()
{
  signed int v0; // eax@1
  const char *v2; // [sp-30h] [bp-30h]@3

  drawImageWithPosition2((int)bases45Bpk, 96, 96, (int)((char *)screenBuffer + 162352));
  createPopup(144, 114, 384, 119, 1);
  v0 = setUndergroundMarketPrices();
  dword_456B84 = v0;
  if ( useWeapons && v0 )
  {
    writeTextInScreen(aContinue, 79530);
    writeTextInScreen((const char *)&unk_454A80, 89770);
    writeTextInScreen(aExitTheShopAnd, 100010);
    writeTextInScreen(aUndergroundMar, 110250);
    writeTextInScreen((const char *)&unk_454AF8, 120490);
    v2 = aPressEscForPre;
  }
  else
  {
    writeTextInScreen(aContinue_0, 79530);
    writeTextInScreen((const char *)&unk_454990, 89770);
    writeTextInScreen(aExitTheShopA_0, 100010);
    writeTextInScreen(aSignUp_, 110250);
    writeTextInScreen((const char *)&unk_454A08, 120490);
    v2 = aPressEscForP_0;
  }
  writeTextInScreen(v2, 130730);
  return drawMenuAnimation(432, 269, continueAnimCurrentFrame_4611D0, (int)contaniBpk, (int)continueAnimFramesSize_4611D0);
}
// 4456E4: using guessed type int useWeapons;
// 4462A8: using guessed type int continueAnimFramesSize_4611D0[];
// 456B84: using guessed type int dword_456B84;
// 4611D0: using guessed type int continueAnimCurrentFrame_4611D0;

//----- (00429100) --------------------------------------------------------
int drawShopAnimationAndRightSide()
{
  void *v1; // [sp-10h] [bp-10h]@2
  int v2; // [sp-4h] [bp-4h]@2

  if ( isMultiplayerGame )
  {
    v2 = (int)((char *)screenBuffer + 58880);
    v1 = shoptxt2Bpk;
  }
  else
  {
    v2 = (int)((char *)screenBuffer + 58880);
    v1 = shoptxt1Bpk;
  }
  drawImageWithPosition((int)v1, 640, 16, v2);
  drawCarRightSide();
  if ( !dword_456B74
    && consecutiveWins_456BA8 != 3
    && noPaintJob_456BAC != 1
    && allCarsCrash_456BB0 != 1
    && !drugQuest_456BB4
    && !killOneQuest_456BB8
    && drivers[driverId].loanRaces != 4 )
    drawBorder(426, 243, 108, 114);
  reloadCarAnimation2();
  reloadEngineAnimation2();
  reloadTireAnimation2();
  reloadArmourAnimation2();
  reloadRepairAnimation();
  return reloadContinueAnimation();
}

//----- (004291D0) --------------------------------------------------------
int sub_4291D0()
{
  int result; // eax@1

  *(_DWORD *)aStartANewGam_0 = *(_DWORD *)"Start A New Game";
  *(_DWORD *)&aStartANewGam_0[4] = *(_DWORD *)"t A New Game";
  *(_DWORD *)&aStartANewGam_0[8] = *(_DWORD *)"New Game";
  *(_DWORD *)&aStartANewGam_0[12] = *(_DWORD *)"Game";
  aStartANewGam_0[16] = aStartANewGame[16];
  *(_DWORD *)aStartRacing = 1918989395;
  *(_DWORD *)&aStartRacing[4] = 1632772212;
  *(_DWORD *)&aStartRacing[8] = 1735289187;
  aStartRacing[12] = 0;
  menuActive_4457F0[10] = 0;
  menuActive_4457F0[11] = 0;
  menuActive_4457F0[13] = 0;
  showHardWarningRace = 0;
  showMediumWarningRace = 0;
  dword_456B78 = 0;
  dword_456B74 = 0;
  result = initDrivers();
  dword_445724 = 0;
  dword_464F44 = 1;
  return result;
}


//----- (00429280) --------------------------------------------------------
void __fastcall easyRaceResults(int ecx0, int a2, int a1)
{
  signed int v3; // edi@37
  int v4; // eax@39
  int v5; // ecx@46
  int v6; // ST24_4@49
  int v7; // ecx@50
  int v8; // ST24_4@53
  int v9; // eax@53
  int v10; // ecx@54
  int v11; // ST24_4@57
  int v12; // [sp+0h] [bp-4h]@1

  v12 = ecx0;
  
  if ( selectedRace_462CE8 )
  {
    sub_424510(0, 3, 0);

	LOBYTE(v12) = racePositions[0][3];
	BYTE1(v12) = racePositions[0][2];
	BYTE2(v12) = racePositions[0][1];
	BYTE3(v12) = racePositions[0][0];
	

  /*  LOBYTE(v12) = BYTE3(dword_45EB50[0]);
    BYTE1(v12) = BYTE2(dword_45EB50[0]);
    BYTE2(v12) = BYTE1(dword_45EB50[0]);
    BYTE3(v12) = LOBYTE(dword_45EB50[0]);*/
  }
  else
  {
    switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v12) = racePositions[0][0];
        break;
      case 2:
        BYTE1(v12) = racePositions[0][0];
        break;
      case 3:
        BYTE2(v12) = racePositions[0][0];
        break;
      case 4:
        BYTE3(v12) = racePositions[0][0];
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v12) = racePositions[0][1];
        break;
      case 2:
        BYTE1(v12) = racePositions[0][1];
        break;
      case 3:
        BYTE2(v12) = racePositions[0][1];
        break;
      case 4:
        BYTE3(v12) = racePositions[0][1];
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v12) = racePositions[0][2];
        break;
      case 2:
        BYTE1(v12) = racePositions[0][2];
        break;
      case 3:
        BYTE2(v12) = racePositions[0][2];
        break;
      case 4:
        BYTE3(v12) = racePositions[0][2];
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v12) = racePositions[0][3];
        break;
      case 2:
        BYTE1(v12) = racePositions[0][3];
        break;
      case 3:
        BYTE2(v12) = racePositions[0][3];
        break;
      case 4:
        BYTE3(v12) = racePositions[0][3];
        break;
    }
	/* switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v12) = LOBYTE(dword_45EB50[0]);
        break;
      case 2:
        BYTE1(v12) = LOBYTE(dword_45EB50[0]);
        break;
      case 3:
        BYTE2(v12) = LOBYTE(dword_45EB50[0]);
        break;
      case 4:
        BYTE3(v12) = LOBYTE(dword_45EB50[0]);
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v12) = BYTE1(dword_45EB50[0]);
        break;
      case 2:
        BYTE1(v12) = BYTE1(dword_45EB50[0]);
        break;
      case 3:
        BYTE2(v12) = BYTE1(dword_45EB50[0]);
        break;
      case 4:
        BYTE3(v12) = BYTE1(dword_45EB50[0]);
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v12) = BYTE2(dword_45EB50[0]);
        break;
      case 2:
        BYTE1(v12) = BYTE2(dword_45EB50[0]);
        break;
      case 3:
        BYTE2(v12) = BYTE2(dword_45EB50[0]);
        break;
      case 4:
        BYTE3(v12) = BYTE2(dword_45EB50[0]);
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v12) = BYTE3(dword_45EB50[0]);
        break;
      case 2:
        BYTE1(v12) = BYTE3(dword_45EB50[0]);
        break;
      case 3:
        BYTE2(v12) = BYTE3(dword_45EB50[0]);
        break;
      case 4:
        BYTE3(v12) = BYTE3(dword_45EB50[0]);
        break;
    }*/
  }
  if ( !a1 )
  {
    sub_424420();
    drawImageWithPosition((int)graphicsGeneral.raceeasBpk, 272, 20, (int)((char *)screenBuffer + 54114));
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Easy Race Results", 55440);
    drawRightPositions(4, (int)&v12);
  }
  v3 = 0;
  do
  {
    if ( !a1 )
    {
      v4 = *((byte *)&v12 + v3);
      if (drivers[v4].damage != 100 )
		  //if (dword_46084C[27 * v4] != 100)
      {
        if ( v4 == driverId && lapped_456BC0 == 1 )
          goto LABEL_60;
        drawImageWithPosition((int)graphicsGeneral.ptseasyBpk, 42, 18, (int)((char *)screenBuffer + 12160 * v4 + 55897));
      }
    }
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        v7 = BYTE1(v12);
		//v7 = 27 * BYTE1(v12);
        if (drivers[v7].damage != 100 && (BYTE1(v12) != driverId || lapped_456BC0 != 1) )
			//if (dword_46084C[v7] != 100 && (BYTE1(v12) != driverId || lapped_456BC0 != 1))
        {
          v8 = 12160 * BYTE1(v12) + 57190;
          v9 = (int)graphicsGeneral.fmed1aBpk;
          drivers[v7].points += 2;
		  //dword_460884[v7] += 2;
          drawTextWithFont(v9, (int)&unk_445928, "+2", v8);
        }
      }
      else if ( v3 == 2 )
      {
        v5 =  BYTE2(v12);
		//v5 = 27 * BYTE2(v12);
        if (drivers[v5].damage != 100 && (BYTE2(v12) != driverId || lapped_456BC0 != 1) )
	//if ( dword_46084C[v5] != 100 && (BYTE2(v12) != driverId || lapped_456BC0 != 1) )
        {
          v6 = 12160 * BYTE2(v12) + 57190;
          ++drivers[v5].points;
		  // ++dword_460884[v5];
          drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+1", v6);
        }
      }
    }
    else
    {
      v10 = (unsigned __int8)v12;
	  //v10 = 27 * (unsigned __int8)v12;
      if (drivers[v10].damage != 100 && ((unsigned __int8)v12 != driverId || lapped_456BC0 != 1) )
		  //if (dword_46084C[v10] != 100 && ((unsigned __int8)v12 != driverId || lapped_456BC0 != 1))
      {
        v11 = 12160 * (unsigned __int8)v12 + 57190;
       drivers[v10].points += 3;
		//dword_460884[v10] += 3;
        drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+3", v11);
      }
    }
    ++v3;
  }
  while ( v3 < 3 );
  if ( a1 )
    return;
LABEL_60:
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
  refreshAllScreen();
}

//----- (004295E0) --------------------------------------------------------
void __fastcall mediumRaceResults(int ecx0, int a2, int a1)
{
  signed int v3; // edi@37
  int v4; // eax@39
  int v5; // ecx@46
  int v6; // ST24_4@49
  int v7; // ecx@50
  int v8; // ST24_4@53
  int v9; // eax@53
  int v10; // ecx@54
  int v11; // ST24_4@57
  unsigned __int8 v12; // di@60
  signed int v13; // esi@60
  int v14; // ST24_4@61
  int v15; // ST20_4@61
  int v16; // eax@61
  int v17; // [sp+0h] [bp-4h]@1

  v17 = ecx0;
  if ( selectedRace_462CE8 == 1 )
  {
    switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v17) = racePositions[1][0];
        break;
      case 2:
        BYTE1(v17) = racePositions[1][0];
        break;
      case 3:
        BYTE2(v17) = racePositions[1][0];
        break;
      case 4:
        BYTE3(v17) = racePositions[1][0];
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v17) = racePositions[1][1];
        break;
      case 2:
        BYTE1(v17) = racePositions[1][1];
        break;
      case 3:
        BYTE2(v17) = racePositions[1][1];
        break;
      case 4:
        BYTE3(v17) = racePositions[1][1];
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v17) = racePositions[1][2];
        break;
      case 2:
        BYTE1(v17) = racePositions[1][2];
        break;
      case 3:
        BYTE2(v17) = racePositions[1][2];
        break;
      case 4:
        BYTE3(v17) = racePositions[1][2];
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v17) = racePositions[1][3];
        break;
      case 2:
        BYTE1(v17) = racePositions[1][3];
        break;
      case 3:
        BYTE2(v17) = racePositions[1][3];
        break;
      case 4:
        BYTE3(v17) = racePositions[1][3];
        break;
    }
	/*switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v17) = dword_45EB54;
        break;
      case 2:
        BYTE1(v17) = dword_45EB54;
        break;
      case 3:
        BYTE2(v17) = dword_45EB54;
        break;
      case 4:
        BYTE3(v17) = dword_45EB54;
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v17) = BYTE1(dword_45EB54);
        break;
      case 2:
        BYTE1(v17) = BYTE1(dword_45EB54);
        break;
      case 3:
        BYTE2(v17) = BYTE1(dword_45EB54);
        break;
      case 4:
        BYTE3(v17) = BYTE1(dword_45EB54);
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v17) = BYTE2(dword_45EB54);
        break;
      case 2:
        BYTE1(v17) = BYTE2(dword_45EB54);
        break;
      case 3:
        BYTE2(v17) = BYTE2(dword_45EB54);
        break;
      case 4:
        BYTE3(v17) = BYTE2(dword_45EB54);
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v17) = BYTE3(dword_45EB54);
        break;
      case 2:
        BYTE1(v17) = BYTE3(dword_45EB54);
        break;
      case 3:
        BYTE2(v17) = BYTE3(dword_45EB54);
        break;
      case 4:
        BYTE3(v17) = BYTE3(dword_45EB54);
        break;
    }*/
  }
  else
  {
    sub_424510(0, 3, 1);
	
	LOBYTE(v17) = racePositions[1][3];
	BYTE1(v17) = racePositions[1][2];
	BYTE2(v17) = racePositions[1][1];
	BYTE3(v17) = racePositions[1][0];
    /*LOBYTE(v17) = BYTE3(dword_45EB54);
    BYTE1(v17) = BYTE2(dword_45EB54);
    BYTE2(v17) = BYTE1(dword_45EB54);
    BYTE3(v17) = dword_45EB54;*/
  }
  if ( !a1 )
  {
    sub_424420();
    drawImageWithPosition((int)graphicsGeneral.racemedBpk, 272, 20, (int)((char *)screenBuffer + 54114));
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Medium Race Results", 55440);
    drawRightPositions(4, (int)&v17);
  }
  v3 = 0;
  do
  {
    if ( !a1 )
	{
      v4 = *((byte *)&v17 + v3);
      if (drivers[v4].damage != 100 )
      {
        if ( v4 == driverId && lapped_456BC0 == 1 )
          goto LABEL_60;
        drawImageWithPosition((int)graphicsGeneral.ptsmedBpk, 42, 18, (int)((char *)screenBuffer + 12160 * v4 + 55897));
      }
    }
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        v7 =  BYTE1(v17);
        if (drivers[v7].damage != 100 && (BYTE1(v17) != driverId || lapped_456BC0 != 1) )
        {
          v8 = 12160 * BYTE1(v17) + 57190;
          v9 = (int)graphicsGeneral.fmed1aBpk;
		  drivers[v7].points += 3;
          drawTextWithFont(v9, (int)&unk_445928, "+3", v8);
        }
      }
      else if ( v3 == 2 )
      {
        v5 =  BYTE2(v17);
        if (drivers[v5].damage != 100 && (BYTE2(v17) != driverId || lapped_456BC0 != 1) )
        {
          v6 = 12160 * BYTE2(v17) + 57190;
          ++drivers[v5].points;
          drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+1", v6);
        }
      }
    }
    else
    {
      v10 = (unsigned __int8)v17;
      if (drivers[v10].damage != 100 && ((unsigned __int8)v17 != driverId || lapped_456BC0 != 1) )
      {
        v11 = 12160 * (unsigned __int8)v17 + 57190;
		drivers[v10].points += 5;
        drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+5", v11);
      }
    }
    ++v3;
  }
  while ( v3 < 3 );
  if ( a1 )
    return;
LABEL_60:
  v12 = 0;
  v13 = 0;
  //v13 = (signed int)dword_45FC44;
  do
  {
    v14 = (convertColorToPaletteColor((palette1[v13+2]), 6553600) + 0x8000) >> 16;
    v15 = (convertColorToPaletteColor(palette1[v13 + 1], 6553600) + 0x8000) >> 16;
    v16 = convertColorToPaletteColor((palette1[v13 ]), 6553600);
    setPaletteAndGetValue(v12, (v16 + 0x8000) >> 16, v15, v14);
    v13 += 3;
    ++v12;
  }
  while ( v13 < maxPaletteEntries );
  refreshAllScreen();
}


//----- (00429990) --------------------------------------------------------
void __fastcall hardRaceResults(int ecx0, int a2, int a1)
{
  signed int v3; // edi@37
  int v4; // eax@39
  int v5; // ecx@46
  int v6; // ST1C_4@49
  int v7; // ecx@50
  int v8; // ST1C_4@53
  int v9; // eax@53
  int v10; // ecx@54
  int v11; // ST1C_4@57
  unsigned __int8 v12; // di@60
  signed int v13; // esi@60
  int v14; // ST1C_4@61
  int v15; // ST18_4@61
  int v16; // eax@61
  int v17; // [sp+0h] [bp-4h]@1

  v17 = ecx0;
  if ( selectedRace_462CE8 == 2 )
  {
    switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v17) = racePositions[2][0];
        break;
      case 2:
        BYTE1(v17) = racePositions[2][0];
        break;
      case 3:
        BYTE2(v17) = racePositions[2][0];
        break;
      case 4:
        BYTE3(v17) = racePositions[2][0];
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v17) = racePositions[2][1];
        break;
      case 2:
        BYTE1(v17) = racePositions[2][1];
        break;
      case 3:
        BYTE2(v17) = racePositions[2][1];
        break;
      case 4:
        BYTE3(v17) = racePositions[2][1];
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v17) = racePositions[2][2];
        break;
      case 2:
        BYTE1(v17) = racePositions[2][2];
        break;
      case 3:
        BYTE2(v17) = racePositions[2][2];
        break;
      case 4:
        BYTE3(v17) = racePositions[2][2];
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v17) = racePositions[2][3];
        break;
      case 2:
        BYTE1(v17) = racePositions[2][3];
        break;
      case 3:
        BYTE2(v17) = racePositions[2][3];
        break;
      case 4:
        BYTE3(v17) = racePositions[2][3];
        break;
    }
	/* switch ( dword_4A7AA0[0] )
    {
      case 1:
        LOBYTE(v17) = dword_45EB58;
        break;
      case 2:
        BYTE1(v17) = dword_45EB58;
        break;
      case 3:
        BYTE2(v17) = dword_45EB58;
        break;
      case 4:
        BYTE3(v17) = dword_45EB58;
        break;
    }
    switch ( dword_4A7AF4 )
    {
      case 1:
        LOBYTE(v17) = BYTE1(dword_45EB58);
        break;
      case 2:
        BYTE1(v17) = BYTE1(dword_45EB58);
        break;
      case 3:
        BYTE2(v17) = BYTE1(dword_45EB58);
        break;
      case 4:
        BYTE3(v17) = BYTE1(dword_45EB58);
        break;
    }
    switch ( dword_4A7B48 )
    {
      case 1:
        LOBYTE(v17) = BYTE2(dword_45EB58);
        break;
      case 2:
        BYTE1(v17) = BYTE2(dword_45EB58);
        break;
      case 3:
        BYTE2(v17) = BYTE2(dword_45EB58);
        break;
      case 4:
        BYTE3(v17) = BYTE2(dword_45EB58);
        break;
    }
    switch ( dword_4A7B9C )
    {
      case 1:
        LOBYTE(v17) = BYTE3(dword_45EB58);
        break;
      case 2:
        BYTE1(v17) = BYTE3(dword_45EB58);
        break;
      case 3:
        BYTE2(v17) = BYTE3(dword_45EB58);
        break;
      case 4:
        BYTE3(v17) = BYTE3(dword_45EB58);
        break;
    }*/
  }
  else
  {
    sub_424510(0, 3, 2);

	
    LOBYTE(v17) = racePositions[2][3];
    BYTE1(v17) = racePositions[2][2];
    BYTE2(v17) = racePositions[2][1];
    BYTE3(v17) = racePositions[2][0];
	/*LOBYTE(v17) = BYTE3(dword_45EB58);
    BYTE1(v17) = BYTE2(dword_45EB58);
    BYTE2(v17) = BYTE1(dword_45EB58);
    BYTE3(v17) = dword_45EB58;*/
  }
  if ( !a1 )
  {
    sub_424420();
    drawImageWithPosition((int)graphicsGeneral.raceharBpk, 272, 20, (int)((char *)screenBuffer + 54114));
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Hard Race Results", 55440);
    drawRightPositions(4, (int)&v17);
  }
  v3 = 0;
  do
  {
    if ( !a1 )
    {
      v4 = *((byte *)&v17 + v3);
      if (drivers[v4].damage != 100 )
      {
        if ( v4 == driverId && lapped_456BC0 == 1 )
          goto LABEL_60;
        drawImageWithPosition((int)graphicsGeneral.ptshardBpk, 42, 18, (int)((char *)screenBuffer + 12160 * v4 + 55897));
      }
    }
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        v7 = BYTE1(v17);
        if (drivers[v7].damage != 100 && (BYTE1(v17) != driverId || lapped_456BC0 != 1) )
        {
          v8 = 12160 * BYTE1(v17) + 57190;
          v9 = (int)graphicsGeneral.fmed1aBpk;
		  drivers[v7].points += 7;
          drawTextWithFont(v9, (int)&unk_445928, "+7", v8);
        }
      }
      else if ( v3 == 2 )
      {
        v5 =  BYTE2(v17);
        if (drivers[v5].damage != 100 && (BYTE2(v17) != driverId || lapped_456BC0 != 1) )
        {
          v6 = 12160 * BYTE2(v17) + 57190;
		  drivers[v5].points += 4;
          drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+4", v6);
        }
      }
    }
    else
    {
      v10 =  (unsigned __int8)v17;
      if (drivers[v10].damage != 100 && ((unsigned __int8)v17 != driverId || lapped_456BC0 != 1) )
      {
        v11 = 12160 * (unsigned __int8)v17 + 57190;
		drivers[v10].points += 10;
        drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, "+10", v11);
      }
    }
    ++v3;
  }
  while ( v3 < 3 );
  if ( a1 )
    return;
LABEL_60:
  v12 = 0;
  v13 = 0;
  //v13 = (signed int)dword_45FC44;
  do
  {
    v14 = (convertColorToPaletteColor((palette1[v13+2]), 6553600) + 0x8000) >> 16;
    v15 = (convertColorToPaletteColor(palette1[v13 + 1], 6553600) + 0x8000) >> 16;
    v16 = convertColorToPaletteColor((palette1[v13]), 6553600);
    setPaletteAndGetValue(v12, (v16 + 0x8000) >> 16, v15, v14);
    v13 += 3;
    ++v12;
  }
  while ( v13 <maxPaletteEntries );
  refreshAllScreen();
}

//----- (00429CF0) --------------------------------------------------------
int __cdecl sub_429CF0(unsigned __int8 *a1, signed int a2)
{
  unsigned __int8 *v2; // ebp@1
  unsigned __int8 v3; // si@1
  int v4; // edi@1
  char v5; // al@1
  unsigned __int8 v6; // bl@2
  int v7; // eax@4
  int v8; // eax@7
  int v9; // eax@13
  int result; // eax@14
  unsigned __int8 v11; // [sp+10h] [bp-8h]@1
  signed int v12; // [sp+14h] [bp-4h]@1
  unsigned __int8 v13; // [sp+1Ch] [bp+4h]@1

  v2 = a1;
  v13 = *a1;
  v3 = v13;
  v4 = 0;
  v5 = 1;
  v11 = 1;
  v12 = 1;
  if ( a2 <= 1 )
    goto LABEL_13;
  do
  {
    v6 = (v2++)[1];
    if ( v6 == v13 )
    {
      ++v5;
      v11 = v5;
      if ( v5 != 63 )
        goto LABEL_11;
      v7 = sub_426460(v3, 0x3Fu);
      if ( !v7 )
        goto LABEL_14;
      v4 += v7;
      v5 = 0;
    }
    else
    {
      if ( v5 )
      {
        v8 = sub_426460(v3, v11);
        if ( !v8 )
          goto LABEL_14;
        v4 += v8;
      }
      v13 = v6;
      v3 = v6;
      v5 = 1;
    }
    v11 = v5;
LABEL_11:
    ++v12;
  }
  while ( v12 < a2 );
  if ( v5 )
  {
LABEL_13:
    v9 = sub_426460(v3, v11);
    if ( v9 )
      result = v4 + v9;
    else
LABEL_14:
      result = 0;
  }
  else
  {
    result = v4;
  }
  return result;
}

//----- (00429DC0) --------------------------------------------------------
int sub_429DC0()
{
  unsigned int v0; // eax@4
  char *v1; // edi@4
  char v2; // cl@5
  char *v3; // edi@6
  char v4; // al@7
  FILE *v5; // eax@8
  FILE *v6; // esi@8
  __int32 v7; // edi@9
  bool v8; // sf@10
  unsigned __int8 v9; // of@10
  signed int v10; // esi@11
  char DstBuf; // [sp+Ch] [bp-318h]@2
  char v13; // [sp+Dh] [bp-317h]@3
  char v14; // [sp+Eh] [bp-316h]@3
  int Val; // [sp+10h] [bp-314h]@1
  char Filename[4]; // [sp+14h] [bp-310h]@4
  __int16 v17; // [sp+18h] [bp-30Ch]@4
  char v18; // [sp+1Ah] [bp-30Ah]@4
  char Str; // [sp+24h] [bp-300h]@13

  Val = 0;
  do
  {
    itoa(Val, &DstBuf, 10);
    if ( strlen(&DstBuf) != 2 )
    {
      v13 = DstBuf;
      DstBuf = 48;
      v14 = 0;
    }
    *(_DWORD *)Filename = 1345147720;
    v18 = 0;
    v17 = 17225;
    v0 = strlen(&DstBuf) + 1;
    v1 = (char *)&Val + 3;
    do
      v2 = (v1++)[1];
    while ( v2 );
    memcpy(v1, &DstBuf, v0);
    v3 = (char *)&Val + 3;
    do
      v4 = (v3++)[1];
    while ( v4 );
    *(_DWORD *)v3 = 1480806446;
    v3[4] = 0;
    v5 = fopen(Filename, "rb");
    v6 = v5;
    if ( !v5 )
      break;
    fseek(v5, 0, 2);
    v7 = ftell(v6);
    fclose(v6);
    if ( v7 < 1 )
      break;
    v9 = __OFSUB__(Val + 1, 100);
    v8 = Val++ - 99 < 0;
  }
  while ( v8 ^ v9 );
  File = fopen(Filename, "wb");
  fwrite(&unk_456848, 1u, 0x80u, File);
  v10 = 0;
  do
  {
    sub_429CF0((unsigned __int8 *)screenBuffer + v10, 640);
    v10 += 640;
  }
  while ( v10 < 307200 );
  fputc(12, File);
  sub_43C160((int)&Str);
  fwrite(&Str, 1u, 0x300u, File);
  return fclose(File);
}

//----- (00429F70) --------------------------------------------------------
void __noreturn exitGame()
{
  saveConfiguration();
  freeMemoryGraphics();
  freeMemoryGraphics1();
  freeMemoryGraphics2();
  freeMemoryGraphics3();
  freeMemoryGraphics4();
  stopAndOpenMusic();
  freeMusic();
  nullsub_1();
  if ( isMultiplayerGame )
    nullsub_1();
  setWindowCaption();
  printf("DEATH RALLY Exit: CTRL+ALT+DEL pressed.\n");
  exit(112);
}
// 4264E0: using guessed type int saveConfiguration(void);
// 45EA04: using guessed type int isMultiplayerGame;

//----- (0042A300) --------------------------------------------------------
void sub_42A300()
{
  int v0; // eax@1
  const char *v1; // [sp-Ch] [bp-10h]@21

  dword_4466EC = 1953066569;
  dword_4466F8 = 2003127840;
  dword_4466F0 = 1768710505;
  dword_4466F4 = 1092642170;
  dword_44671E = 1852403530;
  dword_4466FC = 1835091744;
  word_446700 = 101;
  dword_44672A = 1735289204;
  v0 = dword_45E0A8;
  dword_446722 = 544096544;
  dword_446726 = 1936291909;
  dword_456B9C = 1;
  dword_44672E = 1835091744;
  word_446732 = 101;
  menuActive_4457F0[20] = 0;
  menuActive_4457F0[21] = 0;
  menuActive_4457F0[22] = 0;
  menuActive_4457F0[23] = 0;
  dword_445740 = 0;
  switch ( dword_45E0A8 )
  {
    case 2:
		menuActive_4457F0[20] = 1;
      break;
    case 1:
		menuActive_4457F0[21] = 1;
      break;
    case 3:
		menuActive_4457F0[22] = 1;
      break;
    case 4:
		menuActive_4457F0[23] = 1;
      break;
  }
  if ( dword_456B90 )
  {
    drawMenu(2, 1);
    dword_456B9C = 0;
    initDrivers();
    refreshAllScreen();
    v0 = dword_45E0A8;
  }
  if ( v0 == 2 )
  {
    nullsub_1();
    dword_45DC20 = 0;
    if ( !sub_43C4B0() )
    {
	  freeMemoryGraphics();
      freeMemoryGraphics1();
      freeMemoryGraphics2();
      freeMemoryGraphics3();
      freeMemoryGraphics4();
      stopAndOpenMusic();
      freeMusic();
      nullsub_1();
      setWindowCaption();
      switch ( dword_45E5E4 )
      {
        case 100:
          v1 = "DEATH RALLY MP-ERROR: Not enough low memory available. About 570k needed!\n";
          break;
        case 101:
          v1 = "DEATH RALLY MP-ERROR: IPX-driver not installed!\n";
          break;
        case 102:
          v1 = "DEATH RALLY MP-ERROR: Socket table is full!\n";
          break;
        case 103:
          v1 = "DEATH RALLY MP-ERROR: Socket already open!\n";
          break;
        case 104:
          v1 = "DEATH RALLY MP-ERROR: COM-PORT not detected!\n";
          break;
        default:
          v1 = "DEATH RALLY MP-ERROR: Unknown error!\n";
          break;
      }
      printf(v1);
      printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
      exit(112);
    }
    if ( isMultiplayerGame )
    {
      if ( dword_45E0A8 == 2 )
        sub_43C730();
      if ( isMultiplayerGame && dword_45E0A8 == 2 )
        nullsub_1();
    }
  }
  isMultiplayerGame = 1;
}

//----- (0042A480) --------------------------------------------------------
int sub_42A480()
{
  int result; // eax@3
  int v1; // eax@4
  char *v2; // ecx@6
  signed int v3; // edx@6
  int v4; // eax@6
  signed int v5; // ebx@6
  signed int v6; // [sp+0h] [bp-10h]@6
  float v7; // [sp+4h] [bp-Ch]@6
  float v8; // [sp+8h] [bp-8h]@6
  float v9; // [sp+Ch] [bp-4h]@6

  if ( byte_45E118 )
    sub_429DC0();
  ++dword_456BA0;
  wait();
  sub_4220D0();
  result = dword_456BA0 / 70;
  if ( dword_456BA0 % 70 == 1 )
  {
    v1 = dword_456754-- - 1;
    if ( dword_456754 < 0 )
    {
      v1 = 511;
      dword_456754 = 511;
    }
    v2 = (char *)graphicsGeneral.bgcopPal + 2 * v1;
    v3 = (unsigned __int8)v2[v1];
    v4 = (int)&v2[v1];
    v5 = 0;
    v9 = (double)v3 * 0.015625;
    v8 = (double)*(byte *)(v4 + 1) * 0.015625;
    v6 = 0;
    v7 = (double)*(byte *)(v4 + 2) * 0.015625;
    do
    {
      result = setPaletteAndGetValue(
                 v5++ - 64,
                 (unsigned __int64)((double)v6 * v9),
                 (unsigned __int64)(v8 * (double)v6),
                 (unsigned __int64)(v7 * (double)v6));
      v6 = v5;
    }
    while ( v5 < 32 );
  }
  return result;
}
// 456754: using guessed type int dword_456754;
// 456BA0: using guessed type int dword_456BA0;
// 45E118: using guessed type char byte_45E118;

//----- (0042A570) --------------------------------------------------------
void sub_42A570()
{
  int v0; // eax@4
  char *v1; // ecx@6
  signed int v2; // edx@6
  int v3; // eax@6
  signed int v4; // ebx@6
  signed int v5; // esi@10
  signed int v6; // eax@11
  char v7; // cl@12
  int v8; // eax@14
  char v9; // cl@15
  signed int v10; // esi@22
  signed int v11; // eax@23
  char v12; // cl@24
  int v13; // eax@26
  char v14; // cl@27
  void *v15 = malloc(0x64u); // eax@34
  char *v16; // eax@34
  char v17; // dl@35
  unsigned int v18; // eax@36
  char *v19; // edi@36
  char v20; // cl@37
  char *v21; // edi@38
  char v22; // al@39
  signed int v23; // esi@42
  signed int v24; // eax@43
  char v25; // cl@44
  int v26; // eax@46
  char v27; // cl@47
  signed int v28; // esi@55
  signed int v29; // eax@56
  char v30; // cl@57
  int v31; // eax@59
  char v32; // cl@60
  signed int v33; // edx@68
  signed int v34; // eax@69
  char v35; // cl@70
  char *v36; // eax@72
  char v37; // dl@73
  unsigned int v38; // eax@74
  char *v39; // edi@74
  char v40; // cl@75
  char *v41; // edi@76
  char v42; // al@77
  bool v43; // zf@78
  int v44; // eax@78
  signed int v45; // edx@86
  signed int v46; // eax@87
  char v47; // cl@88
  int v48; // eax@90
  signed int v49; // [sp+0h] [bp-41Ch]@6
  float v50; // [sp+4h] [bp-418h]@6
  float v51; // [sp+8h] [bp-414h]@6
  float v52; // [sp+Ch] [bp-410h]@6
  unsigned __int8 v53; // [sp+10h] [bp-40Ch]@67
  char v54[1024]; // [sp+1Ch] [bp-400h]@9

  if ( byte_45E118 )
    sub_429DC0();
  ++dword_456BA0;
  wait();
  sub_4220D0();
  if ( dword_456BA0 % 70 == 1 )
  {
    v0 = dword_456754-- - 1;
    if ( dword_456754 < 0 )
    {
      v0 = 511;
      dword_456754 = 511;
    }
    v1 = (char *)graphicsGeneral.bgcopPal + 2 * v0;
    v2 = (unsigned __int8)v1[v0];
    v3 = (int)&v1[v0];
    v4 = 0;
    v51 = (double)v2 * 0.015625;
    v50 = (double)*(byte *)(v3 + 1) * 0.015625;
    v49 = 0;
    v52 = (double)*(byte *)(v3 + 2) * 0.015625;
    do
    {
      setPaletteAndGetValue(
        v4++ - 64,
        (unsigned __int64)((double)v49 * v51),
        (unsigned __int64)(v50 * (double)v49),
        (unsigned __int64)(v52 * (double)v49));
      v49 = v4;
    }
    while ( v4 < 32 );
  }
  if ( isMultiplayerGame )
  {
    nullsub_1();
    if ( sub_41EB80((int)v54, 1) )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      v5 = (signed int)&unk_462096;
      unk_461ED2 = unk_461ED3;
      unk_461ED3 = word_461ED4;
      do
      {
        v6 = v5;
        do
        {
          v7 = *(byte *)v6;
          *(byte *)(v6 - 150) = *(byte *)v6;
          ++v6;
        }
        while ( v7 );
        v5 += 150;
      }
      while ( v5 < (signed int)&blacktx1Bpk );
      v8 = 0;
      do
      {
        v9 = v54[v8];
        *((byte *)&dword_462C4E + v8++) = v9;
      }
      while ( v9 );
      HIBYTE(word_461ED4) = 1;
      if ( dword_456B54 )
      {
        if ( dword_456730 == 1 )
        {
          sub_41E9A0();
          refreshAllScreen();
        }
      }
      else if ( dword_456730 == 1 )
      {
        drawBottomMenuText();
        refreshBottomScreen();
      }
    }
    if ( sub_41EB80((int)v54, 6) )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      v10 = (signed int)&unk_462096;
      unk_461ED2 = unk_461ED3;
      unk_461ED3 = word_461ED4;
      do
      {
        v11 = v10;
        do
        {
          v12 = *(byte *)v11;
          *(byte *)(v11 - 150) = *(byte *)v11;
          ++v11;
        }
        while ( v12 );
        v10 += 150;
      }
      while ( v10 < (signed int)&blacktx1Bpk );
      v13 = 0;
      do
      {
        v14 = v54[v13];
        *((byte *)&dword_462C4E + v13++) = v14;
      }
      while ( v14 );
      HIBYTE(word_461ED4) = 0;
      if ( dword_456B54 )
      {
        if ( dword_456730 == 1 )
        {
          sub_41E9A0();
          refreshAllScreen();
        }
      }
      else if ( dword_456730 == 1 )
      {
        drawBottomMenuText();
        updateScreenPtr(3);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 196608, 0x4000);
        updateScreenPtr(4);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
      }
    }
    if ( sub_41EB80((int)v54, 7) )
    {
     // allocateMemory(0x64u);
      Str = v15;
      *(_DWORD *)v15 = 2108717;
      v16 = &byte_460840[108 * driverId];
      do
        v17 = *v16++;
      while ( v17 );
      v18 = v16 - &byte_460840[108 * driverId];
      v19 = (char *)Str - 1;
      do
        v20 = (v19++)[1];
      while ( v20 );
      memcpy(v19, &byte_460840[108 * driverId], v18);
      v21 = (char *)Str - 1;
      do
        v22 = (v21++)[1];
      while ( v22 );
      memcpy(v21, " is currently on Death Rally.", 0x1Eu);
      sub_41EA70((int)Str, 100, 8);
      free(Str);
    }
    if ( sub_41EB80((int)v54, 20) )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      v23 = (signed int)&unk_462096;
      unk_461ED2 = unk_461ED3;
      unk_461ED3 = word_461ED4;
      do
      {
        v24 = v23;
        do
        {
          v25 = *(byte *)v24;
          *(byte *)(v24 - 150) = *(byte *)v24;
          ++v24;
        }
        while ( v25 );
        v23 += 150;
      }
      while ( v23 < (signed int)&blacktx1Bpk );
      v26 = 0;
      do
      {
        v27 = v54[v26];
        *((byte *)&dword_462C4E + v26++) = v27;
      }
      while ( v27 );
      HIBYTE(word_461ED4) = 0;
      if ( dword_456B54 )
      {
        if ( dword_456730 == 1 )
        {
          sub_41E9A0();
          refreshAllScreen();
        }
      }
      else if ( dword_456730 == 1 )
      {
        drawBottomMenuText();
        updateScreenPtr(3);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 196608, 0x4000);
        updateScreenPtr(4);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
      }
      sub_42A300();
      driverId = 19;
    }
    if ( sub_41EB80((int)v54, 9) )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      v28 = (signed int)&unk_462096;
      unk_461ED2 = unk_461ED3;
      unk_461ED3 = word_461ED4;
      do
      {
        v29 = v28;
        do
        {
          v30 = *(byte *)v29;
          *(byte *)(v29 - 150) = *(byte *)v29;
          ++v29;
        }
        while ( v30 );
        v28 += 150;
      }
      while ( v28 < (signed int)&blacktx1Bpk );
      v31 = 0;
      do
      {
        v32 = v54[v31];
        *((byte *)&dword_462C4E + v31++) = v32;
      }
      while ( v32 );
      HIBYTE(word_461ED4) = 0;
      if ( dword_456B54 )
      {
        if ( dword_456730 == 1 )
        {
          sub_41E9A0();
          refreshAllScreen();
        }
      }
      else if ( dword_456730 == 1 )
      {
        drawBottomMenuText();
        updateScreenPtr(3);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 196608, 0x4000);
        updateScreenPtr(4);
        copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
      }
      sub_428070(1);
    }
    if ( sub_41EB80((int)&v53, 19) )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      unk_461ED2 = unk_461ED3;
      v33 = (signed int)&unk_462096;
      unk_461ED3 = word_461ED4;
      do
      {
        v34 = v33;
        do
        {
          v35 = *(byte *)v34;
          *(byte *)(v34 - 150) = *(byte *)v34;
          ++v34;
        }
        while ( v35 );
        v33 += 150;
      }
      while ( v33 < (signed int)&blacktx1Bpk );
      v36 = &byte_460840[108 * v53];
      dword_462C4E = 2108717;
      do
        v37 = *v36++;
      while ( v37 );
      v38 = v36 - &byte_460840[108 * v53];
      v39 = (char *)&dword_462C4E - 1;
      do
        v40 = (v39++)[1];
      while ( v40 );
      memcpy(v39, &byte_460840[108 * v53], v38);
      v41 = (char *)&dword_462C4E - 1;
      do
        v42 = (v41++)[1];
      while ( v42 );
      memcpy(v41, " is waiting for you to join the next race.", 0x2Au);
      HIBYTE(word_461ED4) = 0;
      v43 = dword_456B54 == 0;
      v44 = dword_456730;
      v41[42] = aIswaitingForYo[42];
      if ( v43 )
      {
        if ( v44 == 1 )
        {
          drawBottomMenuText();
          updateScreenPtr(3);
          copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 196608, 0x4000);
          updateScreenPtr(4);
          copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
        }
      }
      else if ( v44 == 1 )
      {
        sub_41E9A0();
        refreshAllScreen();
      }
    }
    if ( (dword_45E0A8 == 3 || dword_45E0A8 == 4) && (dword_45E5E0 & 0x80) != -128 )
    {
      unk_461EC0[0] = unk_461EC1;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      unk_461ED2 = unk_461ED3;
      v45 = (signed int)&unk_462096;
      unk_461ED3 = word_461ED4;
      do
      {
        v46 = v45;
        do
        {
          v47 = *(byte *)v46;
          *(byte *)(v46 - 150) = *(byte *)v46;
          ++v46;
        }
        while ( v47 );
        v45 += 150;
      }
      while ( v45 < (signed int)&blacktx1Bpk );
      memcpy(&dword_462C4E, "-- Modem connection lost!", 0x18u);
      v43 = dword_456B54 == 0;
      v48 = dword_456730;
      *((_WORD *)&dword_462C4E + 12) = *(_WORD *)"!";
      HIBYTE(word_461ED4) = 0;
      if ( v43 )
      {
        if ( v48 == 1 )
        {
          drawBottomMenuText();
          updateScreenPtr(3);
          copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 196608, 0x4000);
          updateScreenPtr(4);
          copyBuffer2Screen((void *)screenPtr, (char *)screenBuffer + 0x40000, 11264);
          sub_428070(0);
          return;
        }
      }
      else if ( v48 == 1 )
      {
        sub_41E9A0();
        refreshAllScreen();
      }
      sub_428070(0);
    }
  }
}
// 456730: using guessed type int dword_456730;
// 456754: using guessed type int dword_456754;
// 456B54: using guessed type int dword_456B54;
// 456BA0: using guessed type int dword_456BA0;
// 456BF0: using guessed type int screenPtr;
// 45E0A8: using guessed type int dword_45E0A8;
// 45E118: using guessed type char byte_45E118;
// 45E5E0: using guessed type int dword_45E5E0;
// 45EA04: using guessed type int isMultiplayerGame;
// 461EC4: using guessed type __int16;
// 461EC8: using guessed type __int16;
// 461ECC: using guessed type __int16;
// 461ED0: using guessed type __int16;
// 461ED4: using guessed type __int16;
// 462C4E: using guessed type int dword_462C4E;
// 463CE8: using guessed type int driverId;
// 42A570: using guessed type char var_400[1024];

//----- (0042B1B0) --------------------------------------------------------
void __cdecl selectRaceWarningPopup(int a1)
{
  int v1; // edi@1
  const char *v2; // esi@1

  memcpy(dword_461ED8, (char *)screenBuffer + 108800, 0x1F400u);
  createPopup(33, 182, 580, 145, 1);
  v1 = 125500;
  //v2 = (char *)&unk_450890 + 300 * a1;
  if (a1 == 0) 
  {
	  char *v2 = "[Hold on to your reins{, you mad, motorized";
	    writeTextInScreen(v2, v1);
		  v1 += 10240;
		  v2 += 60;
		  v2 = "berserker! They would mow you dead out there,";
		  writeTextInScreen(v2, v1);
		  v1 += 10240;
		  v2 += 60;
		  v2 = "[Sign up here only when you have a Sentinel";
		  writeTextInScreen(v2, v1);
		  v1 += 10240;
		  v2 += 60;
		  v2 = "[or something even wilder under your tail.";
		  writeTextInScreen(v2, v1);
		  v1 += 10240;
		  v2 += 60;
	  
  }
  else if (a1 ==1) 
  {
	  char *v2 = "[Hold on to your reins{, you mad, motorized";
	  writeTextInScreen(v2, v1);
	  v1 += 10240;
	  v2 += 60;
	  v2 = "berserker! They would mow you dead out there,";
	  writeTextInScreen(v2, v1);
	  v1 += 10240;
	  v2 += 60;
	  v2 = "[Sign up here only when you have a Wraith";
	  writeTextInScreen(v2, v1);
	  v1 += 10240;
	  v2 += 60;
	  v2 = "[or something even wilder under your tail.";
	  writeTextInScreen(v2, v1);
	  v1 += 10240;
	  v2 += 60;

  }
  
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue.", 189008);
  refreshAllScreen();
  loadMenuSoundEffect(1u, 23, 0, configuration.musicVolume, dword_44518C - 4096);
  do
    sub_42A570();
  while ( !eventDetected() );
  memcpy((char *)screenBuffer + 108800, dword_461ED8, 0x1F400u);
  refreshAllScreen();
}
// 44518C: using guessed type int dword_44518C;
// 4458B0: using guessed type char byte_4458B0;
// 45DC18: using guessed type int configuration.musicVolume;

//----- (0042B290) --------------------------------------------------------
int __cdecl main(int argc, const char **argv, const char **envp)
{
  signed int v3; // ebx@1
  int v4; // esi@2
  unsigned __int8 v5; // bp@3
  signed int v6; // edi@3
  int v7; // ST34_4@4
  int v8; // ST30_4@4
  int v9; // eax@4
  unsigned __int8 v10; // bp@5
  signed int v11; // edi@5
  int v12; // ST34_4@6
  int v13; // ST30_4@6
  int v14; // eax@6
  int v15; // esi@9
  unsigned __int8 v16; // bp@10
  signed int v17; // edi@10
  int v18; // ST34_4@11
  int v19; // ST30_4@11
  int v20; // eax@11
  unsigned __int8 v21; // bp@12
  signed int v22; // edi@12
  int v23; // ST34_4@13
  int v24; // ST30_4@13
  int v25; // eax@13
  int v26; // edi@15
  unsigned __int8 v27; // bp@17
  signed int v28; // esi@17
  int v29; // ST34_4@18
  int v30; // ST30_4@18
  int v31; // eax@18
  unsigned int v32; // eax@22
  void *v33; // edi@22
  char v34; // cl@23
  char *v35; // edi@25
  char v36; // al@26
  FILE *v37; // eax@27
  FILE *v38; // esi@27
  __int32 v39; // edi@28
  unsigned __int8 v40; // di@30
  signed int v41; // esi@30
  int v42; // ST34_4@31
  int v43; // ST30_4@31
  int v44; // eax@31
  int result; // eax@32
  int v46; // edx@33
  int v47; // ecx@33
  int v48; // edi@33
  unsigned __int8 v49; // bp@36
  signed int v50; // esi@36
  int v51; // ST34_4@37
  int v52; // ST30_4@37
  int v53; // eax@37
  char v54; // al@40
  int v55; // ecx@40
  char v56; // bl@40
  int v57; // edx@43
  int v58; // ecx@43
  char v59; // al@44
  int v60; // eax@49
  signed int v61; // edx@50
  int v62; // ecx@50
  int v63; // ecx@67
  int v64; // esi@78
  unsigned __int8 v65; // bp@79
  signed int v66; // edi@79
  int v67; // ST34_4@80
  int v68; // ST30_4@80
  int v69; // eax@80
  int v70; // ST34_4@82
  int v71; // ST30_4@82
  int v72; // eax@82
  unsigned __int8 v73; // bp@83
  signed int v74; // edi@83
  int v75; // ST34_4@84
  int v76; // ST30_4@84
  int v77; // eax@84
  unsigned int v78; // eax@88
  void *v79; // edi@88
  char v80; // cl@89
  char *v81; // edi@91
  char v82; // al@92
  FILE *v83; // eax@93
  FILE *v84; // esi@93
  __int32 v85; // edi@94
  unsigned __int8 v86; // di@96
  signed int v87; // esi@96
  int v88; // ST34_4@97
  int v89; // ST30_4@97
  int v90; // eax@97
  char v91; // [sp+Fh] [bp-65h]@22
  char Filename; // [sp+10h] [bp-64h]@21

  v3 = 0;
  byte_463DF8 = 0;
  dword_456730 = 0;
  if ( argc == 2 )
  {
    drawStadistics();
    writeDriverList(20);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
    refreshAllScreen();
    sub_4224E0();
    v4 = 0;
    do
    {
      wait();
      v5 = 0;
	  v6 = 0;
	  //v6 = (signed int)dword_45FC44;
      do
      {
        v7 = (convertColorToPaletteColor((palette1[v6+2]), v4) + 0x8000) >> 16;
        v8 = (convertColorToPaletteColor(palette1[v6 + 1], v4) + 0x8000) >> 16;
        v9 = convertColorToPaletteColor((palette1[v6]), v4);
        setPaletteAndGetValue(v5, (v9 + 0x8000) >> 16, v8, v7);
        v6 += 3;
        ++v5;
      }
      while ( v6 < 288);
	  //while (v6 < (signed int)&unk_4600C4);
      v10 = -128;
	  v11= 384;
      //v11 = (signed int)&unk_460244;
      do
      {
        v12 = (convertColorToPaletteColor(palette1[v11+2], v4) + 0x8000) >> 16;
        v13 = (convertColorToPaletteColor(palette1[v11 + 1], v4) + 0x8000) >> 16;
        v14 = convertColorToPaletteColor(palette1[v11 ], v4);
        setPaletteAndGetValue(v10, (v14 + 0x8000) >> 16, v13, v12);
        v11 += 3;
        ++v10;
		/* v12 = (convertColorToPaletteColor((v11 + 4), v4) + 0x8000) >> 16;
        v13 = (convertColorToPaletteColor(v11, v4) + 0x8000) >> 16;
        v14 = convertColorToPaletteColor((v11 - 4), v4);
        setPaletteAndGetValue(v10, (v14 + 0x8000) >> 16, v13, v12);
        v11 += 12;
        ++v10;*/
      }
      while ( v11 < maxPaletteEntries );
	  //while (v9 < (signed int)&unk_460844);
      v4 += 0x20000;
    }
    while ( v4 < 6553600 );
    do
    {
      sub_42A570();
      sub_4260D0();
    }
    while ( !eventDetected() );
    sub_4224E0();
    v15 = 6553600;
    do
    {
      wait();
      v16 = 0;
      v17 = 0;
	  //v17 = (signed int)dword_45FC44;
      do
      {
        v18 = (convertColorToPaletteColor((palette1[v17+2]), v15) + 0x8000) >> 16;
        v19 = (convertColorToPaletteColor(palette1[v17 + 1], v15) + 0x8000) >> 16;
        v20 = convertColorToPaletteColor((palette1[v17]), v15);
        setPaletteAndGetValue(v16, (v20 + 0x8000) >> 16, v19, v18);
        v17 += 3;
        ++v16;
      }
      while ( v17 < 288);
	  //while ( v15 < (signed int)&unk_4600C4 );
      v21 = -128;
	  v22 = 384;
      //v22 = (signed int)&unk_460244;
      do
      {
        v23 = (convertColorToPaletteColor(palette1[v22+2], v15) + 0x8000) >> 16;
        v24 = (convertColorToPaletteColor(palette1[v22 + 1], v15) + 0x8000) >> 16;
        v25 = convertColorToPaletteColor(palette1[v22], v15);
        setPaletteAndGetValue(v21, (v25 + 0x8000) >> 16, v24, v23);
        v22 += 3;
        ++v21;
		/*v23 = (convertColorToPaletteColor(*(_DWORD *)(v22 + 4), v15) + 0x8000) >> 16;
        v24 = (convertColorToPaletteColor(*(_DWORD *)v22, v15) + 0x8000) >> 16;
        v25 = convertColorToPaletteColor(*(_DWORD *)(v22 - 4), v15);
        setPaletteAndGetValue(v21, (v25 + 0x8000) >> 16, v24, v23);
        v22 += 12;
        ++v21;*/
      }
      while ( v22 < maxPaletteEntries );
	  // while (v20 < (signed int)&unk_460844);
      v15 -= 0x20000;
    }
    while ( v15 >= 0 );
    goto LABEL_15;
  }
  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
  drawImageWithPosition((int)graphicsGeneral.rank1cBpk, 54, 386, (int)((char *)screenBuffer + 54060));
  drawImageWithPosition((int)graphicsGeneral.resupok1Bpk, 272, 386, (int)((char *)screenBuffer + 54114));
  writeDriverList(20);
  easyRaceResults(0, 0, 0);
  //TODO fix easyRaceResults(v47, v46, 0);
  refreshAllScreen();
  v48 = 0;
  do
  {
    if ( dword_456B60 )
      setMusicVolume(v3);
    wait();
    v49 = 0;
    v50 =0;
	//v50 = (signed int)dword_45FC44;
    do
    {
      v51 = (convertColorToPaletteColor((palette1[v50+2]), v48) + 0x8000) >> 16;
      v52 = (convertColorToPaletteColor(palette1[v50 + 1], v48) + 0x8000) >> 16;
      v53 = convertColorToPaletteColor((palette1[v50 ]), v48);
      setPaletteAndGetValue(v49, (v53 + 0x8000) >> 16, v52, v51);
      v50 += 3;
      ++v49;
    }
    while ( v50 < maxPaletteEntries );
	//while ( v47 < (signed int)&unk_460844 );
    v3 += 1310;
    v48 += 0x20000;
  }
  while ( v3 < 65500 );
  dword_456B60 = 0;
  do
  {
    sub_42A570();
    sub_4260D0();
    v54 = eventDetected();
    v56 = v54;
  }
  while ( !v54 );
  if ( v54 != 1 )
    v56 = 0;
  mediumRaceResults(v56,0 , 0);
   //TODO fix mediumRaceResults(v55, (unsigned __int8)v56, (unsigned __int8)v56);
  if ( !v56 )
  {
    do
    {
      sub_42A570();
      sub_4260D0();
      v59 = eventDetected();
      v56 = v59;
    }
    while ( !v59 );
    if ( v59 != 1 )
      v56 = 0;
  }
  //TODO fix hardRaceResults(v58, v57, (unsigned __int8)v56);
  hardRaceResults(v56, 0, 0);
  if ( !v56 )
  {
    do
    {
      sub_42A570();
      sub_4260D0();
    }
    while ( !eventDetected() );
  }
  //sub_423C90(0, 19); //modiffica una variable de adversary pero no se que hace
  //sub_423E20(20);  //QUITADO porque solo hace multiplayer
  drawStadistics();
  writeDriverList(20);
  refreshAllScreen();
  v60 = argc;
  if ( argc )
  {
    if ( argc != 1 )
      goto LABEL_74;
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
  }
  else
  {
    v61 = 2;
    v62 = (int)dword_4608F0;
    do
    {
      if ( *(_DWORD *)(v62 - 108) > v60 && v61 - 2 != driverId )
        v60 = *(_DWORD *)(v62 - 108);
      if ( *(_DWORD *)v62 > v60 && v61 - 1 != driverId )
        v60 = *(_DWORD *)v62;
      if ( *(_DWORD *)(v62 + 108) > v60 && v61 != driverId )
        v60 = *(_DWORD *)(v62 + 108);
      if ( *(_DWORD *)(v62 + 216) > v60 && v61 + 1 != driverId )
        v60 = *(_DWORD *)(v62 + 216);
      if ( *(_DWORD *)(v62 + 324) > v60 && v61 + 2 != driverId )
        v60 = *(_DWORD *)(v62 + 324);
      v61 += 5;
      v62 += 540;
    }
    while ( v61 - 2 < 20 );
    v63 = dword_460884[27 * driverId];
    if ( v63 > v60 && !dword_456BC4 )
      byte_463DF8 = 1;
    dword_456BC4 = v63 > v60;
    sub_426080();
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Please wait while loading...", 289646);
    refreshAllScreen();
    loadGraphics2();
    loadGraphics3();
    loadGraphics4();
    sub_426080();
    loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
  }
  refreshAllScreen();
  do
  {
LABEL_74:
    sub_42A570();
    sub_4260D0();
  }
  while ( !eventDetected() );
  if ( useWeapons && !dword_456B74 && dword_456B84 )
  {
LABEL_15:
    sub_4224E0();
    v26 = 6553600;
    do
    {
      wait();
      if ( byte_463DF8 == 1 )
      {
        v27 = 0;
        v28 = 0;
		//v28 = (signed int)dword_45FC44;
        do
        {
          v29 = (convertColorToPaletteColor((palette1[v28+2]), v26) + 0x8000) >> 16;
          v30 = (convertColorToPaletteColor(palette1[v28 + 1], v26) + 0x8000) >> 16;
          v31 = convertColorToPaletteColor((palette1[v28 ]), v26);
          setPaletteAndGetValue(v27, (v31 + 0x8000) >> 16, v30, v29);
          v28 += 3;
          ++v27;
        }
        while ( v28 < maxPaletteEntries );
		//while ( v26 < (signed int)&unk_460844 );
      }
      v26 -= 0x20000;
    }
    while ( v26 >= 0 );
    if ( byte_463DF8 == 1 )
    {
      stopSong();
      stopAndOpenMusic();
      Filename = 0;
      if ( byte_462D50 == 2 )
      {
        v32 = strlen(byte_45FAA0) + 1;
        v33 = &v91;
        do
        {
          v34 = *((byte *)v33 + 1);
          v33 = (char *)v33 + 1;
        }
        while ( v34 );
        memcpy(v33, byte_45FAA0, v32);
      }
      v35 = &v91;
      do
        v36 = (v35++)[1];
      while ( v36 );
      *(_DWORD *)v35 = 1633971813;
      *((_DWORD *)v35 + 1) = 774924654;
      *((_DWORD *)v35 + 2) = 6709608;
      v37 = fopen(&Filename, "rb");
      v38 = v37;
      if ( v37 )
      {
        fseek(v37, 0, 2);
        v39 = ftell(v38);
        fclose(v38);
        if ( v39 > 0 )
        {
          openAnimation("ENDANI0.HAF", 1, (int)"tr0-mus.cmf", 2, (int)"endani0e.cmf", 1, 120);
          stopSong();
          stopAndOpenMusic();
        }
      }
      loadMusic(1, (int)"MEN-MUS.CMF", 2, (int)"MEN-SAM.CMF");
      musicSetMasterVolume(configuration.masterVolume);
      nullsub_1();
      musicPlayMusic();
      nullsub_1();
      byte_463DF8 = 0;
      nullsub_1();
      setWindowCaption2();
      sub_4224E0();
      sub_43C740();
      allCarsCrash_456BB0 = 0;
      noPaintJob_456BAC = 0;
      consecutiveWins_456BA8 = 0;
      v40 = 96;
	  v41 = 288;
      //v41 = (signed int)&unk_4600C4;
      do
      {
        v42 = (convertColorToPaletteColor(palette1[v41+2], 6553600) + 0x8000) >> 16;
        v43 = (convertColorToPaletteColor(palette1[v41 + 1], 6553600) + 0x8000) >> 16;
        v44 = convertColorToPaletteColor(palette1[v41 ], 6553600);
        setPaletteAndGetValue(v40, (v44 + 0x8000) >> 16, v43, v42);
        v41 += 3;
        ++v40;
		/*v42 = (convertColorToPaletteColor(*(_DWORD *)(v41 + 4), 6553600) + 0x8000) >> 16;
        v43 = (convertColorToPaletteColor(*(_DWORD *)v41, 6553600) + 0x8000) >> 16;
        v44 = convertColorToPaletteColor(*(_DWORD *)(v41 - 4), 6553600);
        setPaletteAndGetValue(v40, (v44 + 0x8000) >> 16, v43, v42);
        v41 += 12;
        ++v40;*/
      }
	  while (v41 < 389);
      //while ( v41 < (signed int)&unk_460244 );

    }
    goto LABEL_32;
  }
  sub_4224E0();
  v64 = 6553600;
  do
  {
    wait();
    v65 = 0;
    v66 = 0;
	//v66 = (signed int)dword_45FC44;
    if ( byte_463DF8 == 1 )
    {
      do
      {
        v67 = (convertColorToPaletteColor((palette1[v66+2]), v64) + 0x8000) >> 16;
        v68 = (convertColorToPaletteColor(palette1[v66 + 1], v64) + 0x8000) >> 16;
        v69 = convertColorToPaletteColor((palette1[v66 ]), v64);
        setPaletteAndGetValue(v65, (v69 + 0x8000) >> 16, v68, v67);
        v66 += 3;
        ++v65;
      }
      while ( v66 < maxPaletteEntries );
	  //while (v60 < (signed int)&unk_460844);
    }
    else
    {	
      do
      {
        v70 = (convertColorToPaletteColor((palette1[v66 + 2]), v64) + 0x8000) >> 16;
        v71 = (convertColorToPaletteColor(palette1[v66 + 1], v64) + 0x8000) >> 16;
        v72 = convertColorToPaletteColor((palette1[v66]), v64);
        setPaletteAndGetValue(v65, (v72 + 0x8000) >> 16, v71, v70);
        v66 += 3;
        ++v65;
      }
      while ( v66 <  385);
	  /* do
      {
        v70 = (convertColorToPaletteColor(*(_DWORD *)(v66 + 4), v64) + 0x8000) >> 16;
        v71 = (convertColorToPaletteColor(*(_DWORD *)v66, v64) + 0x8000) >> 16;
        v72 = convertColorToPaletteColor(*(_DWORD *)(v66 - 4), v64);
        setPaletteAndGetValue(v65, (v72 + 0x8000) >> 16, v71, v70);
        v66 += 12;
        ++v65;
      }
      while ( v66 < (signed int)&unk_4600C4 );*/
      v73 = -128;
      v74 = 384;
      do
      {
        v75 = (convertColorToPaletteColor(palette1[v74 + 2], v64) + 0x8000) >> 16;
        v76 = (convertColorToPaletteColor(palette1[v74+1], v64) + 0x8000) >> 16;
        v77 = convertColorToPaletteColor(palette1[v74], v64);
        setPaletteAndGetValue(v73, (v77 + 0x8000) >> 16, v76, v75);
        v74 += 3;
        ++v73;
      }
      while ( v74 <maxPaletteEntries );
	  /*v74 = (signed int)&unk_460244;
      do
      {
        v75 = (convertColorToPaletteColor(*(_DWORD *)(v74 + 4), v64) + 0x8000) >> 16;
        v76 = (convertColorToPaletteColor(*(_DWORD *)v74, v64) + 0x8000) >> 16;
        v77 = convertColorToPaletteColor(*(_DWORD *)(v74 - 4), v64);
        setPaletteAndGetValue(v73, (v77 + 0x8000) >> 16, v76, v75);
        v74 += 12;
        ++v73;
      }
      while ( v74 <maxPaletteEntries );*/
	  //while ( v68 < (signed int)&unk_460844 );
    }
    v64 -= 0x20000;
  }
  while ( v64 >= 0 );
  if ( byte_463DF8 == 1 )
  {
    stopSong();
    stopAndOpenMusic();
    Filename = 0;
    if ( byte_462D50 == 2 )
    {
      v78 = strlen(byte_45FAA0) + 1;
      v79 = &v91;
      do
      {
        v80 = *((byte *)v79 + 1);
        v79 = (char *)v79 + 1;
      }
      while ( v80 );
      memcpy(v79, byte_45FAA0, v78);
    }
    v81 = &v91;
    do
      v82 = (v81++)[1];
    while ( v82 );
    *(_DWORD *)v81 = 1633971813;
    *((_DWORD *)v81 + 1) = 774924654;
    *((_DWORD *)v81 + 2) = 6709608;
    v83 = fopen(&Filename, "rb");
    v84 = v83;
    if ( v83 )
    {
      fseek(v83, 0, 2);
      v85 = ftell(v84);
      fclose(v84);
      if ( v85 > 0 )
      {
        openAnimation("ENDANI0.HAF", 1, (int)"tr0-mus.cmf", 2, (int)"endani0e.cmf", 1, 120);
        stopSong();
        stopAndOpenMusic();
      }
    }
    loadMusic(1, (int)"MEN-MUS.CMF", 2, (int)"MEN-SAM.CMF");
    musicSetMasterVolume(configuration.masterVolume);
    nullsub_1();
    musicPlayMusic();
    nullsub_1();
    byte_463DF8 = 0;
    nullsub_1();
    setWindowCaption2();
    sub_4224E0();
    sub_43C740();
    v86 = 96;
	v87 = 288;
    //v87 = (signed int)&unk_4600C4;
    do
    {
      v88 = (convertColorToPaletteColor(palette1[v87+2], 6553600) + 0x8000) >> 16;
      v89 = (convertColorToPaletteColor(palette1[v87 + 1], 6553600) + 0x8000) >> 16;
      v90 = convertColorToPaletteColor(palette1[v87 ], 6553600);
      setPaletteAndGetValue(v86, (v90 + 0x8000) >> 16, v89, v88);
      v87 += 3;
      ++v86;
	  /*v88 = (convertColorToPaletteColor(*(_DWORD *)(v87 + 4), 6553600) + 0x8000) >> 16;
	  v89 = (convertColorToPaletteColor(*(_DWORD *)v87, 6553600) + 0x8000) >> 16;
	  v90 = convertColorToPaletteColor(*(_DWORD *)(v87 - 4), 6553600);
	  setPaletteAndGetValue(v86, (v90 + 0x8000) >> 16, v89, v88);
	  v87 += 12;
	  ++v86;*/
    }
	//while ( v87 < (signed int)&unk_460244 );
    while ( v87 < 389);
  }
LABEL_32:
  LOBYTE(result) = eventDetected();
  dword_456730 = 1;
  return result;
}


//----- (0042BD10) --------------------------------------------------------
char sub_42BD10()
{
  int v0; // eax@1
  unsigned int v1; // eax@1
  char *v2; // edi@1
  char v3; // cl@2
  char *v4; // edi@3
  char v5; // al@4
  int v6; // ST2C_4@5
  int v7; // edx@5
  int i; // eax@5
  int v9; // ecx@6
  int v10; // eax@7
  signed int v11; // ecx@11
  int v12; // esi@12
  char *v13; // edx@17
  char *v14; // eax@17
  int v15; // edx@20
  int v16; // eax@22
  char *v17; // ebx@26
  signed int v18; // ecx@26
  int v19; // esi@27
  char *v20; // edx@32
  char *v21; // eax@32
  int v22; // eax@35
  int v23; // ecx@36
  int v24; // edx@36
  int v25; // ecx@38
  char *v26; // eax@38
  signed int v27; // edx@38
  char v28; // cl@39
  char *v29; // edi@40
  char v30; // al@41
  unsigned int v31; // eax@42
  char *v32; // edi@42
  char v33; // cl@43
  char *v34; // edi@44
  char v35; // al@45
  int *v36; // ecx@46
  signed int v37; // eax@46
  unsigned int v38; // esi@46
  char v39; // dl@47
  int v40; // eax@50
  int v41; // edx@51
  int v42; // ecx@52
  int v43; // edi@61
  unsigned __int8 v44; // bp@62
  signed int v45; // esi@62
  int v46; // ST38_4@63
  int v47; // ST34_4@63
  int v48; // eax@63
  signed int v49; // eax@68
  int v50; // esi@79
  unsigned __int8 v51; // bp@80
  signed int v52; // edi@80
  int v53; // ST38_4@81
  int v54; // ST34_4@81
  int v55; // eax@81
  unsigned __int8 v56; // bp@82
  signed int v57; // edi@82
  int v58; // ST38_4@83
  int v59; // ST34_4@83
  int v60; // eax@83
  char result; // al@85
  int v62; // [sp+10h] [bp-58h]@48
  int v63; // [sp+14h] [bp-54h]@1
  int v64; // [sp+18h] [bp-50h]@1
  int v65; // [sp+1Ch] [bp-4Ch]@1
  int v66; // [sp+20h] [bp-48h]@1
  __int16 v67; // [sp+24h] [bp-44h]@1
  char DstBuf; // [sp+40h] [bp-28h]@1

  v0 = dword_456758;
  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
  v63 = v0;
  drawImageWithPosition((int)graphicsGeneral.rank1cBpk, 54, 386, (int)((char *)screenBuffer + 54060));
  drawImageWithPosition((int)graphicsGeneral.resupok1Bpk, 272, 386, (int)((char *)screenBuffer + 54114));
  drawImageWithPosition((int)graphicsGeneral.resupok1Bpk, 272, 386, (int)((char *)screenBuffer + 53770));
  v66 = 1919251558;
  v64 = 1952543827;
  v65 = 1629516661;
  v67 = 32;
  itoa(drivers[driverId].totalRaces, &DstBuf, 10);
  v1 = strlen(&DstBuf) + 1;
  v2 = (char *)&v63 + 3;
  do
    v3 = (v2++)[1];
  while ( v3 );
  memcpy(v2, &DstBuf, v1);
  v4 = (char *)&v63 + 3;
  do
    v5 = (v4++)[1];
  while ( v5 );
  *(_DWORD *)v4 = 1667330592;
  *((_DWORD *)v4 + 1) = 695412837;
  v6 = (int)graphicsGeneral.fsma3aBpk;
  v4[8] = 0;
  drawTextWithFont(v6, (int)&byte_4458B0, (const char *)&v64, 289326);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Multiplayer Ranking", 55096);
  sub_424420();
  v7 = 0;
  for ( i = dword_456758 - 1; v7 < dword_456758 - 1; i = dword_456758 - 1 )
  {
    v9 = 108 * v7;
    if (drivers[v7].totalIncome <= drivers[v7+1].totalIncome)
    {
      ++v7;
    }
    else
    {
      v10 = v7 + 1;
      if ( driverId == v7 )
      {
        driverId = v7 + 1;
      }
      else if ( driverId == v10 )
      {
        driverId = v7;
      }
      memcpy(&unk_4611E0, &byte_460840[v9], 0x6Cu);
      memcpy(&byte_460840[v9], &byte_460840[108 * v10], 0x6Cu);
      memcpy(&byte_460840[108 * v10], &unk_4611E0, 0x6Cu);
      v11 = 0;
      do
      {
        v12 = *((byte *)&dword_45FA74 + v11);
        if ( v12 == v7 )
        {
          *((byte *)&dword_45FA74 + v11) = v10;
        }
        else if ( v12 == v10 )
        {
          *((byte *)&dword_45FA74 + v11) = v7;
        }
        ++v11;
      }
      while ( v11 < 4 );
      v13 = &dword_4A7A60[84 * v7];
      memcpy(&unk_4611E0, v13, 0x54u);
      v14 = &dword_4A7A60[84 * v10];
      memcpy(v13, v14, 0x54u);
      memcpy(v14, &unk_4611E0, 0x54u);
      v7 = 0;
    }
  }
  v15 = 0;
  if ( i > 0 )
  {
    do
    {
      if (drivers[v15].points<= drivers[v15+1].points)
      {
        ++v15;
      }
      else
      {
        v16 = v15 + 1;
        if ( driverId == v15 )
        {
          driverId = v15 + 1;
        }
        else if ( driverId == v16 )
        {
          driverId = v15;
        }
        v17 = &byte_460840[108 * v15];
        memcpy(&unk_4611E0, v17, 0x6Cu);
        memcpy(v17, &byte_460840[108 * v16], 0x6Cu);
        memcpy(&byte_460840[108 * v16], &unk_4611E0, 0x6Cu);
        v18 = 0;
        do
        {
          v19 = *((byte *)&dword_45FA74 + v18);
          if ( v19 == v15 )
          {
            *((byte *)&dword_45FA74 + v18) = v16;
          }
          else if ( v19 == v16 )
          {
            *((byte *)&dword_45FA74 + v18) = v15;
          }
          ++v18;
        }
        while ( v18 < 4 );
        v20 = &dword_4A7A60[84 * v15];
        memcpy(&unk_4611E0, v20, 0x54u);
        v21 = &dword_4A7A60[84 * v16];
        memcpy(v20, v21, 0x54u);
        memcpy(v21, &unk_4611E0, 0x54u);
        v15 = 0;
      }
    }
    while ( v15 < dword_456758 - 1 );
  }
  v22 = dword_456758;
  if ( dword_456758 > 0 )
  {
    v23 = (int)drivers[0].rank;
    v24 = dword_456758;
    do
    {
      *(_DWORD *)v23 = v22--;
      v23 += 108;
      --v24;
    }
    while ( v24 );
  }
  sub_426280();
  v25 = (unsigned __int8)byte_45FC0F[dword_456BCC];
  v26 = &aSuburbia[15 * v25];
  v27 = (char *)&v64 - 15 * v25 - aSuburbia;
  do
  {
    v28 = *v26;
    v26[v27] = *v26;
    ++v26;
  }
  while ( v28 );
  itoa(dword_456758, &DstBuf, 10);
  v29 = (char *)&v63 + 3;
  do
    v30 = (v29++)[1];
  while ( v30 );
  *(_WORD *)v29 = 32;
  v31 = strlen(&DstBuf) + 1;
  v32 = (char *)&v63 + 3;
  do
    v33 = (v32++)[1];
  while ( v33 );
  memcpy(v32, &DstBuf, v31);
  v34 = (char *)&v63 + 3;
  do
    v35 = (v34++)[1];
  while ( v35 );
  *(_DWORD *)v34 = 1634496557;
  *((_DWORD *)v34 + 1) = 544367993;
  *((_DWORD *)v34 + 2) = 1701011826;
  *((_WORD *)v34 + 6) = 58;
  v36 = &v64;
  v37 = 0;
  v38 = 0;
  do
  {
    v39 = *(byte *)v36;
    v36 = (int *)((char *)v36 + 1);
  }
  while ( v39 );
  v62 = (char *)v36 - ((char *)&v64 + 1);
  if ( v36 != (int *)((char *)&v64 + 1) )
  {
    do
      v37 += (unsigned __int8)byte_445892[*((byte *)&v64 + v38++)];
    while ( v38 < strlen((const char *)&v64) );
  }
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, (const char *)&v64, 55530 - v37 / 2);
  v40 = 0;
  v62 = 50462976;
  if ( v63 > 0 )
  {
    v41 = (int)dword_4A7AA0;
    do
    {
      v42 = *(_DWORD *)v41;
      if ( *(_DWORD *)v41 == 1 )
        LOBYTE(v62) = v40;
      if ( v42 == 2 )
        BYTE1(v62) = v40;
      if ( v42 == 3 )
        BYTE2(v62) = v40;
      if ( v42 == 4 )
        BYTE3(v62) = v40;
      ++v40;
      v41 += 84;
    }
    while ( v40 < v63 );
  }
  drawRightPositions(dword_456758, (int)&v62);
  sub_426080();
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
  refreshAllScreen();
  v43 = 0;
  do
  {
    wait();
    v44 = 0;
    v45 = 0;
	//v45 = (signed int)dword_45FC44;
    do
    {
      v46 = (convertColorToPaletteColor((palette1[v45+2]), v43) + 0x8000) >> 16;
      v47 = (convertColorToPaletteColor(palette1[v45 + 1], v43) + 0x8000) >> 16;
      v48 = convertColorToPaletteColor((palette1[v45] ), v43);
      setPaletteAndGetValue(v44, (v48 + 0x8000) >> 16, v47, v46);
      v45 += 3;
      ++v44;
    }
    while ( v45 < maxPaletteEntries );
    v43 += 0x20000;
  }
  while ( v43 < 6553600 );
  do
  {
    sub_42A570();
    sub_4260D0();
  }
  while ( !eventDetected() );
  drawStadistics();
  sub_426280();
  sub_426080();
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Please wait while loading...", 289646);
  refreshAllScreen();
  loadGraphics2();
  loadGraphics3();
  loadGraphics4();
  sub_426080();
  loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue...", 289646);
  refreshAllScreen();
  do
  {
    sub_42A570();
    sub_4260D0();
  }
  while ( !eventDetected() );
  v49 = (signed int)&dword_4A7AA4;
  while ( *(_DWORD *)v49 != -1 || dword_456B9C )
  {
    v49 += 84;
    if ( v49 >= (signed int)&unk_4A7BF4 )
      goto LABEL_76;
  }
  sub_42A300();
  if ( dword_45E0A8 != 2 )
    sub_428070(0);
  driverId = 19;
LABEL_76:
  sub_4224E0();
  if ( !useWeapons && !dword_456B98 && !dword_456B9C )
  {
    v50 = 6553600;
    do
    {
      wait();
      v51 = 0;
      v52 = 0;
	  ///v52 = (signed int)dword_45FC44;
      do
      {
        v53 = (convertColorToPaletteColor((palette1[v52+2]), v50) + 0x8000) >> 16;
        v54 = (convertColorToPaletteColor(palette1[v52 + 1], v50) + 0x8000) >> 16;
        v55 = convertColorToPaletteColor((palette1[v52 ] - 4), v50);
        setPaletteAndGetValue(v51, (v55 + 0x8000) >> 16, v54, v53);
        v52 += 3;
        ++v51;
      }
      while ( v52 < 289 );
	  //while (v52 < (signed int)&unk_4600C4);
      v56 = -128;
	  v57 = 384;
      //v57 = (signed int)&unk_460244;
      do
      {
        v58 = (convertColorToPaletteColor(palette1[v57 + 2], v50) + 0x8000) >> 16;
        v59 = (convertColorToPaletteColor(palette1[v57 + 1], v50) + 0x8000) >> 16;
        v60 = convertColorToPaletteColor(palette1[v57 ], v50);
        setPaletteAndGetValue(v56, (v60 + 0x8000) >> 16, v59, v58);
        v57 += 3;
        ++v56;
		/*v58 = (convertColorToPaletteColor(*(_DWORD *)(v57 + 4), v50) + 0x8000) >> 16;
        v59 = (convertColorToPaletteColor(*(_DWORD *)v57, v50) + 0x8000) >> 16;
        v60 = convertColorToPaletteColor(*(_DWORD *)(v57 - 4), v50);
        setPaletteAndGetValue(v56, (v60 + 0x8000) >> 16, v59, v58);
        v57 += 12;
        ++v56;*/
      }
      while ( v57 < maxPaletteEntries );
      v50 -= 0x20000;
    }
    while ( v50 >= 0 );
  }
  result = eventDetected();
  dword_456730 = 1;
  return result;
}


//----- (0042C4A0) --------------------------------------------------------
char sub_42C4A0()
{
  signed int v0; // ebp@2
  int v1; // edi@3
  signed int v2; // esi@3
  signed int v3; // ebx@3
  signed int v5; // [sp+10h] [bp-8h]@1
  signed int v6; // [sp+14h] [bp-4h]@2

  v5 = 48000;
  do
  {
    sub_42A480();
    v0 = v5;
    v6 = 22;
    do
    {
      v1 = 0;
      v2 = v0;
      v3 = 10;
      do
      {
        sub_43B080(
          (int)((char *)graphicsGeneral.t15x150Bpk + v1),
          (int)((char *)dword_461ED8 + v2),
          15,
          15,
          (int)((char *)screenBuffer + v2));
        v1 += 225;
        v2 += 15;
        --v3;
      }
      while ( v3 );
      v0 += 9600;
      --v6;
    }
    while ( v6 );
    drawKeyCursor(v5, (char *)screenBuffer + v5, 0x96u, 330);
    v5 += 15;
  }
  while ( v5 < 48645 );
  eventDetected();
  return sub_418090();
}

//----- (0042C560) --------------------------------------------------------
char __cdecl sub_42C560(int a1)
{
  signed int v1; // ebp@2
  int v2; // edi@3
  signed int v3; // esi@3
  signed int v4; // ebx@3
  bool v5; // zf@10
  bool v6; // sf@10
  signed int v8; // [sp+10h] [bp-10h]@1
  signed int v9; // [sp+14h] [bp-Ch]@1
  signed int v10; // [sp+18h] [bp-8h]@1
  signed int v11; // [sp+1Ch] [bp-4h]@2

  v10 = 0;
  v8 = 48000;
  v9 = 65532;
  do
  {
    sub_42A480();
    v1 = v8;
    v11 = 22;
    do
    {
      v2 = 0;
      v3 = v1;
      v4 = 10;
      do
      {
        sub_43B080(
          (int)((char *)graphicsGeneral.t15x150Bpk + v2),
          (int)((char *)dword_461ED8 + v3),
          15,
          15,
          (int)((char *)screenBuffer + v3));
        v2 += 225;
        v3 += 15;
        --v4;
      }
      while ( v4 );
      v1 += 9600;
      --v11;
    }
    while ( v11 );
    drawKeyCursor(v8, (char *)screenBuffer + v8, 0x96u, 330);
    if ( a1 == -1 )
    {
      setMusicVolume(v9);
    }
    else if ( a1 == 1 )
    {
      setMusicVolume(v10);
    }
    v5 = v9 == 1524;
    v6 = v9 - 1524 < 0;
    v8 += 15;
    v9 -= 1524;
    v10 += 1524;
  }
  while ( !v6 && !v5 );
  eventDetected();
  return sub_418090();
}

//----- (0042C670) --------------------------------------------------------
int __cdecl sub_42C670(int a1)
{
  signed int v1; // ebp@1
  int v2; // ebx@2
  signed int v3; // edi@3
  int v4; // esi@3
  bool v5; // zf@10
  bool v6; // sf@10
  signed int v8; // [sp+10h] [bp-Ch]@1
  signed int v9; // [sp+14h] [bp-8h]@1
  signed int v10; // [sp+18h] [bp-4h]@2

  v9 = 0;
  v1 = 46720;
  v8 = 65532;
  do
  {
    sub_42A480();
    v2 = v1 + 1280;
    v10 = 27;
    do
    {
      v3 = 0;
      v4 = v2;
      do
      {
        sub_43B080(
          (int)((char *)graphicsGeneral.t15x150Bpk + v3),
          (int)((char *)dword_461ED8 + v4 - 1280),
          15,
          15,
          (int)((char *)screenBuffer + v4 - 1280));
        v3 += 225;
        v4 += 15;
      }
      while ( v3 < 2250 );
      v2 += 9600;
      --v10;
    }
    while ( v10 );
    drawKeyCursor(v1, (char *)screenBuffer + v1, 0x96u, 405);
    if ( a1 == -1 )
    {
      setMusicVolume(v8);
    }
    else if ( a1 == 1 )
    {
      setMusicVolume(v9);
    }
    v1 += 15;
    v5 = v8 == 1524;
    v6 = v8 - 1524 < 0;
    v8 -= 1524;
    v9 += 1524;
  }
  while ( !v6 && !v5 );
  eventDetected();
  sub_418090();
  return sub_42A480();
}

//----- (0042C780) --------------------------------------------------------
char sub_42C780()
{
  char v0; // bl@1
  unsigned __int8 v2; // [sp+1h] [bp-1h]@1

  v0 = 0;
  v2 = 0;
  eventDetected();
  sub_418090();
  do
  {
    if ( v0 == 28 || v0 == -100 )
      break;
    if ( v2 > 0xAu )
      v0 = eventDetected();
    sub_42A570();
    sub_42A570();
    drawCursor(164, 321);
    ++v2;
  }
  while ( v0 != 1 );
  eventDetected();
  return sub_418090();
}

//----- (0042C7F0) --------------------------------------------------------
int __cdecl sub_42C7F0(int a1, int a2, int a3, int a4, int a5, int a6)
{
  bool v6; // zf@1
  bool v7; // sf@1
  unsigned __int8 v8; // of@1
  int v9; // eax@2
  signed int v10; // ecx@2
  char *v11; // ebp@3
  int result; // eax@8

  sub_42A570();
  v8 = __OFSUB__(dword_456BD0 + 1, 10);
  v6 = dword_456BD0 == 9;
  v7 = dword_456BD0++ - 9 < 0;
  if ( (unsigned __int8)(v7 ^ v8) | v6 )
  {
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, (const char *)&unk_443C40, a3 + a1 + 640 * a2);
  }
  else
  {
    v9 = (5 * a2 + 10) << 7;
    v10 = 30;
    do
    {
      v11 = (char *)screenBuffer + v9 + a1 + a3;
      *(_DWORD *)v11 = -993737532;
      *((_DWORD *)v11 + 1) = -993737532;
      *((_DWORD *)v11 + 2) = -993737532;
      *((_DWORD *)v11 + 3) = -993737532;
      v9 += 640;
      --v10;
      *((_DWORD *)v11 + 4) = -993737532;
    }
    while ( v10 );
  }
  if ( dword_456BD0 > 20 )
    dword_456BD0 = 0;
  drawKeyCursor(a3 + a1 + 640 * a2, (char *)screenBuffer + 640 * a2 + a1 + a3, 0x14u, 32);
  result = dword_456BD4;
  if ( dword_456BD4 )
  {
    dword_456BD4 = 0;
  }
  else
  {
    if ( a4 )
    {
		//carAnimCurrentFrame_45FBA0 = 0;
		//TODO he quitado la animacion del coche!!!!
     drawMenuAnimation(a5 + 416, a6 + 80, carAnimCurrentFrame_45FBA0, getCarBpkById(0), (int)&carAnimFrameSize_45FBA0);
	 //drawMenuAnimation(a5 + 416, a6 + 80, carAnimCurrentFrame_45FBA0, (int)kuplaBpk, (int)carAnimFrameSize_45FBA0);
      drawKeyCursor(640 * a6 + a5 + 51616, (char *)screenBuffer + 640 * a6 + a5 + 51616, 0x60u, 64);
      result = carAnimCurrentFrame_45FBA0 + 1;
      v8 = __OFSUB__(carAnimCurrentFrame_45FBA0 + 1, 63);
      v6 = carAnimCurrentFrame_45FBA0 == 62;
      v7 = carAnimCurrentFrame_45FBA0++ - 62 < 0;
      if ( !((unsigned __int8)(v7 ^ v8) | v6) )
        carAnimCurrentFrame_45FBA0 = 0;
    }
    dword_456BD4 = 1;
  }
  return result;
}
// 445968: using guessed type int carAnimFrameSize_45FBA0[];
// 456BD0: using guessed type int dword_456BD0;
// 456BD4: using guessed type int dword_456BD4;
// 45FBA0: using guessed type int carAnimCurrentFrame_45FBA0;

//----- (0042C940) --------------------------------------------------------
char sub_42C940()
{
  signed int v0; // ebp@1
  int v1; // esi@1
  unsigned __int8 v2; // bl@4
  signed int v3; // edi@4
  int v4; // ST20_4@5
  int v5; // ST1C_4@5
  int v6; // eax@5
  unsigned __int8 v7; // bl@6
  signed int v8; // edi@6
  int v9; // ST20_4@7
  int v10; // ST1C_4@7
  int v11; // eax@7
  signed int v12; // ebp@11
  int v13; // esi@11
  unsigned __int8 v14; // bl@14
  signed int v15; // edi@14
  int v16; // ST20_4@15
  int v17; // ST1C_4@15
  int v18; // eax@15
  unsigned __int8 v19; // bl@16
  signed int v20; // edi@16
  int v21; // ST20_4@17
  int v22; // ST1C_4@17
  int v23; // eax@17
  const char **v25; // [sp+0h] [bp-10h]@0
  const char **v26; // [sp+4h] [bp-Ch]@0

  sub_4224E0();
  v0 = 50;
  v1 = 6553600;
  do
  {
    wait();
    if ( v0 % 2 )
      updateCursor(1);
    v2 = 0;
    v3 = 0;
	//FIXED
	//v3 = (signed int)dword_45FC44;
    do
    {
      v4 = (convertColorToPaletteColor((palette1[v3+2]), v1) + 0x8000) >> 16;
      v5 = (convertColorToPaletteColor(palette1[v3 + 1], v1) + 0x8000) >> 16;
      v6 = convertColorToPaletteColor((palette1[v3]), v1);
      setPaletteAndGetValue(v2, (v6 + 0x8000) >> 16, v5, v4);
      v3 += 3;
      ++v2;
    }
    while ( v3 <288);
	//while (v3 < (signed int)&unk_4600C4);
    v7 = -128;
    v8 = 384;
	//FIXED
	//v8 = (signed int)&unk_460244;
    do
    {
      v9 = (convertColorToPaletteColor(palette1[v8+2], v1) + 0x8000) >> 16;
      v10 = (convertColorToPaletteColor(palette1[v8 + 1], v1) + 0x8000) >> 16;
      v11 = convertColorToPaletteColor(palette1[v8 ], v1);
      setPaletteAndGetValue(v7, (v11 + 0x8000) >> 16, v10, v9);
      v8 += 3;
      ++v7;
	  /* v9 = (convertColorToPaletteColor(*(_DWORD *)(v8 + 4), v1) + 0x8000) >> 16;
      v10 = (convertColorToPaletteColor(*(_DWORD *)v8, v1) + 0x8000) >> 16;
      v11 = convertColorToPaletteColor(*(_DWORD *)(v8 - 4), v1);
      setPaletteAndGetValue(v7, (v11 + 0x8000) >> 16, v10, v9);
      v8 += 12;
      ++v7;*/
    }
    while ( v8 < maxPaletteEntries);
	//while (v8 < (signed int)&unk_460844);
    --v0;
    v1 -= 0x20000;
  }
  while ( v1 >= 0 );
  sub_418090();
  eventDetected();
  //esto es mio 
  v26 = malloc(10);
  v25 = malloc(10);
  main(2, v25, v26);
  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
  drawMenu(INITIAL_MENU, 0);
  drawMenu(START_NEW_GAME_MENU, 1);
  drawTransparentBlock(0, 371, 639, 109);
  if ( isMultiplayerGame )
  {
    drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
  }
  drawBottomMenuText();
  refreshAllScreen();
  sub_4224E0();
  v12 = 0;
  v13 = 0;
  do
  {
    wait();
    if ( v12 % 2 )
      updateCursor(1);
    v14 = 0;
    v15 =0;
	//FIXED
	//v15 = (signed int)dword_45FC44;
    do
    {
      v16 = (convertColorToPaletteColor((palette1[v15+2]), v13) + 0x8000) >> 16;
      v17 = (convertColorToPaletteColor(palette1[v15 + 1], v13) + 0x8000) >> 16;
      v18 = convertColorToPaletteColor((palette1[v15 ]), v13);
      setPaletteAndGetValue(v14, (v18 + 0x8000) >> 16, v17, v16);
      v15 += 3;
      ++v14;
    }
    while ( v15 < 288 );
	//while (v15 < (signed int)&unk_4600C4);
    v19 = -128;
	v20 = 384;
	//FIXED
    //v20 = (signed int)&unk_460244;
    do
    {
      v21 = (convertColorToPaletteColor(palette1[v20 + 2], v13) + 0x8000) >> 16;
      v22 = (convertColorToPaletteColor(palette1[v20 + 1], v13) + 0x8000) >> 16;
      v23 = convertColorToPaletteColor(palette1[v20], v13);
      setPaletteAndGetValue(v19, (v23 + 0x8000) >> 16, v22, v21);
      v20 += 3;
      ++v19;
	  /* v21 = (convertColorToPaletteColor(*(_DWORD *)(v20 + 4), v13) + 0x8000) >> 16;
      v22 = (convertColorToPaletteColor(*(_DWORD *)v20, v13) + 0x8000) >> 16;
      v23 = convertColorToPaletteColor(*(_DWORD *)(v20 - 4), v13);
      setPaletteAndGetValue(v19, (v23 + 0x8000) >> 16, v22, v21);
      v20 += 12;
      ++v19;*/

    }
    while ( v20 < maxPaletteEntries);
	//while ( v20 < (signed int)&unk_460844 );
    v13 += 0x20000;
    ++v12;
  }
  while ( v13 < 6553600 );
  sub_418090();
  return eventDetected();
}


//----- (0042CBF0) --------------------------------------------------------
char sub_42CBF0()
{
  char v0; // bl@1
  signed int v1; // esi@1
  char v2; // al@20
  char result; // al@25

  v0 = -1;
  byte_456B00 = 1;
  v1 = 0;
  do
  {
    sub_42A570();
    if ( configuration.useJoystick > 0 )
    {
      SDLConfigureJoystick();
      if ( v1 > 15 )
      {
        if ( dword_4A7A44 < dword_4AA3E0 - 50 )
          v0 = configuration.defaultLeftSteeringGamepad;
        if ( dword_4A7A44 > dword_4AA3E0 + 50 )
          v0 = configuration.defaultRightSteeringGamepad;
        if ( dword_4A9EB8 < dword_4A9EA0 - 50 )
          v0 = byte_44512A;
        if ( dword_4A9EB8 > dword_4A9EA0 + 50 )
          v0 = configuration.defaultBrakeGamepad;
        if ( byte_463E00[(unsigned __int8)configuration.defaultAccelerateGamepad] )
          v0 = configuration.defaultAccelerateGamepad;
        if ( byte_463E00[(unsigned __int8)configuration.defaultTurboGamepad] )
          v0 = configuration.defaultTurboGamepad;
        if ( byte_463E00[(unsigned __int8)configuration.defaultGunGamepad] )
          v0 = configuration.defaultGunGamepad;
        if ( byte_463E00[(unsigned __int8)configuration.defaultMineGamepad] )
          v0 = configuration.defaultMineGamepad;
      }
    }
    v2 = eventDetected();
    if ( v2 == 28 || v2 == -100 || v2 == 1 )
      v0 = byte_456B01;
    ++v1;
  }
  while ( v0 == -1 );
  result = v0;
  byte_456B00 = 0;
  return result;
}

//----- (0042CCF0) --------------------------------------------------------
int sub_42CCF0()
{
  int v0; // ebp@1
  int v1; // eax@1
  const char *v2; // edi@1
  int v3; // esi@1
  int v4; // ebx@9
  int i; // esi@9
  int v6; // esi@11
  signed int v7; // eax@12
  char *v8; // ecx@13
  char *v9; // edx@13
  char v10; // al@18
  unsigned int v11; // eax@24
  char *v12; // edi@24
  char v13; // cl@25
  signed int v14; // eax@26
  char *v15; // edx@27
  char *v16; // ecx@27
  int v17; // esi@28
  unsigned int v18; // ebx@29
  unsigned int v19; // eax@29
  int v20; // eax@34
  char v21; // cl@35
  signed int v22; // eax@36
  char *v23; // esi@37
  char *v24; // edi@37
  signed int v25; // esi@38
  signed int v26; // eax@39
  char v27; // cl@40
  char *v28; // eax@42
  char v29; // dl@43
  unsigned int v30; // eax@44
  char *v31; // edi@44
  char v32; // cl@45
  char *v33; // edi@46
  char v34; // al@47
  unsigned int v35; // eax@48
  char *v36; // edi@48
  char v37; // cl@49
  char *v38; // eax@51
  char v39; // cl@52
  unsigned int v40; // eax@53
  char *v41; // edi@53
  char v42; // cl@54
  int v43; // ST20_4@55
  char *v44; // eax@55
  unsigned int v45; // ecx@55
  char v46; // dl@56
  char *v47; // eax@61
  char v48; // cl@62
  signed int v49; // eax@64
  char *v50; // esi@65
  char *v51; // edi@65
  signed int v52; // esi@66
  signed int v53; // eax@67
  char v54; // cl@68
  unsigned int v55; // eax@71
  char *v56; // edi@71
  char v57; // cl@72
  char *v58; // eax@74
  char v59; // dl@75
  unsigned int v60; // eax@76
  char *v61; // edi@76
  char v62; // cl@77
  char *v63; // edi@78
  char v64; // al@79
  unsigned int v65; // eax@80
  char *v66; // edi@80
  char v67; // cl@81
  char *v68; // eax@83
  char v69; // cl@84
  signed int v70; // eax@86
  char *v71; // esi@87
  char *v72; // edx@87
  int result; // eax@94
  unsigned __int8 v74; // [sp+0h] [bp-144h]@18
  char v75; // [sp+1h] [bp-143h]@1
  int v76; // [sp+4h] [bp-140h]@9
  int v77; // [sp+8h] [bp-13Ch]@1
  int v78; // [sp+Ch] [bp-138h]@10
  int v79; // [sp+10h] [bp-134h]@24
  char v80[152]; // [sp+14h] [bp-130h]@9
  char DstBuf; // [sp+ACh] [bp-98h]@35
  char v82[151]; // [sp+ADh] [bp-97h]@51

  v0 = 0;
  v1 = dword_456B90 != 0;
  dword_456B54 = 1;
  dword_456B90 = 0;
  memcpy(dword_461ED8, screenBuffer, 0x4B000u);
  v75 = 0;
  v77 = v1;
  memcpy((char *)screenBuffer + 53760, (char *)graphicsGeneral.menubg5Bpk + 53760, 0x3C500u);
  drawTransparentBlock(0, 111, 639, 369);
  drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to minimize chat window", 67875);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 67929);
  v2 = (const char *)&unk_462000;
  v3 = 76172;
  do
  {
    if ( !unk_461EC0[v0] )
      drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, v2, v3);
    if ( unk_461EC0[v0] == 1 )
      drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, v2, v3);
    if ( unk_461EC0[v0] == 2 )
      drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, v2, v3);
    v3 += 9600;
    ++v0;
    v2 += 150;
  }
  while ( v3 < 287372 );
  refreshAllScreen();
  v4 = 0;
  v80[0] = 0;
  v76 = 0;
  for ( i = 0; ; i = v78 )
  {
    sub_42A570();
    v6 = i + 1;
    v78 = v6;
    if ( v6 <= 10 )
    {
      drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&unk_443C40, v4 + 288012);
    }
    else
    {
      v7 = 0;
      do
      {
        v8 = (char *)graphicsGeneral.menubg5Bpk + v7 + v4 + 288012;
        v9 = (char *)screenBuffer + v7 + v4 + 288012;
        *(_DWORD *)v9 = *(_DWORD *)v8;
        *((_DWORD *)v9 + 1) = *((_DWORD *)v8 + 1);
        *((_DWORD *)v9 + 2) = *((_DWORD *)v8 + 2);
        v7 += 640;
        *((_DWORD *)v9 + 3) = *((_DWORD *)v8 + 3);
      }
      while ( v7 < 10240 );
    }
    if ( v6 > 20 )
      v78 = 0;
    drawKeyCursor(v4 + 288012, (char *)screenBuffer + v4 + 288012, (unsigned __int8)byte_445911, 15);
    v10 = sub_418090();
    v74 = v10;
    switch ( v10 )
    {
      case 8:
        v68 = v80;
        do
          v69 = *v68++;
        while ( v69 );
        v79 = v68 - &v80[1];
        if ( v68 != &v80[1] )
        {
          v4 -= (unsigned __int8)byte_445892[(unsigned __int8)v80[strlen(v80) - 1]];
          v70 = 0;
          do
          {
            v71 = (char *)graphicsGeneral.menubg5Bpk + v70 + v4 + 288012;
            v72 = (char *)screenBuffer + v70;
            v70 += 640;
            memcpy(&v72[v4 + 288012], v71, 0x20u);
          }
          while ( v70 < 10240 );
          drawKeyCursor(v4 + 288012, (char *)screenBuffer + v4 + 288012, 0x20u, 16);
          *((byte *)&v79 + strlen(v80) + 3) = 0;
        }
        break;
      case 13:
        v47 = v80;
        do
          v48 = *v47++;
        while ( v48 );
        v79 = v47 - &v80[1];
        if ( v47 != &v80[1] )
        {
          v4 = 0;
          v49 = 0;
          do
          {
            v50 = (char *)graphicsGeneral.menubg5Bpk + v49 + 288012;
            v51 = (char *)screenBuffer + v49 + 288012;
            memcpy(v51, v50, 0x260u);
            v49 += 640;
            *((_WORD *)v51 + 304) = *((_WORD *)v50 + 304);
          }
          while ( v49 < 10240 );
          unk_461EC0[0] = unk_461EC1;
          unk_461EC1 = unk_461EC2;
          unk_461EC2 = unk_461EC3;
          unk_461EC3 = word_461EC4;
          HIBYTE(word_461EC4) = unk_461EC6;
          unk_461EC6 = unk_461EC7;
          unk_461EC7 = word_461EC8;
          HIBYTE(word_461EC8) = unk_461ECA;
          unk_461ECA = unk_461ECB;
          unk_461ECB = word_461ECC;
          HIBYTE(word_461ECC) = unk_461ECE;
          unk_461ECE = unk_461ECF;
          unk_461ECF = word_461ED0;
          HIBYTE(word_461ED0) = unk_461ED2;
          v52 = (signed int)&unk_462096;
          unk_461ED2 = unk_461ED3;
          unk_461ED3 = word_461ED4;
          do
          {
            v53 = v52;
            do
            {
              v54 = *(byte *)v53;
              *(byte *)(v53 - 150) = *(byte *)v53;
              ++v53;
            }
            while ( v54 );
            v52 += 150;
          }
          while ( v52 < (signed int)&blacktx1Bpk );
          if ( !memcmp(v80, "/memavail", 0xAu) )
          {
            dword_462C4E = 1293954349;
            dword_462C5A = 1634494817;
            dword_462C52 = 1919905125;
            dword_462C56 = 1986076793;
            dword_462C5E = 979725410;
            word_462C62 = 32;
            itoa(0x40000000, &DstBuf, 10);
            v55 = strlen(&DstBuf) + 1;
            v56 = (char *)&dword_462C4E - 1;
            do
              v57 = (v56++)[1];
            while ( v57 );
            memcpy(v56, &DstBuf, v55);
            HIBYTE(word_461ED4) = 0;
            sub_41E8D0();
            v80[0] = 0;
            refreshAllScreen();
          }
          else
          {
            v58 = &byte_460840[108 * driverId];
            LOWORD(dword_462C4E) = 60;
            do
              v59 = *v58++;
            while ( v59 );
            v60 = v58 - &byte_460840[108 * driverId];
            v61 = (char *)&dword_462C4E - 1;
            do
              v62 = (v61++)[1];
            while ( v62 );
            memcpy(v61, &byte_460840[108 * driverId], v60);
            v63 = (char *)&dword_462C4E - 1;
            do
              v64 = (v63++)[1];
            while ( v64 );
            *(_WORD *)v63 = 8254;
            v63[2] = 0;
            v65 = strlen(v80) + 1;
            v66 = (char *)&dword_462C4E - 1;
            do
              v67 = (v66++)[1];
            while ( v67 );
            memcpy(v66, v80, v65);
            HIBYTE(word_461ED4) = 2;
            sub_41EA70((int)&dword_462C4E, strlen((const char *)&dword_462C4E) + 1, 1);
            sub_41E8D0();
            v80[0] = 0;
            refreshAllScreen();
          }
        }
        break;
      case 27:
        v76 = -1;
        break;
      default:
        if ( v4 >= 579 - dword_45FA78 )
        {
          v18 = strlen(v80);
          v19 = strlen(v80);
          if ( (v19 & 0x80000000) == 0 )
          {
            while ( v80[v19] != 32 )
            {
              --v19;
              if ( (v19 & 0x80000000) != 0 )
                goto LABEL_34;
            }
            v18 = v19;
          }
LABEL_34:
          v20 = 0;
          do
          {
            v21 = v80[v20];
            *(&DstBuf + v20++) = v21;
          }
          while ( v21 );
          v80[v18] = 0;
          v22 = 0;
          do
          {
            v23 = (char *)graphicsGeneral.menubg5Bpk + v22 + 288012;
            v24 = (char *)screenBuffer + v22 + 288012;
            memcpy(v24, v23, 0x260u);
            v22 += 640;
            *((_WORD *)v24 + 304) = *((_WORD *)v23 + 304);
          }
          while ( v22 < 10240 );
          unk_461EC0[0] = unk_461EC1;
          unk_461EC1 = unk_461EC2;
          unk_461EC2 = unk_461EC3;
          unk_461EC3 = word_461EC4;
          HIBYTE(word_461EC4) = unk_461EC6;
          unk_461EC6 = unk_461EC7;
          unk_461EC7 = word_461EC8;
          HIBYTE(word_461EC8) = unk_461ECA;
          unk_461ECA = unk_461ECB;
          unk_461ECB = word_461ECC;
          HIBYTE(word_461ECC) = unk_461ECE;
          unk_461ECE = unk_461ECF;
          unk_461ECF = word_461ED0;
          HIBYTE(word_461ED0) = unk_461ED2;
          v25 = (signed int)&unk_462096;
          unk_461ED2 = unk_461ED3;
          unk_461ED3 = word_461ED4;
          do
          {
            v26 = v25;
            do
            {
              v27 = *(byte *)v26;
              *(byte *)(v26 - 150) = *(byte *)v26;
              ++v26;
            }
            while ( v27 );
            v25 += 150;
          }
          while ( v25 < (signed int)&blacktx1Bpk );
          v28 = &byte_460840[108 * driverId];
          LOWORD(dword_462C4E) = 60;
          do
            v29 = *v28++;
          while ( v29 );
          v30 = v28 - &byte_460840[108 * driverId];
          v31 = (char *)&dword_462C4E - 1;
          do
            v32 = (v31++)[1];
          while ( v32 );
          memcpy(v31, &byte_460840[108 * driverId], v30);
          v33 = (char *)&dword_462C4E - 1;
          do
            v34 = (v33++)[1];
          while ( v34 );
          *(_WORD *)v33 = 8254;
          v33[2] = 0;
          v35 = strlen(v80) + 1;
          v36 = (char *)&dword_462C4E - 1;
          do
            v37 = (v36++)[1];
          while ( v37 );
          memcpy(v36, v80, v35);
          HIBYTE(word_461ED4) = 2;
          sub_41EA70((int)&dword_462C4E, strlen((const char *)&dword_462C4E) + 1, 1);
          sub_41E8D0();
          v80[0] = 0;
          if ( v18 != strlen(&DstBuf) )
          {
            v38 = &v82[v18];
            do
            {
              v39 = *v38;
              v38[v80 - &v82[v18]] = *v38;
              ++v38;
            }
            while ( v39 );
          }
          v40 = strlen((const char *)&v74) + 1;
          v41 = (char *)&v79 + 3;
          do
            v42 = (v41++)[1];
          while ( v42 );
          memcpy(v41, &v74, 4 * (v40 >> 2));
          v43 = (int)graphicsGeneral.fsma3cBpk;
          memcpy(&v41[4 * (v40 >> 2)], &v74 + 4 * (v40 >> 2), v40 & 3);
          drawTextWithFont(v43, (int)&byte_4458B0, v80, 288012);
          v44 = v80;
          v4 = 0;
          v45 = 0;
          do
            v46 = *v44++;
          while ( v46 );
          v79 = v44 - &v80[1];
          if ( v44 != &v80[1] )
          {
            do
              v4 += (unsigned __int8)byte_445892[(unsigned __int8)v80[v45++]];
            while ( v45 < strlen(v80) );
          }
          refreshAllScreen();
        }
        else if ( (unsigned __int8)v10 >= 0x20u && (unsigned __int8)v10 <= 0x7Eu )
        {
          v11 = strlen((const char *)&v74) + 1;
          v12 = (char *)&v79 + 3;
          do
            v13 = (v12++)[1];
          while ( v13 );
          memcpy(v12, &v74, v11);
          v14 = 0;
          do
          {
            v15 = (char *)graphicsGeneral.menubg5Bpk + v14 + v4 + 288012;
            v16 = (char *)screenBuffer + v14 + v4 + 288012;
            *(_DWORD *)v16 = *(_DWORD *)v15;
            *((_DWORD *)v16 + 1) = *((_DWORD *)v15 + 1);
            *((_DWORD *)v16 + 2) = *((_DWORD *)v15 + 2);
            v14 += 640;
            *((_DWORD *)v16 + 3) = *((_DWORD *)v15 + 3);
          }
          while ( v14 < 10240 );
          drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v74, v4 + 288012);
          v17 = v74;
          drawKeyCursor(v4 + 288012, (char *)screenBuffer + v4 + 288012, (unsigned __int8)byte_445892[v74], 15);
          v4 += (unsigned __int8)byte_445892[v17];
        }
        break;
    }
    if ( eventDetected() == 59 )
      v76 = -1;
    if ( isMultiplayerGame && dword_456B9C || v76 )
      break;
  }
  dword_456B54 = 0;
  memcpy(screenBuffer, dword_461ED8, 0x4B000u);
  result = isMultiplayerGame;
  if ( isMultiplayerGame )
  {
    result = dword_456B9C;
    if ( dword_456B9C )
    {
      dword_456B90 = v77;
    }
    else
    {
      drawBottomMenuText();
      refreshAllScreen();
      result = v77;
      dword_456B90 = v77;
    }
  }
  else
  {
    dword_456B90 = v77;
  }
  return result;
}
// 42CCF0: using guessed type int sub_42CCF0(void);
// 4458B0: using guessed type char byte_4458B0;
// 445911: using guessed type char byte_445911;
// 456B54: using guessed type int dword_456B54;
// 456B90: using guessed type int dword_456B90;
// 456B9C: using guessed type int dword_456B9C;
// 45EA04: using guessed type int isMultiplayerGame;
// 45FA78: using guessed type int dword_45FA78;
// 461EC4: using guessed type __int16;
// 461EC8: using guessed type __int16;
// 461ECC: using guessed type __int16;
// 461ED0: using guessed type __int16;
// 461ED4: using guessed type __int16;
// 462C4E: using guessed type int dword_462C4E;
// 462C52: using guessed type int dword_462C52;
// 462C56: using guessed type int dword_462C56;
// 462C5A: using guessed type int dword_462C5A;
// 462C5E: using guessed type int dword_462C5E;
// 462C62: using guessed type __int16 word_462C62;
// 463CE8: using guessed type int driverId;
// 42CCF0: using guessed type char var_130[152];
// 42CCF0: using guessed type char var_97[151];

//----- (0042D780) --------------------------------------------------------
int sub_42D780()
{
  bool v0; // zf@1
  bool v1; // sf@1
  unsigned __int8 v2; // of@1
  int result; // eax@7

  sub_42A570();
  sub_42A570();
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  v2 = __OFSUB__(carAnimCurrentFrame_45FBA0 + 1, 63);
  v0 = carAnimCurrentFrame_45FBA0 == 62;
  v1 = carAnimCurrentFrame_45FBA0++ - 62 < 0;
  if ( !((unsigned __int8)(v1 ^ v2) | v0) )
    carAnimCurrentFrame_45FBA0 = 0;
  sub_42A570();
  sub_42A570();
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  v2 = __OFSUB__(carAnimCurrentFrame_45FBA0 + 1, 63);
  v0 = carAnimCurrentFrame_45FBA0 == 62;
  v1 = carAnimCurrentFrame_45FBA0++ - 62 < 0;
  if ( !((unsigned __int8)(v1 ^ v2) | v0) )
    carAnimCurrentFrame_45FBA0 = 0;
  sub_42A570();
  sub_42A570();
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  v2 = __OFSUB__(carAnimCurrentFrame_45FBA0 + 1, 63);
  v0 = carAnimCurrentFrame_45FBA0 == 62;
  v1 = carAnimCurrentFrame_45FBA0++ - 62 < 0;
  if ( !((unsigned __int8)(v1 ^ v2) | v0) )
    carAnimCurrentFrame_45FBA0 = 0;
  sub_42A570();
  sub_42A570();
  drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
  result = carAnimCurrentFrame_45FBA0 + 1;
  v2 = __OFSUB__(carAnimCurrentFrame_45FBA0 + 1, 63);
  v0 = carAnimCurrentFrame_45FBA0 == 62;
  v1 = carAnimCurrentFrame_45FBA0++ - 62 < 0;
  if ( !((unsigned __int8)(v1 ^ v2) | v0) )
    carAnimCurrentFrame_45FBA0 = 0;
  return result;
}
// 445968: using guessed type int carAnimFrameSize_45FBA0[];
// 45FBA0: using guessed type int carAnimCurrentFrame_45FBA0;
// 45FC30: using guessed type int actualCarSelected;

//----- (0042D8C0) --------------------------------------------------------
void sub_42D8C0()
{
  loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
  switch ( menuOptionSelected_463DF0 )
  {
    case 0:
      if ( actualCarSelected <= 0 )
        actualCarSelected = 5;
      else
        --actualCarSelected;
      reloadCarAnimation2();
      drawImageWithPosition((int)((char *)arrows1dBpk + 2048), 16, 64, (int)((char *)screenBuffer + 90240));
      refreshAllScreen();
      reloadCarAnimation2();
      sub_42D780();
      drawImageWithPosition((int)arrows1dBpk, 16, 64, (int)((char *)screenBuffer + 90240));
      refreshAllScreen();
      break;
    case 1:
      menuOptionSelected_463DF0 = 0;
      reloadCarAnimation2();
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder(0, 115, 128, 114);
      refreshAllScreen();
      break;
    case 2:
      menuOptionSelected_463DF0 = 1;
      reloadEngineAnimation2();
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder(10, 243, 108, 114);
      refreshAllScreen();
      break;
    case 3:
      menuOptionSelected_463DF0 = 2;
      reloadTireAnimation2();
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder(114, 243, 108, 114);
      refreshAllScreen();
      break;
    case 4:
      menuOptionSelected_463DF0 = 3;
      reloadArmourAnimation2();
      drawBorder2(322, 243, 0x6Cu, 114);
      drawBorder(218, 243, 108, 114);
      refreshAllScreen();
      break;
    case 5:
      menuOptionSelected_463DF0 = 4;
      reloadRepairAnimation();
      drawBorder2(426, 243, 0x6Cu, 114);
      drawBorder(322, 243, 108, 114);
      refreshAllScreen();
      break;
    default:
      return;
  }
}
// 445198: using guessed type int dword_445198;
// 45DC18: using guessed type int configuration.musicVolume;
// 45FC30: using guessed type int actualCarSelected;
// 463DF0: using guessed type int menuOptionSelected_463DF0;

//----- (0042DAB0) --------------------------------------------------------
void sub_42DAB0()
{
  int v0; // eax@1

  v0 = menuOptionSelected_463DF0;
  if ( menuOptionSelected_463DF0 < 5 )
  {
    loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
    v0 = menuOptionSelected_463DF0;
  }
  switch ( v0 )
  {
    case 0:
      if ( actualCarSelected >= 5 )
        actualCarSelected = 0;
      else
        ++actualCarSelected;
      reloadCarAnimation2();
      drawImageWithPosition((int)((char *)arrows1dBpk + 3072), 16, 64, (int)((char *)screenBuffer + 90352));
      refreshAllScreen();
      sub_42D780();
      drawImageWithPosition((int)((char *)arrows1dBpk + 1024), 16, 64, (int)((char *)screenBuffer + 90352));
      refreshAllScreen();
      break;
    case 1:
      menuOptionSelected_463DF0 = 2;
      reloadTireAnimation2();
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder(114, 243, 108, 114);
      refreshAllScreen();
      break;
    case 2:
      menuOptionSelected_463DF0 = 3;
      reloadArmourAnimation2();
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder(218, 243, 108, 114);
      refreshAllScreen();
      break;
    case 3:
      menuOptionSelected_463DF0 = 4;
      reloadRepairAnimation();
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder(322, 243, 108, 114);
      refreshAllScreen();
      break;
    case 4:
      menuOptionSelected_463DF0 = 5;
      reloadContinueAnimation();
      drawBorder2(322, 243, 0x6Cu, 114);
      drawBorder(426, 243, 108, 114);
      refreshAllScreen();
      break;
    default:
      return;
  }
}
// 445198: using guessed type int dword_445198;
// 45DC18: using guessed type int configuration.musicVolume;
// 45FC30: using guessed type int actualCarSelected;
// 463DF0: using guessed type int menuOptionSelected_463DF0;

//----- (0042DC70) --------------------------------------------------------
char __cdecl confirmationPopup(const char *a1)
{
  int v1; // eax@1

  createPopup(110, 210, 428, 90, 1);
  v1 = sub_41FBD0(a1);
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, a1, 147524 - v1);
  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue.", 173648);
  refreshAllScreen();
  eventDetected();
  sub_418090();
  while ( !eventDetected() )
    sub_42A570();
  byte_45E0FC = 0;
  byte_45E0FD = 0;
  eventDetected();
  return sub_418090();
}
// 4458B0: using guessed type char byte_4458B0;
// 45E0FC: using guessed type char byte_45E0FC;
// 45E0FD: using guessed type char byte_45E0FD;

//----- (0042DD10) --------------------------------------------------------
int sabotageScreen()
{
  unsigned __int8 v0; // dl@1
  char v1; // bl@1
  unsigned __int8 v2; // al@1
  int v3; // esi@1
  int v4; // edx@1
  int v5; // ecx@1
  signed int v6; // eax@1
  int result; // eax@7
  int v8; // eax@8
  signed int v9; // esi@8
  int v10; // ecx@8
  int v11; // edx@26
  int v12; // edi@29
  unsigned __int8 v13; // bl@29
  int v14; // edx@29
  char *v15; // edi@29
  signed int v16; // ecx@29
  signed int v17; // eax@29
  int v18; // esi@43
  int v19; // edx@44
  unsigned int v20; // eax@45
  int v21; // eax@45
  unsigned int v22; // edi@45
  int v23; // ST20_4@45
  char *v24; // ecx@45
  char v25; // dl@46
  int v26; // eax@47
  char v27; // cl@48
  unsigned int v28; // eax@49
  char *v29; // edi@49
  char v30; // cl@50
  char *v31; // edi@51
  char v32; // al@52
  int v33; // eax@53
  char v34; // cl@54
  unsigned int v35; // eax@55
  char *v36; // edi@55
  char v37; // cl@56
  char *v38; // edi@57
  char v39; // al@58
  char v40; // [sp+8h] [bp-58h]@1
  unsigned __int8 v41; // [sp+9h] [bp-57h]@1
  unsigned __int8 v42; // [sp+Ah] [bp-56h]@1
  unsigned __int8 v43; // [sp+Bh] [bp-55h]@1
  int v44; // [sp+Ch] [bp-54h]@8
  char DstBuf; // [sp+10h] [bp-50h]@45
  char v46[16]; // [sp+1Ch] [bp-44h]@46
  char v47[2]; // [sp+2Ch] [bp-34h]@48
  unsigned __int8 v48; // [sp+2Eh] [bp-32h]@29
  unsigned __int8 v49; // [sp+2Fh] [bp-31h]@29


  //cambiar a racePositions[0][0];
  v0 = BYTE2(dword_45EB50[selectedRace_462CE8]);
  v1 = LOBYTE(dword_45EB50[selectedRace_462CE8]);
  v2 = BYTE3(dword_45EB50[selectedRace_462CE8]);
  v3 = isMultiplayerGame;
  v41 = BYTE1(dword_45EB50[selectedRace_462CE8]);
  v42 = v0;
  v4 = driverId;
  v43 = v2;
  v40 = v1;
  v5 = 0;
  v6 = (signed int)dword_46084C;
  do
  {
    if ( v5 != v4 && !v3 )
      *(_DWORD *)v6 = 0;
    v6 += 108;
    ++v5;
  }
  while ( v6 < (signed int)&unk_4610BC );
  if ( dword_456B10 )
  {
    result = 0;
  }
  else
  {
    v44 = 1;
    v8 = 0;
    v9 = 2;
    v10 = (int)dword_4608F0;
    do
    {
      if ( *(_DWORD *)(v10 - 108) > v8 && v9 - 2 != v4 )
        v8 = *(_DWORD *)(v10 - 108);
      if ( *(_DWORD *)v10 > v8 && v9 - 1 != v4 )
        v8 = *(_DWORD *)v10;
      if ( *(_DWORD *)(v10 + 108) > v8 && v9 != v4 )
        v8 = *(_DWORD *)(v10 + 108);
      if ( *(_DWORD *)(v10 + 216) > v8 && v9 + 1 != v4 )
        v8 = *(_DWORD *)(v10 + 216);
      if ( *(_DWORD *)(v10 + 324) > v8 && v9 + 2 != v4 )
        v8 = *(_DWORD *)(v10 + 324);
      v9 += 5;
      v10 += 540;
    }
    while ( v9 - 2 < 20 );
    if ( isMultiplayerGame || (v11 = 27 * v4, dword_460884[v11] > v8) || !useWeapons || dword_4608A8[v11] != 1 )
    {
      result = 0;
    }
    else
    {
      v12 = (unsigned __int8)v1;
      v13 = LOBYTE(dword_460888[27 * v41]);
      v12 *= 108;
      LOBYTE(v17) = *((byte *)dword_460888 + v12);
      v14 = dword_460888[v11];
      v48 = LOBYTE(dword_460888[27 * v42]);
      v15 = (char *)dword_460888 + v12;
      v49 = LOBYTE(dword_460888[27 * v43]);
      v16 = (unsigned __int8)v17;
      v17 = (unsigned __int8)v17;
      if ( (unsigned __int8)v17 == v14 )
        v17 = v13;
      if ( v16 < v17 && v16 != v14 )
        v17 = v16;
      if ( v13 < v17 && v13 != v14 )
        v17 = v13;
      if ( v48 < v17 && v48 != v14 )
        v17 = v48;
      if ( v49 < v17 && v49 != v14 )
        v17 = v49;
      v18 = 0;
      if ( *(_DWORD *)v15 != v17 )
      {
        do
          v19 = *(&v41 + v18++);
        while ( dword_460888[27 * v19] != v17 );
      }
      v20 = SDL_GetTicks();
      srand(v20);
      v21 = rand();
      v22 = 108 * (unsigned __int8)*(&v40 + v18);
      v23 = v21 % 25 + 25;
      dword_46084C[v22 / 4] = v23;
      itoa(v23, &DstBuf, 10);
      v24 = &byte_460840[v22];
      do
      {
        v25 = *v24;
        v24[&v46[-v22] - byte_460840] = *v24;
        ++v24;
      }
      while ( v25 );
      createPopup(45, 165, 458, 195, 1);
      writeTextInScreen(aMoneyTalksAndT, 131301);
      v26 = 0;
      do
      {
        v27 = byte_452CD0[v26];
        v47[v26++] = v27;
      }
      while ( v27 );
      v28 = strlen(&DstBuf) + 1;
      v29 = &v46[15];
      do
        v30 = (v29++)[1];
      while ( v30 );
      memcpy(v29, &DstBuf, v28);
      v31 = &v46[15];
      do
        v32 = (v31++)[1];
      while ( v32 );
      memcpy(v31, "% worth! Sabotage says that", 0x1Cu);
      writeTextInScreen(v47, 141541);
      v33 = 0;
      do
      {
        v34 = byte_452CF8[v33];
        v47[v33++] = v34;
      }
      while ( v34 );
      v35 = strlen(v46) + 1;
      v36 = &v46[15];
      do
        v37 = (v36++)[1];
      while ( v37 );
      memcpy(v36, v46, v35);
      v38 = &v46[15];
      do
        v39 = (v38++)[1];
      while ( v39 );
      memcpy(v38, " is going down{ and staying", 0x1Cu);
      writeTextInScreen(v47, 151781);
      writeTextInScreen(aDown_ThatSDoug, 162021);
      writeTextInScreen(aYou_AndLuckShe, 172261);
      writeTextInScreen((const char *)&unk_452D70, 179301);
      drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 201792);
      refreshAllScreen();
      sub_42C780();
      result = v44;
    }
  }
  return result;
}


//----- (0042E0B0) --------------------------------------------------------
signed int __cdecl readEventInMenu(int menuType)
{
  int v1; // edi@6
  signed int result; // eax@14

  while ( 2 )
  {
    if ( dword_456B9C )
      goto LABEL_14;

	sub_42A570();
    sub_42A570();
    updateCursor(menuType);
	int key = eventDetected();
    switch (key)
    {
      default:
        continue;
      case KEY_ESCAPE :
        if ( !menuType)
        {
          if ( dword_445708[0] != dword_4456F0[0] - 1 )
          {
            sub_41ACF0(0);
            loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
          }
          continue;
        }
        v1 = -1;
        loadMenuSoundEffect(1u, 22, 0, configuration.musicVolume, dword_445188);
LABEL_13:
        if ( dword_456B9C )
LABEL_14:
          result = -1;
        else
          result = v1;
        return result;
      case KEY_ENTER:
      case KEY_ESPACE:
      case 0x9C:

		  v1 = dword_445708[menuType];
		///v1 = dword_445708[7 * a1];
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        if ( v1 != -2 )
          goto LABEL_13;
        continue;
      case KEY_F1:
        if ( isMultiplayerGame )
          sub_42CCF0();
        continue;
      case KEY_UP:
      case 0xC8:

		  refreshMenuUp(menuType);
        loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
        continue;
      case KEY_DOWN:
      case 0xD0:
        refreshMenuDown(menuType);
        loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
        continue;
    }
  }
}


//----- (0042E310) --------------------------------------------------------
bool __cdecl drawYesNoMenu(int a1, int a2, int a3, signed int *a4)
{
  signed int v4; // ebx@1
  int v5; // esi@1
  int v6; // eax@5
  signed int v7; // edx@5
  char *v8; // ebp@6
  bool v9; // zf@7
  bool v10; // sf@7
  unsigned __int8 v11; // of@7
  char v12; // al@9
  signed int v13; // edx@18
  char *v14; // edi@19
  signed int v15; // edx@23
  char *v16; // edi@24
  signed int v17; // esi@27
  int v19; // [sp-4h] [bp-14h]@1

  v4 = *a4;
  v5 = 640 * a2 + a1 + 7;
  v19 = 640 * a2 + a1 - 4450;
  if ( *a4 == 1 )
  {
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "yes", v19);
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "no", 640 * a2 + a1 - 4280);
  }
  else
  {
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "yes", v19);
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "no", 640 * a2 + a1 - 4280);
  }
  refreshAllScreen();
  while ( 2 )
  {
    sub_42A570();
    sub_42A570();
    v6 = -170 * v4;
    v7 = 20;
    do
    {
      v8 = (char *)screenBuffer + v6 + v5 + 170;
      *(_DWORD *)v8 = -993737532;
      *((_DWORD *)v8 + 1) = -993737532;
      *((_DWORD *)v8 + 2) = -993737532;
      *((_DWORD *)v8 + 3) = -993737532;
      v6 += 640;
      --v7;
      *((_DWORD *)v8 + 4) = -993737532;
    }
    while ( v7 );
    drawImageWithPosition(
      (int)((char *)cursorBpk + 400 * cursorBpkFrame),
      20,
      20,
      (int)((char *)screenBuffer + v5 + -170 * v4 + 170));
    drawKeyCursor(640 * a2 + a1 + 2, (char *)screenBuffer + 640 * a2 + a1 + 2, 0xF0u, 28);
    v11 = __OFSUB__(cursorBpkFrame + 1, 49);
    v9 = cursorBpkFrame == 48;
    v10 = cursorBpkFrame++ - 48 < 0;
    if ( !((unsigned __int8)(v10 ^ v11) | v9) )
      cursorBpkFrame = 0;
    v12 = eventDetected();
    if ( v12 == 21 )
    {
      v12 = -53;
    }
    else if ( v12 == 49 )
    {
      v12 = -51;
    }
    switch ( v12 )
    {
      default:
        continue;
      case KEY_F1:
        if ( isMultiplayerGame )
          sub_42CCF0();
        continue;
      case KEY_LEFT:
      case 0xCB:
        if ( !v4 )
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
        v4 = 1;
        v13 = 0;
        do
        {
          v14 = (char *)screenBuffer + v13;
          v13 += 640;
          memset(&v14[v5 - 5], 0xC4u, 0xF0u);
        }
        while ( v13 < 16000 );
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "yes", 640 * a2 + a1 - 4450);
        drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "no", 640 * a2 + a1 - 4280);
        continue;
      case KEY_RIGHT:
      case 0xCD:
        if ( v4 == 1 )
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
        v4 = 0;
        v15 = 0;
        do
        {
          v16 = (char *)screenBuffer + v15;
          v15 += 640;
          memset(&v16[v5 - 5], 0xC4u, 0xF0u);
        }
        while ( v15 < 16000 );
        drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "yes", 640 * a2 + a1 - 4450);
        drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "no", 640 * a2 + a1 - 4280);
        continue;
      case 1:
        if ( !a3 )
          continue;
        v4 = 0;
        v17 = -2;
        break;
      case KEY_ENTER:
      case 0x9C:
        v17 = -1;
        break;
    }
    break;
  }
  loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
  *a4 = v4;
  return v17 != -2;
}

//----- (0042E6F0) --------------------------------------------------------
char sub_42E6F0()
{
  createPopup(33, 131, 497, 230, 1);
  drawImageWithPosition((int)spons1bBpk, 104, 128, (int)((char *)screenBuffer + 107565));
  writeTextInScreen((const char *)&unk_44CE28, 87201);
  writeTextInScreen((const char *)&unk_44CE78, 97441);
  writeTextInScreen(aTooSlowNoDough, 107681);
  writeTextInScreen((const char *)&unk_44CF18, 117921);
  writeTextInScreen(aDeathRallyIsFo, 128161);
  writeTextInScreen(aTotallyLostThi, 138401);
  writeTextInScreen(aBonusYouCollec, 148641);
  writeTextInScreen(aAreNullAndVoid, 158881);
  writeTextInScreen(aGetIt_ZeroNone, 169121);
  writeTextInScreen(aNadaZilch_Next, 179361);
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "CONTINUE", 202432);
  byte_45E0DC = 0;
  refreshAllScreen();
  return sub_42C780();
}
// 45E0DC: using guessed type char byte_45E0DC;

//----- (0042E7F0) --------------------------------------------------------
signed int __cdecl readKeyboard(const char *a1, int a2, int a3, int a4, unsigned int a5, signed int a6, int a7, int a8, int a9)
{
  char *v9; // eax@1
  signed int v10; // ebp@1
  unsigned int v11; // edx@1
  char v12; // cl@2
  int v13; // edi@5
  int face; // esi@6
  char v15; // al@6
  int v16; // ebx@6
  signed int v17; // esi@14
  signed int v18; // esi@16
  signed int v19; // esi@23
  signed int v20; // esi@25
  int v21; // ecx@29
  double v22; // st7@31
  signed int v23; // eax@31
  float v24; // ST2C_4@31
  double v25; // st7@31
  float v26; // ST28_4@31
  float v27; // ST24_4@31
  signed int v28; // edx@31
  char *v29; // edi@32
  int v30; // esi@33
  int v31; // ecx@35
  double v32; // st7@37
  signed int v33; // eax@37
  float v34; // ST2C_4@37
  double v35; // st7@37
  float v36; // ST28_4@37
  float v37; // ST24_4@37
  signed int v38; // edx@37
  char *v39; // edi@38
  int v40; // esi@39
  char *v42; // eax@42
  char v43; // cl@43
  int v44; // ecx@47
  int v45; // eax@47
  char *v46 =malloc(100); // eax@48
  char v47; // cl@49
  int v48; // edx@51
  char v49; // dl@54
  unsigned int v50; // eax@60
  char *v51; // edi@60
  char v52; // cl@61
  void *v53; // edi@62
  char *v54; // esi@62
  char v55; // cl@62
  int v56; // eax@62
  signed int v57; // ecx@62
  char *v58; // esi@63
  signed int v59; // esi@64
  int v60; // edi@64
  unsigned __int8 v61; // [sp+1Ch] [bp-5Ch]@57
  char v62; // [sp+1Dh] [bp-5Bh]@1
  int initialFace; // [sp+20h] [bp-58h]@5
  int v64; // [sp+24h] [bp-54h]@5
  int v65; // [sp+28h] [bp-50h]@5
  int v66; // [sp+2Ch] [bp-4Ch]@5
  int v67; // [sp+30h] [bp-48h]@1
  int v68; // [sp+34h] [bp-44h]@31
  int v69; // [sp+38h] [bp-40h]@1
  int v70; // [sp+3Ch] [bp-3Ch]@5
  int v71; // [sp+40h] [bp-38h]@3
  char v72[52]; // [sp+44h] [bp-34h]@1

  //aqui se definen las teclas validas
  memset(byte_45EEE0, 0, 0x100u);
  memset(v72, 0, 52);
  v62 = 0;
  
  byte_45EEE0[2] = 49;// byte_45EEE2 = 49;
  byte_45EEE0[3] = 50; //byte_45EEE3 = 50;
  byte_45EEE0[4] = 51; //byte_45EEE4 = 51;
  byte_45EEE0[5] = 52; //byte_45EEE5 = 52;
  byte_45EEE0[6] = 53; //byte_45EEE6 = 53;
  byte_45EEE0[7] = 54;// byte_45EEE7 = 54;
  byte_45EEE0[8] = 55; //byte_45EEE8 = 55;
  byte_45EEE0[9] = 56; //byte_45EEE9 = 56;
  byte_45EEE0[10] = 57; //byte_45EEEA = 57;
  byte_45EEE0[11] = 48; //byte_45EEEB = 48;
  byte_45EEE0[12] = 45; //byte_45EEEC = 45;
  byte_45EEE0[13] = 61;// byte_45EEED = 61;

  byte_45EEE0[16] = 81; //byte_45EEF0 = 81;
  byte_45EEE0[17] = 87;// byte_45EEF1 = 87;
  byte_45EEE0[18] = 69; // byte_45EEF2 = 69;
  byte_45EEE0[19] = 82; //byte_45EEF3 = 82;
  byte_45EEE0[20] = 84;// byte_45EEF4 = 84;
  byte_45EEE0[21] = 89;// byte_45EEF5 = 89;
  byte_45EEE0[22] = 85;// byte_45EEF6 = 85;
  byte_45EEE0[23] = 73; //byte_45EEF7 = 73;
  byte_45EEE0[24] = 79;//byte_45EEF8 = 79;
  byte_45EEE0[25] = 80;//byte_45EEF9 = 80;
  byte_45EEE0[30] = 65;// byte_45EEFE = 65;
  byte_45EEE0[31] = 83;// byte_45EEFF = 83;
  
  byte_45EEE0[32] = 68; //byte_45EF00 = 68;
  byte_45EEE0[33] = 70;// byte_45EF01 = 70;
  byte_45EEE0[34] = 71; //byte_45EF02 = 71;
  byte_45EEE0[35] = 72;// byte_45EF03 = 72;
  byte_45EEE0[36] = 74; //byte_45EF04 = 74;
  byte_45EEE0[37] = 75; // byte_45EF05
  byte_45EEE0[38] = 76; //byte_45EF06

  byte_45EEE0[44] = 90; //byte_45EF0C = 90;
  byte_45EEE0[45] = 88; //byte_45EF0D = 88;
  byte_45EEE0[46] = 67; //byte_45EF0E = 67;
  byte_45EEE0[47];// byte_45EF0F = 86;

  byte_45EEE0[48] = 66; //byte_45EF10 = 66;

  byte_45EEE0[49] = 78;//byte_45EF11 = 78;
  byte_45EEE0[50] = 77;//byte_45EF12 = 77;
  byte_45EEE0[51] = 44;// byte_45EF13 = 44;
  byte_45EEE0[52] = 46; //byte_45EF14 = 46;
  byte_45EEE0[53] = 47; //byte_45EF15 = 47;
  byte_45EEE0[57] = 32; //byte_45EF19 = 32;
  
  
  strcpy(v72, a1);
  v67 = 640 * a3;
  v69 = 640 * a3 + a2;
  drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, v72, v69);
  v9 = v72;
  v10 = 0;
  v11 = 0;
  do
    v12 = *v9++;
  while ( v12 );
  v71 = v9 - &v72[1];
  if ( v9 != &v72[1] )
  {
    do
      v10 += (unsigned __int8)menuActive_4457F0[58 + (unsigned __int8)v72[v11++]];
    while ( v11 < strlen(v72) );
  }
  drawKeyCursor(640 * a3 + a2, (char *)screenBuffer + 640 * a3 + a2, v10, 32);
  v13 = a9;
  v70 = 0;
  initialFace = 0;
  v64 = 128;
  v66 = 160950;
  v65 = 384;
  int  a = 0;
  while ( 2 )
  {

	  a++;
	 face = initialFace;
    sub_42C7F0(a2, a3, v10, v13, 63, 112);
    v15 = eventDetected();
    v16 = (unsigned __int8)v15;
    v71 = (unsigned __int8)v15;
    switch ( v15 )
    {
      case KEY_F1:
        if ( a7 && isMultiplayerGame )
          sub_42CCF0();
        goto LABEL_66;
      case KEY_UP:
      case 0xC8:
        if ( v13 )
        {
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
          if (face <= 0 )
			  initialFace = 19;
          else
			  initialFace = face - 1;
          drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + initialFace), 64, 64, (int)((char *)screenBuffer + 122330));
          drawKeyCursor(122330, (char *)screenBuffer + 122330, 0x40u, 64);
          v17 = 5;
          do
          {
            sub_42C7F0(a2, a3, v10, v13, 63, 112);
            --v17;
          }
          while ( v17 );
          drawImageWithPosition2((int)((char *)facearr1Bpk + 2176), 68, 16, (int)((char *)screenBuffer + 110168));
          drawKeyCursor(110168, (char *)screenBuffer + 110168, 0x44u, 16);
          v18 = 5;
          do
          {
            sub_42C7F0(a2, a3, v10, v13, 63, 112);
            --v18;
          }
          while ( v18 );
          drawImageWithPosition2((int)facearr1Bpk, 68, 16, (int)((char *)screenBuffer + 110168));
          drawKeyCursor(110168, (char *)screenBuffer + 110168, 0x44u, 16);
          drivers[driverId].face = initialFace;
          v16 = 0;
        }
        goto LABEL_66;
      case KEY_DOWN:
      case 0xD0:
        if ( v13 )
        {
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
          if (face >= 19 )
			  initialFace = 0;
          else
			  initialFace = face + 1;
          drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + initialFace), 64, 64, (int)((char *)screenBuffer + 122330));
          drawKeyCursor(122330, (char *)screenBuffer + 122330, 0x40u, 64);
          v19 = 5;
          do
          {
            sub_42C7F0(a2, a3, v10, v13, 63, 112);
            --v19;
          }
          while ( v19 );
          drawImageWithPosition2((int)((char *)facearr1Bpk + 3264), 68, 16, (int)((char *)screenBuffer + 165208));
          drawKeyCursor(165208, (char *)screenBuffer + 165208, 0x44u, 16);
          v20 = 5;
          do
          {
            sub_42C7F0(a2, a3, v10, v13, 63, 112);
            --v20;
          }
          while ( v20 );
          drawImageWithPosition2((int)((char *)facearr1Bpk + 1088), 68, 16, (int)((char *)screenBuffer + 165208));
          drawKeyCursor(165208, (char *)screenBuffer + 165208, 0x44u, 16);
		  drivers[driverId].face = initialFace;
          v16 = 0;
        }
        goto LABEL_66;
      case KEY_LEFT:
      case 0xCB:
        if ( !v13 )
          goto LABEL_66;
        v21 = v65;
        if ( v64 > 0 )
        {
          v21 = v65 - 6;
          v64 -= 2;
          v65 -= 6;
          v66 -= 2;
        }
        v68 = *((byte *)graphicsGeneral.copperPal + v21 + 2);
        v22 = (double)v68;
        v23 = *((byte *)graphicsGeneral.copperPal + v21);
        v68 = *((byte *)graphicsGeneral.copperPal + v21 + 1);
        v24 = v22;
        v25 = (double)v68;
        v68 = v23;
        v26 = v25;
        v27 = (double)v23;
        setPaletteValueWithFloats(v27, v26, v24);
        v28 = 71680;
        do
        {
          v29 = (char *)screenBuffer + v28 + 89124;
          memset(v29, 0xC4u, 0x124u);
          v28 += 640;
          *((_WORD *)v29 + 146) = -15164;
        }
        while ( v28 < 87040 );
        drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 163370));
        v30 = v64;
        drawImageWithPosition((int)slidcur3Bpk, 10, 24, (int)((char *)screenBuffer + v64 + 160824));
        drawKeyCursor(v66, (char *)screenBuffer + v30 + 160822, 0xEu, 24);
        v16 = 0;
        goto LABEL_65;
      case KEY_RIGHT:
      case 0xCD:
        if ( !v13 )
          goto LABEL_66;
        v31 = v65;
        if ( v64 < 253 )
        {
          v31 = v65 + 6;
          v64 += 2;
          v65 += 6;
          v66 += 2;
        }
        v68 = *((byte *)graphicsGeneral.copperPal + v31 + 2);
        v32 = (double)v68;
        v33 = *((byte *)graphicsGeneral.copperPal + v31);
        v68 = *((byte *)graphicsGeneral.copperPal + v31 + 1);
        v34 = v32;
        v35 = (double)v68;
        v68 = v33;
        v36 = v35;
        v37 = (double)v33;
        setPaletteValueWithFloats(v37, v36, v34);
        v38 = 71680;
        do
        {
          v39 = (char *)screenBuffer + v38 + 89124;
          memset(v39, 0xC4u, 0x124u);
          v38 += 640;
          *((_WORD *)v39 + 146) = -15164;
        }
        while ( v38 < 87040 );
        drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 163370));
        v40 = v64;
        drawImageWithPosition((int)slidcur3Bpk, 10, 24, (int)((char *)screenBuffer + v64 + 160824));
        drawKeyCursor(v66, (char *)screenBuffer + v40 + 160822, 0xEu, 24);
        v16 = 0;
        goto LABEL_65;
      case KEY_ESCAPE:
        if ( !a8 )
          goto LABEL_66;
        return 0;
      case KEY_ENTER:
      case 0x9C:
        v42 = v72;
        do
          v43 = *v42++;
        while ( v43 );
        v71 = v42 - &v72[1];
        if ( v42 != &v72[1] )
          v70 = -1;
        if ( v13 )
        {
          v44 = v64;
          v45 = driverId;
		  drivers[driverId].face = face;
		  drivers[driverId].colour = v44;
		  //dword_460880[v45] = face;
          //dword_46086C[v45] = v44;
		  v70 = strlen(v72);
        }
        goto LABEL_66;
      case 0xE:*//borrar
        v46 = v72;
        do
          v47 = *v46++;
        while ( v47 );
        v68 = v46 - &v72[1];
        if ( v46 == &v72[1] )
          goto LABEL_66;
        v48 = v67;
        v10 -= (unsigned __int8)menuActive_4457F0[58 + (unsigned __int8)v72[strlen(v72) - 1]];
        v68 = 32;
        do
        {
          memset(
            (char *)screenBuffer + v48 + v10 + a2,
            0xC4u,
            (unsigned __int8)menuActive_4457F0[58 + *((byte *)&v71 + strlen(v72) + 3)] + 20);
          v48 += 640;
          --v68;
        }
        while ( v68 );
        drawKeyCursor(
          v10 + v69,
          (char *)screenBuffer + v67 + v10 + a2,
          (unsigned __int8)menuActive_4457F0[58 + *((byte *)&v71 + strlen(v72) + 3)] + 20,
          32);
        v16 = v71;
        *((byte *)&v71 + strlen(v72) + 3) = 0;
        goto LABEL_65;
      default:
		
       
		  v49 = byte_45EEE0[(unsigned __int8)v15];
		  if (*(_BYTE *)((unsigned __int8)byte_45EEE0[(unsigned __int8)v15] + a4) == 1 && strlen(v72) < a5 && v10 < a6)
		  {
			  v61 = byte_45EEE0[v16];
			  if ((unsigned __int8)v49 > 0x40u && (unsigned __int8)v49 < 0x5Bu)
				  v61 = v49 + 32;
			  v50 = strlen((const char *)&v61) + 1;
			  v51 = (char *)&v71 + 3;
			  do
				  v52 = (v51++)[1];
			  while (v52);
			  //memcpy(v51, &v61, 4 * (v50 >> 2));
			  v54 = (char *)(&v61 + 4 * (v50 >> 2));
			  v53 = &v51[4 * (v50 >> 2)];
			  v55 = v50;
			  v56 = 0;
			  memcpy(v53, v54, v55 & 3);
			  v57 = 32;
			  do
			  {
				  v58 = (char *)screenBuffer + v56 + v10 + a2;
				 /* *(_DWORD *)v58 = -993737532;
				  *((_DWORD *)v58 + 1) = -993737532;
				  *((_DWORD *)v58 + 2) = -993737532;
				  *((_DWORD *)v58 + 3) = -993737532;
				  *((_DWORD *)v58 + 4) = -993737532;
				  *((_DWORD *)v58 + 5) = -993737532;
				  *((_DWORD *)v58 + 6) = -993737532;*/
				  v56 += 640;
				  --v57;
				  //*((_DWORD *)v58 + 7) = -993737532;
			  } while (v57);
			  v59 = v69 + v10;
			  drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, (const char *)&v61,  v67 + v10 + a2);
			  //drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, (const char *)&v61, v58 + v10);
			  v60 = v61;
			  drawKeyCursor(v59, (char *)screenBuffer + v67 + v10 + a2, (unsigned __int8)menuActive_4457F0[58 + v61], 32);
			  v10 += (unsigned __int8)menuActive_4457F0[58 + v60];
			  memcpy(&v72[strlen(v72)], &v61, 1);
LABEL_65:
          v13 = a9;
        }
	LABEL_66:
		//TODO arreglar esto pongo el nombre a fuego
		/*v70 = 4;
		v72[0] = "k";
		v72[1] = "i";
		v72[2] = "k";
		v72[3] = "e";
		v72[4] = 0;*/
        if ( !v70 )
          continue;
        if ( v16 != 1 )
          strcpy((char *)a1, v72);
        return 1;
    }
  }
}


//----- (0042F2E0) --------------------------------------------------------
signed int loadGame()
{
  int v0; // ebp@1
  int v1; // ebx@1
  unsigned int v2; // eax@2
  void *v3; // edi@2
  char v4; // cl@3
  signed int v5; // eax@8
  int v6; // esi@8
  char v7; // bl@8
  void *v9 = malloc(0x883u); // eax@17
  int v10; // edi@17
  unsigned int v11; // eax@17
  void *v12; // edi@17
  char v13; // cl@18
  FILE *v14; // esi@19
  unsigned int v15; // ebx@19
  int v16; // edi@21
  int v17; // esi@21
  char *DstBuf =malloc(32); // [sp+10h] [bp-1Ch]@2
  int v19; // [sp+14h] [bp-18h]@4
  char v20; // [sp+1Bh] [bp-11h]@2
  char Filename[32]; // [sp+1Ch] [bp-10h]@2

  v0 = 0;
  v1 = (int)&unk_446C32;
  do
  {
    *(_DWORD *)v1 = 1953525061; //Empty slot
    *(_DWORD *)(v1 + 4) = 1817387129;
    *(_WORD *)(v1 + 8) = 29807;
    *(byte *)(v1 + 10) = 0;
    menuActive_4457F0[45+v0] = 1;
    strcpy(Filename, "DR.SG");
    itoa(v0, DstBuf, 10);
    v2 = strlen(DstBuf) + 1;
   /* v3 = &v20;
    do
    {
      v4 = *((byte *)v3 + 1);
      v3 = (char *)v3 + 1;
    }
    while ( v4 );
    memcpy(v3, &DstBuf, v2);*/
    *((byte *)&v19 + v0) = 0;
	strcat(Filename, DstBuf);
    if ( (signed int)fileExists(Filename) > 0 )
    {
      *((byte *)&v19 + v0) = 1;
      decryptEntireSavegame(v1, Filename);
    }
    v1 += 50;
    ++v0;
  }
  while ( v1 < (signed int)&unk_446DC2 );
  
  while ( 1 )
  {
    memcpy((char *)screenBuffer + 67200, (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(START_NEW_GAME_MENU, 0);
    drawMenu(5, 1);
    refreshAllScreen();
    v5 = readEventInMenu(5);
    v6 = v5;
    v7 = *((byte *)&v19 + v5);
    if ( !v7 && v5 != -1 )
      loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
    if ( v6 >= 0 && v6 <= 7 && v7 == 1 )
      break;
    if ( v6 == -1 )
      return 0;
  }
  if ( v6 < 0 )
    return 0;
  *(_DWORD *)aStartANewGam_0 = 1702129221;
  *(_DWORD *)&aStartANewGam_0[4] = 1750343794;
  *(_DWORD *)&aStartANewGam_0[8] = 1750278245;
  *(_WORD *)&aStartANewGam_0[12] = 28783;
  aStartANewGam_0[14] = 0;
  *(_DWORD *)aStartRacing = 1953394499;
  menuActive_4457F0[1] = 0;
  menuActive_4457F0[10] = 1;
  menuActive_4457F0[11] = 1;
  menuActive_4457F0[13] = 1;
  *(_DWORD *)&aStartRacing[4] = 1702194793;
  *(_DWORD *)&aStartRacing[8] = 1667322400;
  *(_DWORD *)&aStartRacing[12] = 6778473;
  showHardWarningRace = 0;
  showMediumWarningRace = 0;
  dword_456B78 = 0;
  dword_456B74 = 0;
  dword_464F44 = 0;
  dword_456BC4 = 0;
  //allocateMemory(0x883u);
  Str = v9;
  memset(v9, 0, 0x880u);
  v10 = (int)((char *)v9 + 2176);
  *(_WORD *)v10 = 0;
  *(byte *)(v10 + 2) = 0;
  strcpy(Filename, "DR.SG");
  itoa(v6, DstBuf, 10);
  /*v11 = strlen(&DstBuf) + 1;
  v12 = &v20;
  do
  {
    v13 = *((byte *)v12 + 1);
    v12 = (char *)v12 + 1;
  }
  while ( v13 );
  memcpy(v12, &DstBuf, v11);*/
  strcat(Filename, DstBuf);
  v14 = fopen(Filename, "rb");
  fread(Str, 0x883u, 1u, v14);
  fclose(v14);
  v19 = *(byte *)Str;
  v15 = 1;
  do
  {
	  decryptByteSavegame((int)((char *)Str + v15), v15 % 6);
    //decryptByteSavegame((int)((char *)Str + v15), v15 % 6);
    *((byte *)Str + v15) += -17 * v15;
    *((byte *)Str + v15++) += v19;
  }
  while ( (signed int)v15 < 2179 );
  driverId = *((byte *)Str + 1);
  useWeapons = *((byte *)Str + 2);
  configuration.difficulty = *((byte *)Str + 3);
  memcpy(drivers, (char *)Str + 19, 0x870u);
  free(Str);
  v16 = drivers[driverId].spikes;
  v17 = drivers[driverId].rocket;
  minesAvailable_45EFF0 = drivers[driverId].mines != 8;
  spikesAvailable_45EFF4 = v16 != 1;
  rocketAvailable_45EFF8 = v17 != 1;
  sabotageAvailable_45EFFC = drivers[driverId].sabotage != 1;
  confirmationPopup("Game Loaded.");
  return 1;
}


//----- (0042F6E0) --------------------------------------------------------
__int16 savegameWithName()
{
  int v0; // ebx@1
  int v1; // ebp@1
  unsigned int v2; // eax@2
  char *v3; // edi@2
  char v4; // cl@3
  signed int v5; // eax@8
  int v6; // ebp@8
  char *v7; // eax@10
  char *v8; // edx@11
  char v9; // cl@12
  void *v10 = malloc(0x883u); // eax@19
  int v11; // edi@19
  int v12; // eax@19
  int v13; // edx@19
  unsigned int v14; // esi@19
  char *v15; // eax@19
  char v16; // cl@20
  unsigned int v17; // ebx@23
  unsigned int v18; // eax@26
  char *v19; // edi@26
  char v20; // cl@27
  FILE *v21; // esi@28
  char *DstBuf=malloc(100); // [sp+10h] [bp-2Ch]@2
  int v24; // [sp+14h] [bp-28h]@19
  int v25; // [sp+18h] [bp-24h]@2
  char Filename[8]; // [sp+1Ch] [bp-20h]@2
  char v27[16]; // [sp+2Ch] [bp-10h]@11

  v0 = 0;
  v1 = (int)&unk_446C32;
  do
  {
    *(_DWORD *)v1 = 1953525061; //EMPTY slot
    *(_DWORD *)(v1 + 4) = 1817387129;
    *(_WORD *)(v1 + 8) = 29807;
    *(byte *)(v1 + 10) = 0;
	menuActive_4457F0[45+v0] = 1;
    strcpy(Filename, "DR.SG");
    itoa(v0, DstBuf, 10);
   /* v2 = strlen(&DstBuf) + 1;
    v3 = (char *)&v25 + 3;
    do
      v4 = (v3++)[1];
    while ( v4 );
    memcpy(v3, &DstBuf, v2);*/
	strcat(Filename, DstBuf);
    if ( (signed int)fileExists(Filename) > 0 )
      decryptEntireSavegame(v1, Filename);
    v1 += 50;
    ++v0;
  }
  while ( v1 < (signed int)&unk_446DC2 );
  
  while ( 1 )
  {
    memcpy((char *)screenBuffer + 67200, (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(START_NEW_GAME_MENU, 0);
    drawMenu(5, 1);
    refreshAllScreen();
    v5 = readEventInMenu(5);
    v6 = v5;
    if ( v5 >= 0 && v5 <= 7 )
    {
      drawMenu(5, 0);
      createPopup(120, 275, 390, 70, 1);
      drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Enter the name of save game?", 180610);
      refreshAllScreen();
      v7 = (char *)&unk_446C32 + 50 * v6;
      if ( !memcmp((char *)&unk_446C32 + 50 * v6, &dword_443D18, 0xBu) )
      {
        v27[0] = 0;
      }
      else
      {
        v8 = (char *)(v27 - v7);
        do
        {
          v9 = *v7;
          v7[(_DWORD)v8] = *v7;
          ++v7;
        }
        while ( v9 );
      }
      v5 = readKeyboard(v27, 130, 298, (int)&unk_4455B0, 0xFu, 320, 1, 1, 0);
      if ( v5 )
        break;
    }
    if ( v6 == -1 )
      return v5;
  }
  if ( v6 >= 0 )
  {
   // allocateMemory(0x883u);
    Str = v10;
    memset(v10, 0, 0x880u);
    v11 = (int)((char *)v10 + 2176);
    *(_WORD *)v11 = 0;
    *(byte *)(v11 + 2) = 0;
    v12 = rand();
    v13 = v12 % 255;
    v14 = 0;
    *(byte *)Str = v12 % 255;
    *((byte *)Str + 1) = driverId;
    *((byte *)Str + 2) = useWeapons;
    *((byte *)Str + 3) = configuration.difficulty;
    v15 = v27;
    v24 = v13;
    do
      v16 = *v15++;
    while ( v16 );
    v25 = v15 - &v27[1];
    if ( v15 != &v27[1] )
    {
      do
      {
        *((byte *)Str + v14 + 4) = v27[v14];
        ++v14;
      }
      while ( v14 < strlen(v27) );
    }

    memcpy((char *)Str + 19, drivers, 0x870u);
    v17 = 1;
    while ( 1 )
    {
      *((byte *)Str + v17) -= v13;
      *((byte *)Str + v17) += 17 * v17;
      encryptByteSavegame((int)((char *)Str + v17), v17 % 6);
      ++v17;
      if ( (signed int)v17 >= 2179 )
        break;
      LOBYTE(v13) = v24;
    }
    strcpy(Filename, "DR.SG");
    itoa(v6, DstBuf, 10);
    /*v18 = strlen(&DstBuf) + 1;
    v19 = (char *)&v25 + 3;
    do
      v20 = (v19++)[1];
    while ( v20 );
    memcpy(v19, &DstBuf, v18);*/
	strcat(Filename, DstBuf);
    v21 = fopen(Filename, "wb");
    fwrite(Str, 0x883u, 1u, v21);
    fclose(v21);
    free(Str);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(START_NEW_GAME_MENU, 0);
    drawMenu(5, 0);
    confirmationPopup("Game Saved.");
   
  }
  return v5;
}

//----- (0042FB00) --------------------------------------------------------
signed int redefineControls()
{
  signed int v0; // eax@2
  signed int v1; // ebx@2
  signed int result; // eax@2
  char *v3; // eax@6
  char *v4; // edx@6
  char v5; // cl@7
  char *v6; // edi@8
  char v7; // cl@9
  char *v8; // eax@14
  char v9; // cl@15
  char v10; // cl@17
  char *v11; // eax@22
  char v12; // cl@23
  char v13; // cl@25
  char *v14; // eax@30
  char v15; // cl@31
  char v16; // cl@33
  char *v17; // eax@38
  char *v18; // ecx@38
  char v19; // dl@39
  const void *v20; // esi@40
  char *v21; // edi@40
  char v22; // cl@41
  char *v23; // eax@46
  char *v24; // ecx@46
  char v25; // dl@47
  const void *v26; // esi@48
  char *v27; // edi@48
  char v28; // cl@49
  char *v29; // eax@54
  char *v30; // ecx@54
  char v31; // dl@55
  const void *v32; // esi@56
  void *v33; // edi@56
  char v34; // cl@57
  char *v35; // eax@62
  char v36; // dl@63
  char *v37; // edi@64
  char v38; // cl@65

  sub_41CA40();
  while ( 2 )
  {
    memcpy((char *)screenBuffer + 67200, (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(CONFIGURE_MENU, 0);
    drawMenu(DEFINE_KEYBOARD_MENU, 1);
    refreshAllScreen();
    v0 = readEventInMenu(DEFINE_KEYBOARD_MENU);
    v1 = v0;
    result = v0 + 1;
    switch ( result )
    {
      case 1:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 121, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for accelerate...", 86065);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.accelerateKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.accelerateKey);
        }
        while (configuration.accelerateKey == 170 );
        sub_418090();
        eventDetected();
        dword_446DF8 = 1634887020;
        byte_446E02 = 0;
        dword_446DF4 = 1701012289;
        v3 = (char *)&unk_462DA0 + 15 * configuration.accelerateKey;
        word_446E00 = 8224;
        dword_446DFC = 538994036;
        v4 = (char *)&unk_462DA0 + 15 * configuration.accelerateKey;
        do
          v5 = *v3++;
        while ( v5 );
        result = v3 - v4;
        v6 = (char *)&dword_446DF4 - 1;
        do
          v7 = (v6++)[1];
        while ( v7 );
        goto LABEL_34;
      case 2:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 149, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for brake...", 103985);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.brakeKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.brakeKey );
        }
        while (configuration.brakeKey == 170 );
        sub_418090();
        eventDetected();
        dword_446E26 = 1801548354;
        word_446E32 = 32;
        v8 = (char *)&unk_462DA0 + 15 * configuration.brakeKey;
        dword_446E2E = 538976288;
        dword_446E2A = 538976357;
        v4 = (char *)&unk_462DA0 + 15 * configuration.brakeKey;
        do
          v9 = *v8++;
        while ( v9 );
        result = v8 - v4;
        v6 = (char *)&dword_446E26 - 1;
        do
          v10 = (v6++)[1];
        while ( v10 );
        goto LABEL_34;
      case 3:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 177, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for left steer...", 121905);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.leftSteeringKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.leftSteeringKey);
        }
        while (configuration.leftSteeringKey == 170 );
        sub_418090();
        eventDetected();
        dword_446E58 = 1701147731;
        dword_446E64 = -84271072;
        dword_446E5C = 1699487858;
        v11 = (char *)&unk_462DA0 + 15 * configuration.leftSteeringKey;
        dword_446E60 = 538997862;
        byte_446E68 = 0;
        v4 = (char *)&unk_462DA0 + 15 * configuration.leftSteeringKey;
        do
          v12 = *v11++;
        while ( v12 );
        result = v11 - v4;
        v6 = (char *)&dword_446E58 - 1;
        do
          v13 = (v6++)[1];
        while ( v13 );
        goto LABEL_34;
      case 4:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 205, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for right steer...", 139825);
        refreshAllScreen();
        do
        {
          do
          {
			configuration.rightSteeringKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.rightSteeringKey);
        }
        while (configuration.rightSteeringKey == 170 );
        sub_418090();
        eventDetected();
        dword_446E92 = 544499815;
        byte_446E9E = 0;
        dword_446E8E = 1766989938;
        dword_446E8A = 1701147731;
        v14 = (char *)&unk_462DA0 + 15 * configuration.rightSteeringKey;
        dword_446E9A = -84215046;
        dword_446E96 = -84271072;
        v4 = (char *)&unk_462DA0 + 15 * configuration.rightSteeringKey;
        do
          v15 = *v14++;
        while ( v15 );
        result = v14 - v4;
        v6 = (char *)&dword_446E8A - 1;
        do
          v16 = (v6++)[1];
        while ( v16 );
LABEL_34:
        memcpy(v6, v4, result);
        goto LABEL_69;
      case 5:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 233, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for turbo boost...", 157745);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.turboKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.turboKey);
        }
        while (configuration.turboKey == 170 );
        sub_418090();
        eventDetected();
        memcpy(&unk_446EBC, word_442A18, 0x18u);
        v17 = (char *)&unk_462DA0 + 15 * configuration.turboKey;
        *((_WORD *)&unk_446EBC + 12) = word_442A18[12];
        v18 = v17;
        do
          v19 = *v17++;
        while ( v19 );
        result = v17 - v18;
        v20 = v18;
        v21 = (char *)&unk_446EBC - 1;
        do
          v22 = (v21++)[1];
        while ( v22 );
        memcpy(v21, v20, result);
        goto LABEL_69;
      case 6:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 261, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for machine gun...", 175665);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.gunKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.gunKey);
        }
        while (configuration.gunKey == 170 );
        sub_418090();
        eventDetected();
        memcpy(&unk_446EEE, word_4429FC, 0x18u);
        v23 = (char *)&unk_462DA0 + 15 * configuration.gunKey;
        *((_WORD *)&unk_446EEE + 12) = word_4429FC[12];
        v24 = v23;
        do
          v25 = *v23++;
        while ( v25 );
        result = v23 - v24;
        v26 = v24;
        v27 = (char *)&unk_446EEE - 1;
        do
          v28 = (v27++)[1];
        while ( v28 );
        memcpy(v27, v26, result);
        goto LABEL_69;
      case 7:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 289, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for drop mine...", 193585);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.mineKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.mineKey);
        }
        while (configuration.mineKey == 170 );
        sub_418090();
        eventDetected();
        memcpy(byte_446F20, byte_4429E0, 0x18u);
        v29 = (char *)&unk_462DA0 + 15 * configuration.mineKey;
        byte_446F20[24] = byte_4429E0[24];
        v30 = v29;
        do
          v31 = *v29++;
        while ( v31 );
        result = v29 - v30;
        v32 = v30;
        v33 = &byte_446F20[-1];
        do
        {
          v34 = *((byte *)v33 + 1);
          v33 = (char *)v33 + 1;
        }
        while ( v34 );
        memcpy(v33, v32, result);
        goto LABEL_69;
      case 8:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_KEYBOARD_MENU, 0);
        createPopup(295, 317, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press a key for horn...", 211505);
        refreshAllScreen();
        do
        {
          do
          {
			  configuration.hornKey = (unsigned __int8)eventDetected();
            wait();
          }
          while ( !configuration.hornKey);
        }
        while (configuration.hornKey == 170 );
        sub_418090();
        eventDetected();
        v35 = (char *)&unk_462DA0 + 15 * configuration.hornKey;
        memcpy(&unk_446F52, &unk_4429C0, 0x20u);
        do
          v36 = *v35++;
        while ( v36 );
        result = v35 - ((char *)&unk_462DA0 + 15 * configuration.hornKey);
        v37 = (char *)&unk_446F52 - 1;
        do
          v38 = (v37++)[1];
        while ( v38 );
        memcpy(v37, (char *)&unk_462DA0 + 15 * configuration.hornKey, result);
        goto LABEL_69;
      case 0:
      case 9:
        result = sub_4284E0();
        if ( result == 1 )
          continue;
        if ( v1 != 8 )
          goto LABEL_69;
        result = 0;
        dword_4457B0 = 0;
        if ( !menuActive_4457F0[54] )
        {
          do
          {
            if ( result >= dword_445798 - 1 )
              result = 0;
            else
              ++result;
          }
          while ( !menuActive_4457F0[54+result] );
          dword_4457B0 = result;
        }
        return result;
      default:
LABEL_69:
        if ( v1 != -1 )
          continue;
        return result;
    }
  }
}
// 445798: using guessed type int dword_445798;
// 4457B0: using guessed type int dword_4457B0;
// 4458B0: using guessed type char byte_4458B0;
// 446DF4: using guessed type int dword_446DF4;
// 446DF8: using guessed type int dword_446DF8;
// 446DFC: using guessed type int dword_446DFC;
// 446E00: using guessed type __int16 word_446E00;
// 446E02: using guessed type char byte_446E02;
// 446E26: using guessed type int dword_446E26;
// 446E2A: using guessed type int dword_446E2A;
// 446E2E: using guessed type int dword_446E2E;
// 446E32: using guessed type __int16 word_446E32;
// 446E58: using guessed type int dword_446E58;
// 446E5C: using guessed type int dword_446E5C;
// 446E60: using guessed type int dword_446E60;
// 446E64: using guessed type int dword_446E64;
// 446E68: using guessed type char byte_446E68;
// 446E8A: using guessed type int dword_446E8A;
// 446E8E: using guessed type int dword_446E8E;
// 446E92: using guessed type int dword_446E92;
// 446E96: using guessed type int dword_446E96;
// 446E9A: using guessed type int dword_446E9A;
// 446E9E: using guessed type char byte_446E9E;
// 45EA68: using guessed type int configuration.rightSteeringKey;
// 45FBF4: using guessed type int configuration.turboKey;
// 461270: using guessed type int configuration.mineKey;
// 461EA8: using guessed type int configuration.accelerateKey;
// 461FF8: using guessed type int configuration.leftSteeringKey;
// 463CA8: using guessed type int configuration.brakeKey;
// 463CE4: using guessed type int configuration.gunKey;
// 463D18: using guessed type int configuration.hornKey;

//----- (004302E0) --------------------------------------------------------
signed int defineGamepadJoystickMenu()
{
  signed int v0; // eax@2
  signed int v1; // ebx@2
  signed int result; // eax@2
  char *v3; // eax@3
  char v4; // dl@4
  char *v5; // edi@5
  char v6; // cl@6
  char *v7; // eax@8
  char v8; // dl@9
  char *v9; // edi@10
  char v10; // cl@11
  char *v11; // eax@13
  char v12; // dl@14
  char *v13; // edi@15
  char v14; // cl@16
  char *v15; // eax@18
  char v16; // dl@19
  char *v17; // edi@20
  char v18; // cl@21
  char *v19; // eax@23
  char *v20; // ecx@23
  char v21; // dl@24
  const void *v22; // esi@25
  char *v23; // edi@25
  char v24; // cl@26
  char *v25; // eax@28
  char *v26; // ecx@28
  char v27; // dl@29
  const void *v28; // esi@30
  char *v29; // edi@30
  char v30; // cl@31
  char *v31; // eax@33
  char *v32; // ecx@33
  char v33; // dl@34
  const void *v34; // esi@35
  void *v35; // edi@35
  char v36; // cl@36

  sub_41CA40();
  while ( 2 )
  {
    memcpy((char *)screenBuffer + 67200, (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(CONFIGURE_MENU, 0);
    drawMenu(DEFINE_GAMEPAD_MENU, 1);
    refreshAllScreen();
    v0 = readEventInMenu(DEFINE_GAMEPAD_MENU);
    v1 = v0;
    result = v0 + 1;
    switch ( result )
    {
      case 1:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 121, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for accelerate...", 86065);
        refreshAllScreen();
		configuration.accelerateGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        dword_44717C = 1634887020;
        byte_447186 = 0;
        dword_447178 = 1701012289;
        v3 = (char *)&unk_45EAC0 + 15 * configuration.accelerateGamepad;
        dword_447180 = 538994036;
        word_447184 = 8224;
        do
          v4 = *v3++;
        while ( v4 );
        result = v3 - ((char *)&unk_45EAC0 + 15 * configuration.accelerateGamepad);
        v5 = (char *)&dword_447178 - 1;
        do
          v6 = (v5++)[1];
        while ( v6 );
        memcpy(v5, (char *)&unk_45EAC0 + 15 * configuration.accelerateGamepad, result);
        goto LABEL_40;
      case 2:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 149, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for brake...", 103985);
        refreshAllScreen();
		configuration.brakeGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        dword_4471AA = 1801548354;
        word_4471B6 = 32;
        v7 = (char *)&unk_45EAC0 + 15 * configuration.brakeGamepad;
        dword_4471AE = 538976357;
        dword_4471B2 = 538976288;
        do
          v8 = *v7++;
        while ( v8 );
        result = v7 - ((char *)&unk_45EAC0 + 15 * configuration.brakeGamepad);
        v9 = (char *)&dword_4471AA - 1;
        do
          v10 = (v9++)[1];
        while ( v10 );
        memcpy(v9, (char *)&unk_45EAC0 + 15 * configuration.brakeGamepad, result);
        goto LABEL_40;
      case 3:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 177, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for left steer...", 121905);
        refreshAllScreen();
		configuration.leftSteeringGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        dword_4471DC = 1701147731;
        dword_4471E8 = -84271072;
        dword_4471E0 = 1699487858;
        v11 = (char *)&unk_45EAC0 + 15 * configuration.leftSteeringGamepad;
        byte_4471EC = 0;
        dword_4471E4 = 538997862;
        do
          v12 = *v11++;
        while ( v12 );
        result = v11 - ((char *)&unk_45EAC0 + 15 * configuration.leftSteeringGamepad);
        v13 = (char *)&dword_4471DC - 1;
        do
          v14 = (v13++)[1];
        while ( v14 );
        memcpy(v13, (char *)&unk_45EAC0 + 15 * configuration.leftSteeringGamepad, result);
        goto LABEL_40;
      case 4:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 205, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for right steer...", 139825);
        refreshAllScreen();
		configuration.rightSteeringGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        dword_447216 = 544499815;
        byte_447222 = 0;
        dword_44720E = 1701147731;
        dword_447212 = 1766989938;
        v15 = (char *)&unk_45EAC0 + 15 * configuration.rightSteeringGamepad;
        dword_44721A = -84271072;
        dword_44721E = -84215046;
        do
          v16 = *v15++;
        while ( v16 );
        result = v15 - ((char *)&unk_45EAC0 + 15 * configuration.rightSteeringGamepad);
        v17 = (char *)&dword_44720E - 1;
        do
          v18 = (v17++)[1];
        while ( v18 );
        memcpy(v17, (char *)&unk_45EAC0 + 15 * configuration.rightSteeringGamepad, result);
        goto LABEL_40;
      case 5:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 233, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for turbo boost...", 157745);
        refreshAllScreen();
		configuration.turboGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        memcpy(&unk_447240, word_442A18, 0x18u);
        v19 = (char *)&unk_45EAC0 + 15 * configuration.turboGamepad;
        *((_WORD *)&unk_447240 + 12) = word_442A18[12];
        v20 = v19;
        do
          v21 = *v19++;
        while ( v21 );
        result = v19 - v20;
        v22 = v20;
        v23 = (char *)&unk_447240 - 1;
        do
          v24 = (v23++)[1];
        while ( v24 );
        memcpy(v23, v22, result);
        goto LABEL_40;
      case 6:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 261, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad  for machine gun...", 175665);
        refreshAllScreen();
		configuration.gunGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        memcpy(&unk_447272, word_4429FC, 0x18u);
        v25 = (char *)&unk_45EAC0 + 15 * configuration.gunGamepad;
        *((_WORD *)&unk_447272 + 12) = word_4429FC[12];
        v26 = v25;
        do
          v27 = *v25++;
        while ( v27 );
        result = v25 - v26;
        v28 = v26;
        v29 = (char *)&unk_447272 - 1;
        do
          v30 = (v29++)[1];
        while ( v30 );
        memcpy(v29, v28, result);
        goto LABEL_40;
      case 7:
        drawMenu(INITIAL_MENU, 0);
        drawMenu(CONFIGURE_MENU, 0);
        drawMenu(DEFINE_GAMEPAD_MENU, 0);
        createPopup(295, 289, 323, 48, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Move gamepad for drop mine...", 193585);
        refreshAllScreen();
		configuration.mineGamepad = (unsigned __int8)sub_42CBF0();
        sub_418090();
        eventDetected();
        memcpy(byte_4472A4, byte_4429E0, 0x18u);
        v31 = (char *)&unk_45EAC0 + 15 * configuration.mineGamepad;
        byte_4472A4[24] = byte_4429E0[24];
        v32 = v31;
        do
          v33 = *v31++;
        while ( v33 );
        result = v31 - v32;
        v34 = v32;
        v35 = &byte_4472A4[-1];
        do
        {
          v36 = *((byte *)v35 + 1);
          v35 = (char *)v35 + 1;
        }
        while ( v36 );
        memcpy(v35, v34, result);
        goto LABEL_40;
      case 0:
      case 8:
        result = sub_428740();
        if ( result == 1 )
          continue;
        if ( v1 != 7 )
          goto LABEL_40;
        result = 0;
        dword_4457E8 = 0;
        if ( !menuActive_4457F0 [72] )
        {
          do
          {
            if ( result >= dword_4457D0 - 1 )
              result = 0;
            else
              ++result;
          }
          while ( !menuActive_4457F0[72+result] );
          dword_4457E8 = result;
        }
        return result;
      default:
LABEL_40:
        if ( v1 != -1 )
          continue;
        return result;
    }
  }
}
// 4457D0: using guessed type int dword_4457D0;
// 4457E8: using guessed type int dword_4457E8;
// 4458B0: using guessed type char byte_4458B0;
// 447178: using guessed type int dword_447178;
// 44717C: using guessed type int dword_44717C;
// 447180: using guessed type int dword_447180;
// 447184: using guessed type __int16 word_447184;
// 447186: using guessed type char byte_447186;
// 4471AA: using guessed type int dword_4471AA;
// 4471AE: using guessed type int dword_4471AE;
// 4471B2: using guessed type int dword_4471B2;
// 4471B6: using guessed type __int16 word_4471B6;
// 4471DC: using guessed type int dword_4471DC;
// 4471E0: using guessed type int dword_4471E0;
// 4471E4: using guessed type int dword_4471E4;
// 4471E8: using guessed type int dword_4471E8;
// 4471EC: using guessed type char byte_4471EC;
// 44720E: using guessed type int dword_44720E;
// 447212: using guessed type int dword_447212;
// 447216: using guessed type int dword_447216;
// 44721A: using guessed type int dword_44721A;
// 44721E: using guessed type int dword_44721E;
// 447222: using guessed type char byte_447222;
// 45EEA0: using guessed type int configuration.leftSteeringGamepad;
// 461294: using guessed type int configuration.accelerateGamepad;
// 461F14: using guessed type int configuration.brakeGamepad;
// 462CFC: using guessed type int configuration.gunGamepad;
// 462D6C: using guessed type int configuration.rightSteeringGamepad;
// 463CA4: using guessed type int configuration.mineGamepad;
// 463D8C: using guessed type int configuration.turboGamepad;

//----- (004309A0) --------------------------------------------------------
int showAdjustOptions()
{
  int v0; // ebp@1
  signed int v1; // eax@3
  char v2; // bl@4
  char v3; // al@8
  signed int v4; // edx@23
  char *v5; // edi@24
  char *v6; // edi@25
  char v7; // al@26
  int v8; // eax@27
  char v9; // bl@29
  char v10; // al@33
  signed int v11; // edx@46
  char *v12; // edi@47
  char *v13; // edi@48
  char v14; // al@49
  int v15; // eax@50
  int v17; // eax@62
  int v18; // [sp+10h] [bp-14h]@1
  int v19; // [sp+14h] [bp-10h]@1
  char DstBuf; // [sp+18h] [bp-Ch]@25

  v18 = configuration.masterVolume / 512;
  v0 = configuration.musicVolume / 512;
  v19 = configuration.musicVolume / 512;
LABEL_2:
  while ( !dword_456B9C )
  {
    memcpy((char *)screenBuffer + 53760, (char *)graphicsGeneral.menubg5Bpk + 53760, 0x2C380u);
    drawMenu(INITIAL_MENU, 0);
    drawMenu(CONFIGURE_MENU, 1);
    refreshAllScreen();
    v1 = readEventInMenu(CONFIGURE_MENU);
    switch ( v1 )
    {
      case 0:
        drawMenu(CONFIGURE_MENU, 0);
        createPopup(214, 218, 330, 70, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Adjust music volume:", 144864);
        drawImageWithPosition((int)slidmus2Bpk, 172, 24, (int)((char *)screenBuffer + 160314));
        refreshAllScreen();
        v2 = 0;
        do
        {
          if ( v2 == -100 || v2 == 1 || dword_456B9C )
            break;
          v3 = eventDetected();
          v2 = v3;
          switch ( v3 )
          {
            case -53:
              if ( v18 > 0 )
                v18 -= 2;
              break;
            case 75:
              if ( v18 > 0 )
                v18 -= 2;
              break;
            case -51:
              if ( v18 < 128 )
                v18 += 2;
              break;
            case 77:
              if ( v18 < 128 )
                v18 += 2;
              break;
            default:
              if ( v3 == 59 && isMultiplayerGame )
                sub_42CCF0();
              break;
          }
          v4 = 0;
          do
          {
            v5 = (char *)screenBuffer + v4 + 157660;
            memset(v5, 0xC4u, 0x110u);
            v5 += 272;
            *(_WORD *)v5 = -15164;
            v4 += 640;
            v5[2] = -60;
          }
          while ( v4 < 19200 );
          drawImageWithPosition((int)slidmus2Bpk, 172, 24, (int)((char *)screenBuffer + 160314));
          drawImageWithPosition((int)volcur2Bpk, 10, 24, (int)((char *)screenBuffer + v18 + 160329));
          drawKeyCursor(v18 + 160327, (char *)screenBuffer + v18 + 160327, 0xEu, 24);
          itoa((unsigned __int64)((double)v18 * 0.78125), &DstBuf, 10);
          v6 = (char *)&v19 + 3;
          do
            v7 = (v6++)[1];
          while ( v7 );
          *(_WORD *)v6 = 37;
          v8 = sub_41C9F0(&DstBuf);
          drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, &DstBuf, 157109 - v8);
          drawKeyCursor(157024, (char *)screenBuffer + 157024, 0x78u, 32);
          musicSetMasterVolume(v18 << 9);
          sub_42A570();
        }
        while ( v2 != 28 );
        configuration.masterVolume = v18 << 9;
        loadMenuSoundEffect(1u, 22, 0, configuration.musicVolume, dword_4451A0);
        goto LABEL_2;
      case 1:
        drawMenu(CONFIGURE_MENU, 0);
        createPopup(214, 218, 330, 70, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Adjust effect volume:", 144864);
        drawImageWithPosition((int)slidmus2Bpk, 172, 24, (int)((char *)screenBuffer + 160314));
        refreshAllScreen();
        v9 = 0;
        do
        {
          if ( v9 == -100 || v9 == 1 || dword_456B9C )
            break;
          v10 = eventDetected();
          v9 = v10;
          if ( v10 == -53 )
          {
            if ( v0 > 0 )
            {
              v0 -= 2;
              v19 = v0;
            }
          }
          else if ( v10 == 75 )
          {
            if ( v0 > 0 )
            {
              v0 -= 2;
              v19 = v0;
            }
          }
          else if ( v10 != -51 && v10 != 77 )
          {
            if ( v10 == 59 && isMultiplayerGame )
              sub_42CCF0();
          }
          else if ( v0 < 128 )
          {
            v0 += 2;
            v19 = v0;
          }
          v11 = 0;
          do
          {
            v12 = (char *)screenBuffer + v11 + 157660;
            memset(v12, 0xC4u, 0x110u);
            v12 += 272;
            *(_WORD *)v12 = -15164;
            v11 += 640;
            v12[2] = -60;
          }
          while ( v11 < 19200 );
          drawImageWithPosition((int)slidmus2Bpk, 172, 24, (int)((char *)screenBuffer + 160314));
          drawImageWithPosition((int)volcur2Bpk, 10, 24, (int)((char *)screenBuffer + v0 + 160329));
          drawKeyCursor(v0 + 160327, (char *)screenBuffer + v0 + 160327, 0xEu, 24);
          itoa((unsigned __int64)((double)v19 * 0.78125), &DstBuf, 10);
          v13 = (char *)&v19 + 3;
          do
            v14 = (v13++)[1];
          while ( v14 );
          *(_WORD *)v13 = 37;
          v15 = sub_41C9F0(&DstBuf);
          drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, &DstBuf, 157109 - v15);
          drawKeyCursor(157024, (char *)screenBuffer + 157024, 0x78u, 32);
          musicSetVolume(v0 << 9);
          sub_42A570();
        }
        while ( v9 != 28 );
        configuration.musicVolume = v0 << 9;
        loadMenuSoundEffect(1u, 22, 0, v0 << 9, dword_4451A0);
        goto LABEL_2;
      case 2:
        redefineControls();
        goto LABEL_2;
      case 3:
        defineGamepadJoystickMenu();
        goto LABEL_2;
      case 4:
        if ( configuration.useJoystick )
        {
          configuration.useJoystick = 0;
LABEL_58:
          memcpy(aGamepadDisable, "Gamepad/Joystick Disabled", 0x1Au);
          goto LABEL_2;
        }
        configuration.useJoystick = 1;
        SDLConfigureJoystick();
        if ( !configuration.useJoystick )
          sub_41E3B0();
        configJoystick();
        memcpy(aGamepadDisable, "Gamepad/Joystick Enabled", 0x19u);
        if ( !configuration.useJoystick )
          goto LABEL_58;
        break;
      case 5:
        v17 = 0;
        dword_44575C = 0;
        if ( !menuActive_4457F0[27] )
        {
          do
          {
            if ( v17 >= dword_445744 - 1 )
              v17 = 0;
            else
              ++v17;
          }
          while ( !menuActive_4457F0[27+v17] );
          dword_44575C = v17;
        }
        return saveConfiguration();
      default:
        if ( v1 != -1 )
          goto LABEL_2;
        return saveConfiguration();
    }
  }
  return saveConfiguration();
}
// 417E80: using guessed type int configJoystick(void);
// 4264E0: using guessed type int saveConfiguration(void);
// 42CCF0: using guessed type int sub_42CCF0(void);
// 4309A0: using guessed type int showAdjustOptions(void);
// 4451A0: using guessed type int dword_4451A0;
// 445744: using guessed type int dword_445744;
// 44575C: using guessed type int dword_44575C;
// 4458B0: using guessed type char byte_4458B0;
// 456B9C: using guessed type int dword_456B9C;
// 45DC14: using guessed type int configuration.masterVolume;
// 45DC18: using guessed type int configuration.musicVolume;
// 45EA00: using guessed type int configuration.useJoystick;
// 45EA04: using guessed type int isMultiplayerGame;

//----- (00430FA0) --------------------------------------------------------
char sub_430FA0()
{
  int v0; // edi@1
  signed int v1; // esi@1
  signed int v2; // eax@1
  int *v3; // eax@7
  int v4; // edx@7
  int v5; // ebx@8
  char *v6; // eax@9
  int v7; // edi@9
  char *v8; // edx@9
  char v9; // cl@10
  int v10; // ecx@11
  int v11; // esi@12
  int v12; // ebx@13
  char *v13; // edi@13
  char v14; // al@14
  int v15; // edx@15
  int v16; // edi@18
  int *v17; // eax@18
  char *v18; // edx@18
  char v19; // cl@19
  int v20; // esi@20
  int v21; // eax@20
  int v22; // eax@23
  int v23; // eax@28
  char *v24; // edx@28
  char v25; // cl@29
  char *v26; // eax@30
  char v27; // al@32
  char v29; // [sp-1h] [bp-29h]@13
  char DstBuf[40]; // [sp+0h] [bp-28h]@13

  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
  drawTransparentBlock(0, 371, 639, 109);
  sub_427BC0();
  drawBottomMenuText();
  drawImageWithPosition((int)fametxtBpk, 640, 54, (int)((char *)screenBuffer + 53760));
  v0 = driverId;
  v1 = 0;
  v2 = (signed int)dword_461F2C;
  while ( drivers[driverId].totalRaces >= (HallOfFameEntry *)configuration.hallOfFameEntries[0].races )
  {
    v2 += 20;
    ++v1;
    if ( v2 >= (signed int)&event2Bpk )
      goto LABEL_12;
  }
  if ( v1 >= 0 )
  {
    if ( v1 < 9 )
    {

      v3 = &dword_461FD4;
      v4 = 9 - v1;
      do
      {
        --v4;
        *v3 = *(v3 - 5);
        v3[1] = *(v3 - 4);
        v3[2] = *(v3 - 3);
        v5 = *(v3 - 1);
        v3[3] = *(v3 - 2);
        v3[4] = v5;
        v3 -= 5;
      }
      while ( v4 );
    }
    v6 = &byte_460840[v0];
    v7 = 5 * v1;
   //TODO FIX halloffame v8 = (char *)((char *)&configuration.dword_461F20[5 * v1] - v6);
    do
    {
      v9 = *v6;
      v6[(_DWORD)v8] = *v6;
      ++v6;
    }
    while ( v9 );
	//TODO FIX halloffame strupr((char *)&configuration.dword_461F20[5 * v1]);
    v10 = configuration.difficulty;
    dword_461F2C[v7] = drivers[driverId].totalRaces;
    dword_461F30[v7] = v10;
    sub_421980(17, 22 * v1 + 138, 603, 24);
    saveConfiguration();
  }
LABEL_12:
  v11 = 0;
  do
  {
    v12 = v11 + 1;
    itoa(v11 + 1, DstBuf, 10);
    v13 = &v29;
    do
      v14 = (v13++)[1];
    while ( v14 );
    v15 = (int)graphicsGeneral.fmed1aBpk;
    *(_WORD *)v13 = 46;
    if ( v11 == 9 )
      drawTextWithFont(v15, (int)&unk_445928, DstBuf, 218908);
    else
      drawTextWithFont(v15, (int)&unk_445928, DstBuf, 14080 * v11 + 92196);
    v16 = 5 * v11;
	//TODO FIX  v17 = &configuration.dword_461F20[5 * v11];
    v18 = (char *)(DstBuf - (char *)v17);
    do
    {
      v19 = *(byte *)v17;
      *((byte *)v17 + (_DWORD)v18) = *(byte *)v17;
      v17 = (int *)((char *)v17 + 1);
    }
    while ( v19 );
    strupr(DstBuf);
    v20 = 14080 * v11;
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v20 + 92297);
    itoa(dword_461F2C[v16], DstBuf, 10);
    v21 = dword_461F2C[v16];
    if ( v21 >= 0 && v21 < 10 )
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v20 + 92504);
    v22 = dword_461F2C[v16];
    if ( v22 >= 10 && v22 < 100 )
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v20 + 92496);
    if ( dword_461F2C[v16] >= 100 )
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v20 + 92488);
    v23 = 24 * dword_461F30[v16] + 4485952;
    v24 = &DstBuf[-v23];
    do
    {
      v25 = *(byte *)v23;
      v24[v23] = *(byte *)v23;
      ++v23;
    }
    while ( v25 );
    v26 = strupr(DstBuf);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, v26, v20 + 92589);
    v11 = v12;
  }
  while ( v12 < 10 );
  refreshAllScreen();
  sub_4224E0();
  transitionToCurrentImage();
  eventDetected();
  sub_418090();
  do
  {
    while ( 1 )
    {
      sub_42A570();
      v27 = eventDetected();
      if ( v27 != 59 )
        break;
      if ( !isMultiplayerGame )
        goto LABEL_36;
      sub_42CCF0();
    }
  }
  while ( !v27 );
LABEL_36:
  eventDetected();
  return sub_418090();
}


//----- (004312D0) --------------------------------------------------------
void sub_4312D0()
{
  unsigned int v0; // eax@2
  char *v1; // edi@2
  char v2; // cl@3
  char *v3; // edi@5
  char v4; // al@6
  FILE *v5; // eax@7
  FILE *v6; // esi@7
  __int32 v7; // edi@8
  int v8; // eax@10
  char *v9; // edx@10
  signed int v10; // ecx@10
  int v11; // eax@10
  signed int v12; // edx@10
  float v13; // ST1C_4@10
  float v14; // ST18_4@10
  float v15; // ST14_4@10
  int v16; // edi@10
  signed int v17; // ebp@10
  unsigned __int8 v18; // bl@11
  signed int v19; // esi@11
  int v20; // ST1C_4@12
  int v21; // ST18_4@12
  int v22; // eax@12
  int v23; // [sp+1Ch] [bp-68h]@2
  char Filename; // [sp+20h] [bp-64h]@1

  Filename = 0;
  if ( byte_462D50 == 2 )
  {
    v0 = strlen(byte_45FAA0) + 1;
    v1 = (char *)&v23 + 3;
    do
      v2 = (v1++)[1];
    while ( v2 );
    memcpy(v1, byte_45FAA0, v0);
  }
  v3 = (char *)&v23 + 3;
  do
    v4 = (v3++)[1];
  while ( v4 );
  *(_DWORD *)v3 = 1633971813;
  *((_DWORD *)v3 + 1) = 1747872110;
  *((_WORD *)v3 + 4) = 26209;
  v3[10] = 0;
  v5 = fopen(&Filename, "rb");
  v6 = v5;
  if ( v5 )
  {
    fseek(v5, 0, 2);
    v7 = ftell(v6);
    fclose(v6);
    if ( v7 > 0 )
      openAnimation("ENDANI.haf", 1, (int)"tr0-mus.cmf", 2, (int)"endani-e.cmf", 1, 120);
  }
  nullsub_1();
  setWindowCaption2();
  sub_43C740();
  showStartScreen();
  loadGraphics2();
  loadGraphics3();
  loadGraphics4();
  transitionToBlack();
  loadPaletteMenu();
  v8 = dword_46086C[27 * driverId];
  v9 = (char *)graphicsGeneral.copperPal + 2 * v8;
  v10 = (unsigned __int8)v9[v8 + 2];
  v11 = (int)&v9[v8];
  v12 = *(byte *)(v11 + 1);
  v13 = (double)v10;
  v23 = *(byte *)v11;
  v14 = (double)v12;
  v15 = (double)v23;
  sub_418B00(v15, v14, v13);
  sub_430FA0();
  sub_4224E0();
  v16 = 6553600;
  v17 = 65500;
  do
  {
    wait();
    setMusicVolume(v17);
    v18 = 0;
    v19 = 0;
	//v19 = (signed int)dword_45FC44;
    do
    {
      v20 = (convertColorToPaletteColor((palette1[v19+2]), v16) + 0x8000) >> 16;
      v21 = (convertColorToPaletteColor(palette1[v19 + 1], v16) + 0x8000) >> 16;
      v22 = convertColorToPaletteColor((palette1[v19]), v16);
      setPaletteAndGetValue(v18, (v22 + 0x8000) >> 16, v21, v20);
      v19 += 3;
      ++v18;
    }
    while ( v19 <maxPaletteEntries );
    v17 -= 1310;
    v16 -= 0x20000;
  }
  while ( v17 >= 0 );
  stopSong();
  stopAndOpenMusic();
  loadMusic(1, "MEN-MUS.CMF", 2,"MEN-SAM.CMF");
  musicSetMasterVolume(configuration.masterVolume);
  nullsub_1();
  musicPlayMusic();
  nullsub_1();
}


//----- (00431510) --------------------------------------------------------
int seeHallOfFame()
{
  int v0; // esi@1
  int v1; // ebp@2
  char *v2; // edi@2
  char v3; // al@3
  int v4; // edx@4
  int v5; // edi@7
  int *v6; // eax@7
  char *v7; // edx@7
  char v8; // cl@8
  int v9; // esi@9
  int v10; // eax@9
  int v11; // eax@12
  int v12; // eax@17
  char *v13; // edx@17
  char v14; // cl@18
  char *v15; // eax@19
  char v16; // al@21
  signed int v17; // ebx@25
  int result; // eax@26
  signed int v19; // esi@32
  signed int v20; // esi@38
  char v21; // [sp+Bh] [bp-29h]@2
  char DstBuf[40]; // [sp+Ch] [bp-28h]@2

  memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  memcpy((void *)(dword_45FC00 + 67200), (char *)graphicsGeneral.menubg5Bpk + 67200, 0x28F00u);
  drawImageWithPosition((int)fametxtBpk, 640, 54, (int)((char *)screenBuffer + 53760));
  v0 = 0;
  do
  {
    v1 = v0 + 1;
    itoa(v0 + 1, DstBuf, 10);
    v2 = &v21;
    do
      v3 = (v2++)[1];
    while ( v3 );
    v4 = (int)graphicsGeneral.fmed1aBpk;
    *(_WORD *)v2 = 46;
    if ( v0 == 9 )
		//rank
      drawTextWithFont(v4, (int)&unk_445928, DstBuf, 218908);
    else
      drawTextWithFont(v4, (int)&unk_445928, DstBuf, 14080 * v0 + 92196);
    v5 = 5 * v0;
    /*v6 = &configuration.hallOfFameEntries[v0];
    v7 = (char *)(DstBuf - (char *)v6);
    do
    {
      v8 = *(byte *)v6;
      *((byte *)v6 + (_DWORD)v7) = *(byte *)v6;
      v6 = (int *)((char *)v6 + 1);
    }
    while ( v8 );
    strupr(DstBuf);*/
    v9 = 14080 * v0;
	//driver
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, strupr(configuration.hallOfFameEntries[v0].name), v9 + 92297);
    itoa(configuration.hallOfFameEntries[v0].races, DstBuf, 10);
    v10 = configuration.hallOfFameEntries[v0].races;
	//races
    if ( v10 >= 0 && v10 < 10 )
		
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v9 + 92504);
    if (v10 >= 10 && v10 < 100 )
		
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v9 + 92496);
    if (v10 >= 100 )
		
      drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, DstBuf, v9 + 92488);
  
//coge el indice y suma digficultad
	/*v12 = 24 * dword_461F30[v5] + 4485952;
    v13 = &DstBuf[-v12];
    do
    {
      v14 = *(byte *)v12;
      v13[v12] = *(byte *)v12;
      ++v12;
    }
    while ( v14 );*/
	//dificulty
    v15 = getDifficultyText(configuration.hallOfFameEntries[v0].difficulty);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, v15, v9 + 92589);
    v0 = v1;
  }
  while ( v1 < 10 );
  screenBuffer = (void *)dword_461250;
  sub_42C560(-1);
  LOWORD(dword_462D7C) = sub_43C1F0() & 0xFF00;
  dword_462D7C = (unsigned __int16)dword_462D7C;
  musicSetOrder(20736);
  setMusicVolume(0x10000);
  eventDetected();
  sub_418090();
  do
  {
    while ( 1 )
    {
      sub_42A570();
      v16 = eventDetected();
      if ( v16 != 59 )
        break;
      if ( !isMultiplayerGame )
        goto LABEL_25;
      sub_42CCF0();
    }
  }
  while ( !v16 );
LABEL_25:
  eventDetected();
  sub_418090();
  memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  memcpy((void *)(dword_45FC00 + 53760), (char *)graphicsGeneral.menubg5Bpk + 53760, 0x2C380u);
  v17 = 0;
  drawImageWithPosition((int)recotxtBpk, 640, 16, (int)((char *)screenBuffer + 58880));
  drawRecordByCircuit((unsigned __int8)circuitOrder_45673C[0]);
  drawImageWithPosition2(trsnap2m1Bpk[circuitOrder_45673C[0]], 128, 98, (int)((char *)screenBuffer + 137000));
  //drawImageWithPosition2((int)*(&trsnap2m1Bpk + (unsigned __int8)circuitOrder_45673C[0]), 128, 98, (int)((char *)screenBuffer + 137000));
  drawImageWithPosition2((int)trarr1Bpk, 16, 84, (int)((char *)screenBuffer + 145944));
  drawImageWithPosition2((int)((char *)trarr1Bpk + 1344), 16, 84, (int)((char *)screenBuffer + 146088));
  drawBorder(15, 204, 178, 117);
  screenBuffer = (void *)dword_461250;
  sub_42C4A0();
  while ( 1 )
  {
    sub_42A570();
    result = (unsigned __int8)eventDetected() - 1;
    switch ( result )
    {
      default:
        continue;
      case 58:
        if ( isMultiplayerGame )
          sub_42CCF0();
        break;
      case 74:
      case 202://right
        if ( v17 <= 0 )
          v17 = 17;
        else
          --v17;
        loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
        drawImageWithPosition2((int)((char *)trarr1Bpk + 2688), 16, 84, (int)((char *)screenBuffer + 145944));
        drawImageWithPosition2(
          trsnap2m1Bpk[circuitOrder_45673C[v17]],
          128,
          98,
          (int)((char *)screenBuffer + 137000));
		/*drawImageWithPosition2(
			(int)*(&trsnap2m1Bpk + (unsigned __int8)circuitOrder_45673C[v17]),
			128,
			98,
			(int)((char *)screenBuffer + 137000));*/
        drawRecordByCircuit((unsigned __int8)circuitOrder_45673C[v17]);
        refreshAllScreen();
        v19 = 8;
        do
        {
          sub_42A570();
          --v19;
        }
        while ( v19 );
        drawImageWithPosition2((int)trarr1Bpk, 16, 84, (int)((char *)screenBuffer + 145944));
        refreshAllScreen();
        break;
      case 76://left
      case 204:
        if ( v17 >= 17 )
          v17 = 0;
        else
          ++v17;
        loadMenuSoundEffect(1u, 26, 0, configuration.musicVolume, dword_445198);
        drawImageWithPosition2((int)((char *)trarr1Bpk + 4032), 16, 84, (int)((char *)screenBuffer + 146088));
        drawImageWithPosition2(
          trsnap2m1Bpk[circuitOrder_45673C[v17]],
          128,
          98,
          (int)((char *)screenBuffer + 137000));
		/*drawImageWithPosition2(
			(int)*(&trsnap2m1Bpk + (unsigned __int8)circuitOrder_45673C[v17]),
			128,
			98,
			(int)((char *)screenBuffer + 137000));*/
        drawRecordByCircuit((unsigned __int8)circuitOrder_45673C[v17]);
        refreshAllScreen();
        v20 = 8;
        do
        {
          sub_42A570();
          --v20;
        }
        while ( v20 );
        drawImageWithPosition2((int)((char *)trarr1Bpk + 1344), 16, 84, (int)((char *)screenBuffer + 146088));
        refreshAllScreen();
        break;
      case 0://enter esc
      case 27:
      case 155:
        memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
        screenBuffer = (void *)dword_45FC00;
        return result;
    }
  }
}


//----- (00431B30) --------------------------------------------------------
int showHitmanScreen()
{
  int result; // eax@2
  int v1; // eax@6
  signed int v2; // ebx@7
  int v3; // eax@19
  char v4; // cl@20
  unsigned int v5; // eax@21
  void *v6; // edi@21
  char v7; // cl@22
  char *v8; // edi@23
  char v9; // al@24
  signed int v10; // esi@25
  signed int v11; // esi@27
  int v12; // eax@31
  signed int v13; // ebp@32
  int v14; // ebx@45
  int v15; // edx@45
  int v16; // eax@46
  char v17; // cl@47
  char *v18; // eax@48
  char *v19; // edx@48
  char v20; // cl@49
  unsigned int v21; // eax@50
  void *v22; // edi@50
  char v23; // cl@51
  char *v24; // edi@52
  char v25; // al@53
  int v26; // eax@54
  char v27; // cl@55
  unsigned int v28; // eax@56
  void *v29; // edi@56
  char v30; // cl@57
  char *v31; // edi@58
  char v32; // al@59
  signed int v33; // esi@60
  signed int v34; // esi@62
  int v35; // eax@65
  char *v36; // eax@65
  char *v37; // edx@65
  char v38; // cl@66
  int v39; // [sp+0h] [bp-48h]@29
  int v40; // [sp+4h] [bp-44h]@3
  int v41; // [sp+8h] [bp-40h]@7
  __int16 v42; // [sp+Ch] [bp-3Ch]@7
  char v43; // [sp+13h] [bp-35h]@21
  char v44[52]; // [sp+14h] [bp-34h]@20

  if ( dword_456B10 )
    return 0;
  v40 = 1;
  if ( rand() % 100 < dword_45678C && useWeapons )
  {
    dword_45678C = 5;
    if ( rand() % 100 >= 50 )
    {
      v12 = dword_46085C[27 * driverId];
      if ( v12 == 5 )
      {
        v41 = 808464438;//6000
        LOBYTE(v42) = 0;
        v13 = 1;
      }
      else
      {
        v13 = v40;
      }
      if ( v12 == 4 )
      {
        v41 = 808464436;//4000
        LOBYTE(v42) = 0;
        v13 = 2;
      }
      if ( v12 == 3 )
      {
        v41 = 808464435; //3000
        LOBYTE(v42) = 0;
        v13 = 3;
      }
      if ( v12 == 2 )
      {
        v41 = 808464434; //2000
        LOBYTE(v42) = 0;
        v13 = 4;
      }
      if ( v12 == 1 )
      {
        v41 = 808464433;//1000
        LOBYTE(v42) = 0;
        v13 = 5;
      }
      if ( !v12 )
      {
        v41 = 3158069;
        v13 = 6;
      }
      createPopup(33, 131, 482, 230, 1);
      drawImageWithPosition((int)event2Bpk, 104, 128, (int)((char *)screenBuffer + 107565));
      writeTextInScreen(aWannaBeMyHitma, 107681);
      writeTextInScreen((const char *)&unk_453108, 117921);
      writeTextInScreen(aWannaGetRichTo, 128161);
      writeTextInScreen(aHereSTheDeal_I, 138401);
      writeTextInScreen(aMajorFundsOnTh, 148641);
      do
      {
        v14 = rand() % 4;
        v15 = selectedRace_462CE8;
      }
      while ( *((byte *)&dword_45EB50[selectedRace_462CE8] + v14) == driverId );
      v16 = 0;
      do
      {
        v17 = byte_453248[v16];
        v44[v16++] = v17;
      }
      while ( v17 );
      v18 = &byte_460840[108 * *((byte *)&dword_45EB50[v15] + v14)];
      v19 = &byte_460840[108 * *((byte *)&dword_45EB50[v15] + v14)];
      do
        v20 = *v18++;
      while ( v20 );
      v21 = v18 - v19;
      v22 = &v43;
      do
      {
        v23 = *((byte *)v22 + 1);
        v22 = (char *)v22 + 1;
      }
      while ( v23 );
      memcpy(v22, v19, v21);
      v24 = &v43;
      do
        v25 = (v24++)[1];
      while ( v25 );
      *(_DWORD *)v24 = 1852798752;
      *((_DWORD *)v24 + 1) = 1914729511;
      *((_DWORD *)v24 + 2) = 1751343461;
      *((_DWORD *)v24 + 3) = 1701344288;
      v24[16] = 0;
      writeTextInScreen(v44, 158881);
      writeTextInScreen(aFinishLine_Mak, 169121);
      v26 = 0;
      do
      {
        v27 = byte_4532E8[v26];
        v44[v26++] = v27;
      }
      while ( v27 );
      v28 = strlen((const char *)&v41) + 1;
      v29 = &v43;
      do
      {
        v30 = *((byte *)v29 + 1);
        v29 = (char *)v29 + 1;
      }
      while ( v30 );
      memcpy(v29, &v41, v28);
      v31 = &v43;
      do
        v32 = (v31++)[1];
      while ( v32 );
      *(_WORD *)v31 = 46;
      writeTextInScreen(v44, 179361);
      writeTextInScreen((const char *)&unk_453338, 189601);
      writeTextInScreen((const char *)&unk_453388, 199841);
      refreshAllScreen();
      v33 = 50;
      do
      {
        sub_42A570();
        --v33;
      }
      while ( v33 );
      loadMenuSoundEffect(5u, 5, 0, configuration.musicVolume, 147456);
      v34 = 20;
      do
      {
        sub_42A570();
        --v34;
      }
      while ( v34 );
      v39 = 1;
      drawYesNoMenu(161, 321, 0, &v39);
      if ( v39 == 1 )
      {
        v35 = *((byte *)&dword_45EB50[selectedRace_462CE8] + v14);
        dword_456BBC = v35;
        v36 = &byte_460840[108 * v35];
        killOneQuest_456BB8 = v13;
        v37 = (char *)(&unk_45FBE0 - (_UNKNOWN *)v36);
        do
        {
          v38 = *v36;
          v36[(_DWORD)v37] = *v36;
          ++v36;
        }
        while ( v38 );
      }
    }
    else
    {
      v1 = dword_46085C[27 * driverId];
      if ( v1 == 5 )
      {
        v41 = 808464945;
        v42 = 48;
        v2 = 1;
      }
      else
      {
        v2 = v40;
      }
      if ( v1 == 4 )
      {
        v41 = 808464440;
        LOBYTE(v42) = 0;
        v2 = 2;
      }
      if ( v1 == 3 )
      {
        v41 = 808464438;
        LOBYTE(v42) = 0;
        v2 = 3;
      }
      if ( v1 == 2 )
      {
        v41 = 808464436;
        LOBYTE(v42) = 0;
        v2 = 4;
      }
      if ( v1 == 1 )
      {
        v41 = 808464434;
        LOBYTE(v42) = 0;
        v2 = 5;
      }
      if ( !v1 )
      {
        v41 = 808464433;
        LOBYTE(v42) = 0;
        v2 = 6;
      }
      createPopup(33, 131, 482, 230, 1);
      drawImageWithPosition((int)drugdealBpk, 104, 128, (int)((char *)screenBuffer + 107565));
      writeTextInScreen(aASlickSteroidR, 107681);
      writeTextInScreen((const char *)&unk_452DE8, 117921);
      v3 = 0;
      do
      {
        v4 = byte_452E38[v3];
        v44[v3++] = v4;
      }
      while ( v4 );
      v5 = strlen((const char *)&v41) + 1;
      v6 = &v43;
      do
      {
        v7 = *((byte *)v6 + 1);
        v6 = (char *)v6 + 1;
      }
      while ( v7 );
      memcpy(v6, &v41, v5);
      v8 = &v43;
      do
        v9 = (v8++)[1];
      while ( v9 );
      *(_DWORD *)v8 = 1629498491;
      *((_DWORD *)v8 + 1) = 1852799342;
      *((_DWORD *)v8 + 2) = 1495285605;
      *((_DWORD *)v8 + 3) = 541029743;
      *((_DWORD *)v8 + 4) = 1936287828;
      *((_DWORD *)v8 + 5) = 7563552;
      writeTextInScreen(v44, 128161);
      writeTextInScreen(aEasyAsShifting, 138401);
      writeTextInScreen(aJustPickUpSome, 148641);
      writeTextInScreen(aWayAndGetThemT, 158881);
      writeTextInScreen(aLineBeforeThin, 169121);
      writeTextInScreen(aFirstLikeFloor, 179361);
      writeTextInScreen((const char *)&unk_453018, 189601);
      writeTextInScreen((const char *)&unk_453068, 199841);
      refreshAllScreen();
      v10 = 50;
      do
      {
        sub_42A570();
        --v10;
      }
      while ( v10 );
      loadMenuSoundEffect(5u, 5, 0, configuration.musicVolume, 147456);
      v11 = 20;
      do
      {
        sub_42A570();
        --v11;
      }
      while ( v11 );
      v39 = 1;
      drawYesNoMenu(161, 321, 0, &v39);
      if ( v39 == 1 )
      {
        drugQuest_456BB4 = v2;
        sub_43C3E0(5u);
        return v40;
      }
    }
    sub_43C3E0(5u);
    result = v40;
  }
  else
  {
    if ( dword_45678C < 97 )
      dword_45678C += 2;
    result = 0;
  }
  return result;
}


//----- (004321B0) --------------------------------------------------------
void __cdecl previewRaceScreen(signed int participants)
{
  signed int v1; // edi@2
  signed int v2; // esi@2
  int v3; // ecx@3
  int v4; // edx@4
  unsigned int v5; // eax@4
  signed int v6; // edi@8
  signed int v7; // esi@8
  int v8; // ecx@9
  int v9; // edx@10
  unsigned int v10; // eax@10
  void *v11 = malloc(4u); // eax@14
  int v12; // eax@14
  char *v13; // ecx@14
  signed int v14; // eax@14
  char v15; // dl@15
  char *v16; // edi@16
  char v17; // al@17
  char v18; // bl@18
  int v19; // eax@18
  int *v20; // ecx@18
  signed int v21; // eax@18
  char v22; // dl@19
  int v23; // eax@21
  char *v24; // eax@22
  signed int v25; // edx@22
  char v26; // cl@23
  char *v27; // edi@24
  char v28; // al@25
  int *v29; // ecx@26
  signed int v30; // eax@26
  char v31; // dl@27
  char *v32; // eax@29
  signed int v33; // edx@29
  char v34; // cl@30
  char *v35; // edi@31
  char v36; // al@32
  int *v37; // ecx@33
  signed int v38; // eax@33
  char v39; // dl@34
  char *v40; // eax@36
  signed int v41; // edx@36
  char v42; // cl@37
  char *v43; // edi@38
  char v44; // al@39
  int *v45; // ecx@40
  signed int v46; // eax@40
  char v47; // dl@41
  unsigned __int8 v48; // cl@45
  unsigned __int8 v49; // dl@45
  unsigned __int8 v50; // cl@45
  unsigned int v51; // eax@47
  char *v52; // edi@47
  char v53; // cl@48
  char *v54; // edi@50
  char v55; // al@51
  double v56; // st7@52
  unsigned int v57; // eax@52
  char *v58; // edi@52
  char v59; // cl@53
  char *v60; // edi@56
  char v61; // al@57
  char *v62; // edi@60
  char v63; // al@61
  char *v64; // edi@64
  char v65; // al@65
  char *v66; // edi@68
  char v67; // al@69
  char *v68; // eax@71
  int v69; // edi@71
  unsigned int v70; // edx@71
  char v71; // cl@72
  int v72; // ebp@76
  int v73; // esi@76
  char *v74; // edi@76
  char v75; // al@77
  char *v76; // eax@78
  int v77; // ebx@78
  unsigned int v78; // edx@78
  char v79; // cl@79
  char *v80; // ecx@82
  char v81; // dl@83
  signed int i; // ebp@85
  int v83; // esi@86
  int v84; // ebx@86
  char *v85; // edi@86
  char v86; // al@87
  unsigned int v87; // edx@88
  char *v88; // eax@88
  char v89; // cl@89
  char *v90; // ecx@92
  char v91; // dl@93
  int v92; // eax@99
  void *v93 = malloc(4u); // eax@100
  int v94; // edi@100
  signed int v95; // esi@100
  int v96; // edx@112
  int v97; // eax@112
  signed int v98; // esi@112
  int v99; // ecx@112
  int v100; // ebp@132
  signed int v101; // ebx@132
  int v102; // esi@133
  int v103; // edi@134
  char *v104; // eax@134
  char v105; // dl@135
  int v106; // ecx@136
  int v107; // eax@136
  bool v108; // zf@136
  int v109; // ecx@139
  int v110; // eax@139
  int v111; // eax@147
  void *v112; // ecx@150
  int v113; // eax@152
  char *v114; // eax@152
  int v115; // eax@152
  char *v116; // eax@153
  signed int v117; // eax@162
  int v118; // ebx@164
  int v119; // eax@164
  int *v120; // edi@165
  int v121; // edx@170
  int v122; // esi@170
  int v123; // eax@173
  int v124; // edi@173
  int v125; // edx@177
  int v126; // edi@207
  int v127; // ebx@207
  int v128; // eax@207
  int v129; // eax@207
  signed int v130; // edx@207
  int v131; // ecx@207
  int v132; // edx@224
  signed int v133; // edx@226
  int v134; // eax@226
  int v135; // ecx@227
  signed int v136; // eax@265
  int v137; // eax@267
  int v138; // edx@267
  int v139; // ecx@267
  int v140; // ebp@267
  signed int v141; // ecx@267
  int v142; // eax@267
  int v143; // ebx@291
  int v144; // eax@291
  signed int v145; // esi@291
  int v146; // ecx@294
  signed int v147; // ecx@296
  signed int v148; // ecx@309
  signed int v149; // ecx@322
  signed int v150; // ecx@335
  int v151; // edx@351
  int v152; // edx@363
  int v153; // edx@375
  int v154; // ecx@387
  int v155; // ecx@391
  char v156; // bl@392
  int v157; // ebp@392
  bool v158; // sf@392
  unsigned __int8 v159; // of@392
  char v160; // al@392
  char v161; // al@392
  signed int v162; // edx@392
  signed int v163; // eax@394
  char v164; // cl@395
  char *v165; // eax@397
  char *v166; // edx@397
  char v167; // cl@398
  unsigned int v168; // eax@399
  char *v169; // edi@399
  char v170; // cl@400
  char *v171; // edi@401
  char v172; // al@402
  signed int v173; // edx@403
  signed int v174; // eax@404
  char v175; // cl@405
  signed int v176; // eax@408
  char v177; // cl@409
  char *v178; // eax@413
  char *v179; // ecx@413
  char v180; // dl@414
  unsigned int v181; // eax@415
  const void *v182; // esi@415
  char *v183; // edi@415
  char v184; // cl@416
  char *v185; // edi@417
  char v186; // al@418
  char *v187; // eax@419
  char *v188; // ecx@419
  char v189; // dl@420
  unsigned int v190; // eax@421
  const void *v191; // esi@421
  char *v192; // edi@421
  char v193; // cl@422
  char *v194; // edi@423
  char v195; // al@424
  signed int v196; // edx@426
  signed int v197; // eax@427
  char v198; // cl@428
  int v199; // esi@430
  double v200; // st7@431
  int v201; // ebp@431
  int v202; // eax@432
  int v203; // ebx@434
  int *v204; // edi@435
  int *v205; // edi@439
  int *v206; // edi@443
  int *v207; // edi@447
  int v208; // eax@449
  int v209; // eax@452
  signed int v210; // edx@452
  int v211; // ecx@452
  int v212; // edi@469
  int v213; // ecx@470
  signed int v214; // ecx@472
  int *v215; // edx@473
  int v216; // eax@474
  int v217; // ebx@474
  void *v218 = malloc(0x4B000u); // eax@477
  int v219; // eax@477
  signed int v220; // edx@477
  int v221; // ecx@477
  int v222; // eax@497
  char *v223; // edx@497
  signed int v224; // ecx@497
  int v225; // eax@497
  signed int v226; // edx@497
  float v227; // ST30_4@497
  float v228; // ST2C_4@497
  float v229; // ST28_4@497
  signed int v230; // esi@498
  int v231; // eax@503
  signed int v232; // edx@503
  int v233; // ecx@503
  signed int v234; // esi@525
  int v235; // eax@526
  char v236; // cl@526
  int v237; // eax@526
  const char **v238; // [sp+Ch] [bp-E8h]@0
  const char **v239; // [sp+10h] [bp-E4h]@0
  unsigned __int8 v240; // [sp+1Ch] [bp-D8h]@14
  unsigned __int8 v241; // [sp+1Dh] [bp-D7h]@14
  unsigned __int8 v242; // [sp+1Eh] [bp-D6h]@14
  unsigned __int8 v243; // [sp+1Fh] [bp-D5h]@14
  int v244; // [sp+20h] [bp-D4h]@73
  int v245; // [sp+24h] [bp-D0h]@88
  int v246; // [sp+28h] [bp-CCh]@16
  char Str[16]; // [sp+2Ch] [bp-C8h]@14
  int v248; // [sp+30h] [bp-C4h]@43
  int v249; // [sp+34h] [bp-C0h]@43
  int v250; // [sp+38h] [bp-BCh]@43
  int v251; // [sp+54h] [bp-A0h]@1
  int v252; // [sp+58h] [bp-9Ch]@1
  int v253; // [sp+5Ch] [bp-98h]@1
  int v254; // [sp+60h] [bp-94h]@1
  int v255; // [sp+64h] [bp-90h]@1
  int v256; // [sp+68h] [bp-8Ch]@1
  int v257; // [sp+6Ch] [bp-88h]@1
  int v258; // [sp+70h] [bp-84h]@1
  int v259; // [sp+74h] [bp-80h]@1
  int v260; // [sp+78h] [bp-7Ch]@1
  int v261; // [sp+7Ch] [bp-78h]@1
  int v262; // [sp+80h] [bp-74h]@1
  int v263; // [sp+84h] [bp-70h]@1
  int v264; // [sp+88h] [bp-6Ch]@1
  int v265; // [sp+8Ch] [bp-68h]@1
  int v266; // [sp+90h] [bp-64h]@1
  int v267; // [sp+94h] [bp-60h]@1
  int v268; // [sp+98h] [bp-5Ch]@1
  int v269; // [sp+9Ch] [bp-58h]@1
  int v270; // [sp+A0h] [bp-54h]@1
  int v271; // [sp+A4h] [bp-50h]@1
  int v272; // [sp+A8h] [bp-4Ch]@1
  int v273; // [sp+ACh] [bp-48h]@1
  char *v274; // [sp+B0h] [bp-44h]@100
  char *v275; // [sp+B4h] [bp-40h]@100
  char *v276; // [sp+B8h] [bp-3Ch]@100
  char *v277; // [sp+BCh] [bp-38h]@100
  int v278; // [sp+C0h] [bp-34h]@1
  int v279; // [sp+C4h] [bp-30h]@1
  int v280; // [sp+C8h] [bp-2Ch]@1
  int v281; // [sp+CCh] [bp-28h]@1
  int v282; // [sp+D0h] [bp-24h]@1
  int v283; // [sp+D4h] [bp-20h]@1
  int v284; // [sp+D8h] [bp-1Ch]@1
  int v285; // [sp+DCh] [bp-18h]@1
  char DstBuf; // [sp+E0h] [bp-14h]@47

  v258 = 3691092;
  v267 = 3691092;
  v255 = 3494484;
  v256 = 3560020;
  v264 = 3494484;
  v265 = 3560020;
  dword_456730 = 0;
  memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  v259 = 3756628;
  v268 = 3756628;
  memcpy((void *)dword_45FC00, graphicsGeneral.menubg5Bpk, 0x4B000u);
  v253 = 3363412;
  v262 = 3363412;
  v251 = 3232340;
  v252 = 3297876;
  v254 = 3428948;
  v257 = 3625556;
  v260 = 3232340;
  v261 = 3297876;
  v263 = 3428948;
  v266 = 3625556;
  v269 = 3166804;
  v282 = 113331;
  v283 = 138403;
  v284 = 175411;
  v285 = 200483;
  v270 = 128664;
  v271 = 153736;
  v272 = 190744;
  v273 = 215816;
  v278 = 82613;
  v279 = 107685;
  v280 = 144693;
  v281 = 169765;
  drawImageWithPosition((int)graphics4.prep4Bpk, 640, 54, (int)((char *)screenBuffer + 272640));
  drawImageWithPosition((int)graphics4.prepw1Bpk, 225, 274, (int)((char *)screenBuffer + 64013));
  if (participants < 4 )
  {
    v1 = 0;
    v2 = 0;
    do
    {
      v3 = v1 % 2;
      if ( v1 % 2 < 100 )
      {
        v4 = v2 + v3;
        v5 = ((unsigned int)(99 - v3) >> 1) + 1;
        do
        {
          *((byte *)screenBuffer + v4 + 167171) = -60;
          v4 += 2;
          --v5;
        }
        while ( v5 );
      }
      v2 += 640;
      ++v1;
    }
    while ( v2 < 58240 );
  }
  if (participants < 3 )
  {
    v6 = 0;
    v7 = 0;
    do
    {
      v8 = v6 % 2;
      if ( v6 % 2 < 100 )
      {
        v9 = v7 + v8;
        v10 = ((unsigned int)(99 - v8) >> 1) + 1;
        do
        {
          *((byte *)screenBuffer + v9 + 142099) = -60;
          v9 += 2;
          --v10;
        }
        while ( v10 );
      }
      v7 += 640;
      ++v6;
    }
    while ( v7 < 58240 );
  }
  if ( isMultiplayerGame )
  {
    v240 = 0;
    v241 = 1;
    v242 = 2;
    v243 = 3;
    //allocateMemoryPtr((void*)&v11,4u);
    //TODO fix
   // Str = v11;
    *(byte *)v11 = driverId;
    sub_41EA70((int)Str, 1, 19);
    free(Str);
    v12 = (unsigned __int8)byte_45FC10[dword_456BCC];
	v13 = tShape[v12];
	//v13 = &aTshape01[9 * v12];
    v14 = &Str[-9 * v12] - aTshape01;
	//v14 = &Str[-9 * v12] - aTshape01;
    do
    {
      v15 = *v13;
      v13[v14] = *v13;
      ++v13;
    }
    while ( v15 );
    v16 = (char *)&v246 + 3;
    do
      v17 = (v16++)[1];
    while ( v17 );
    *(_DWORD *)v16 = 1802527278; //.bpk
    v16[4] = 0;
    extractFromBpa("MENU.BPA", textureTemp, (int)Str);
    copyImageToBuffer((int)textureTemp, (int)dword_45EB5C);
    drawImageWithPosition((int)dword_45EB5C, 360, 274, (int)((char *)screenBuffer + 64264));
    v18 = byte_45FC10[dword_456BCC];
    v19 = (unsigned __int8)byte_45FC10[dword_456BCC];
    v20 = &v251 + v19;
    v21 = (char *)&dword_45EA50[-v19] - (char *)&v251;
    do
    {
      v22 = *(byte *)v20;
      *((byte *)v20 + v21) = *(byte *)v20;
      v20 = (int *)((char *)v20 + 1);
    }
    while ( v22 );
    numberOfLaps = 5;
    dword_4A7AA8 = (unsigned __int8)v18 > 8u;
  }
  else
  {
    v23 = selectedRace_462CE8;
    dword_4A7AA8 = (unsigned __int8)byte_46126C[selectedRace_462CE8] > 8u;
    switch ( selectedRace_462CE8 )
    {
      case 0:
       /* v24 = &aTshape01[9 * (unsigned __int8)byte_46126C[0]];
        v25 = &Str[-9 * (unsigned __int8)byte_46126C[0]] - aTshape01;
        do
        {
          v26 = *v24;
          v24[v25] = *v24;
          ++v24;
        }
        while ( v26 );
        v27 = (char *)&v246 + 3;
        do
          v28 = (v27++)[1];
        while ( v28 );
        *(_DWORD *)v27 = 1802527278; //bpk
        v27[4] = 0;*/
		  v24 = tShape[(unsigned __int8)byte_46126C[0]];
		  strcpy(Str, v24);
		  strcat(Str, ".bpk");
		  extractFromBpa("MENU.BPA", textureTemp, Str);
        //extractFromBpa("MENU.BPA", textureTemp, (int)Str);
        copyImageToBuffer((int)textureTemp, (int)dword_45EB5C);
        drawImageWithPosition((int)dword_45EB5C, 360, 274, (int)((char *)screenBuffer + 64264));
        v29 = &v251 + (unsigned __int8)byte_46126C[0];
        v30 = (char *)&dword_45EA50[-(unsigned __int8)byte_46126C[0]] - (char *)&v251;
        do
        {
          v31 = *(byte *)v29;
          *((byte *)v29 + v30) = *(byte *)v29;
          v29 = (int *)((char *)v29 + 1);
        }
        while ( v31 );
        numberOfLaps = 4;
        goto LABEL_44;
      case 1:
        v32 = &aTshape01[9 * (unsigned __int8)byte_46126C[1]]; //TSHAPE01-19 9 bytes por texto
		//v32 = &aTshape01[9 * (unsigned __int8)byte_46126D];
        v33 = &Str[-9 * (unsigned __int8)byte_46126C[1]] - aTshape01;
		//v33 = &Str[-9 * (unsigned __int8)byte_46126D] - aTshape01;
        do
        {
          v34 = *v32;
          v32[v33] = *v32;
          ++v32;
        }
        while ( v34 );
        v35 = (char *)&v246 + 3;
        do
          v36 = (v35++)[1];
        while ( v36 );
        *(_DWORD *)v35 = 1802527278; //.bpk
        v35[4] = 0;
        extractFromBpa("MENU.BPA", textureTemp, (int)Str);
        copyImageToBuffer((int)textureTemp, (int)dword_45EB5C);
        drawImageWithPosition((int)dword_45EB5C, 360, 274, (int)((char *)screenBuffer + 64264));
        v37 = &v251 + (unsigned __int8)byte_46126C[1];
		//v37 = &v251 + (unsigned __int8)byte_46126D;
        v38 = (char *)&dword_45EA50[-(unsigned __int8)byte_46126C[1]] - (char *)&v251;
		//v38 = (char *)&dword_45EA50[-(unsigned __int8)byte_46126D] - (char *)&v251;
        do
        {
          v39 = *(byte *)v37;
          *((byte *)v37 + v38) = *(byte *)v37;
          v37 = (int *)((char *)v37 + 1);
        }
        while ( v39 );
        numberOfLaps = 5;
        goto LABEL_44;
      case 2:
		  v24 = tShape[(unsigned __int8)byte_46126C[2]];
		  strcpy(Str, v24);
		  strcat(Str, ".bpk");
       // v40 = &aTshape01[9 * (unsigned __int8)byte_46126C[2]];
       // v41 = &Str[-9 * (unsigned __int8)byte_46126C[2]] - aTshape01;
		///v40 = &aTshape01[9 * (unsigned __int8)byte_46126E];
		//v41 = &Str[-9 * (unsigned __int8)byte_46126E] - aTshape01;
        /*do
        {
          v42 = *v40;
          v40[v41] = *v40;
          ++v40;
        }
        while ( v42 );
        v43 = (char *)&v246 + 3;
        do
          v44 = (v43++)[1];
        while ( v44 );
        *(_DWORD *)v43 = 1802527278; //.bpk
        v43[4] = 0;*/
        extractFromBpa("MENU.BPA", textureTemp, (int)Str);
        copyImageToBuffer((int)textureTemp, (int)dword_45EB5C);
        drawImageWithPosition((int)dword_45EB5C, 360, 274, (int)((char *)screenBuffer + 64264));
        v45 = &v251 + (unsigned __int8)byte_46126C[2];
        v46 = (char *)&dword_45EA50[-(unsigned __int8)byte_46126C[2]] - (char *)&v251;
		//v45 = &v251 + (unsigned __int8)byte_46126E;
		//v46 = (char *)&dword_45EA50[-(unsigned __int8)byte_46126E] - (char *)&v251;
        do
        {
          v47 = *(byte *)v45;
          *((byte *)v45 + v46) = *(byte *)v45;
          v45 = (int *)((char *)v45 + 1);
        }
        while ( v47 );
        numberOfLaps = 6;
        goto LABEL_44;
      case 3:
        /*v248 = 959530320;
        *(_DWORD *)Str = 1095258964;
        v249 = 1263551022;
        LOBYTE(v250) = 0;*/
        extractFromBpa("MENU.BPA", textureTemp, "TSHAPE19.BPK");
        copyImageToBuffer((int)textureTemp, (int)dword_45EB5C);
        drawImageWithPosition((int)dword_45EB5C, 360, 274, (int)((char *)screenBuffer + 64264));
        dword_45EA50[0] = 3166804;
        numberOfLaps = 9;
        dword_4A7AA8 = 0;
LABEL_44:
        v23 = selectedRace_462CE8;
        break;
      default:
        break;
    }
	//cambiar a racePositions[0][0];
    v48 = BYTE1(dword_45EB50[v23]);
    v240 = LOBYTE(dword_45EB50[v23]);
    v49 = BYTE2(dword_45EB50[v23]);
    v241 = v48;
    v50 = BYTE3(dword_45EB50[v23]);
    v242 = v49;
    v243 = v50;
    if ( v23 == 3 )
    {
      v241 = driverId;
      v240 = driverId;
    }
  }
  strcpy(Str, "NUMBER OF LAPS: ");
  itoa(numberOfLaps, &DstBuf, 10);
  v51 = strlen(&DstBuf) + 1;
  v52 = (char *)&v246 + 3;
  do
    v53 = (v52++)[1];
  while ( v53 );
  memcpy(v52, &DstBuf, v51);
  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, 229389);
  v248 = 1330454597; //duke
  *(_DWORD *)Str = 1514754640;//nukem
  v249 = 978928974;
  LOWORD(v250) = 32;
  if ( isMultiplayerGame )
  {
    v54 = (char *)&v246 + 3;
    do
      v55 = (v54++)[1];
    while ( v55 );
    v56 = (double)dword_4456E8 * 0.3;
    *(_WORD *)v54 = 36;
    itoa((unsigned __int64)v56, &DstBuf, 10);
    v57 = strlen(&DstBuf) + 1;
    v58 = (char *)&v246 + 3;
    do
      v59 = (v58++)[1];
    while ( v59 );
    memcpy(v58, &DstBuf, v57);
  }
  else if ( selectedRace_462CE8 )
  {
    switch ( selectedRace_462CE8 )
    {
      case 1: //race medium
        v62 = (char *)&v246 + 3;
        do
          v63 = (v62++)[1];
        while ( v63 );
        *(_DWORD *)v62 = *(_DWORD *)"$3000";
        *((_WORD *)v62 + 2) = *(_WORD *)"0";
        break;
      case 2: //race hard
        v64 = (char *)&v246 + 3;
        do
          v65 = (v64++)[1];
        while ( v65 );
        *(_DWORD *)v64 = *(_DWORD *)"$12000";
        *((_WORD *)v64 + 2) = *(_WORD *)"00";
        v64[6] = a12000[6];
        break;
      case 3:
        v66 = (char *)&v246 + 3;
        do
          v67 = (v66++)[1];
        while ( v67 );
        *(_DWORD *)v66 = 1380928583; //GLORY
        *((_WORD *)v66 + 2) = 89;
        break;
    }
  }
  else //race 0 easy
  {
    v60 = (char *)&v246 + 3;
    do
      v61 = (v60++)[1];
    while ( v61 );
    *(_DWORD *)v60 = *(_DWORD *)"$750";
    v60[4] = a750[4];
  }
  v68 = Str;
  v69 = 0;
  v70 = 0;
  do
    v71 = *v68++;
  while ( v71 );
  v244 = v68 - &Str[1];
  if ( v68 != &Str[1] )
  {
    do
      v69 += (unsigned __int8)byte_44590A[(unsigned __int8)Str[v70++]];
    while ( v70 < strlen(Str) );
  }
  drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, 229739 - v69);
  if ( selectedRace_462CE8 == 3 )
  {
    strcpy(Str, "adversary");
    strupr(Str);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, 128664);
    drawImageWithPosition2((int)graphicsGeneral.facexxBpk, 64, 64, (int)((char *)screenBuffer + 82613));
    v72 = v240;
    v73 = 27 * v240;
    itoa(dword_460888[v73], Str, 10);
    v74 = (char *)&v246 + 3;
    do
      v75 = (v74++)[1];
    while ( v75 );
    *(_WORD *)v74 = 46;
    v76 = Str;
    v77 = 0;
    v78 = 0;
    do
      v79 = *v76++;
    while ( v79 );
    v244 = v76 - &Str[1];
    if ( v76 != &Str[1] )
    {
      do
        v77 += (unsigned __int8)byte_44590A[(unsigned __int8)Str[v78++]];
      while ( v78 < strlen(Str) );
    }
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, 138403 - v77);
    v80 = &byte_460840[v73 * 4];
    do
    {
      v81 = *v80;
      v80[&Str[-108 * v72] - byte_460840] = *v80;
      ++v80;
    }
    while ( v81 );
    strupr(Str);
    drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, 153736);
    drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + dword_460880[v73]), 64, 64, (int)((char *)screenBuffer + 107685));
  }
  else
  {
    for ( i = 0; i < participants; ++i )
    {
		int currentDriverId = racePositions[selectedRaceId][i];

		

      /*v83 = *(&v240 + i);
      v84 = v83;
      itoa(drivers[v83].rank, Str, 10);
      v85 = (char *)&v246 + 3;
      do
        v86 = (v85++)[1];
      while ( v86 );
      *(_WORD *)v85 = 46;
      v87 = 0;
      v88 = Str;
      v245 = 0;
      do
        v89 = *v88++;
      while ( v89 );
      v244 = v88 - &Str[1];
      if ( v88 != &Str[1] )
      {*/
		v87 = 0;
		v245 = 0;
		memset(Str, "\0", strlen(Str));
		itoa(drivers[currentDriverId].rank, &DstBuf, 10);
		strcpy(Str, &DstBuf);
        do
          v245 += (unsigned __int8)byte_44590A[(unsigned __int8)Str[v87++]];
        while ( v87 < strlen(Str) );
      //}
		drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, v282 + i - v245);

		memset(Str, "\0", strlen(Str));
		strcpy(Str, drivers[currentDriverId].name);
		strupr(Str);
		drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, v270 + i);
		drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + drivers[currentDriverId].face), 64, 64, (int)((char *)screenBuffer + v278 + i));
	  //position
      //TODO FIX drawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, *(&v282 + i) - v245);
      /*v90 = &byte_460840[v84 * 4];
      do
      {
        v91 = *v90;
        v90[&Str[-108 * v83] - byte_460840] = *v90;
        ++v90;
      }
      while ( v91 );
      strupr(Str);*/
	  //name
      //TODO FIXdrawTextWithFont((int)graphicsGeneral.fmed1aBpk, (int)&unk_445928, Str, *(&v270 + i));
	  //image
	  //TODO FIXdrawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + dword_460880[v84]), 64, 64, (int)((char *)screenBuffer + *(&v278 + i)));
    }
  }
  screenBuffer = (void *)dword_461250;
  sub_42C670(-1);
  if ( isMultiplayerGame )
    musicSetOrder(7680);
  else
    musicSetOrder(10240);
  setMusicVolume(0x10000);
  refreshAllScreen();
  if ( !isMultiplayerGame )
  {
LABEL_110:
    v92 = dword_456B9C;
    if ( !dword_456B9C )
      goto LABEL_112;
    goto LABEL_111;
  }
  v92 = dword_456B9C;
  if ( !dword_456B9C )
  {
    v274 = &byte_460840[108 * (unsigned __int8)dword_45FA74];
    v275 = &byte_460840[108 * BYTE1(dword_45FA74)];
    v276 = &byte_460840[108 * BYTE2(dword_45FA74)];
    v277 = &byte_460840[108 * BYTE3(dword_45FA74)];
    //allocateMemory(4u);
    //TODO fix
   // Str = v93;
    *(byte *)v93 = driverId;
    nullsub_1();
    v94 = 0;
    v95 = 0;
    do
    {
      if ( dword_456B9C )
        break;
      sub_4261D0();
      sub_42A570();
      sub_42A570();
      if ( v95 % 10 == 1 )
        v94 = sub_43C4B0();
      if ( v95 % 900 == 899 )
        sub_41EA70((int)Str, 1, 19);
      ++v95;
    }
    while ( v94 != 255 );
    sub_43C4B0();
    if ( v94 == 255 )
      sub_426180();
    refreshAllScreen();
    free(Str);
    goto LABEL_110;
  }
LABEL_111:
  dword_456B6C = 1;
  if ( v92 )
    return;
LABEL_112:
  v96 = driverId;
  dword_461FEC = 0;
  dword_45EB48 = 0;
  dword_463CAC = 0;
  dword_45FC1C = 0;
  dword_463CD4 = 0;
  dword_45EA64 = 0;
  dword_462D74 = 0;
  dword_45EEBC = 0;
  dword_45EEC0 = 0;
  lapped_456BC0 = 0;
  v97 = 0;
  v98 = 2;
  int dirversIdIndex = 1;
  v99 = (int)dword_4608F0;//inicio de drivers + 176 //son los puntos 
  do
  {
    if (drivers[dirversIdIndex-1].points > v97 && v98 - 2 != driverId )
      v97 = drivers[dirversIdIndex - 1].points;
    if (drivers[dirversIdIndex ].points > v97 && v98 - 1 != driverId )
      v97 = drivers[dirversIdIndex].points;
    if (drivers[dirversIdIndex+1].points > v97 && v98 != driverId )
      v97 = drivers[dirversIdIndex + 1].points;
    if (drivers[dirversIdIndex + 2].points> v97 && v98 + 1 != driverId )
      v97 = drivers[dirversIdIndex + 2].points;
    if (drivers[dirversIdIndex + 3].points > v97 && v98 + 2 != driverId )
      v97 = drivers[dirversIdIndex + 3].points;
    v98 += 5;
    v99 += 540;
	dirversIdIndex += 5;
  }
  while ( v98 - 2 < 20 );
  if ( isMultiplayerGame || (dword_4A7AAC = 1, drugQuest_456BB4 <= 0) )
    dword_4A7AAC = 0;
  v100 = participants;
  v101 = 0;
  if (participants > 0 )
  {
    v102 = (int)dword_4A7A60;
    while ( 1 )
    {
      v103 = *(&v240 + v101);
      v104 = &byte_460840[108 * v103];
      do
      {
        v105 = *v104;
        v104[v102 - 108 * v103 - (_DWORD)byte_460840] = *v104;
        ++v104;
      }
      while ( v105 );
      strupr((char *)v102);
      v106 = *(&v240 + v101);
      *(_DWORD *)(v102 + 16) = dword_46084C[27 * v106];
      *(_DWORD *)(v102 + 20) = dword_460850[27 * v106];
      *(_DWORD *)(v102 + 24) = dword_460854[27 * v106];
      v107 = dword_46085C[27 * v106];
      *(_DWORD *)(v102 + 28) = dword_460858[27 * v106];
      v96 = driverId;
      v108 = v106 == driverId;
      *(_DWORD *)(v102 + 48) = v107;
      if ( v108 )
        *(_DWORD *)(v102 + 68) = 3;
      else
        *(_DWORD *)(v102 + 68) = configuration.difficulty;
      v109 = *(&v240 + v101);
      *(_DWORD *)(v102 + 44) = useWeapons;
      *(_DWORD *)(v102 + 32) = dword_4608A4[27 * v109];
      v110 = dword_46089C[27 * v109];
      *(_DWORD *)(v102 + 36) = dword_4608A0[27 * v109];
      *(_DWORD *)(v102 + 40) = v110;
      if ( v109 != v96 && !isMultiplayerGame )
      {
        *(_DWORD *)(v102 + 40) = 0;
        *(_DWORD *)(v102 + 36) = 0;
        *(_DWORD *)(v102 + 32) = 0;
        if ( !(rand() % 5) && useWeapons )
          *(_DWORD *)(v102 + 32) = 1;
        if ( !(rand() % 5) && useWeapons )
          *(_DWORD *)(v102 + 36) = 1;
        v111 = rand();
        v96 = driverId;
        if ( !(v111 % 5) && useWeapons )
          *(_DWORD *)(v102 + 40) = 8;
      }
      v112 = graphicsGeneral.carcolPal;
      if ( v103 == v96 || isMultiplayerGame )
      {
        v116 = (char *)graphicsGeneral.copperPal + 2 * dword_46086C[27 * *(&v240 + v101)] + dword_46086C[27 * *(&v240 + v101)];
        *(_DWORD *)(v102 + 52) = (unsigned __int8)*v116;
        *(_DWORD *)(v102 + 56) = (unsigned __int8)v116[1];
        *(_DWORD *)(v102 + 60) = (unsigned __int8)v116[2];
        if ( !isMultiplayerGame || v101 <= dword_456758 - 1 )
          goto LABEL_157;
        *(_DWORD *)(v102 + 52) = *((byte *)v112 + 30);
        *(_DWORD *)(v102 + 56) = *((byte *)v112 + 31);
        v115 = *((byte *)v112 + 32);
      }
      else
      {
        v113 = dword_46086C[27 * *(&v240 + v101)];
        v114 = (char *)graphicsGeneral.carcolPal + 2 * v113 + v113;
        *(_DWORD *)(v102 + 52) = (unsigned __int8)*v114;
        *(_DWORD *)(v102 + 56) = (unsigned __int8)v114[1];
        v115 = (unsigned __int8)v114[2];
      }
      *(_DWORD *)(v102 + 60) = v115;
LABEL_157:
      v100 = participants;
      ++v101;
      v102 += 84;
      if ( v101 >= participants)
        goto LABEL_160;
    }
  }
  v112 = graphicsGeneral.carcolPal;
LABEL_160:
  if ( isMultiplayerGame && v100 < 4 )
  {
    v117 = (signed int)&dword_4A7A98[21 * v100];
    do
    {
      *(_DWORD *)(v117 - 4) = *((byte *)v112 + 30);
      *(_DWORD *)v117 = *((byte *)v112 + 31);
      *(_DWORD *)(v117 + 4) = *((byte *)v112 + 32);
      v117 += 84;
    }
    while ( v117 < (signed int)&unk_4A7BE8 );
  }
  v118 = 0;
  v119 = 0;
  if ( v100 > 0 )
  {
    v120 = dword_460884;
    do
    {
      if ( *v120 > v118 && v119 != v96 )
        v118 = *v120;
      ++v119;
      v120 += 27;
    }
    while ( v119 < v100 );
  }
  v121 =  v96;
  v122 = dword_460884[v121];
  if ( v122 > v118 && !isMultiplayerGame )
  {
    *(_DWORD *)dword_4A7A60 = 1163281473; ///adversary
    dword_4A7A64 = 1380012882;
    word_4A7A68 = 89;
    dword_4A7AA4 = configuration.difficulty;
    dword_4A7A70[0] = 0;
    dword_4A7A80 = 0;
    dword_4A7A90 = 6;
    dword_4A7A84 = 1;
    dword_4A7A8C = useWeapons;
    dword_4A7A88 = useWeapons != 0 ? 8 : 0;
    dword_4A7B3C = *((byte *)v112 + 30);
    dword_4A7B40 = *((byte *)v112 + 31);
    dword_4A7B44 = *((byte *)v112 + 32);
    dword_4A7B90 = *((byte *)v112 + 30);
    dword_4A7B94 = *((byte *)v112 + 31);
    dword_4A7B98 = *((byte *)v112 + 32);
  }
  v123 = 24 * ((unsigned __int8)byte_46126C[selectedRace_462CE8] + 18 * dword_46085C[v121]);
  dword_50A160 = *(int *)((char *)&dword_45F04C + v123);
  v124 = *(int *)((char *)&dword_45F050 + v123);
  dword_4A9B8C = *(int *)((char *)&dword_45F054 + v123);
  dword_501260 = v124;
  Val = 0;
  if ( isMultiplayerGame )
  {
    Val = (unsigned __int64)((double)dword_4456E8 * 0.02);
  }
  else
  {
    if ( v122 > v118 )
      goto LABEL_534;
    if ( !selectedRace_462CE8 )
      Val = 50;
    v125 = dword_460888[v121];
    if ( v125 > 0 && v125 < 6 )
    {
      if ( selectedRace_462CE8 == 1 )
      {
        Val = 260;
      }
      else if ( selectedRace_462CE8 == 2 )
      {
        Val = 500;
      }
    }
    if ( v125 > 5 && v125 < 11 )
    {
      if ( selectedRace_462CE8 == 1 )
      {
        Val = 200;
      }
      else if ( selectedRace_462CE8 == 2 )
      {
        Val = 300;
      }
    }
    if ( v125 > 10 && v125 < 16 )
    {
      if ( selectedRace_462CE8 == 1 )
      {
        Val = 120;
      }
      else if ( selectedRace_462CE8 == 2 )
      {
        Val = 150;
      }
    }
    if ( v125 > 15 && v125 < 21 )
    {
      if ( selectedRace_462CE8 == 1 )
      {
        Val = 60;
      }
      else if ( selectedRace_462CE8 == 2 )
      {
        Val = 80;
      }
    }
    if ( v122 > v118 )
LABEL_534:
      Val = 400;
  }
  freeMemoryGraphics();
  freeMemoryGraphics1();
  freeMemoryGraphics2();
  freeMemoryGraphics3();
  freeMemoryGraphics4();
  if ( isMultiplayerGame )
  {
    dword_45FC20 = driverId;
    if ( dword_45E0A8 == 2 )
      sub_43C730();
  }
  sub_415710(dword_45FC20, v100);
  if ( isMultiplayerGame && dword_45E0A8 == 2 )
    sub_43C7B0((int (*)(void))sub_4181B0);
  v126 = dword_45FC20;
  v127 = driverId;
  v244 = 84 * dword_45FC20;
  v128 = dword_4A7AA0[21 * dword_45FC20];
  dword_456B50 = v128;
  dword_456BD8 = v128;
  v129 = 0;
  v130 = 2;
  v131 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v131 - 108) > v129 )
    {
      v126 = dword_45FC20;
      if ( v130 - 2 != driverId )
        v129 = *(_DWORD *)(v131 - 108);
    }
    if ( *(_DWORD *)v131 > v129 )
    {
      v126 = dword_45FC20;
      if ( v130 - 1 != driverId )
        v129 = *(_DWORD *)v131;
    }
    if ( *(_DWORD *)(v131 + 108) > v129 && v130 != driverId )
      v129 = *(_DWORD *)(v131 + 108);
    if ( *(_DWORD *)(v131 + 216) > v129 )
    {
      v126 = dword_45FC20;
      if ( v130 + 1 != driverId )
        v129 = *(_DWORD *)(v131 + 216);
    }
    if ( *(_DWORD *)(v131 + 324) > v129 )
    {
      v126 = dword_45FC20;
      if ( v130 + 2 != driverId )
        v129 = *(_DWORD *)(v131 + 324);
    }
    v130 += 5;
    v131 += 540;
  }
  while ( v130 - 2 < 20 );
  v132 = dword_460884[27 * driverId];
  v245 = 108 * driverId;
  if ( v132 <= v129 || isMultiplayerGame )
  {
    v133 = 0;
    v134 = 0;
    if ( v100 > 0 )
    {
      v135 = (int)dword_4A7A70;
      do
      {
        if ( v134 != v126 && *(_DWORD *)v135 == 100 )
          ++v133;
        ++v134;
        v135 += 84;
      }
      while ( v134 < v100 );
    }
    if ( v133 == v100 - 1 && *(int *)((char *)dword_4A7A70 + v244) < 100 )
      allCarsCrash_456BB0 = 1;
    if ( (isMultiplayerGame || dword_456B50 != 4) && *(int *)((char *)dword_4A7A70 + v244) < 3 && useWeapons == 1 )
      noPaintJob_456BAC = 1;
    if ( dword_456B50 == 1 )
      ++consecutiveWins_456BA8;
    else
      consecutiveWins_456BA8 = 0;
    if ( !isMultiplayerGame )
    {
      if ( drugQuest_456BB4 > 0 && (dword_4A7AAC != 1 || dword_456B50 != 1 || *(int *)((char *)dword_4A7A70 + v244) >= 100) )
        drugQuest_456BB4 = -drugQuest_456BB4;
      if ( killOneQuest_456BB8 > 0 )
      {
		  //cambiar a racePositions[0][0];
        if ( LOBYTE(dword_45EB50[selectedRace_462CE8]) == dword_456BBC )
          v133 = 0;
        if ( BYTE1(dword_45EB50[selectedRace_462CE8]) == dword_456BBC )
          v133 = 1;
        if ( BYTE2(dword_45EB50[selectedRace_462CE8]) == dword_456BBC )
          v133 = 2;
        if ( BYTE3(dword_45EB50[selectedRace_462CE8]) == dword_456BBC )
          v133 = 3;
        if ( dword_4A7A70[21 * v133] != 100 )
          killOneQuest_456BB8 = -killOneQuest_456BB8;
      }
    }
  }
  if ( *(int *)((char *)dword_460874 + v245) != -1 )
    ++*(int *)((char *)dword_460878 + v245);
  dword_464F44 = 0;
  v136 = (signed int)dword_4608A0;
  do
  {
    *(_DWORD *)(v136 - 4) = 0;
    *(_DWORD *)v136 = 0;
    *(_DWORD *)(v136 + 4) = 0;
    *(_DWORD *)(v136 + 8) = 0;
    v136 += 108;
  }
  while ( v136 < (signed int)&unk_461110 );
  sub_4236D0();
  v137 = v242;
  v138 = 27 * v241;
  dword_460894[27 * v240] = 0;
  v139 = 27 * v243;
  dword_460894[v138] = 0;
  dword_460894[27 * v137] = 0;
  v140 = 0;
  dword_460894[v139] = 0;
  dword_456BE0 = 0;
  dword_456BDC = 0;
  v246 = 0;
  v141 = 2;
  v142 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v142 - 108) > v140 )
    {
      if ( v141 - 2 == v127 )
      {
        v140 = v246;
      }
      else
      {
        v140 = *(_DWORD *)(v142 - 108);
        v246 = *(_DWORD *)(v142 - 108);
      }
    }
    if ( *(_DWORD *)v142 > v140 )
    {
      if ( v141 - 1 == v127 )
      {
        v140 = v246;
      }
      else
      {
        v140 = *(_DWORD *)v142;
        v246 = *(_DWORD *)v142;
      }
    }
    if ( *(_DWORD *)(v142 + 108) > v140 && v141 != v127 )
    {
      v140 = *(_DWORD *)(v142 + 108);
      v246 = *(_DWORD *)(v142 + 108);
    }
    if ( *(_DWORD *)(v142 + 216) > v140 )
    {
      if ( v141 + 1 == v127 )
      {
        v140 = v246;
      }
      else
      {
        v140 = *(_DWORD *)(v142 + 216);
        v246 = *(_DWORD *)(v142 + 216);
      }
    }
    if ( *(_DWORD *)(v142 + 324) > v140 )
    {
      if ( v141 + 2 == v127 )
      {
        v140 = v246;
      }
      else
      {
        v140 = *(_DWORD *)(v142 + 324);
        v246 = *(_DWORD *)(v142 + 324);
      }
    }
    v141 += 5;
    v142 += 540;
  }
  while ( v141 - 2 < 20 );
  if ( isMultiplayerGame )
  {
    v156 = unk_461EC2;
    unk_461EC2 = unk_461EC3;
    v157 = dword_456BCC + 1;
    v159 = __OFSUB__(dword_456BCC + 1, dword_456BC8);
    v158 = dword_456BCC + 1 - dword_456BC8 < 0;
    unk_461EC0[0] = unk_461EC1;
    unk_461EC3 = word_461EC4;
    v160 = unk_461EC6;
    unk_461EC6 = unk_461EC7;
    HIBYTE(word_461EC4) = v160;
    unk_461EC7 = word_461EC8;
    v161 = unk_461ECA;
    unk_461ECA = unk_461ECB;
    HIBYTE(word_461EC8) = v161;
    unk_461ECB = word_461ECC;
    HIBYTE(word_461ECC) = unk_461ECE;
    unk_461ECE = unk_461ECF;
    unk_461ECF = word_461ED0;
    HIBYTE(word_461ED0) = unk_461ED2;
    unk_461ED2 = unk_461ED3;
    ++dword_456BCC;
    v162 = (signed int)&unk_462096;
    unk_461ED3 = word_461ED4;
    if ( v158 ^ v159 )
    {
      do
      {
        v176 = v162;
        do
        {
          v177 = *(byte *)v176;
          *(byte *)(v176 - 150) = *(byte *)v176;
          ++v176;
        }
        while ( v177 );
        v162 += 150;
      }
      while ( v162 < (signed int)&blacktx1Bpk );
      if ( dword_4A7AA4 == -1 )
      {
        memcpy(&dword_462C4E, "-- Multiplayer connection lost!", 0x20u);
      }
      else
      {
        v178 = &aSuburbia[15 * (unsigned __int8)byte_45FC0F[v157]];
        dword_462C4E = 2108717;
        v179 = v178;
        do
          v180 = *v178++;
        while ( v180 );
        v181 = v178 - v179;
        v182 = v179;
        v183 = (char *)&dword_462C4E - 1;
        do
          v184 = (v183++)[1];
        while ( v184 );
        memcpy(v183, v182, v181);
        v185 = (char *)&dword_462C4E - 1;
        do
          v186 = (v185++)[1];
        while ( v186 );
        v187 = &aSuburbia[15 * (unsigned __int8)byte_45FC10[v157]];
        memcpy(v185, " race completed. Next race ", 0x1Cu);
        v188 = v187;
        do
          v189 = *v187++;
        while ( v189 );
        v190 = v187 - v188;
        v191 = v188;
        v192 = (char *)&dword_462C4E - 1;
        do
          v193 = (v192++)[1];
        while ( v193 );
        memcpy(v192, v191, v190);
        v194 = (char *)&dword_462C4E - 1;
        do
          v195 = (v194++)[1];
        while ( v195 );
        *(_WORD *)v194 = 46;
      }
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      unk_461ED2 = unk_461ED3;
      v196 = (signed int)&unk_462096;
      unk_461EC0[0] = v156;
      unk_461ED3 = word_461ED4;
      LOBYTE(word_461ED4) = 0;
      do
      {
        v197 = v196;
        do
        {
          v198 = *(byte *)v197;
          *(byte *)(v197 - 150) = *(byte *)v197;
          ++v197;
        }
        while ( v198 );
        v196 += 150;
      }
      while ( v196 < (signed int)&blacktx1Bpk );
    }
    else
    {
      dword_456B98 = 1;
      do
      {
        v163 = v162;
        do
        {
          v164 = *(byte *)v163;
          *(byte *)(v163 - 150) = *(byte *)v163;
          ++v163;
        }
        while ( v164 );
        v162 += 150;
      }
      while ( v162 < (signed int)&blacktx1Bpk );
      v165 = &byte_460840[v245];
      dword_462C4E = 2108717;
      v166 = &byte_460840[v245];
      do
        v167 = *v165++;
      while ( v167 );
      v168 = v165 - v166;
      v169 = (char *)&dword_462C4E - 1;
      do
        v170 = (v169++)[1];
      while ( v170 );
      memcpy(v169, v166, v168);
      v171 = (char *)&dword_462C4E - 1;
      do
        v172 = (v171++)[1];
      while ( v172 );
      *(_DWORD *)v171 = 1836016416;
      *((_DWORD *)v171 + 1) = 1952803952;
      *((_DWORD *)v171 + 2) = 1948279909;
      *((_DWORD *)v171 + 3) = 1847616872;
      *((_DWORD *)v171 + 4) = 1634169957;
      *((_DWORD *)v171 + 5) = 3040621;
      unk_461EC1 = unk_461EC2;
      unk_461EC2 = unk_461EC3;
      unk_461EC3 = word_461EC4;
      HIBYTE(word_461EC4) = unk_461EC6;
      unk_461EC6 = unk_461EC7;
      unk_461EC7 = word_461EC8;
      HIBYTE(word_461EC8) = unk_461ECA;
      unk_461ECA = unk_461ECB;
      unk_461ECB = word_461ECC;
      HIBYTE(word_461ECC) = unk_461ECE;
      unk_461ECE = unk_461ECF;
      unk_461ECF = word_461ED0;
      HIBYTE(word_461ED0) = unk_461ED2;
      unk_461ED2 = unk_461ED3;
      v173 = (signed int)&unk_462096;
      unk_461EC0[0] = v156;
      unk_461ED3 = word_461ED4;
      LOBYTE(word_461ED4) = 0;
      do
      {
        v174 = v173;
        do
        {
          v175 = *(byte *)v174;
          *(byte *)(v174 - 150) = *(byte *)v174;
          ++v174;
        }
        while ( v175 );
        v173 += 150;
      }
      while ( v173 < (signed int)&blacktx1Bpk );
    }
    v199 = 0;
    LOBYTE(dword_462C4E) = 0;
    HIBYTE(word_461ED4) = 0;
    dword_456BE0 = 0;
    dword_456BDC = 0;
    if ( dword_456758 > 0 )
    {
      v200 = (double)dword_4456E8;
      v244 = (unsigned __int64)(0.02 * v200);
      v201 = (int)dword_4A7AA0;
      do
      {
        v202 = v244 * *(_DWORD *)(v201 - 52);
        v108 = v199 == dword_45FC20;
        dword_460894[27 * *(&v240 + v199)] = v202;
        if ( v108 )
          dword_456BE0 = v202;
        v203 = *(_DWORD *)v201;
        if ( *(_DWORD *)v201 == 1 )
        {
          v204 = &dword_460894[27 * *(&v240 + v199)];
          v108 = v199 == dword_45FC20;
          *v204 += (unsigned __int64)(0.3 * v200);
          if ( v108 )
            dword_456BDC = (unsigned __int64)(0.3 * v200);
          dword_460884[27 * *(&v240 + v199)] += 6;
        }
        if ( v203 == 2 )
        {
          v205 = &dword_460894[27 * *(&v240 + v199)];
          v108 = v199 == dword_45FC20;
          *v205 += (unsigned __int64)(0.25 * v200);
          if ( v108 )
            dword_456BDC = (unsigned __int64)(0.25 * v200);
          dword_460884[27 * *(&v240 + v199)] += 4;
        }
        if ( v203 == 3 )
        {
          v206 = &dword_460894[27 * *(&v240 + v199)];
          v108 = v199 == dword_45FC20;
          *v206 += (unsigned __int64)(0.2 * v200);
          if ( v108 )
            dword_456BDC = (unsigned __int64)(0.2 * v200);
          dword_460884[27 * *(&v240 + v199)] += 2;
        }
        if ( v203 == 4 )
        {
          v207 = &dword_460894[27 * *(&v240 + v199)];
          v108 = v199 == dword_45FC20;
          *v207 += (unsigned __int64)(0.15 * v200);
          if ( v108 )
            dword_456BDC = (unsigned __int64)(0.15 * v200);
        }
        v208 = 27 * *(&v240 + v199);
        dword_460870[v208] += dword_460894[v208];
        dword_460898[v208] += dword_460894[v208];
        if ( v203 == 1 )
          ++dword_46088C[27 * *(&v240 + v199)];
        ++v199;
        v201 += 84;
      }
      while ( v199 < dword_456758 );
    }
  }
  else
  {
    if ( *(int *)((char *)dword_460884 + v245) <= v140 && !lapped_456BC0 )
    {
      v143 = selectedRace_462CE8;
      v144 = 0;
      v145 = (signed int)&dword_4A7A6C;
      do
      {
        if ( dword_456B50 != 4 && !v143 )
        {
          v146 = 50 * *(_DWORD *)v145;
          dword_460894[27 * *(&v240 + v144)] = v146;
          if ( v144 == v126 )
            dword_456BE0 = v146;
        }
        v147 = *(int *)((char *)dword_460888 + v245);
        if ( v147 > 0 && v147 < 6 && dword_456B50 != 4 )
        {
          if ( v143 == 1 )
          {
            dword_460894[27 * *(&v240 + v144)] = 260 * *(_DWORD *)v145;
LABEL_304:
            if ( v144 == v126 )
              dword_456BE0 = 260 * *(_DWORD *)v145;
            goto LABEL_309;
          }
          if ( v143 == 2 )
          {
            dword_460894[27 * *(&v240 + v144)] = 500 * *(_DWORD *)v145;
          }
          else
          {
            if ( v143 == 1 )
              goto LABEL_304;
            if ( v143 != 2 )
              goto LABEL_309;
          }
          if ( v144 == v126 )
            dword_456BE0 = 500 * *(_DWORD *)v145;
        }
LABEL_309:
        v148 = *(int *)((char *)dword_460888 + v245);
        if ( v148 <= 5 || v148 >= 11 || dword_456B50 == 4 )
          goto LABEL_322;
        if ( v143 == 1 )
        {
          dword_460894[27 * *(&v240 + v144)] = 200 * *(_DWORD *)v145;
LABEL_317:
          if ( v144 == v126 )
            dword_456BE0 = 200 * *(_DWORD *)v145;
          goto LABEL_322;
        }
        if ( v143 == 2 )
        {
          dword_460894[27 * *(&v240 + v144)] = 300 * *(_DWORD *)v145;
        }
        else
        {
          if ( v143 == 1 )
            goto LABEL_317;
          if ( v143 != 2 )
            goto LABEL_322;
        }
        if ( v144 == v126 )
          dword_456BE0 = 300 * *(_DWORD *)v145;
LABEL_322:
        v149 = *(int *)((char *)dword_460888 + v245);
        if ( v149 <= 10 || v149 >= 16 || dword_456B50 == 4 )
          goto LABEL_335;
        if ( v143 == 1 )
        {
          dword_460894[27 * *(&v240 + v144)] = 120 * *(_DWORD *)v145;
LABEL_330:
          if ( v144 == v126 )
            dword_456BE0 = 120 * *(_DWORD *)v145;
          goto LABEL_335;
        }
        if ( v143 == 2 )
        {
          dword_460894[27 * *(&v240 + v144)] = 150 * *(_DWORD *)v145;
        }
        else
        {
          if ( v143 == 1 )
            goto LABEL_330;
          if ( v143 != 2 )
            goto LABEL_335;
        }
        if ( v144 == v126 )
          dword_456BE0 = 150 * *(_DWORD *)v145;
LABEL_335:
        v150 = *(int *)((char *)dword_460888 + v245);
        if ( v150 > 15 && v150 < 21 && dword_456B50 != 4 )
        {
          if ( v143 == 1 )
          {
            dword_460894[27 * *(&v240 + v144)] = 60 * *(_DWORD *)v145;
LABEL_343:
            if ( v144 == v126 )
              dword_456BE0 = 60 * *(_DWORD *)v145;
            goto LABEL_348;
          }
          if ( v143 == 2 )
          {
            dword_460894[27 * *(&v240 + v144)] = 80 * *(_DWORD *)v145;
LABEL_346:
            if ( v144 == v126 )
              dword_456BE0 = 80 * *(_DWORD *)v145;
            goto LABEL_348;
          }
          if ( v143 == 1 )
            goto LABEL_343;
          if ( v143 == 2 )
            goto LABEL_346;
        }
LABEL_348:
        if ( v143 )
        {
          if ( v143 == 1 )
          {
            v152 = *(_DWORD *)(v145 + 52);
            if ( v152 == 1 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 3000;
              if ( v144 == v126 )
                dword_456BDC = 3000;
            }
            if ( v152 == 2 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 1500;
              if ( v144 == v126 )
                dword_456BDC = 1500;
            }
            if ( v152 == 3 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 375;
              if ( v144 == v126 )
                dword_456BDC = 375;
            }
          }
          else if ( v143 == 2 )
          {
            v151 = *(_DWORD *)(v145 + 52);
            if ( v151 == 1 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 12000;
              if ( v144 == v126 )
                dword_456BDC = 12000;
            }
            if ( v151 == 2 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 6000;
              if ( v144 == v126 )
                dword_456BDC = 6000;
            }
            if ( v151 == 3 && *(_DWORD *)(v145 + 4) != 100 )
            {
              dword_460894[27 * *(&v240 + v144)] += 1500;
              if ( v144 == v126 )
                dword_456BDC = 1500;
            }
          }
        }
        else
        {
          v153 = *(_DWORD *)(v145 + 52);
          if ( v153 == 1 && *(_DWORD *)(v145 + 4) != 100 )
          {
            dword_460894[27 * *(&v240 + v144)] += 750;
            if ( v144 == v126 )
              dword_456BDC = 750;
          }
          if ( v153 == 2 && *(_DWORD *)(v145 + 4) != 100 )
          {
            dword_460894[27 * *(&v240 + v144)] += 375;
            if ( v144 == v126 )
              dword_456BDC = 375;
          }
          if ( v153 == 3 && *(_DWORD *)(v145 + 4) != 100 )
          {
            dword_460894[27 * *(&v240 + v144)] += 187;
            if ( v144 == v126 )
              dword_456BDC = 187;
          }
        }
        v154 = 27 * *(&v240 + v144);
        dword_460870[v154] += dword_460894[v154];
        dword_460898[v154] += dword_460894[v154];
        if ( *(_DWORD *)(v145 + 52) == 1 )
          ++dword_46088C[27 * *(&v240 + v144)];
        v145 += 84;
        ++v144;
      }
      while ( v145 < (signed int)&unk_4A7BBC );
    }
    if ( *(int *)((char *)dword_460884 + v245) > v140 )
    {
      v155 = 27 * *(&v240 + dword_45FC20);
      dword_456BE0 = 400 * *(int *)((char *)&dword_4A7A6C + v244);
      dword_460894[v155] = dword_456BE0;
    }
  }
  v209 = 0;
  v210 = 2;
  v211 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v211 - 108) > v209 && v210 - 2 != driverId )
      v209 = *(_DWORD *)(v211 - 108);
    if ( *(_DWORD *)v211 > v209 && v210 - 1 != driverId )
      v209 = *(_DWORD *)v211;
    if ( *(_DWORD *)(v211 + 108) > v209 && v210 != driverId )
      v209 = *(_DWORD *)(v211 + 108);
    if ( *(_DWORD *)(v211 + 216) > v209 && v210 + 1 != driverId )
      v209 = *(_DWORD *)(v211 + 216);
    if ( *(_DWORD *)(v211 + 324) > v209 && v210 + 2 != driverId )
      v209 = *(_DWORD *)(v211 + 324);
    v210 += 5;
    v211 += 540;
  }
  while ( v210 - 2 < 20 );
  v212 = isMultiplayerGame;
  if ( isMultiplayerGame || (v213 = v245, *(int *)((char *)dword_460884 + v245) <= v209) )
  {
    v214 = 0;
    if (participants > 0 )
    {
      v215 = dword_4A7A70;
      do
      {
        v216 = 27 * *(&v240 + v214);
        ++dword_460890[v216];
        v217 = *v215;
        ++v214;
        v215 += 21;
        dword_46084C[v216] = v217;
      }
      while ( v214 < participants);
    }
    if ( v212 )
      goto LABEL_477;
  }
  else
  {
    ++*(int *)((char *)dword_460890 + v245);
    *(int *)((char *)dword_46084C + v213) = dword_4A7AC4;
  }
  sub_4279C0();
LABEL_477:
  //allocateMemory(0x4B000u);
  screenBuffer = v218;
  dword_461250 = (int)v218;
  loadGraphics1();
  v219 = 0;
  v220 = 2;
  v221 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v221 - 108) > v219 && v220 - 2 != driverId )
      v219 = *(_DWORD *)(v221 - 108);
    if ( *(_DWORD *)v221 > v219 && v220 - 1 != driverId )
      v219 = *(_DWORD *)v221;
    if ( *(_DWORD *)(v221 + 108) > v219 && v220 != driverId )
      v219 = *(_DWORD *)(v221 + 108);
    if ( *(_DWORD *)(v221 + 216) > v219 && v220 + 1 != driverId )
      v219 = *(_DWORD *)(v221 + 216);
    if ( *(_DWORD *)(v221 + 324) > v219 && v220 + 2 != driverId )
      v219 = *(_DWORD *)(v221 + 324);
    v220 += 5;
    v221 += 540;
  }
  while ( v220 - 2 < 20 );
  if ( dword_460884[27 * driverId] <= v219 || dword_456BD8 != 1 || isMultiplayerGame )
  {
    v222 = dword_46086C[27 * driverId];
    v223 = (char *)graphicsGeneral.copperPal + 2 * v222;
    v224 = (unsigned __int8)v223[v222 + 2];
    v225 = (int)&v223[v222];
    v226 = *(byte *)(v225 + 1);
    v227 = (double)v224;
    v244 = *(byte *)v225;
    v228 = (double)v226;
    v229 = (double)v244;
    setPaletteValueWithFloats(v229, v228, v227);
    loadMusic(1, (int)"MEN-MUS.CMF", 2, (int)"MEN-SAM.CMF");
    musicSetMasterVolume(configuration.masterVolume);
    nullsub_1();
    musicPlayMusic();
    nullsub_1();
    nullsub_1();
    setWindowCaption2();
    sub_43C740();
  }
  loadPaletteMenu();
  v230 = 0;
  do
    setPaletteAndGetValue(v230++, 0, 0, 0);
  while ( v230 < 256 );
  if ( isMultiplayerGame )
  {
    sub_42BD10();
    if ( dword_456B98 )
      sub_42A300();
  }
  else
  {
    v231 = 0;
    v232 = 2;
    v233 = (int)dword_4608F0;
    do
    {
      if ( *(_DWORD *)(v233 - 108) > v231 && v232 - 2 != driverId )
        v231 = *(_DWORD *)(v233 - 108);
      if ( *(_DWORD *)v233 > v231 && v232 - 1 != driverId )
        v231 = *(_DWORD *)v233;
      if ( *(_DWORD *)(v233 + 108) > v231 && v232 != driverId )
        v231 = *(_DWORD *)(v233 + 108);
      if ( *(_DWORD *)(v233 + 216) > v231 && v232 + 1 != driverId )
        v231 = *(_DWORD *)(v233 + 216);
      if ( *(_DWORD *)(v233 + 324) > v231 && v232 + 2 != driverId )
        v231 = *(_DWORD *)(v233 + 324);
      v232 += 5;
      v233 += 540;
    }
    while ( v232 - 2 < 20 );
    if ( dword_460884[27 * driverId] <= v231 )
    {
      main(0, v238, v239);
    }
    else
    {
      calculateNextRaces();
      do
      {
        do
          addParticipantToRace(1);
        while (participantsRace[1]< 4u );
		///while ((unsigned __int8)word_461EB4 < 4u);
      }
      //while ( HIBYTE(word_461EB4) < 4u || (unsigned __int8)byte_461EB6 < 4u );
	  while (participantsRace[0] < 4u || participantsRace[2] < 4u);
      *(_DWORD *)Str = 0;
      v234 = (signed int)dword_4A7AA0;
      do
      {
        do
        {
          v235 = rand() % 4;
          v236 = *((byte *)&v246 + v235 + 4);
          v237 = v235 + 1;
          *(_DWORD *)v234 = v237;
        }
        while ( v236 );
        v234 += 84;
        *((byte *)&v246 + v237 + 3) = 1;
      }
      while ( v234 < (signed int)&unk_4A7BF0 );
      if ( dword_456BD8 == 1 )
      {
        sub_4312D0();
      }
      else
      {
        main(0, v238, v239);
        dword_456B58 = 1;
      }
    }
  }
}


//----- (00434800) --------------------------------------------------------
int __cdecl licenseScreen(int useWeapons_mal)
{
  signed int v1; // edx@1
  float v2; // ST3C_4@1
  float v3; // ST38_4@1
  float v4; // ST34_4@1
  signed int v5; // edx@5
  signed int v6; // ecx@5
  int i; // eax@6
  unsigned int v8; // eax@9
  char *v9; // edi@9
  char v10; // cl@10
  int v11; // eax@11
  int v12; // eax@11
  int j; // ecx@11
  bool v14; // zf@13
  bool v15; // sf@13
  unsigned __int8 v16; // of@13
  char *v17; // ecx@15
  char *v18; // eax@15
  char v19; // dl@16
  int v20; // eax@18
  unsigned int v21; // eax@21
  char *v22; // edi@21
  char v23; // cl@22
  int v24; // eax@23
  signed int v25; // edx@25
  signed int v26; // ecx@25
  int k; // eax@26
  signed int v28; // esi@31
  char v29; // bl@39
  signed int v30; // edx@49
  char *v31; // edi@50
  int v32; // ebp@74
  char v33; // al@74
  char *v34; // ecx@74
  int v35; // ebx@77
  char *v36; // eax@77
  unsigned int v37; // esi@77
  char v38; // dl@78
  int v39; // eax@82
  char *v40; // edx@82
  signed int v41; // ecx@82
  int v42; // eax@82
  float v43; // ST3C_4@82
  float v44; // ST38_4@82
  float v45; // ST34_4@82
  char v46; // bl@82
  char *v47; // eax@83
  char *v48; // edx@83
  char v49; // cl@84
  int result; // eax@88
  void *v51; // [sp-4h] [bp-4Ch]@34
  void *v52; // [sp-4h] [bp-4Ch]@54
  int v53; // [sp+0h] [bp-48h]@34
  int v54; // [sp+0h] [bp-48h]@54
  float v55; // [sp+4h] [bp-44h]@34
  float v56; // [sp+4h] [bp-44h]@54
  char v57; // [sp+1Fh] [bp-29h]@1
  int v58; // [sp+20h] [bp-28h]@1
  __int16 v59; // [sp+24h] [bp-24h]@9
  
  char v61[12]; // [sp+3Ch] [bp-Ch]@16
  char* DstBuf; // [sp+30h] [bp-18h]@9
  DstBuf = malloc(0x1000);
  extractFromBpa("MENU.BPA", dword_45EB5C, (int)"licence3.bpk");
  copyImageToBuffer((int)dword_45EB5C, (int)textureTemp);
  carAnimCurrentFrame_45FBA0 = 0;
  v57 = 1;
  //dword_46086C[27 * driverId] = 0;
  drivers[driverId].colour = 0;
  drawTransparentBlock(0, 371, 639, 109);
  drawBottomMenuText();
  v1 = *((byte *)graphicsGeneral.copperPal + 385);
  v2 = (double)*((byte *)graphicsGeneral.copperPal + 386);
  v58 = *((byte *)graphicsGeneral.copperPal + 384);
  v3 = (double)v1;
  v4 = (double)v58;
  setPaletteValueWithFloats(v4, v3, v2);
  if (useWeapons_mal)
    drawImageWithPosition((int)textureTemp, 530, 249, (int)((char *)screenBuffer + 71743));
  else
    drawImageWithPosition((int)textureTemp, 530, 178, (int)((char *)screenBuffer + 71743));
  drawImageWithPosition2((int)fasesel1Bpk, 68, 102, (int)((char *)screenBuffer + 110168));
  drawImageWithPosition2((int)graphicsGeneral.face01Bpk, 64, 64, (int)((char *)screenBuffer + 122330));
  if (useWeapons_mal)
  {
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "yes", 202463);
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "no", 202633);
    v5 = 0;
    v6 = 186240;
    do
    {
      for ( i = v5 % 2; i < 530; i += 2 )
        *((byte *)screenBuffer + v6 + i + 63) = -60;
      v6 += 640;
      ++v5;
    }
    while ( v6 < 230400 );
  }
  drawImageWithPosition2((int)carbas2Bpk, 96, 96, (int)((char *)screenBuffer + 113119));
  drawImageWithPosition2((int)carnameBpk, 96, 16, (int)((char *)screenBuffer + 113119));
  itoa(dword_44DF5C, &DstBuf, 10);
  v59 = 36;
  v8 = strlen(&DstBuf) + 1;
  v9 = (char *)&v58 + 3;
  do
    v10 = (v9++)[1];
  while ( v10 );
  memcpy(v9, &DstBuf, v8);
  v11 = sub_41FAB0((const char *)&v59);
  sub_41A370((const char *)&v59, v11 + 165599);
  v12 = 0;
  for ( j = 0; j < carAnimCurrentFrame_45FBA0; ++j )
    v12 += carAnimFrameSize_45FBA0[j];
  copyImageToBuffer((int)((char *)kuplaBpk + v12), (int)dword_461EA4);
  drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 123359));
  drawKeyCursor(123359, (char *)screenBuffer + 123359, 0x60u, 64);
  carAnimCurrentFrame_45FBA0 = (carAnimCurrentFrame_45FBA0 + 1) % 64;
  drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 163370));
  drawImageWithPosition((int)slidcur3Bpk, 10, 24, (int)((char *)screenBuffer + 160952));
  refreshAllScreen();
  eventDetected();
  sub_418090();
  //v17 = &byte_460840[108 * driverId];
  //v18 = &byte_460840[108 * driverId];
  v17 = &drivers[driverId];
  v18 = &drivers[driverId];

 
  do
  {
    v19 = *v18;
    v18[v61 - v17] = *v18;
    ++v18;
  }
  while ( v19 );
  *v17 = 0;
  if ( !readKeyboard(v17, 173, 208, (int)&unk_4455B0, 0xAu, 300, 0, 1, 1) )
  {
    loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
    v47 = v61;
    v48 = &drivers[driverId - (signed int)v61];
    do
    {
      v49 = *v47;
      v48[(_DWORD)v47] = *v47;
      ++v47;
    }
    while ( v49 );
    v46 = 0;
    goto LABEL_86;
  }
  loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
  v20 = driverId;
  //si es dukenuken toco sonido
  //if ( dword_460880[27 * driverId] == 2 )
  if (drivers[driverId].face== 2)
  {
    loadMenuSoundEffect(5u, 6, 0, configuration.musicVolume, 147456);
    v20 = driverId;
  }
  if ( !useWeapons_mal)
    goto LABEL_74;
  drawImageWithPosition((int)textureTemp, 530, 249, (int)((char *)screenBuffer + 71743));
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848,&drivers[driverId], 133293);
  //drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, &byte_460840[108 * driverId], 133293);
  drawImageWithPosition2((int)fasesel1Bpk, 68, 102, (int)((char *)screenBuffer + 110168));
  drawImageWithPosition2((int)*(&graphicsGeneral.face01Bpk + drivers[driverId].face), 64, 64, (int)((char *)screenBuffer + 122330));
  drawImageWithPosition2((int)carbas2Bpk, 96, 96, (int)((char *)screenBuffer + 113119));
  drawImageWithPosition2((int)carnameBpk, 96, 16, (int)((char *)screenBuffer + 113119));
  itoa(dword_44DF5C, &DstBuf, 10);
  v59 = 36;
  v21 = strlen(&DstBuf) + 1;
  v22 = (char *)&v58 + 3;
  do
    v23 = (v22++)[1];
  while ( v23 );
  memcpy(v22, &DstBuf, v21);
  v24 = sub_41FAB0((const char *)&v59);
  sub_41A370((const char *)&v59, v24 + 165599);
  drawMenuAnimation(479, 192, carAnimCurrentFrame_45FBA0, (int)kuplaBpk, (int)carAnimFrameSize_45FBA0);
  drawKeyCursor(123359, (char *)screenBuffer + 123359, 0x60u, 64);
  carAnimCurrentFrame_45FBA0 = (carAnimCurrentFrame_45FBA0 + 1) % 64;
  drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 163370));
  //drawImageWithPosition((int)slidcur3Bpk, 10, 24, (int)((char *)screenBuffer + dword_46086C[27 * driverId] + 160824));
  
  drawImageWithPosition((int)slidcur3Bpk, 10, 24, (int)((char *)screenBuffer + drivers[driverId].colour + 160824));
  v25 = 0;
  v26 = 71680;
  do
  {
    for ( k = v25 % 2; k < 530; k += 2 )
      *((byte *)screenBuffer + v26 + k + 63) = -60;
    v26 += 640;
    ++v25;
  }
  while ( v26 < 185600 );
  useWeapons = 1;
  if ( !drawYesNoMenu(193, 323, 1, &useWeapons) )
  {
    loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
    v57 = 0;
    goto LABEL_73;
  }
  memcpy((char *)screenBuffer + 53760, (char *)graphicsGeneral.menubg5Bpk + 53760, 0x2C380u);
  drawMenu(INITIAL_MENU, 0);
  createPopup(93, 142, 440, 186, 1);
  drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "Select difficulty:", 102573);
  drawCursor(115, 28 * configuration.difficulty + 221);
  v28 = configuration.difficulty;
  if (configuration.difficulty )
  {
    drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, aSpeedMakesMeDi, 138379);
    if ( v28 == 1 )
    {
      drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, aILiveToRide, 156299);
      goto LABEL_37;
    }
  }
  else
  {
    drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, aSpeedMakesMeDi, 138379);
  }
  drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, aILiveToRide, 156299);
  if ( v28 != 2 )
  {
LABEL_37:
 
	  //v55 = COERCE_FLOAT(aPetrolInMyVein);
   // v55 =  *((float*)aPetrolInMyVein);
    v53 = (int)&unk_445848;
    v51 = fbig3bBpk;
    goto LABEL_38;
  }
  //v55 = COERCE_FLOAT(aPetrolInMyVein);
  // v55 =  *((float*)aPetrolInMyVein);
  v53 = (int)&unk_445848;
  v51 = graphicsGeneral.fbig3aBpk;
LABEL_38:
  drawTextWithFont((int)v51, v53, aPetrolInMyVein, 174219);
  refreshAllScreen();
  while ( 1 )
  {
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          v29 = eventDetected();
          sub_42A570();
          sub_42A570();
          drawCursor(115, 28 * v28 + 221);
          if ( v29 != -56 )
            break;
          if ( v28 > 0 )
          {
            --v28;
LABEL_49:
            v30 = 90880;
            do
            {
              v31 = (char *)screenBuffer + v30 + 47475;
              memset(v31, 0xC4u, 0x160u);
              v31 += 352;
              *(_WORD *)v31 = -15164;
              v30 += 640;
              v31[2] = -60;
            }
            while ( v30 < 144640 );
            if ( v28 )
            {
              drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, aSpeedMakesMeDi, 138379);
              if ( v28 == 1 )
              {
                drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, aILiveToRide, 156299);
                goto LABEL_57;
              }
            }
            else
            {
              drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, aSpeedMakesMeDi, 138379);
            }
            drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, aILiveToRide, 156299);
            if ( v28 == 2 )
            {
				// v56 =  *((float*)aPetrolInMyVein);
              //v56 = COERCE_FLOAT(aPetrolInMyVein);
              v54 = (int)&unk_445848;
              v52 = graphicsGeneral.fbig3aBpk;
LABEL_58:
              drawTextWithFont((int)v52, v54, aPetrolInMyVein, 174219);
              drawKeyCursor(138355, (char *)screenBuffer + 138355, 0x190u, 84);
              loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
              goto LABEL_59;
            }
LABEL_57:
			// v56 =  *((float*)aPetrolInMyVein);
            //v56 = COERCE_FLOAT(aPetrolInMyVein);
            v54 = (int)&unk_445848;
            v52 = fbig3bBpk;
            goto LABEL_58;
          }
        }
        if ( v29 != 72 )
          break;
        if ( v28 > 0 )
        {
          --v28;
          goto LABEL_49;
        }
      }
      if ( v29 != -48 && v29 != 80 )
        break;
      if ( v28 < 2 )
      {
        ++v28;
        goto LABEL_49;
      }
    }
LABEL_59:
    if ( v29 == 28 || v29 == -100 || v29 == 57 )
    {
		configuration.difficulty = v28;
      if ( !v28 )
        loadMenuSoundEffect(5u, 1, 0, configuration.musicVolume, 147456);
      if (configuration.difficulty == 1 )
        loadMenuSoundEffect(5u, 2, 0, configuration.musicVolume, 147456);
      if (configuration.difficulty == 2 )
        loadMenuSoundEffect(5u, 3, 0, configuration.musicVolume, 147456);
    }
    if ( v29 == 1 )
      break;
    if ( v29 == 28 || v29 == -100 )
      goto LABEL_73;
  }
  v57 = 0;
  loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
LABEL_73:
  v20 = driverId;
LABEL_74:
  strlwr(drivers[v20].name);
  //strlwr(&byte_460840[108 * v20]);
  v32 = 27 * driverId;
  //v33 = byte_460840[108 * driverId];
  v33 = drivers[driverId].name;
  v34 = drivers[driverId].name;
  //v34 = &byte_460840[108 * driverId];
  if ( (unsigned __int8)v33 > 0x60u && (unsigned __int8)v33 < 0x7Bu )
    *v34 = v33 - 32;
  v35 = 0;
  v36 = v34;
  dword_45FA78 = 0;
  v37 = 0;
  do
    v38 = *v36++;
  while ( v38 );
  if ( v36 != v34 + 1 )
  {
    do
      v35 += (unsigned __int8)byte_445892[(unsigned __int8)v34[v37++]];
    while ( v37 < strlen(v34) );
    dword_45FA78 = v35;
  }
  v39 = dword_46086C[v32];
  v40 = (char *)graphicsGeneral.copperPal + 2 * v39;
  v41 = (unsigned __int8)v40[v39 + 2];
  v42 = (int)&v40[v39];
  v43 = (double)v41;
  v44 = (double)*(byte *)(v42 + 1);
  v45 = (double)*(byte *)v42;
  setPaletteValueWithFloats(v45, v44, v43);
  v46 = v57;
LABEL_86:
  if ( isMultiplayerGame )
  {
    drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
  }
  drawBottomMenuText();
  refreshAllScreen();
  result = (unsigned __int8)v46;
  carAnimCurrentFrame_45FBA0 = 0;

  
  return result;
}


//----- (00435320) --------------------------------------------------------
int  adversaryPreviewScreen(const char **a1)
{
  unsigned __int8 v1; // di@1
  signed int v2; // esi@1
  int v3; // ST3C_4@2
  int v4; // ST38_4@2
  int v5; // eax@2
  unsigned __int8 v6; // bp@3
  signed int v7; // esi@3
  char v8; // al@3
  int result; // eax@9
  int v10; // edi@11
  signed int v11; // ebx@11
  signed int v12; // esi@15
  int v13; // ST38_4@16
  int v14; // ST34_4@16
  int v15; // eax@16
  signed int v16; // esi@21
  signed int v17; // esi@26
  int v18; // eax@27
  char v19; // cl@27
  int v20; // eax@27
  signed int v21; // edx@29
  int v22; // ecx@29
  bool v23; // zf@47
  bool v24; // sf@47
  unsigned __int8 v25; // of@47
  const char **v26; // [sp-4h] [bp-38h]@11
  const char **v27; // [sp+0h] [bp-34h]@0
  char v28; // [sp+Bh] [bp-29h]@27
  int v29; // [sp+Ch] [bp-28h]@26

  v1 = -80;

 

  v2 = 528;
  do
  {
  v3 = (convertColorToPaletteColor(palette1[v2+2], 6553600) + 0x8000) >> 16;
  v4 = (convertColorToPaletteColor(palette1[v2 + 1], 6553600) + 0x8000) >> 16;
  v5 = convertColorToPaletteColor(palette1[v2], 6553600);
  setPaletteAndGetValue(v1, (v5 + 0x8000) >> 16, v4, v3);
  v2 += 3;
  ++v1;
  }
  while ( v2 <  528 + 16);

  /*v2 = (signed int)&unk_460484;
  do
  {
    v3 = (convertColorToPaletteColor(*(_DWORD *)(v2 + 4), 6553600) + 0x8000) >> 16;
    v4 = (convertColorToPaletteColor(*(_DWORD *)v2, 6553600) + 0x8000) >> 16;
    v5 = convertColorToPaletteColor(*(_DWORD *)(v2 - 4), 6553600);
    setPaletteAndGetValue(v1, (v5 + 0x8000) >> 16, v4, v3);
    v2 += 12;
    ++v1;
  }
  while ( v2 < (signed int)&unk_4604D8 );*/
  memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  memcpy((void *)(dword_45FC00 + 57600), (char *)graphicsGeneral.menubg5Bpk + 57600, 0x2AA80u);
  v6 = 0;
  memcpy((char *)screenBuffer + 234880, (char *)graphicsGeneral.menubg5Bpk + 234880, 0x2800u);
  drawTransparentBlock(0, 371, 639, 109);
  drawBottomMenuText();
  drawCarRightSide();
  drawImageWithPosition((int)graphics4.badtitBpk, 440, 16, (int)((char *)screenBuffer + 58920));
  drawImageWithPosition((int)graphics4.badsnapBpk, 256, 228, (int)((char *)screenBuffer + 82096));
  drawImageWithPosition((int)graphics4.escboxBpk, 115, 104, (int)((char *)screenBuffer + 154908));
  drawBorder(170, 120, 268, 244);
  screenBuffer = (void *)dword_461250;
  sub_42C4A0();
  refreshAllScreen();
  v7 = 0;
  v8 = 0;
  do
  {
    if ( v8 == 28 || v8 == -100 )
      break;
    if ( v8 == 1 )
      goto LABEL_11;
    ++v7;
    sub_42A570();
    v8 = eventDetected();
  }
  while ( v7 < 480 );
  if ( v8 != 1 )
  {
    selectedRace_462CE8 = 3;
    dword_45FC20 = 1;
    dword_456BE0 = 0;
    dword_456BDC = 0;
    previewRaceScreen(2);
    result = dword_456BD8;
    if ( dword_456BD8 == 1 )
    {
      *(_DWORD *)aStartANewGam_0 = *(_DWORD *)"Start A New Game";
      *(_DWORD *)&aStartANewGam_0[4] = *(_DWORD *)"t A New Game";
      *(_DWORD *)&aStartANewGam_0[8] = *(_DWORD *)"New Game";
      *(_DWORD *)&aStartANewGam_0[12] = *(_DWORD *)"Game";
      aStartANewGam_0[16] = aStartANewGame[16];
      *(_DWORD *)aStartRacing = 1918989395;
      *(_DWORD *)&aStartRacing[4] = 1632772212;
      *(_DWORD *)&aStartRacing[8] = 1735289187;
      aStartRacing[12] = 0;
	  menuActive_4457F0[10] = 0;
	  menuActive_4457F0[11] = 0;
	  menuActive_4457F0[13] = 0;
      showHardWarningRace = 0;
      showMediumWarningRace = 0;
      dword_456B78 = 0;
      dword_456B74 = 0;
      result = initDrivers();
      dword_464F44 = 1;
      dword_456B64 = 1;
      dword_445724 = 0;
      dword_456BD8 = 0;
    }
    return result;
  }
LABEL_11:
  v26 = a1;
  loadMenuSoundEffect(1u, 23, 0, configuration.musicVolume, dword_44518C - 4096);
  sub_4224E0();
  v10 = 6553600;
  v11 = 65500;
  do
  {
    if ( useWeapons && dword_456B84 )
      setMusicVolume(v11);
    wait();
	v12 = 0;
	//v12 = (signed int)dword_45FC44;
    do
    {
      v13 = (convertColorToPaletteColor((palette1[v12+2]), v10) + 0x8000) >> 16;
      v14 = (convertColorToPaletteColor(palette1[v12 + 1], v10) + 0x8000) >> 16;
      v15 = convertColorToPaletteColor((palette1[v12 ]), v10);
      setPaletteAndGetValue(v6, (v15 + 0x8000) >> 16, v14, v13);
      v12 += 3;
      ++v6;
    }
    while ( v12 <maxPaletteEntries );
    v11 -= 1310;
    v10 -= 0x20000;
    v6 = 0;
  }
  while ( v11 >= 0 );
  if ( useWeapons && dword_456B84 )
  {
    musicSetOrder(dword_462D7C);
    dword_456B60 = 1;
    sub_43C3E0(1u);
  }
  loadPaletteMenu();
  v16 = 0;
  do
    setPaletteAndGetValue(v16++, 0, 0, 0);
  while ( v16 < 256 );
  do
  {
    do
      addParticipantToRace(1);
    while (participantsRace[1] < 4u );
	//while ((unsigned __int8)word_461EB4 < 4u);
	
  }
  while (participantsRace[0] < 4u || participantsRace[2] < 4u );
  //while (HIBYTE(word_461EB4) < 4u || (unsigned __int8)byte_461EB6 < 4u);
  v29 = 0;
  v17 = (signed int)dword_4A7AA0;
  do
  {
    do
    {
      v18 = rand() % 4;
      v19 = *(&v28 + v18 + 1);
      v20 = v18 + 1;
      *(_DWORD *)v17 = v20;
    }
    while ( v19 );
    v17 += 84;
    *(&v28 + v20) = 1;
  }
  while ( v17 < (signed int)&unk_4A7BF0 );
  main(1, v26, v27);
  result = 0;
  v21 = 2;
  v22 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v22 - 108) > result && v21 - 2 != driverId )
      result = *(_DWORD *)(v22 - 108);
    if ( *(_DWORD *)v22 > result && v21 - 1 != driverId )
      result = *(_DWORD *)v22;
    if ( *(_DWORD *)(v22 + 108) > result && v21 != driverId )
      result = *(_DWORD *)(v22 + 108);
    if ( *(_DWORD *)(v22 + 216) > result && v21 + 1 != driverId )
      result = *(_DWORD *)(v22 + 216);
    if ( *(_DWORD *)(v22 + 324) > result && v21 + 2 != driverId )
      result = *(_DWORD *)(v22 + 324);
    v21 += 5;
    v22 += 540;
  }
  while ( v21 - 2 < 20 );
  if ( isMultiplayerGame
    || (v25 = __OFSUB__(drivers[driverId].points, result),
        v23 = drivers[driverId].points == result,
        v24 = drivers[driverId].points - result < 0,
        sabotageAvailable_45EFFC = 0,
        (unsigned __int8)(v24 ^ v25) | v23) )
    sabotageAvailable_45EFFC = 1;
  dword_456B58 = 1;
  return result;
}

//----- (004357F0) --------------------------------------------------------
void selectRaceScreen()
{
  unsigned __int8 v0; // di@1
  signed int v1; // esi@1
  int v2; // ST48_4@2
  int v3; // ST44_4@2
  int v4; // eax@2
  int v5; // ST14_4@10
  int v6; // ST14_4@12
  int v7; // edi@31
  signed int v8; // ebx@31
  unsigned __int8 v9; // bp@35
  signed int v10; // esi@35
  int v11; // ST48_4@36
  int v12; // ST44_4@36
  int v13; // eax@36
  signed int v14; // esi@41
  char *v15; // edi@46
  char v16; // al@47
  unsigned int v17; // eax@49
  char *v18; // edi@49
  char v19; // cl@50
  char *v20; // edi@51
  char v21; // al@52
  int v22; // eax@53
  char *v23; // eax@53
  char *v24; // edx@53
  char v25; // cl@54
  unsigned int v26; // eax@55
  char *v27; // edi@55
  char v28; // cl@56
  int v29; // ecx@57
  unsigned __int8 v30; // al@57
  signed int v31; // edx@61
  char v32; // cl@62
  char v33; // bl@62
  char v34; // al@62
  char v35; // cl@62
  signed int v36; // esi@62
  signed int v37; // edi@62
  signed int v38; // ebp@62
  char *v39; // ecx@63
  signed int v40; // eax@64
  bool v41; // zf@74
  signed int v42; // esi@78
  const char **v43; // [sp+0h] [bp-6Ch]@0
  const char **v44; // [sp+4h] [bp-68h]@0
  char Str; // [sp+10h] [bp-5Ch]@53
  char v46; // [sp+11h] [bp-5Bh]@62
  char v47; // [sp+12h] [bp-5Ah]@62
  char v48; // [sp+13h] [bp-59h]@62
  char DstBuf[4]; // [sp+1Ch] [bp-50h]@45
  int v50; // [sp+20h] [bp-4Ch]@62
  int v51; // [sp+24h] [bp-48h]@62
  int v52; // [sp+28h] [bp-44h]@62
  int v53; // [sp+2Ch] [bp-40h]@46
  char *name =malloc(100); // [sp+30h] [bp-3Ch]@45

  selectedRace_462CE8 = -1;
  calculateNextRaces();
  v0 = -80;
  int index = 176;
  //v1 = unk_460484;
  //v1 = (signed int)&unk_460484; offset en la paleta de 176
  do
  {
   /* v2 = (convertColorToPaletteColor(*(_DWORD *)(v1 + 4), 6553600) + 0x8000) >> 16;
    v3 = (convertColorToPaletteColor(*(_DWORD *)v1, 6553600) + 0x8000) >> 16;
    v4 = convertColorToPaletteColor(*(_DWORD *)(v1 - 4), 6553600);
    setPaletteAndGetValue(v0, (v4 + 0x8000) >> 16, v3, v2);
    v1 += 12;
    ++v0;*/
	v2 = (convertColorToPaletteColor(palette1[index+2], 6553600) + 0x8000) >> 16;
	v3 = (convertColorToPaletteColor(palette1[index+1], 6553600) + 0x8000) >> 16;
	v4 = convertColorToPaletteColor(palette1[index], 6553600);
	setPaletteAndGetValue(v0, (v4 + 0x8000) >> 16, v3, v2);
	//v1 += 12;
	++v0;
	index+=3;
  }
  //while ( v1 < (signed int)&unk_4604D8 );
  while (index < 176+16);

  
  memcpy((void *)dword_45FC00, graphicsGeneral.menubg5Bpk, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  memcpy((void *)(dword_45FC00 + 65920), (char *)graphicsGeneral.menubg5Bpk + 65920, 0x28A00u);
  drawSelectRaceScreen();
  if ( dword_456B74 || (drawBorder(160 * selectedRaceId + 22, 118, 148, 132), dword_456B74) )
    welcomePopup();
  screenBuffer = (void *)dword_461250;
  sub_42C4A0();
  refreshAllScreen();
  if ( dword_456B74 )
  {
    sub_42C780();
    memcpy((char *)screenBuffer + 65920, (char *)graphicsGeneral.menubg5Bpk + 65920, 0x28A00u);
    drawSelectRaceScreen();
    drawBorder(160 * selectedRaceId + 22, 118, 148, 132);
    refreshAllScreen();
  }
  while ( 2 )
  {
    sub_42A570();
    sub_42A570();
    addParticipantToRace(75);
    switch ( eventDetected() )
    {
      case KEY_LEFT:
      case 0xCB:
        if ( selectedRaceId > 0 )
        {
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
          drawBorder2(160 * selectedRaceId + 22, 118, 0x94u, 132);
          v5 = 160 * (selectedRaceId-- - 1) + 22;
          drawBorder(v5, 118, 148, 132);
          refreshAllScreen();
        }
        goto LABEL_26;
      case KEY_RIGHT:
      case 0xCD:
        if ( selectedRaceId < 2 )
        {
          loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
          drawBorder2(160 * selectedRaceId + 22, 118, 0x94u, 132);
          v6 = 160 * (selectedRaceId++ + 1) + 22;
          drawBorder(v6, 118, 148, 132);
          refreshAllScreen();
        }
        goto LABEL_26;
      case KEY_ENTER:
      case 0x9C:
        if ( selectedRaceId == 1 )
        {
          if ( showMediumWarningRace == 1 && drivers[driverId].carType < 2 )
			  //if (showMediumWarningRace == 1 && dword_46085C[27 * driverId] < 2)
          {
            selectRaceWarningPopup(0);
            showMediumWarningRace = 0;
            goto LABEL_26;
          }
        }
        else if ( selectedRaceId == 2 && showHardWarningRace == 1 && drivers[driverId].carType < 4 )
		//else if (selectedRaceId == 2 && showHardWarningRace == 1 && dword_46085C[27 * driverId] < 4)
        {
          selectRaceWarningPopup(1);
          showHardWarningRace = 0;
          goto LABEL_26;
        }
		//if (*((byte *)&word_461EB4 + selectedRaceId) >= 4u)
        if (participantsRace[selectedRaceId] >= 4u )			
        {
          loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
	 LABEL_26:
		  
		  if (participantsRace[0] == 4 && participantsRace[1] == 4 && participantsRace[2] == 4)
          //if ( (byte)word_461EB4 == 4 && HIBYTE(word_461EB4) == 4 && byte_461EB6 == 4 )
          {
            createPopup(33, 200, 580, 112, 1);
            drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "You did not sign up in any race.", 144048);
            drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Press any key to continue.", 167248);
            refreshAllScreen();
            loadMenuSoundEffect(1u, 23, 0, configuration.musicVolume, dword_44518C - 4096);
            do
              sub_42A570();
            while ( !eventDetected() );
            sub_4224E0();
            v7 = 6553600;
            v8 = 65500;
            do
            {
              if ( useWeapons && dword_456B84 )
                setMusicVolume(v8);
              wait();
              v9 = 0;
              v10 = 0;
			  //v10 = (signed int)dword_45FC44;
              do
              {
                v11 = (convertColorToPaletteColor((palette1[v10+2]), v7) + 0x8000) >> 16;
                v12 = (convertColorToPaletteColor(palette1[v10 + 1], v7) + 0x8000) >> 16;
                v13 = convertColorToPaletteColor((palette1[v10]), v7);
                setPaletteAndGetValue(v9, (v13 + 0x8000) >> 16, v12, v11);
                v10 += 3;
                ++v9;
              }
              while ( v10 < maxPaletteEntries );
              v8 -= 1310;
              v7 -= 0x20000;
            }
            while ( v8 >= 0 );
            if ( useWeapons && dword_456B84 )
            {
              musicSetOrder(dword_462D7C);
              dword_456B60 = 1;
              sub_43C3E0(1u);
            }
            loadPaletteMenu();
            v14 = 0;
            do
              setPaletteAndGetValue(v14++, 0, 0, 0);
            while ( v14 < 256 );
         // //TODO fix   main(1, v43, v44);
			main(1, "", "");
            goto LABEL_44;
          }
          continue;
        }
        loadMenuSoundEffect(1u, 21, 0, configuration.musicVolume, dword_445184);
        drawImageWithPosition(
          (int)graphics4.signlineBpk,
          136,
          2,
          (int)((char *)screenBuffer + 160 * (selectedRaceId + 72 * participantsRace[selectedRaceId]) + 179227));
        itoa(drivers[driverId].rank, name, 10);
		/*drawImageWithPosition(
			(int)graphics4.signlineBpk,
			136,
			2,
			(int)((char *)screenBuffer + 160 * (selectedRaceId + 72 * *((byte *)&word_461EB4 + selectedRaceId)) + 179227));
		itoa(dword_460888[27 * driverId], DstBuf, 10);*/
        //v54 = 0;
        /*if ( strlen(DstBuf) < 2 )
        {
          v15 = (char *)&v53 + 3;
          do
            v16 = (v15++)[1];
          while ( v16 );
          *(_WORD *)v15 = 32;
        }
        v17 = strlen(DstBuf) + 1;
        v18 = (char *)&v53 + 3;
        do
          v19 = (v18++)[1];
        while ( v19 );
        memcpy(v18, DstBuf, v17);
        v20 = (char *)&v53 + 3;
        do
          v21 = (v20++)[1];
        while ( v21 );
        v22 = 108 * driverId;
        *(_WORD *)v20 = 46;
        v23 = &byte_460840[v22];
        v24 = (char *)(&Str - v23);
        do
        {
          v25 = *v23;
          v23[(_DWORD)v24] = *v23;
          ++v23;
        }
        while ( v25 );
        strupr(&Str);
        v26 = strlen(&Str) + 1;
        v27 = (char *)&v53 + 3;
        do
          v28 = (v27++)[1];
        while ( v28 );
        memcpy(v27, &Str, v26);*/
		strcat(name, " ");
		strcat(name, drivers[driverId].name);
        drawTextWithFont(
          (int)graphicsGeneral.fmed1aBpk,
          (int)&unk_445928,
			name,
          160 * (selectedRaceId + 72 * participantsRace[selectedRaceId]) + 175394);
		/*drawTextWithFont(
			(int)graphicsGeneral.fmed1aBpk,
			(int)&unk_445928,
			&v54,
			160 * (selectedRaceId + 72 * *((byte *)&word_461EB4 + selectedRaceId)) + 175394);*/
        v29 = selectedRaceId;
		v30 = participantsRace[selectedRaceId];
		//v30 = *((byte *)&word_461EB4 + selectedRaceId);
        selectedRace_462CE8 = selectedRaceId;
		racePositions[selectedRaceId][v30] = driverId;
        //*((byte *)&dword_45EB50[selectedRaceId] + v30) = driverId;
        dword_45FC20 = v30;
        participantsRace[v29] = v30 + 1;
		//*((byte *)&word_461EB4 + v29) = v30 + 1;
        refreshAllScreen();
        do
        {
          do
          {
            sub_42A570();
            sub_42A570();
            addParticipantToRace(3);
          }
          while ( participantsRace[1] < 4u );
		  //while ((unsigned __int8)word_461EB4 < 4u);
        }
        while (participantsRace[0] < 4u || participantsRace[2] < 4u );
		///while (HIBYTE(word_461EB4) < 4u || (unsigned __int8)byte_461EB6 < 4u);
		//este codigo ordena los participantes en la parrilla
        v31 = &dword_45EB50[2];//45EB52
        do
        {
          v32 = *(byte *)(v31 - 2);
          v33 = *(byte *)(v31 + 1);
          *(_DWORD *)DstBuf = 0;
          v50 = 0;
          v51 = 0;
          v52 = 0;
          v53 = 0;
          v34 = *(byte *)(v31 - 1);
          Str = v32;
          v35 = *(byte *)v31;
          v48 = v33;
          v46 = v34;
          v47 = v35;
          v36 = 0;
          v37 = (unsigned __int8)v34;
          v38 = (unsigned __int8)v35;
          do
          {
            v39 = &Str;
            do
              v40 = (unsigned __int8)*v39++;
            while ( DstBuf[v40] );
            if ( v37 > v40 && !DstBuf[v37] )
              v40 = v37;
            if ( v38 > v40 && !DstBuf[v38] )
              v40 = v38;
            if ( (unsigned __int8)v33 > v40 && !DstBuf[(unsigned __int8)v33] )
              v40 = (unsigned __int8)v33;
            v41 = v40 == driverId;
            DstBuf[v40] = 1;
            *(byte *)(v31 + v36 - 2) = v40;
            if ( v41 )
              dword_45FC20 = v36;
            ++v36;
          }
          while ( v36 < 4 );
          v31 += 4;
        }
        while ( v31 < 4582238 );
		/*v31 = 4582226;//45EB52
        do
        {
          v32 = *(byte *)(v31 - 2);
          v33 = *(byte *)(v31 + 1);
          *(_DWORD *)DstBuf = 0;
          v50 = 0;
          v51 = 0;
          v52 = 0;
          v53 = 0;
          v34 = *(byte *)(v31 - 1);
          Str = v32;
          v35 = *(byte *)v31;
          v48 = v33;
          v46 = v34;
          v47 = v35;
          v36 = 0;
          v37 = (unsigned __int8)v34;
          v38 = (unsigned __int8)v35;
          do
          {
            v39 = &Str;
            do
              v40 = (unsigned __int8)*v39++;
            while ( DstBuf[v40] );
            if ( v37 > v40 && !DstBuf[v37] )
              v40 = v37;
            if ( v38 > v40 && !DstBuf[v38] )
              v40 = v38;
            if ( (unsigned __int8)v33 > v40 && !DstBuf[(unsigned __int8)v33] )
              v40 = (unsigned __int8)v33;
            v41 = v40 == driverId;
            DstBuf[v40] = 1;
            *(byte *)(v31 + v36 - 2) = v40;
            if ( v41 )
              dword_45FC20 = v36;
            ++v36;
          }
          while ( v36 < 4 );
          v31 += 4;
        }
        while ( v31 < 4582238 );*/
        v42 = 0;
        if ( !sabotageScreen() && !showHitmanScreen() )
        {
          do
          {
            sub_42A570();
            ++v42;
          }
          while ( !eventDetected() && v42 < 280 );
        }
        previewRaceScreen(4);
LABEL_44:
        dword_456B58 = 1;
        return;
      case KEY_ESCAPE:
        do
        {
          do
            addParticipantToRace(1);
          //while ( (unsigned __int8)word_461EB4 < 4u );
		  while (participantsRace[1] < 4u);

        }
        while (participantsRace[0] < 4u || participantsRace[2] < 4u );
		//while (HIBYTE(word_461EB4) < 4u || (unsigned __int8)byte_461EB6 < 4u);
        goto LABEL_26;
      default:
        goto LABEL_26;
    }
  }
}


//----- (004360B0) --------------------------------------------------------
void __thiscall underGroundMenuEnter(void *this)
{
  int v1; // eax@1
  int v2; // esi@1
  char v3; // bl@1
  int v4; // eax@6
  int v5; // ebx@19
  int v6; // edi@19
  int v7; // ebp@20
  int v8; // esi@21
  int v9; // eax@32
  int v10; // edx@36
  int v11; // edx@44
  int v12; // edx@53
  int *v13; // eax@53
  signed int v14; // edi@53
  void *v15; // [sp+0h] [bp-4h]@1

  v15 = this;
  v1 = driverId;
  v2 = 0;
  v3 = 5 - drivers[driverId].carType;
  if ( !drivers[driverId].carType)
    v3 = 4;
  switch ( undergroundOptionSelected_dword_461278 )
  {
    case LOANSHARK:
      if (drivers[driverId].loanRaces == -1 )
      {
        if (  drivers[driverId].carType )
        {
          loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
          
		  drivers[driverId].loanRaces = 1;
		  drivers[driverId].loanType = (unsigned __int8)v3;
          if ( v3 )
          {
            switch ( v3 )
            {
              case 1:
				  drivers[driverId].money += 9000;
                loadAcceptedText();
                break;
              case 2:
				  drivers[driverId].money += 6000;
                loadAcceptedText();
                break;
              case 3:
				  drivers[driverId].money += 3000;
                loadAcceptedText();
                break;
              default:
                if ( v3 == 4 )
					drivers[driverId].money += 1500;
                loadAcceptedText();
                break;
            }
          }
          else
          {
			  drivers[driverId].money += 12000;
            loadAcceptedText();
          }
          goto LABEL_48;
        }
        if ( !drivers[driverId].carType)
        {
          loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
          dword_456B70 = 310;
          loanDeniedVagabondPopUp();
          refreshAllScreen();
        }
      }
      v5 =  driverId;
      v6 = drivers[driverId].loanRaces;
      if ( v6 != -1 )
      {
        v7 = drivers[driverId].loanType;
        if ( v7 )
          v8 = (int)v15;
        else
          v8 = (unsigned __int64)((double)(v6 - 1) * 0.3333333333333333 * 6000.0 + 12000.0);
        if ( v7 == 1 )
          v8 = (unsigned __int64)((double)(v6 - 1) * 0.3333333333333333 * 4500.0 + 9000.0);
        if ( v7 == 2 )
          v8 = (unsigned __int64)((double)(v6 - 1) * 0.3333333333333333 * 3000.0 + 6000.0);
        if ( v7 == 3 )
          v8 = (unsigned __int64)((double)(v6 - 1) * 0.3333333333333333 * 1500.0 + 3000.0);
        if ( v7 == 4 )
          v8 = (unsigned __int64)((double)(v6 - 1) * 0.3333333333333333 * 750.0 + 1500.0);
        if (drivers[driverId].money < v8 )
        {
          loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
        }
        else
        {
          loadMenuSoundEffect(1u, 29, 0, configuration.musicVolume, dword_4451A4);
          v9 = driverId;
		  drivers[driverId].money -= v8;
		  drivers[driverId].loanRaces = -1;
		  drivers[driverId].loanType = NO_LOAN;
          dword_456B70 = 310;
          sub_422D80();
          drawCarRightSide();
          refreshAllScreen();
        }
      }
      return;
    case MINES:
      if ( minesAvailable_45EFF0 != 1 || hasInsuficientMoneyToBuy(minesCost_462D40) )
        goto LABEL_37;
      loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
      v10 = drivers[driverId].money - minesCost_462D40;
      minesAvailable_45EFF0 = 0;
	  drivers[driverId].money = v10;
      drawBlackMarketElement0();
      drivers[driverId].mines = 8;
      getBlackMarketElementPurchasedText(0);
      goto LABEL_48;
    case SPIKES:
      if ( spikesAvailable_45EFF4 != 1 || hasInsuficientMoneyToBuy(spikesCost_dword_462D44) )
        goto LABEL_41;
      loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
      spikesAvailable_45EFF4 = 0;
	  drivers[driverId].money -= spikesCost_dword_462D44;
      drawBlackMarketElement1();
	  drivers[driverId].spikes = 1;
      getBlackMarketElementPurchasedText(1);
      goto LABEL_48;
    case ROCKET:
      if ( rocketAvailable_45EFF8 != 1 || hasInsuficientMoneyToBuy(rocket_462D48) )
      {
LABEL_37:
        loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
        return;
      }
      loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
      v11 = drivers[driverId].money - rocket_462D48;
      rocketAvailable_45EFF8 = 0;
	  drivers[driverId].money = v11;
      drawBlackMarketElement2();
      drivers[driverId].rocket = 1;
      getBlackMarketElementPurchasedText(2);
      goto LABEL_48;
    case SABOTAGE:
      if ( sabotageAvailable_45EFFC != 1 || hasInsuficientMoneyToBuy(sabotage_462D4C) )
      {
LABEL_41:
        loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
      }
      else
      {
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        sabotageAvailable_45EFFC = 0;
		drivers[driverId].money -= sabotage_462D4C;
        drawBlackMarketElement3();
        drivers[driverId].sabotage = 1;
        getBlackMarketElementPurchasedText(3);
LABEL_48:
        dword_456B70 = 310;
        drawCarRightSide();
        refreshAllScreen();
      }
      return;
    case CONTINUE:
      if ( drivers[driverId].damage == 100 )
      {
        createPopup(144, 114, 384, 119, 1);
        writeTextInScreen("[Repair your car first.", 79530);
        writeTextInScreen((const char *)&unk_444160, 89770);
        writeTextInScreen("What'cha gonna do with that pile of", 100010);
        writeTextInScreen("junk, carry it around? Let me spell", 110250);
        writeTextInScreen("this to you: R-E-P-A-I-R.", 120490);
        refreshAllScreen();
        loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
      }
      else
      {
        loadMenuSoundEffect(1u, 24, 0, configuration.musicVolume, dword_445190);
        if ( isMultiplayerGame )
        {
          previewRaceScreen(dword_456758);
        }
        else
        {
		  //este calculo es para sacar que tienes el que mas puntos
          /*v12 = 0;
          v13 = dword_460884;
          v14 = 20;
          do
          {
            if ( *v13 > v2 && v12 != driverId )
              v2 = *v13;
            ++v12;
            v13 += 27;
            --v14;
          }
          while ( v14 );*/
          if (drivers[driverId].rank > 1 )
            selectRaceScreen();
          else
            adversaryPreviewScreen((const char **)(108 * driverId));
        }
        undergroundOptionSelected_dword_461278 = 4;
        dword_456B58 = 1;
      }
      return;
    default:
      return;
  }
}


//----- (00436700) --------------------------------------------------------
void enterBlackMarketScreen()
{
  int v0; // eax@1
  signed int v1; // edx@1
  int v2; // ecx@1
  int v3; // edi@21
  signed int v4; // ebp@21
  int v5; // eax@23
  int i; // ecx@23
  bool v7; // zf@25
  bool v8; // sf@25
  unsigned __int8 v9; // of@25
  unsigned __int8 v10; // bl@27
  signed int v11; // esi@27
  int v12; // ST3C_4@28
  int v13; // ST38_4@28
  int v14; // eax@28
  unsigned __int8 v15; // bl@29
  signed int v16; // esi@29
  int v17; // ST3C_4@30
  int v18; // ST38_4@30
  int v19; // eax@30
  signed int v20; // ebp@32
  int v21; // edi@35
  int v22; // eax@38
  int j; // ecx@38
  unsigned __int8 v24; // bl@45
  signed int v25; // esi@45
  int v26; // ST3C_4@46
  int v27; // ST38_4@46
  int v28; // eax@46
  unsigned __int8 v29; // bl@47
  signed int v30; // esi@47
  int v31; // ST3C_4@48
  int v32; // ST38_4@48
  int v33; // eax@48
  unsigned __int8 v34; // si@52
  int v35; // eax@54
  int v36; // eax@67
  int k; // ecx@67
  void *v38=malloc(1); // ecx@71
  signed int v39; // ebp@82
  unsigned __int8 v40; // di@83
  signed int v41; // esi@83
  int v42; // ST3C_4@84
  int v43; // ST38_4@84
  int v44; // eax@84
  int v45; // edi@114
  signed int v46; // ebp@114
  int v47; // eax@118
  int l; // ecx@118
  unsigned __int8 v49; // bl@124
  signed int v50; // esi@124
  int v51; // ST3C_4@125
  int v52; // ST38_4@125
  int v53; // eax@125
  unsigned __int8 v54; // bl@126
  signed int v55; // esi@126
  int v56; // ST3C_4@127
  int v57; // ST38_4@127
  int v58; // eax@127
  signed int v59; // [sp+10h] [bp-8h]@21
  signed int v60; // [sp+10h] [bp-8h]@35
  signed int v61; // [sp+10h] [bp-8h]@114
  signed int v62; // [sp+14h] [bp-4h]@52

  v0 = 0;
  v1 = 2;
  v2 = (int)dword_4608F0;
  do
  {
    if ( *(_DWORD *)(v2 - 108) > v0 && v1 - 2 != driverId )
      v0 = *(_DWORD *)(v2 - 108);
    if ( *(_DWORD *)v2 > v0 && v1 - 1 != driverId )
      v0 = *(_DWORD *)v2;
    if ( *(_DWORD *)(v2 + 108) > v0 && v1 != driverId )
      v0 = *(_DWORD *)(v2 + 108);
    if ( *(_DWORD *)(v2 + 216) > v0 && v1 + 1 != driverId )
      v0 = *(_DWORD *)(v2 + 216);
    if ( *(_DWORD *)(v2 + 324) > v0 && v1 + 2 != driverId )
      v0 = *(_DWORD *)(v2 + 324);
    v1 += 5;
    v2 += 540;
  }
  while ( v1 - 2 < 20 );
  if ( !isMultiplayerGame && drivers[driverId].rank > v0 )
    sabotageAvailable_45EFFC = 0;
  sub_4224E0();
  v59 = 50;
  v3 = 6553600;
  v4 = 65500;
  do
  {
    wait();
    setMusicVolume(v4);
    if ( v59 % 2 )
    {
      v5 = 0;
      for ( i = 0; i < continueAnimCurrentFrame_4611D0; ++i )
        v5 += continueAnimFramesSize_4611D0[i];
      copyImageToBuffer((int)((char *)contaniBpk + v5), (int)dword_461EA4);
      drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 172592));	  
      drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
	  continueAnimCurrentFrame_4611D0 = continueAnimCurrentFrame_4611D0 % 24;
    }
    v10 = 0;
    v11 =0;
	//v11 = (signed int)dword_45FC44;
    do
    {
      v12 = (convertColorToPaletteColor((palette1[v11+2]), v3) + 0x8000) >> 16;
      v13 = (convertColorToPaletteColor(palette1[v11 + 1], v3) + 0x8000) >> 16;
      v14 = convertColorToPaletteColor((palette1[v11]), v3);
      setPaletteAndGetValue(v10, (v14 + 0x8000) >> 16, v13, v12);
      v11 += 3;
      ++v10;
    }
    while ( v11 < 288 );
	//while (v11 < (signed int)&unk_4600C4);
    v15 = -128;
    v16 = 384;
	//v16 = (signed int)&unk_460244;
    do
    {
      v17 = (convertColorToPaletteColor((palette1[v16 + 2]), v3) + 0x8000) >> 16;
      v18 = (convertColorToPaletteColor((palette1[v16 + 1]), v3) + 0x8000) >> 16;
      v19 = convertColorToPaletteColor((palette1[v16]), v3);
      setPaletteAndGetValue(v15, (v19 + 0x8000) >> 16, v18, v17);
      v16 += 3;
      ++v15;
	  /* v17 = (convertColorToPaletteColor(*(_DWORD *)(v16 + 4), v3) + 0x8000) >> 16;
      v18 = (convertColorToPaletteColor(*(_DWORD *)v16, v3) + 0x8000) >> 16;
      v19 = convertColorToPaletteColor(*(_DWORD *)(v16 - 4), v3);
      setPaletteAndGetValue(v15, (v19 + 0x8000) >> 16, v18, v17);
      v16 += 3;
      ++v15;*/
    }
    while ( v16 <maxPaletteEntries );
    v4 -= 1310;
    v3 -= 0x20000;
    --v59;
  }
  while ( v4 >= 0 );
  LOWORD(dword_462D7C) = sub_43C1F0() & 0xFF00;
  dword_462D7C = (unsigned __int16)dword_462D7C;
  musicSetOrder(12544);
  undergroundOptionSelected_dword_461278 = 5;
  drawBlackMarketScreen();
  v20 = 0;
  if ( dword_456B78 || (drawBorder(426, 243, 108, 114), dword_456B78) )
    undergroundMarketPopup();
  refreshAllScreen();
  sub_4224E0();
  v60 = 0;
  v21 = 0;
  do
  {
    wait();
    setMusicVolume(v20);
    if ( v60 % 2 && !dword_456B78 )
    {
      v22 = 0;
      for ( j = 0; j < continueAnimCurrentFrame_4611D0; ++j )
        v22 += continueAnimFramesSize_4611D0[j];
      copyImageToBuffer((int)((char *)contaniBpk + v22), (int)dword_461EA4);
      drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 172592));
      drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
	  continueAnimCurrentFrame_4611D0 = continueAnimCurrentFrame_4611D0 % 24;
    }
    if ( v60 % 2 && dword_456B78 )
      drawCursor(164, 321);
    v24 = 0;
    //v25 = (signed int)dword_45FC44;
	v25 = 0;
    do
    {
      v26 = (convertColorToPaletteColor((palette1[v25+2]), v21) + 0x8000) >> 16;
      v27 = (convertColorToPaletteColor(palette1[v25 + 1], v21) + 0x8000) >> 16;
      v28 = convertColorToPaletteColor((palette1[v25 ]), v21);
      setPaletteAndGetValue(v24, (v28 + 0x8000) >> 16, v27, v26);
      v25 += 3;
      ++v24;
    }
    while ( v25 < 289 );
	//while (v25 < (signed int)&unk_4600C4);
    v29 = -128;
	v30 = 384;
	//v30 = (signed int)&unk_460244;
    do
    {
      v31 = (convertColorToPaletteColor((palette1[v30 + 2]), v21) + 0x8000) >> 16;
      v32 = (convertColorToPaletteColor((palette1[v30 + 1]), v21) + 0x8000) >> 16;
      v33 = convertColorToPaletteColor((palette1[v30]), v21);
      setPaletteAndGetValue(v29, (v33 + 0x8000) >> 16, v32, v31);
      v30 += 3;
      ++v29;
	  /*v31 = (convertColorToPaletteColor(*(_DWORD *)(v30 + 4), v21) + 0x8000) >> 16;
      v32 = (convertColorToPaletteColor(*(_DWORD *)v30, v21) + 0x8000) >> 16;
      v33 = convertColorToPaletteColor(*(_DWORD *)(v30 - 4), v21);
      setPaletteAndGetValue(v29, (v33 + 0x8000) >> 16, v32, v31);
      v30 += 12;
      ++v29;*/
    }
    while ( v30 < maxPaletteEntries );
    v20 += 1310;
    v21 += 0x20000;
    ++v60;
  }
  while ( v20 < 65500 );
  if ( dword_456B78 )
  {
    sub_42C780();
    dword_456B78 = 0;
    drawBlackMarketScreen();
    drawBorder(426, 243, 108, 114);
    refreshAllScreen();
  }
  v62 = 0;
  v34 = 1;
  while ( !dword_456B58 )
  {
    sub_42A570();
    sub_42A570();
    v35 = dword_456B70;
    if ( dword_456B70 > 0 )
      v35 = dword_456B70-- - 1;
    switch ( undergroundOptionSelected_dword_461278 )
    {
      case LOANSHARK:
        if ( v35 == 1 )
        {
          drawLoanShark();
          refreshAllScreen();
        }
        break;
      case MINES:
        if ( v35 == 1 )
        {
          drawBlackMarketElement0();
          refreshAllScreen();
        }
        break;
      case SPIKES:
        if ( v35 == 1 )
        {
          drawBlackMarketElement1();
          refreshAllScreen();
        }
        break;
      case ROCKET:
        if ( v35 == 1 )
        {
          drawBlackMarketElement2();
          refreshAllScreen();
        }
        break;
      case SABOTAGE:
        if ( v35 == 1 )
        {
          drawBlackMarketElement3();
          refreshAllScreen();
        }
        break;
      case CONTINUE:
        v36 = 0;
        for ( k = 0; k < continueAnimCurrentFrame_4611D0; ++k )
          v36 += continueAnimFramesSize_4611D0[k];
        copyImageToBuffer((int)((char *)contaniBpk + v36), (int)dword_461EA4);
        drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 172592));
        drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
		continueAnimCurrentFrame_4611D0 = continueAnimCurrentFrame_4611D0 % 24;
        break;
      default:
        break;
    }
    switch ( eventDetected() )
    {
      case KEY_F1:
        if ( isMultiplayerGame )
          sub_42CCF0();
        break;
      case KEY_UP:
      case 0xC8:
        if ( undergroundOptionSelected_dword_461278 == MINES )
        {
          loadMenuSoundEffect(v34, 26, 0, configuration.musicVolume, dword_445198);
          undergroundOptionSelected_dword_461278 = LOANSHARK;
          drawLoanShark();
          drawBorder2(10, 243, 0x6Cu, 114);
          drawBorder(10, 115, 108, 114);
          refreshAllScreen();
        }
        break;
      case KEY_DOWN:
      case 0xD0:
        if ( undergroundOptionSelected_dword_461278== LOANSHARK )
        {
          loadMenuSoundEffect(v34, 26, 0, configuration.musicVolume, dword_445198);
          undergroundOptionSelected_dword_461278 = MINES;
          drawBlackMarketElement0();
          drawBorder2(10, 115, 0x6Cu, 114);
          drawBorder(10, 243, 108, 114);
          refreshAllScreen();
        }
        break;
      case KEY_LEFT:
      case 0xCB:
        underGroundMenuLeft();
        break;
      case KEY_RIGHT:
      case 0xCD:
        underGroundMenuRight();
        break;
      case KEY_ENTER:
      case 0x9C:
        underGroundMenuEnter(v38);
        break;
      case KEY_ESCAPE:
        dword_456B60 = 1;
        v62 = -1;
        break;
      default:
        break;
    }
    v39 = autoLoadSave();
    if ( v39 > 0 )
    {
      memcpy((char *)screenBuffer + 61440, (char *)graphicsGeneral.menubg5Bpk + 61440, 0x29B80u);
      drawBlackMarketScreen();
      sub_4224E0();
      v40 = 32;
      v41 = (signed int)&unk_45FDC4;
      do
      {
        v42 = (convertColorToPaletteColor(*(_DWORD *)(v41 + 4), 6553600) + 0x8000) >> 16;
        v43 = (convertColorToPaletteColor(*(_DWORD *)v41, 6553600) + 0x8000) >> 16;
        v44 = convertColorToPaletteColor(*(_DWORD *)(v41 - 4), 6553600);
        setPaletteAndGetValue(v40, (v44 + 0x8000) >> 16, v43, v42);
        v41 += 12;
        ++v40;
      }
      while ( v41 < maxPaletteEntries );
      drawBorder2(426, 243, 0x6Cu, 114);
      drawBorder2(10, 115, 0x6Cu, 114);
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder2(322, 243, 0x6Cu, 114);
      if ( undergroundOptionSelected_dword_461278 = LOANSHARK )
      {
        drawBorder(10, 115, 108, 114);
        drawLoanShark();
      }
      if ( undergroundOptionSelected_dword_461278 == MINES )
      {
        drawBorder(10, 243, 108, 114);
        drawBlackMarketElement0();
      }
      if ( undergroundOptionSelected_dword_461278 == SPIKES )
      {
        drawBorder(114, 243, 108, 114);
        drawBlackMarketElement1();
      }
      if ( undergroundOptionSelected_dword_461278 == ROCKET )
      {
        drawBorder(218, 243, 108, 114);
        drawBlackMarketElement2();
      }
      if ( undergroundOptionSelected_dword_461278 == SABOTAGE )
      {
        drawBorder(322, 243, 108, 114);
        drawBlackMarketElement3();
      }
      if ( undergroundOptionSelected_dword_461278 == CONTINUE )
      {
        drawBorder(426, 243, 108, 114);
        sub_423350();
      }
      drawTransparentBlock(0, 371, 639, 109);
      if ( isMultiplayerGame )
      {
        drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
      }
      drawBottomMenuText();
      refreshAllScreen();
      memcpy(dword_461ED8, screenBuffer, 0x4B000u);
      switch ( v39 )
      {
        case 1:
          confirmationPopup("Game Saved.");
          break;
        case 2:
          confirmationPopup("Game Loaded.");
          break;
        case 3:
          confirmationPopup("Game not found.");
          break;
      }
      memcpy(screenBuffer, dword_461ED8, 0x4B000u);
      refreshAllScreen();
      v34 = 1;
    }
    if ( isMultiplayerGame && dword_456B9C )
    {
      v62 = -1;
      break;
    }
    if ( v62 )
      break;
  }
  dword_456B58 = 1;
  if ( dword_456B9C )
  {
    dword_456B6C = 1;
    return;
  }
  if ( !dword_456B64 )
  {
    sub_4224E0();
    v61 = 50;
    v45 = 6553600;
    v46 = 65500;
    do
    {
      wait();
      if ( v61 % 2 && undergroundOptionSelected_dword_461278 == CONTINUE )
      {
        if ( v62 != -1 )
          goto LABEL_124;
        v47 = 0;
        for ( l = 0; l < continueAnimCurrentFrame_4611D0; ++l )
          v47 += continueAnimFramesSize_4611D0[l];
        copyImageToBuffer((int)((char *)contaniBpk + v47), (int)dword_461EA4);
        drawImageWithPosition2((int)dword_461EA4, 96, 64, (int)((char *)screenBuffer + 172592));
        drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
		continueAnimCurrentFrame_4611D0 = continueAnimCurrentFrame_4611D0 % 64;
      }
      else if ( v62 != -1 )
      {
        goto LABEL_124;
      }
      setMusicVolume(v46);
LABEL_124:
      v49 = 0;
      v50 = 0;
	  //v50 = (signed int)dword_45FC44;
      do
      {
        v51 = (convertColorToPaletteColor((palette1[v50+2]), v45) + 0x8000) >> 16;
        v52 = (convertColorToPaletteColor(palette1[v50 + 1], v45) + 0x8000) >> 16;
        v53 = convertColorToPaletteColor((palette1[v50 ]), v45);
        setPaletteAndGetValue(v49, (v53 + 0x8000) >> 16, v52, v51);
        v50 += 3;
        ++v49;
      }
      while ( v50 < 289 );
	  //while (v50 < (signed int)&unk_4600C4);
      v54 = -128;
	  //v55 = (signed int)&unk_460244;
      v55 = 384;
      do
      {
        v56 = (convertColorToPaletteColor((palette1[v55 + 2]), v45) + 0x8000) >> 16;
        v57 = (convertColorToPaletteColor((palette1[v55 + 1]), v45) + 0x8000) >> 16;
        v58 = convertColorToPaletteColor((palette1[v55 ]), v45);
        setPaletteAndGetValue(v54, (v58 + 0x8000) >> 16, v57, v56);
        v55 += 3;
        ++v54;
      }
      while ( v55 < maxPaletteEntries );
      v46 -= 1310;
      v45 -= 0x20000;
      --v61;
    }
    while ( v46 >= 0 );
  }
}


//----- (004373B0) --------------------------------------------------------
void enterShop()
{
  int v0; // edi@1
  int v1; // ecx@1
  __int64 v2; // rax@2
  int v3; // esi@2
  int v4; // edi@4
  int v5; // ebx@6
  unsigned int v6; // eax@9
  char *v7; // edi@9
  char v8; // cl@10
  char *v9; // edi@11
  char v10; // al@12
  int v11; // ST44_4@13
  int v12; // eax@13
  char *v13; // edi@13
  char v14; // al@14
  unsigned int v15; // eax@15
  char *v16; // edi@15
  char v17; // cl@16
  int v18; // ST44_4@17
  char *v19; // eax@17
  char v20; // dl@18
  unsigned int v21; // eax@19
  char *v22; // edi@19
  char v23; // cl@20
  char *v24; // edi@21
  char v25; // al@22
  int v26; // ST44_4@23
  unsigned int v27; // eax@25
  char *v28; // edi@25
  char v29; // cl@26
  char *v30; // edi@27
  char v31; // al@28
  int v32; // ST44_4@29
  int v33; // ecx@29
  char *v34; // eax@29
  char *v35; // esi@29
  char v36; // dl@30
  char *v37; // edi@31
  char v38; // al@32
  char *v39; // edi@33
  char v40; // al@34
  unsigned int v41; // eax@35
  char *v42; // edi@35
  char v43; // cl@36
  int v44; // ST44_4@37
  signed int v45; // ebp@38
  int v46; // esi@39
  bool v47; // zf@39
  bool v48; // sf@39
  unsigned __int8 v49; // of@39
  signed int v50; // eax@41
  char *v51; // ecx@42
  char v52; // al@45
  signed int v53; // edx@54
  char *v54; // edi@55
  signed int v55; // edx@59
  char *v56; // edi@60
  int v57; // ecx@63
  int v58; // eax@63
  char v59; // bl@63
  int v60; // eax@69
  int v61; // eax@70
  char *v62; // edx@70
  signed int v63; // ecx@70
  int v64; // eax@70
  signed int v65; // edx@70
  float v66; // ST50_4@70
  float v67; // ST4C_4@70
  float v68; // ST48_4@70
  signed int v69; // edx@70
  char *v70; // edi@71
  int v71; // eax@75
  int v72; // edx@78
  int *v73; // ecx@81
  int v74; // edx@84
  int *v75; // ecx@87
  int v76; // eax@91
  int v77; // eax@93
  int v78; // ecx@93
  int v79; // eax@95
  int v80; // eax@97
  int v81; // ecx@97
  int v82; // eax@99
  int v83; // eax@101
  int v84; // ecx@101
  int v85; // ecx@103
  int v86; // edi@103
  __int64 v87; // rax@105
  __int64 v88; // rax@108
  int v89; // eax@117
  int v90; // esi@121
  signed int v91; // eax@125
  signed int v92; // eax@129
  int v93; // eax@132
  signed int v94; // edx@132
  int v95; // ecx@132
  int v96; // [sp+8h] [bp-68h]@7
  signed int v97; // [sp+1Ch] [bp-54h]@70
  char DstBuf[20]; // [sp+20h] [bp-50h]@6
  int v99; // [sp+34h] [bp-3Ch]@9
  int v100; // [sp+38h] [bp-38h]@9
  int v101; // [sp+3Ch] [bp-34h]@9
  int v102; // [sp+40h] [bp-30h]@9
  __int16 v103; // [sp+44h] [bp-2Ch]@9

  v0 = (unsigned __int64)ceil((double)drivers[driverId].carMoneyCost  * 0.25);
  v1 =  driverId;
  if ( useWeapons )
  {
    v2 = drivers[v1].damage * (cars[drivers[v1].carType].repairCost / 10);
    v3 = ((signed int)v2 - HIDWORD(v2)) >> 1;
  }
  else
  {
    v3 = drivers[v1].damage * (cars[drivers[v1].carType].repairCost / 10);
  }
  v4 = v0 - v3;
  if ( v4 < 0 )
    v4 = 0;
  itoa(v4, DstBuf, 10);
  *((byte *)&v97 + strlen(DstBuf) + 3) = 48;
  v5 = atoi(DstBuf);
  switch ( menuOptionSelected_463DF0 )
  {
    case BUY_CAR:
      v96 =  cars[actualCarSelected].cost - v5;
      if ( v96 >= 0 )
      {
        if ( hasInsuficientMoneyToBuy(v96) )
          return;
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        createPopup(144, 114, 384, 119, 1);
        v101 = 1701257316;
        v99 = 544567129;
        v100 = 1819635575;
        v102 = 543236212;
        v103 = 36;
        itoa(v5, DstBuf, 10);
        v27 = strlen(DstBuf) + 1;
        v28 = &DstBuf[19];
        do
          v29 = (v28++)[1];
        while ( v29 );
        memcpy(v28, DstBuf, v27);
        v30 = &DstBuf[19];
        do
          v31 = (v30++)[1];
        while ( v31 );
        *(_DWORD *)v30 = 1717924384;
        v32 = (int)graphicsGeneral.fsma3cBpk;
        *((_DWORD *)v30 + 1) = 6581877;
        drawTextWithFont(v32, (int)&byte_4458B0, (const char *)&v99, 79530);
        memcpy(&v99, "from your old car and upgrades.", 0x20u);
        drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 89770);
        v33 = 1760 * actualCarSelected;
        v34 = &aVagabond[1760 * actualCarSelected];
        v35 = (char *)((char *)&v99 - v34);
        do
        {
          v36 = *v34;
          v34[(_DWORD)v35] = *v34;
          ++v34;
        }
        while ( v36 );
        v37 = &DstBuf[19];
        do
          v38 = (v37++)[1];
        while ( v38 );
        *(_DWORD *)v37 = 1970239264;
        *((_DWORD *)v37 + 1) = 1663067244;
        *((_DWORD *)v37 + 2) = 544502639;
        v37[12] = 0;
        itoa(*(int *)((char *)&dword_44DF5C + v33) - v5, DstBuf, 10);
        v39 = &DstBuf[19];
        do
          v40 = (v39++)[1];
        while ( v40 );
        *(_WORD *)v39 = 36;
        v41 = strlen(DstBuf) + 1;
        v42 = &DstBuf[19];
        do
          v43 = (v42++)[1];
        while ( v43 );
        memcpy(v42, DstBuf, 4 * (v41 >> 2));
        v44 = (int)graphicsGeneral.fsma3cBpk;
        memcpy(&v42[4 * (v41 >> 2)], &DstBuf[4 * (v41 >> 2)], v41 & 3);
        drawTextWithFont(v44, (int)&byte_4458B0, (const char *)&v99, 100010);
        v100 = 1702060392;
        v101 = 544500000;
        v99 = 1668445520;
        LOWORD(v102) = 63;
        drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 110250);
      }
      else
      {
        if ( hasInsuficientMoneyToBuy(v96) )
          return;
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        createPopup(144, 114, 384, 119, 1);
        v101 = 1701257316;
        v99 = 544567129;
        v100 = 1819635575;
        v102 = 543236212;
        v103 = 36;
        itoa(v5, DstBuf, 10);
        v6 = strlen(DstBuf) + 1;
        v7 = &DstBuf[19];
        do
          v8 = (v7++)[1];
        while ( v8 );
        memcpy(v7, DstBuf, v6);
        v9 = &DstBuf[19];
        do
          v10 = (v9++)[1];
        while ( v10 );
        *(_DWORD *)v9 = 1717924384;
        v11 = (int)graphicsGeneral.fsma3cBpk;
        *((_DWORD *)v9 + 1) = 6581877;
        drawTextWithFont(v11, (int)&byte_4458B0, (const char *)&v99, 79530);
        memcpy(&v99, "from your old car and upgrades.", 0x20u);
        drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 89770);
        v99 = 1701736269;
        v102 = 540697701;
        v12 = cars[actualCarSelected].cost;
        v101 = 1852994932;
        v100 = 1701978233;
        LOBYTE(v103) = 0;
        itoa(abs(v12 - v5), DstBuf, 10);
        v13 = &DstBuf[19];
        do
          v14 = (v13++)[1];
        while ( v14 );
        *(_WORD *)v13 = 36;
        v15 = strlen(DstBuf) + 1;
        v16 = &DstBuf[19];
        do
          v17 = (v16++)[1];
        while ( v17 );
        memcpy(v16, DstBuf, 4 * (v15 >> 2));
        v18 = (int)graphicsGeneral.fsma3cBpk;
        memcpy(&v16[4 * (v15 >> 2)], &DstBuf[4 * (v15 >> 2)], v15 & 3);
        drawTextWithFont(v18, (int)&byte_4458B0, (const char *)&v99, 100010);
        BYTE2(v100) = 0;
        v19 = &aVagabond[1760 * actualCarSelected];
        v99 = 544830786; //buy
        LOWORD(v100) = 8289;
        do
          v20 = *v19++;
        while ( v20 );
        v21 = v19 - &aVagabond[1760 * actualCarSelected];
        v22 = &DstBuf[19];
        do
          v23 = (v22++)[1];
        while ( v23 );
        memcpy(v22, &aVagabond[1760 * actualCarSelected], v21);
        v24 = &DstBuf[19];
        do
          v25 = (v24++)[1];
        while ( v25 );
        *(_WORD *)v24 = 16160;
        v26 = (int)graphicsGeneral.fsma3cBpk;
        v24[2] = 0;
        drawTextWithFont(v26, (int)&byte_4458B0, (const char *)&v99, 110250);
      }
      drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "yes", 118640);
      drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "no", 118810);
      refreshAllScreen();
      v45 = 0;
      while ( 2 )
      {
        v46 = 170 * v45 + 123097;
        sub_42A570();
        sub_42A570();
        drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
        drawKeyCursor(90256, (char *)screenBuffer + 90256, 0x60u, 64);
		carAnimCurrentFrame_45FBA0 = carAnimCurrentFrame_45FBA0 % 64;
        v50 = 0;
        do
        {
          v51 = (char *)screenBuffer + v50 + v46;
          *(_DWORD *)v51 = -993737532;
          *((_DWORD *)v51 + 1) = -993737532;
          *((_DWORD *)v51 + 2) = -993737532;
          v50 += 640;
          *((_DWORD *)v51 + 3) = -993737532;
          *((_DWORD *)v51 + 4) = -993737532;
        }
        while ( v50 < 12800 );
        drawImageWithPosition((int)((char *)cursorBpk + 400 * cursorBpkFrame), 20, 20, (int)((char *)screenBuffer + v46));
        drawKeyCursor(123045, (char *)screenBuffer + 123045, 0x14Fu, 28);
		cursorBpkFrame = cursorBpkFrame % 48;
        v52 = eventDetected();
        if ( v52 == 21 )
        {
          v52 = -53;
        }
        else if ( v52 == 49 )
        {
          v52 = -51;
        }
        switch ( v52 )
        {
          default:
            continue;
          case KEY_F1:
            if ( isMultiplayerGame )
              sub_42CCF0();
            continue;
          case KEY_LEFT:
          case 0xCB:
            if ( v45 == 1 )
              loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
            v45 = 0;
            v53 = 0;
            do
            {
              v54 = (char *)screenBuffer + v53 + 123048;
              memset(v54, 0xC4u, 0x14Cu);
              v54 += 332;
              *(_WORD *)v54 = -15164;
              v53 += 640;
              v54[2] = -60;
            }
            while ( v53 < 16000 );
            drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "yes", 118640);
            drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "no", 118810);
            continue;
          case KEY_RIGHT:
          case 0xCD:
            if ( !v45 )
              loadMenuSoundEffect(1u, 25, 0, configuration.musicVolume, dword_445194);
            v45 = 1;
            v55 = 0;
            do
            {
              v56 = (char *)screenBuffer + v55 + 123048;
              memset(v56, 0xC4u, 0x14Cu);
              v56 += 332;
              *(_WORD *)v56 = -15164;
              v55 += 640;
              v56[2] = -60;
            }
            while ( v55 < 16000 );
            drawTextWithFont((int)fbig3bBpk, (int)&unk_445848, "yes", 118640);
            drawTextWithFont((int)graphicsGeneral.fbig3aBpk, (int)&unk_445848, "no", 118810);
            continue;
          case KEY_ENTER:
          case 0x9C:
            loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
            if ( v45 )
              goto LABEL_90;
            loadMenuSoundEffect(5u, 4, 0, configuration.musicVolume, 147456);
            v57 = actualCarSelected;
            v58 =  driverId;
            drivers[driverId].carType = actualCarSelected;
			drivers[driverId].money += v5 - cars[drivers[driverId].carType].cost;
			drivers[driverId].carMoneyCost = cars[drivers[driverId].carType].cost;
			drivers[driverId].damage = 0;
			drivers[driverId].engine = 0;
			drivers[driverId].tire = 0;
			drivers[driverId].armour = 0;
            drawCarRightSide();
            reloadEngineAnimation2();
            reloadArmourAnimation2();
            reloadTireAnimation2();
            reloadRepairAnimation();
            reloadCarAnimation2();
            createPopup(144, 114, 384, 119, 1);
            drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 124988));
            memcpy(&v99, "Use arrows to change the color", 0x1Fu);
            drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 79530);
            memcpy(&v99, "of your car and press Enter", 0x1Cu);
            drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 89770);
            v99 = 1852139639;
            v100 = 1852401184;
            v101 = 1701344105;
            LOWORD(v102) = 11876;
            BYTE2(v102) = 0;
            drawTextWithFont((int)graphicsGeneral.fsma3cBpk, (int)&byte_4458B0, (const char *)&v99, 100010);
            refreshAllScreen();
            v59 = 0;
            do
            {
              if ( v59 == -100 || dword_456B9C )
                break;
              v59 = eventDetected();
              if ( v59 == 59 )
              {
                if ( isMultiplayerGame )
                  sub_42CCF0();
                v60 = driverId;
              }
              else
              {
                v60 = driverId;
                if ( v59 == -53 )
                {
					v72 = drivers[driverId].colour;
                  if ( v72 > 0 )
					  drivers[driverId].colour = v72 - 2;
                }
                if ( v59 == 75 )
                {
                  v73 = &drivers[driverId].colour;
                  if ( *v73 > 0 )
                    *v73 -= 2;
                }
                else
                {
                  if ( v59 == -51 )
                  {
                    v74 = drivers[driverId].colour;
                    if ( v74 < 253 )
						drivers[driverId].colour = v74 + 2;
                  }
                  if ( v59 == 77 )
                  {
                    v75 = &drivers[driverId].colour;
                    if ( *v75 < 253 )
                      *v75 += 2;
                  }
                }
              }
              v61 = drivers[driverId].colour;
              v62 = (char *)graphicsGeneral.copperPal + 2 * v61;
              v63 = (unsigned __int8)v62[v61 + 2];
              v64 = (int)&v62[v61];
              v65 = *(byte *)(v64 + 1);
              v66 = (double)v63;
              v97 = *(byte *)v64;
              v67 = (double)v65;
              v68 = (double)v97;
              setPaletteValueWithFloats(v68, v67, v66);
              v69 = 0;
              do
              {
                v70 = (char *)screenBuffer + v69 + 122422;
                memset(v70, 0xC4u, 0x124u);
                v69 += 640;
                *((_WORD *)v70 + 146) = -15164;
              }
              while ( v69 < 15360 );
              drawImageWithPosition((int)slidcop2Bpk, 294, 16, (int)((char *)screenBuffer + 124988));
              drawImageWithPosition(
                (int)slidcur3Bpk,
                10,
                24,
                (int)((char *)screenBuffer + drivers[driverId].colour + 122442));
              sub_42A570();
              sub_42A570();
              drawKeyCursor(
				  drivers[driverId].colour + 122440,
                (char *)screenBuffer + drivers[driverId].colour + 122440,
                0xEu,
                24);
              drawMenuAnimation(
                16,
                141,
                carAnimCurrentFrame_45FBA0,
				  getCarBpkById(actualCarSelected),
                (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
              drawKeyCursor(90256, (char *)screenBuffer + 90256, 0x60u, 64);
			  carAnimCurrentFrame_45FBA0 = carAnimCurrentFrame_45FBA0 % 64;
            }
            while ( v59 != 28 );
            v71 = drivers[driverId].carType;
            if ( v71 >= 5 )
            {
              actualCarSelected = 5;
              showCarBought();
              dword_456B70 = 310;
              refreshAllScreen();
            }
            else
            {
              actualCarSelected = v71 + 1;
              showCarBought();
              dword_456B70 = 310;
              refreshAllScreen();
            }
            break;
          case 1:
LABEL_90:
            reloadCarAnimation2();
            refreshAllScreen();
            break;
        }
        break;
      }
      break;
    case BUY_ENGINE:
      v76 = drivers[driverId].engine;
      if ( v76 >= cars[drivers[driverId].carType].engineUpgrades)
      {
        reloadEngineAnimation2();
        refreshAllScreen();
      }
      else if ( !hasInsuficientMoneyToBuy(cars[drivers[driverId].carType].engineUpgradeCosts[drivers[driverId].engine]) )
      {
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        v77 = 27 * driverId;
		drivers[driverId].money = drivers[driverId].money - cars[drivers[driverId].carType].engineUpgradeCosts[drivers[driverId].engine];
		drivers[driverId].carMoneyCost += cars[drivers[driverId].carType].engineUpgradeCosts[drivers[driverId].engine];
        reloadEngineAnimation();
        v78 = drivers[driverId].engine + 1;
        dword_456B70 = 310;
		drivers[driverId].engine = v78;
        drawCarRightSide();
        refreshAllScreen();
      }
      break;
    case BUY_TIRE:
      v79 = drivers[driverId].tire;
      if ( v79 >= cars[drivers[driverId].carType].tireUpgrades)
      {
        reloadTireAnimation2();
        refreshAllScreen();
      }
      else if ( !hasInsuficientMoneyToBuy(cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].tire]) )
      {
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        v80 = 27 * driverId;
		drivers[driverId].money = drivers[driverId].money- cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].tire];
		drivers[driverId].carMoneyCost += cars[drivers[driverId].carType].tireUpgradeCosts[drivers[driverId].tire];
        reloadTireAnimation();
        v81 = drivers[driverId].tire + 1;
        dword_456B70 = 310;
		drivers[driverId].tire = v81;
        drawCarRightSide();
        refreshAllScreen();
      }
      break;
    case BUY_ARMOUR:
      v82 = drivers[driverId].armour;
      if ( v82 >= cars[drivers[driverId].carType].armourUpgrades)
      {
        reloadArmourAnimation2();
        refreshAllScreen();
      }
      else if ( !hasInsuficientMoneyToBuy(cars[drivers[driverId].carType].armourUpgradeCosts[drivers[driverId].armour]) )
      {
        loadMenuSoundEffect(1u, 28, 0, configuration.musicVolume, dword_4451A0);
        v83 = driverId;
		drivers[driverId].money = drivers[driverId].money - cars[drivers[driverId].carType].armourUpgradeCosts[drivers[driverId].armour];
			
			
		drivers[driverId].carMoneyCost += cars[drivers[driverId].carType].armourUpgradeCosts[drivers[driverId].armour];
        reloadArmourAnimation();
        v84 = drivers[driverId].armour + 1;
        dword_456B70 = 310;
		drivers[driverId].armour = v84;
        drawCarRightSide();
        refreshAllScreen();
      }
      break;
    case REPAIR:
      v85 = driverId;
      v86 = drivers[ driverId].damage;
      if ( v86 >= 10 )
        goto LABEL_155;
      if ( useWeapons )
      {
        v87 = v86 * (cars[drivers[v85].carType].repairCost / 10);
        v3 = ((signed int)v87 - HIDWORD(v87)) >> 1;
      }
      if ( v86 >= 10 )
      {
LABEL_155:
        if ( useWeapons )
        {
          v88 = cars[drivers[v85].carType].repairCost;
          v3 = ((signed int)v88 - HIDWORD(v88)) >> 1;
        }
        if ( v86 >= 10 )
          goto LABEL_154;
      }
      if ( !useWeapons )
        v3 = v86 * (cars[drivers[v85].carType].repairCost / 10);
      if ( v86 >= 10 )
      {
LABEL_154:
        if ( !useWeapons )
          v3 = cars[drivers[v85].carType].repairCost;
      }
      if ( v86 > 0 && !hasInsuficientMoneyToBuy(v3) )
      {
        loadMenuSoundEffect(1u, 31, 0, configuration.musicVolume, dword_4451AC);
        v89 = driverId;
        if ( drivers[v89].damage >= 10 )
			drivers[v89].damage -= 10;
        else
			drivers[driverId].damage = 0;
		drivers[v89].money -= v3;
		drivers[v89].carMoneyCost += v3;
        drawCarRightSide();
        reloadRepairAnimation();
        refreshAllScreen();
      }
      break;
    case CONTINUE:
    
      if ( drivers[driverId].damage != 100 || useWeapons )
      {
        if ( isMultiplayerGame )
        {
          selectedRace_462CE8 = 0;
          v91 = setUndergroundMarketPrices();
          dword_456B84 = v91;
          if (useWeapons && v91 )
          {
            enterBlackMarketScreen();
            dword_456B58 = 1;
          }
          else
          {
            loadMenuSoundEffect(1u, 24, 0, configuration.musicVolume, dword_445190);
            previewRaceScreen(dword_456758);
            dword_456B58 = 1;
          }
        }
        else
        {
          v92 = setUndergroundMarketPrices();
          dword_456B84 = v92;
          if (useWeapons && v92 )
          {
            enterBlackMarketScreen();
          }
          else
          {
            loadMenuSoundEffect(1u, 24, 0, configuration.musicVolume, dword_445190);
            v93 = 0;
            v94 = 2;
            v95 = (int)dword_4608F0;
            do
            {
              if ( *(_DWORD *)(v95 - 108) > v93 )
              {
                v5 = v94 - 2;
                if ( v94 - 2 != driverId )
                  v93 = *(_DWORD *)(v95 - 108);
              }
              if ( *(_DWORD *)v95 > v93 )
              {
                v5 = v94 - 1;
                if ( v94 - 1 != driverId )
                  v93 = *(_DWORD *)v95;
              }
              if ( *(_DWORD *)(v95 + 108) > v93 && v94 != driverId )
                v93 = *(_DWORD *)(v95 + 108);
              if ( *(_DWORD *)(v95 + 216) > v93 )
              {
                v5 = v94 + 1;
                if ( v94 + 1 != driverId )
                  v93 = *(_DWORD *)(v95 + 216);
              }
              if ( *(_DWORD *)(v95 + 324) > v93 )
              {
                v5 = v94 + 2;
                if ( v94 + 2 != driverId )
                  v93 = *(_DWORD *)(v95 + 324);
              }
              v94 += 5;
              v95 += 540;
            }
            while ( v94 - 2 < 20 );
            if ( drivers[ driverId].points <= v93 )
              selectRaceScreen();
            else
              adversaryPreviewScreen((const char **)v5);
          }
        }
      }
      else
      {
        createPopup(144, 114, 384, 119, 1);
        writeTextInScreen("[Repair your car first.", 79530);
        writeTextInScreen((const char *)&unk_444160, 89770);
        writeTextInScreen("What'cha gonna do with that pile of", 100010);
        writeTextInScreen("junk, carry it around? Let me spell", 110250);
        writeTextInScreen("this out for you: R-E-P-A-I-R.", 120490);
        refreshAllScreen();
        loadMenuSoundEffect(2u, 23, 0, configuration.musicVolume, dword_44518C);
      }
      break;
    default:
      return;
  }
}


//----- (004387D0) --------------------------------------------------------
char postLoadedOrLicense()
{
  int v0; // esi@1
  int v1; // ecx@1
  __int64 v2; // rax@2
  int v3; // eax@2
  int v4; // eax@9
  char *v5; // ecx@9
  signed int v6; // edx@9
  int v7; // eax@9
  float v8; // ST3C_4@9
  float v9; // ST38_4@9
  float v10; // ST34_4@9
  int v11; // eax@10
  int v12; // ebp@13
  int v13; // esi@35
  int v14; // edi@39
  int v15; // esi@59
  int v16; // edi@60
  bool v17; // zf@63
  bool v18; // sf@63
  unsigned __int8 v19; // of@63
  int v20; // esi@73
  int v21; // edi@74
  unsigned __int8 v22; // di@78
  signed int v23; // esi@78
  int v24; // ST3C_4@79
  int v25; // ST38_4@79
  int v26; // eax@79
  unsigned __int8 v27; // di@80
  signed int v28; // esi@80
  int v29; // ST3C_4@81
  int v30; // ST38_4@81
  int v31; // eax@81
  int v32; // esi@93
  int v33; // edi@94
  signed int continuePlaying; // edi@99
  signed int v35; // ebp@100
  int v36; // eax@117
  int v37; // eax@147
  int v38; // esi@150
  int v39; // edi@150
  int v40; // edx@178
  double v41; // ST38_8@179
  char v42; // bl@195
  char v43; // dl@196
  char v44; // cl@196
  char v45; // dl@196
  char v46; // al@197
  int *v47; // eax@212
  int v48; // ebp@212
  signed int v49; // ebx@231
  unsigned __int8 v50; // di@232
  signed int v51; // esi@232
  int v52; // ST3C_4@233
  int v53; // ST38_4@233
  int v54; // eax@233
  signed int v56; // [sp+1Ch] [bp-2Ch]@17
  signed int v57; // [sp+20h] [bp-28h]@1
  int v58; // [sp+24h] [bp-24h]@4
  signed int v59; // [sp+28h] [bp-20h]@1
  signed int v60; // [sp+2Ch] [bp-1Ch]@48
  signed int v61; // [sp+30h] [bp-18h]@48
  signed int v62; // [sp+34h] [bp-14h]@17
  signed int v63; // [sp+38h] [bp-10h]@10
  char v64; // [sp+41h] [bp-7h]@196
  char v65=0; // [sp+42h] [bp-6h]@0
  char v66=0; // [sp+43h] [bp-5h]@0
  char v67 = 0; // [sp+44h] [bp-4h]@0
  char v68 = 0; // [sp+45h] [bp-3h]@0

  v57 = 0;
  v59 = 0;
  v0 = (unsigned __int64)ceil((double)drivers[driverId].carMoneyCost * 0.25);
  v1 = driverId;
  if ( useWeapons )
  {
    v2 = drivers[v1].damage * (cars[drivers[v1].carType].repairCost / 10);
    v3 = ((signed int)v2 - HIDWORD(v2)) >> 1;
  }
  else
  {
    v3 = drivers[v1].damage * (cars[drivers[v1].carType].repairCost / 10);
  }
  v58 = v0 - v3;
  if ( v0 - v3 < 0 )
    v58 = 0;

  if ( !dword_456B64 && (!dword_456B74 || isMultiplayerGame) )
  {
    memcpy((void *)dword_45FC00, screenBuffer, 0x4B000u);
    screenBuffer = (void *)dword_45FC00;
    memcpy((void *)(dword_45FC00 + 61440), (char *)graphicsGeneral.menubg5Bpk + 61440, 0x29B80u);
    drawShopAnimationAndRightSide();
	v4 = drivers[driverId].colour;
	//v4 = dword_46086C[27 * driverId];
    v5 = (char *)graphicsGeneral.copperPal + 2 * v4;
    v6 = (unsigned __int8)v5[v4 + 2];
    v7 = (int)&v5[v4];
    v8 = (double)v6;
    v9 = (double)*(byte *)(v7 + 1);
    v10 = (double)*(byte *)v7;
    setPaletteValueWithFloats(v10, v9, v8);
    screenBuffer = (void *)dword_461250;
    sub_42C4A0();
    refreshAllScreen();
  }
  v11 = isMultiplayerGame;
  menuOptionSelected_463DF0 = 5;
  v63 = 0;
  dword_456B58 = 0;
  do
  {
    if ( dword_456B64 || v57 )
      break;
    v12 = 0;
    if ( dword_456B74 && !v11 )
    {
      sub_4224E0();	  
      selectRaceScreen();
    }
    if ( dword_456B58 != 1 )
      goto LABEL_166;
    dword_456B58 = 0;
    v62 = 0;
    memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u);
    drawShopAnimationAndRightSide();
    v56 = 0;
    if ( dword_456B74 )
    {
      welcomeShopPopup();
      v56 = 1;
    }
    else
    {
      if ( lapped_456BC0 == 1 )
      {
        lappedPopUp();
        v56 = 9;
LABEL_43:
        v62 = 1;
        goto LABEL_44;
      }
	  //resultados de carrera
      if ( consecutiveWins_456BA8 == 3 )
      {
        winStreakPopUp();
        v56 = 2;
      }
      else if ( noPaintJob_456BAC == 1 )
      {
        noPaintJobPopUp();
        v56 = 3;
      }
      else if ( allCarsCrash_456BB0 == 1 )
      {
        allCarsCrashPopUp();
        v56 = 4;
      }
      else
      {
        if ( drugQuest_456BB4 )
        {
          if ( steriodsNotFoundPopup() )
            v59 = 1;
          v56 = 5;
          goto LABEL_44;
        }
        if ( killOneQuest_456BB8 )
        {
          if ( killOnePopup() )
            v59 = 1;
          v56 = 6;
          goto LABEL_44;
        }
        v13 = 27 * driverId;
        if ( drivers[driverId].loanRaces == 4 )
		//if (dword_460878[27 * driverId] == 4)
        {
          if ( payBackTimePopup() )
            v59 = 1;
          v56 = 7;
          goto LABEL_44;
        }
		v14 = drivers[v13].money;
		///v14 = dword_460870[v13];
        if ( v14 + v58 < 1000 && v14 < getReapirCostByCarType() && drivers[v13].damage > 95 )
        {
          endGamePopup();
          v56 = 8;
          goto LABEL_43;
        }
      }
    }
LABEL_44:
    menuOptionSelected_463DF0 = 5;
    drawTransparentBlock(0, 371, 639, 109);
    if ( isMultiplayerGame )
    {
      drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
      drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
    }
    drawBottomMenuText();
    refreshAllScreen();
    if ( dword_456B60 )
      musicSetOrder(dword_462D7C);
    sub_4224E0();
    v60 = 0;
    v61 = 0;
    do
    {
      wait();
      if ( dword_456B60 )
        setMusicVolume(v61);
      if ( v60 % 2 )
      {
        if ( !dword_456B74
          && consecutiveWins_456BA8 != 3
          && noPaintJob_456BAC != 1
          && allCarsCrash_456BB0 != 1
          && !drugQuest_456BB4
          && !killOneQuest_456BB8
          && lapped_456BC0 != 1 )
        {
          //v15 = 27 * driverId;
          //if ( dword_460878[27 * driverId] != 4 )
		  v15 = driverId;
		  if (drivers[driverId].loanRaces != 4)
          {
            v16 = drivers[v15].money;
            if ( v16 + v58 >= 1000 && v16 >= getReapirCostByCarType() && drivers[v15].damage <= 95 )
            {
              drawMenuAnimation(432, 269, continueAnimCurrentFrame_4611D0, (int)contaniBpk, (int)continueAnimFramesSize_4611D0);
              drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
			  continueAnimCurrentFrame_4611D0 = continueAnimCurrentFrame_4611D0 % 64;
            }
          }
        }
      }
      if ( v60 % 2 )
      {
        if ( dword_456B74
          || consecutiveWins_456BA8 == 3
          || noPaintJob_456BAC == 1
          || allCarsCrash_456BB0 == 1
          || drugQuest_456BB4
          || killOneQuest_456BB8
          || lapped_456BC0 == 1
          || (v20 = driverId, drivers[ driverId].loanRaces == 4)
          || (v21 = drivers[v20].money, v21 + v58 < 1000) && v21 < getReapirCostByCarType() && drivers[v20].damage > 95 )
          drawCursor(164, 321);
      }
      v22 = 0;
      v23 = 0;
	  //v23 = (signed int)dword_45FC44;
      do
      {
        v24 = (convertColorToPaletteColor((palette1[v23+2]), v12) + 0x8000) >> 16;
        v25 = (convertColorToPaletteColor(palette1[v23 +1], v12) + 0x8000) >> 16;
        v26 = convertColorToPaletteColor((palette1[v23 ]), v12);
        setPaletteAndGetValue(v22, (v26 + 0x8000) >> 16, v25, v24);
        v23 += 3;
        ++v22;
      }
      while ( v23 <289 );
	  //while (v23 < (signed int)&unk_4600C4);
      v27 = -128;
	  v28 = 384;
	  //v28 = (signed int)&unk_460244;
      do
      {
        v29 = (convertColorToPaletteColor((palette1[v28 + 2]), v12) + 0x8000) >> 16;
        v30 = (convertColorToPaletteColor((palette1[v28 + 1]), v12) + 0x8000) >> 16;
        v31 = convertColorToPaletteColor((palette1[v28]), v12);
        setPaletteAndGetValue(v27, (v31 + 0x8000) >> 16, v30, v29);
        v28 += 3;
        ++v27;
      }
      while ( v28 < maxPaletteEntries );
      v12 += 0x20000;
      v19 = __OFSUB__(v61 + 1310, 65500);
      v18 = v61 - 64190 < 0;
      ++v60;
      v61 += 1310;
    }
    while ( v18 ^ v19 );
    if ( !dword_456B74
      && consecutiveWins_456BA8 != 3
      && noPaintJob_456BAC != 1
      && allCarsCrash_456BB0 != 1
      && !drugQuest_456BB4
      && !killOneQuest_456BB8
      && lapped_456BC0 != 1
      && (isMultiplayerGame || drivers[driverId].rank > 7)
      && dword_456B50 != 4 )
    {
      v32 =driverId;
      if ( drivers[driverId].loanRaces != 4 )
      {
        v33 = drivers[v32].money;
        if ( v33 + v58 >= 1000 || v33 >= getReapirCostByCarType() || drivers[v32].damage <= 95 )
          goto LABEL_165;
      }
    }
    if ( v56 )
    {
      sub_42C780();
      drawCarRightSide();
      refreshAllScreen();
    }
	continuePlaying = v59;
    if ( v59 == 1 )
    {
      endGamePopup();
      v35 = v59;
      refreshAllScreen();
      sub_42C780();
      if ( isMultiplayerGame )
      {
        drivers[driverId].money = 495 - (unsigned __int64)((double)dword_4456E8 * -0.2);
        drawCarRightSide();
      }
      else
      {
        v57 = 1;
      }
    }
    else
    {
      v35 = v62;
    }
    switch ( v56 )
    {
      case 1:
        dword_456B74 = 0;
        break;
      case 2:
        consecutiveWins_456BA8 = 0;
        break;
      case 3:
        noPaintJob_456BAC = 0;
        break;
      case 4:
        allCarsCrash_456BB0 = 0;
        break;
      case 5:
        drugQuest_456BB4 = 0;
        break;
      case 6:
        killOneQuest_456BB8 = 0;
        break;
      case 7:
        v36 = driverId;
        drivers[v36].loanType = NO_LOAN;
        drivers[v36].loanRaces = -1;
        break;
      case 9:
        lapped_456BC0 = 0;
        break;
      case 8:
        if ( isMultiplayerGame )
        {
          drivers[driverId].money = 495 - (unsigned __int64)((double)dword_4456E8 * -0.2);
          drawCarRightSide();
        }
        else
        {
          v57 = 1;
        }
        break;
    }
    while ( 1 )
    {
      while ( 1 )
      {
        while ( 1 )
        {
          while ( 1 )
          {
            while ( 1 )
            {
              if ( v57 )
              {
                v59 = continuePlaying;
                goto LABEL_157;
              }
              if ( lapped_456BC0 != 1 )
                break;
              lappedPopUp();
              refreshAllScreen();
              sub_42C780();
              lapped_456BC0 = 0;
              drawCarRightSide();
              refreshAllScreen();
              v35 = 1;
            }
            if ( consecutiveWins_456BA8 != 3 )
              break;
            winStreakPopUp();
            refreshAllScreen();
            sub_42C780();
            consecutiveWins_456BA8 = 0;
            drawCarRightSide();
            refreshAllScreen();
          }
          if ( noPaintJob_456BAC != 1 )
            break;
          noPaintJobPopUp();
          refreshAllScreen();
          sub_42C780();
          noPaintJob_456BAC = 0;
          drawCarRightSide();
          refreshAllScreen();
        }
        if ( allCarsCrash_456BB0 != 1 )
          break;
        allCarsCrashPopUp();
        refreshAllScreen();
        sub_42C780();
        allCarsCrash_456BB0 = 0;
        drawCarRightSide();
        refreshAllScreen();
      }
      if ( drugQuest_456BB4 )
      {
        if ( steriodsNotFoundPopup() )
			continuePlaying = 1;
        refreshAllScreen();
        sub_42C780();
        drugQuest_456BB4 = 0;
        goto LABEL_137;
      }
      if ( killOneQuest_456BB8 )
      {
        if ( killOnePopup() )
			continuePlaying = 1;
        refreshAllScreen();
        sub_42C780();
        killOneQuest_456BB8 = 0;
        goto LABEL_137;
      }
      if ( drivers[driverId].loanRaces != 4 )
        break;
      if ( payBackTimePopup() )
		  continuePlaying = 1;
      refreshAllScreen();
      sub_42C780();
      v37 =  driverId;
      drivers[v37].loanType = NO_LOAN;
      drivers[v37].loanRaces = -1;
LABEL_137:
      if (continuePlaying != 1 )
        goto LABEL_149;
	  continuePlaying = 0;
      endGamePopup();
      refreshAllScreen();
      v35 = 1;
      sub_42C780();
      if ( isMultiplayerGame )
      {
        drivers[driverId].money = 495 - (unsigned __int64)((double)dword_4456E8 * -0.2);
        drawCarRightSide();
        drawCarRightSide();
        refreshAllScreen();
      }
      else
      {
        v57 = 1;
LABEL_149:
        drawCarRightSide();
        refreshAllScreen();
      }
    }
    v38 = driverId;
    v59 = continuePlaying;
    v39 = drivers[ driverId].money;
    if ( v39 + v58 < 1000 && v39 < getReapirCostByCarType() && drivers[v38].damage > 95 )
    {
      endGamePopup();
      refreshAllScreen();
      v35 = 1;
      sub_42C780();
      if ( isMultiplayerGame )
      {
        drivers[driverId].money = 495 - (unsigned __int64)((double)dword_4456E8 * -0.2);
        drawCarRightSide();
        drawCarRightSide();
        refreshAllScreen();
      }
      else
      {
        v57 = 1;
        drawCarRightSide();
        refreshAllScreen();
      }
    }
LABEL_157:
    if ( dword_456B50 == 4 )
    {
      if ( !isMultiplayerGame && !v35 )
        sub_42E6F0();
      dword_456B50 = 0;
    }
    memcpy((char *)screenBuffer + 61440, (char *)graphicsGeneral.menubg5Bpk + 61440, 0x29B80u);
    drawShopAnimationAndRightSide();
    drawTransparentBlock(0, 371, 639, 109);
    if ( isMultiplayerGame )
    {
      drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
      drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
    }
    drawBottomMenuText();
    drawBorder(426, 243, 108, 114);
    refreshAllScreen();
LABEL_165:
    dword_456B60 = 0;
LABEL_166:
    sub_42A570();
    sub_42A570();
    if ( dword_456B70 > 0 )
      --dword_456B70;
    switch ( menuOptionSelected_463DF0 )
    {
      case BUY_CAR:
        drawMenuAnimation(16, 141, carAnimCurrentFrame_45FBA0, getCarBpkById(actualCarSelected), (int)&carAnimFrameSize_45FBA0[64 * actualCarSelected]);
        drawKeyCursor(90256, (char *)screenBuffer + 90256, 0x60u, 64);
		carAnimCurrentFrame_45FBA0 = (carAnimCurrentFrame_45FBA0 + 1) % 64; 
        if ( dword_456B70 == 1 )
        {
          reloadCarAnimation2();
          refreshAllScreen();
        }
        break;
      case BUY_ENGINE:
        if ( drivers[driverId].engine < cars[drivers[ driverId].carType].engineUpgrades )
        {
          drawMenuAnimation(
            16,
            269,
            engineAnimCurrentFrame_462D80,
			  getEngineBpkById(drivers[driverId].engine),
            (int)((char *)&engineAnimFrameSize_445F68 + 24 * drivers[driverId].engine));
          drawKeyCursor(172176, (char *)screenBuffer + 172176, 0x60u, 64);
		  engineAnimCurrentFrame_462D80 = (engineAnimCurrentFrame_462D80 + 1) % 24; ///aqui va 24 pprque son 24 frames
          
        }
        if ( dword_456B70 == 1 )
        {
          reloadEngineAnimation2();
          refreshAllScreen();
        }
        break;
		case BUY_TIRE:
        v40 = drivers[driverId].tire;
        if ( v40 < cars[drivers[driverId].carType].tireUpgrades )
        {
          drawMenuAnimation(120, 269, tireAnimCurrentFrame_45F034, 
			  getTireBpkById(drivers[driverId].tire) , (int)((char *)&tireAnimFrameSize_4460E8 + 12 * drivers[driverId].tire));
          drawKeyCursor(172280, (char *)screenBuffer + 172280, 0x60u, 64);
		  tireAnimCurrentFrame_45F034 = (tireAnimCurrentFrame_45F034 + 1) % 3; ///aqui va 23 pprque son 23 frames
          
        }
        if ( dword_456B70 == 1 )
        {
          reloadTireAnimation2();
          refreshAllScreen();
        }
        break;
      case BUY_ARMOUR:
        if ( drivers[driverId].armour < cars[drivers[driverId].carType].armourUpgrades )
        {
          drawMenuAnimation(
            224,
            269,
            armourAnimCurrentFrame_461288,
			  getArmourBpkById(drivers[driverId].armour),
            (int)((char *)&armourAnimFrameSize_4461A8 + 16 * drivers[driverId].armour));
          drawKeyCursor(172384, (char *)screenBuffer + 172384, 0x60u, 64);
          if ( armourAnimFrameDirection_45F034 )
          {
            --armourAnimCurrentFrame_461288;
            if ( armourAnimCurrentFrame_461288 < 1 )
              armourAnimFrameDirection_45F034 = 0;
          }
          else
          {
            ++armourAnimCurrentFrame_461288;
            if ( armourAnimCurrentFrame_461288 > 14 )
              armourAnimFrameDirection_45F034 = 1;
          }
        }
        if ( dword_456B70 == 1 )
        {
          reloadArmourAnimation2();
          refreshAllScreen();
        }
        break;
      case REPAIR:
        drawMenuAnimation(328, 269, repairAnimCurrentFrame_45EEAC, (int)repaaniBpk, (int)&repairAnimFrameSize_446308);
        drawKeyCursor(172488, (char *)screenBuffer + 172488, 0x60u, 64);
		repairAnimCurrentFrame_45EEAC = (repairAnimCurrentFrame_45EEAC + 1) % 23; ///aqui va 23 pprque son 23 frames
        break;
      case CONTINUE:
        drawMenuAnimation(432, 269, continueAnimCurrentFrame_4611D0, (int)contaniBpk, (int)continueAnimFramesSize_4611D0);
        drawKeyCursor(172592, (char *)screenBuffer + 172592, 0x60u, 64);
		continueAnimCurrentFrame_4611D0 = (continueAnimCurrentFrame_4611D0 + 1)%2; ///aqui va 22 pprque son 22 frames
        
        break;
      default:
        break;
    }
    v42 = eventDetected();
    if ( !v42 )
      goto LABEL_220;
    v43 = v65;
    v65 = v66;
    v44 = v67;
    v64 = v43;
    v45 = v68;
    v66 = v67;
    v67 = v68;
    v68 = v42;
    if ( isMultiplayerGame )
      goto LABEL_220;
    v46 = v65;
    if ( v65 != 32 || v44 != 19 || v45 != 30 || v42 != 17 )
    {
LABEL_203:
      if ( v64 != 32 || v46 != 19 )
      {
        if ( v46 != 32 || v66 != 19 || v67 != 24 || v42 != 25 )
          goto LABEL_220;
        v47 = &dword_460884[27 * driverId];
        v48 = dword_460884[27 * driverId] - 10;
      }
      else
      {
        if ( v66 == 24 )
        {
          if ( v67 != 24 || v42 != 38 )
            goto LABEL_220;
          loadMenuSoundEffect(2u, 23, 0, 62720, dword_44518C - 28672);
          dword_460870[27 * driverId] = 500000;
LABEL_219:
          drawCarRightSide();
          refreshAllScreen();
          goto LABEL_220;
        }
        if ( v66 != 23 || v67 != 47 || v42 != 18 )
          goto LABEL_220;
        v47 = &dword_460884[27 * driverId];
        v48 = dword_460884[27 * driverId] + 10;
      }
      *v47 = v48;
      //sub_423C90(0, 19);  //modiffica una variable de adversary pero no se que hace
     // sub_423E20(20); //QUITADO porque solo hace multiplayer
      goto LABEL_219;
    }
    dword_460870[27 * driverId] += 1000;
    drawCarRightSide();
    refreshAllScreen();
    if ( !isMultiplayerGame )
    {
      v46 = 32;
      goto LABEL_203;
    }
LABEL_220:
    switch ( v42 )
    {
      case KEY_F1:
        if ( isMultiplayerGame )
          sub_42CCF0();
        break;
      case KEY_UP:
      case 0xC8:
        sub_421D90();
        break;
      case KEY_DOWN:
      case 0xD0:
        sub_421DF0();
        break;
      case KEY_LEFT:
      case 0xCB:
        sub_42D8C0();
        break;
      case KEY_RIGHT:
      case 0xCD:
        sub_42DAB0();
        break;
      case KEY_ENTER:
      case 0x9C:
        enterShop();
        break;
      case KEY_ESCAPE:
        v63 = -1;
        break;
      default:
        break;
    }
    if ( dword_456B10 )
      byte_45E0FC = 1;
    v49 = autoLoadSave();
    if ( v49 > 0 )
    {
      memcpy((char *)screenBuffer + 61440, (char *)graphicsGeneral.menubg5Bpk + 61440, 0x29B80u);
      drawShopAnimationAndRightSide();
      sub_4224E0();
      v50 = 32;
      v51 = (signed int)&unk_45FDC4;
      do
      {
        v52 = (convertColorToPaletteColor(*(_DWORD *)(v51 + 4), 6553600) + 0x8000) >> 16;
        v53 = (convertColorToPaletteColor(*(_DWORD *)v51, 6553600) + 0x8000) >> 16;
        v54 = convertColorToPaletteColor(*(_DWORD *)(v51 - 4), 6553600);
        setPaletteAndGetValue(v50, (v54 + 0x8000) >> 16, v53, v52);
        v51 += 12;
        ++v50;
      }
      while ( v51 < maxPaletteEntries );
      drawBorder2(426, 243, 0x6Cu, 114);
      drawBorder2(0, 115, 0x80u, 114);
      drawBorder2(10, 243, 0x6Cu, 114);
      drawBorder2(114, 243, 0x6Cu, 114);
      drawBorder2(218, 243, 0x6Cu, 114);
      drawBorder2(322, 243, 0x6Cu, 114);
      if ( !menuOptionSelected_463DF0 )
      {
        drawBorder(0, 115, 128, 114);
        reloadCarAnimation2();
      }
      if ( menuOptionSelected_463DF0 == 1 )
      {
        drawBorder(10, 243, 108, 114);
        reloadEngineAnimation2();
      }
      if ( menuOptionSelected_463DF0 == 2 )
      {
        drawBorder(114, 243, 108, 114);
        reloadTireAnimation2();
      }
      if ( menuOptionSelected_463DF0 == 3 )
      {
        drawBorder(218, 243, 108, 114);
        reloadArmourAnimation2();
      }
      if ( menuOptionSelected_463DF0 == 4 )
      {
        drawBorder(322, 243, 108, 114);
        reloadRepairAnimation();
      }
      if ( menuOptionSelected_463DF0 == 5 )
      {
        drawBorder(426, 243, 108, 114);
        reloadContinueAnimation();
      }
      drawTransparentBlock(0, 371, 639, 109);
      if ( isMultiplayerGame )
      {
        drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
      }
      drawBottomMenuText();
      refreshAllScreen();
      memcpy(dword_461ED8, screenBuffer, 0x4B000u);
      switch ( v49 )
      {
        case 1:
          confirmationPopup("Game Saved.");
          break;
        case 2:
          confirmationPopup("Game Loaded.");
          break;
        case 3:
          confirmationPopup("Game not found.");
          break;
      }
      memcpy(screenBuffer, dword_461ED8, 0x4B000u);
      refreshAllScreen();
    }
    v11 = isMultiplayerGame;
  }
  while ( (!isMultiplayerGame || !dword_456B9C) && !v63 );
  if ( v57 == 1 )
    sub_4291D0();
  memcpy((void *)dword_45FC00, graphicsGeneral.menubg5Bpk, 0x4B000u);
  screenBuffer = (void *)dword_45FC00;
  drawTransparentBlock(0, 371, 639, 109);
  if ( isMultiplayerGame )
  {
    drawTextWithFont((int)graphicsGeneral.fsma3bBpk, (int)&byte_4458B0, "press   to enter chat mode", 233635);
    drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "F1", 233689);
  }
  return drawBottomMenuText();
}


//----- (00439CD0) --------------------------------------------------------
void startRacingMenu()
{
  signed int v0; // eax@6
  int v1; // esi@9
  int v2; // eax@11
  int v3; // eax@20
  int v4; // [sp+10h] [bp-4h]@11

  gameStarted_456B5C = 0;
LABEL_2:
  while ( !dword_456B64 )
  {
    memcpy((char *)screenBuffer + 58880, (char *)graphicsGeneral.menubg5Bpk + 58880, 0x2AF80u);
    drawMenu(INITIAL_MENU, 0);
	
	drawMenu(START_NEW_GAME_MENU, 1);
	if ( gameStarted_456B5C )
    {
      screenBuffer = (void *)dword_461250;
      sub_42C4A0();
      refreshAllScreen();
      gameStarted_456B5C = 0;
    }
    else
    {
      refreshAllScreen();
    }
	v0 = readEventInMenu(START_NEW_GAME_MENU);
	
    switch ( v0 )
    {
      case START_CONTINUE_GAME:
        if ( memcmp(aStartANewGam_0, "Start A New Game", 0x11u) )
          goto LABEL_10;
        drawMenu(START_NEW_GAME_MENU, 0);
        if ( licenseScreen(1) )
        {
          v1 = drivers[driverId].colour;
		  menuActive_4457F0[1] = 0;
		  menuActive_4457F0[10] = 1;
		  menuActive_4457F0[11] = 1;
		  menuActive_4457F0[13] = 1;
          showHardWarningRace = 1;
          showMediumWarningRace = 1;
          dword_456B78 = 1;
          dword_456B74 = 1;
		  
		  isMultiplayerGame = 0; ///puesto por mi!
		 initDrivers();
          drivers[driverId].colour = v1;
          copyPalette1toPalette();
          *(_DWORD *)aStartANewGam_0 = 1702129221;
          *(_DWORD *)&aStartANewGam_0[4] = 1750343794;
          *(_DWORD *)&aStartANewGam_0[8] = 1750278245;
          *(_WORD *)&aStartANewGam_0[12] = 28783;
          aStartANewGam_0[14] = 0;
          *(_DWORD *)aStartRacing = 1953394499;
          dword_464F44 = 1;
		  menuActive_4457F0[10] = 1;
          *(_DWORD *)&aStartRacing[4] = 1702194793;
          *(_DWORD *)&aStartRacing[8] = 1667322400;
          *(_DWORD *)&aStartRacing[12] = 6778473;
LABEL_10:
          postLoadedOrLicense();
          gameStarted_456B5C = 1;
        }
        goto LABEL_2;
      case END_CURRENT_GAME:
        drawMenu(START_NEW_GAME_MENU, 0);
        createPopup(170, 220, 300, 80, 1);
        drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "End current game?", 146152);
        v4 = 1;
        v2 = drawYesNoMenu(180, 258, 1, &v4);
        if ( v4 )
        {
          if ( v2 )
          {
            *(_DWORD *)aStartANewGam_0 = *(_DWORD *)"Start A New Game";
            *(_DWORD *)&aStartANewGam_0[4] = *(_DWORD *)"t A New Game";
            *(_DWORD *)&aStartANewGam_0[8] = *(_DWORD *)"New Game";
            *(_DWORD *)&aStartANewGam_0[12] = *(_DWORD *)"Game";
            aStartANewGam_0[16] = aStartANewGame[16];
            *(_DWORD *)aStartRacing = 1918989395;
            *(_DWORD *)&aStartRacing[4] = 1632772212;
            *(_DWORD *)&aStartRacing[8] = 1735289187;
            aStartRacing[12] = 0;
			menuActive_4457F0[10] = 0;
			menuActive_4457F0[11] = 0;
			menuActive_4457F0[13] = 0;
            showHardWarningRace = 0;
            showMediumWarningRace = 0;
            dword_456B78 = 0;
            dword_456B74 = 0;
            initDrivers();
            copyPalette1toPalette();
            dword_464F44 = 1;
            dword_445724 = 0;
          }
        }
        goto LABEL_2;
      case SEE_STADISTICS:
        sub_42C940();
        goto LABEL_2;
      case LOAD_GAME:
        if ( loadGame() )
        {
          postLoadedOrLicense();
          gameStarted_456B5C = 1;
        }
        goto LABEL_2;
      case SAVE_GAME:
        savegameWithName();
        goto LABEL_2;
      case PREVIOUS_MENU: //previous menu
        v3 = 0;
        dword_445724 = 0;
        if ( !menuActive_4457F0[9] )
        {
          do
          {
            if ( v3 >= dword_44570C - 1 )
              v3 = 0;
            else
              ++v3;
          }
          while ( !menuActive_4457F0[9+v3] );
          dword_445724 = v3;
        }
        return;
      default:
        if ( v0 == -1 )
          return;
        break;
    }
  }
}

void inicializeGraphicVars() {
	dword_45EB5C = malloc(0x18150u);
}

//----- (0043A020) --------------------------------------------------------
int mainMenu()
{
  unsigned int v0; // eax@7
  void *v1 =malloc(0x4B000u); // eax@10
  int v2; // eax@10
  char *v3; // edx@10
  signed int v4; // ecx@10
  int v5; // eax@10
  float v6; // ST38_4@10
  float v7; // ST34_4@10
  float v8; // ST30_4@10
  int v9; // eax@10
  signed int v10; // eax@10
  char v11; // bl@12
  char v12; // dl@12
  char v13; // cl@12
  char v14; // dl@12
  signed int v15; // esi@12
  signed int v16; // eax@13
  char v17; // cl@14
  char v18; // dl@16
  char v19; // bl@16
  char v20; // cl@16
  signed int v21; // esi@16
  char v22; // cl@18
  char v23; // dl@20
  signed int v24; // esi@20
  signed int v25; // edx@21
  char v26; // cl@22
  char v27; // dl@24
  signed int v28; // esi@24
  signed int v29; // eax@25
  char v30; // cl@26
  signed int v31; // ebx@32
  unsigned __int8 v32; // bp@35
  signed int v33; // esi@35
  int v34; // ST38_4@36
  int v35; // ST34_4@36
  int v36; // eax@36
  char *v37; // eax@54
  char v38; // dl@55
  unsigned int v39; // eax@56
  char *v40; // edi@56
  char v41; // cl@57
  char *v42; // edi@58
  char v43; // al@59
  char *v44; // eax@60
  char v45; // dl@61
  unsigned int v46; // eax@62
  char *v47; // edi@62
  char v48; // cl@63
  char *v49; // edi@64
  char v50; // al@65
  bool v51; // zf@66
  char *v52; // eax@68
  char *v53; // edx@68
  char v54; // cl@69
  unsigned int v55; // eax@70
  char *v56; // edi@70
  char v57; // cl@71
  char *v58; // edi@72
  char v59; // al@73
  signed int v61; // [sp+1Ch] [bp-Ch]@17
  signed int v62; // [sp+20h] [bp-8h]@1
  int v63; // [sp+24h] [bp-4h]@1

  v62 = 0;
  v63 = 0;
  //checkIntro(); //esto solo chequea intro
  dword_45F000 = 0;
  dword_45F004 = 0;
  dword_45F008 = 0;
  dword_45F00C = 0;
  word_45F010 = 0;
  dword_45E1C0 = 0;
  byte_45F012 = 0;
  byte_45FB84 = 0;
  initCars();
  initDrivers();
  loadConfig();
  dword_4A9140 = (int)exitGame;
  ++configuration.timesPlayed;
  saveConfiguration();
  printf("\nLoading music & effects, please wait..\n");
  checkAndOpenAnimation();
  
  loadMusic(1, "MEN-MUS.CMF", 2,"MEN-SAM.CMF");
  musicSetMasterVolume(configuration.masterVolume);
  musicSetVolume(configuration.musicVolume);
  musicSetOrder(11520);
  nullsub_1();
  musicPlayMusic();
  nullsub_1();
  //estos arrays setean los circuitos iniciales de la partida
  byte_45FC10[0] = circuitOrder_45673C[0];
  byte_45FC10[3] = circuitOrder_45673C[3];
  //byte_45FC13 = byte_45673F;
  dword_456BC8 = 4;
  //byte_45FC11 = byte_45673D;
  byte_45FC10[1] = circuitOrder_45673C[1];
  byte_45FC10[2] = circuitOrder_45673C[2];
  //byte_45FC12 = byte_45673E[0];
  if ( configuration.useJoystick == 1 || configuration.useJoystick == 2 )
  {
    configJoystick();
    memcpy(aGamepadDisable, "Gamepad/Joystick Enabled", 0x19u);
  }
  else
  {
    memcpy(aGamepadDisable, "Gamepad/Joystick Disabled", 0x1Au);
  }
  if ( !configuration.dword_456734 )
  {
    dword_4470E2 = 1936487760;
    dword_4470E6 = 1766072421;
    dword_4470EA = 1852402785;
    word_4470EE = 103;
  }
  v0 = SDL_GetTicks();
  srand(v0);
  nullsub_1();
  setWindowCaption2();
  if ( isVesaCompatible() )
  {
    setWindowCaption();
    printf("DEATH RALLY Error: Your VGA-adapter is not fully VESA (VBE 1.0) compliant.\n                   Use UNIVBE or similar emulator to fix the problem.\n");
    printf("Please consult DRHELP.EXE for more information on how to resolve this problem.\n");
    stopAndOpenMusic();
    freeMusic();
    nullsub_1();
    exit(112);
  }
  sub_43C740();
 // allocateMemoryPtr((void *)&v1,0x4B000u); //tamao pantalla
  //puesto por mi
  screenBuffer = v1;
  dword_461250 = v1;  
  //apogeeScreen();
  //showStartScreen();

  inicializeGraphicVars();
  loadGraphics1();
  loadGraphics2();
  loadGraphics3();
  loadGraphics4();
  //SDL_Delay(2000);
  transitionToBlack();
  loadPaletteMenu();
  
 
  
  v2 = drivers[driverId].colour;
  v3 = (char *)graphicsGeneral.copperPal + 2 * v2;
  //allocateMemoryPtr(v3, 0x2u);
  v4 = (unsigned __int8)v3[v2 + 2];
  v5 = (int)&v3[v2];
  v6 = (double)v4;
  v7 = (double)*(byte *)(v5 + 1);
  v8 = (double)*(byte *)v5;
  sub_418B00(v8, v7, v6);
  
  memcpy(screenBuffer, graphicsGeneral.menubg5Bpk, 0x4B000u); //tamao pantalla
  /*v9 = 27 * driverId;
  *(_DWORD *)unk_461EC0 = 0;
  *(_DWORD *)&word_461EC4 = 0;
  *(_DWORD *)&word_461EC8 = 0;
  *(_DWORD *)&word_461ECC = 0;
  byte_460840[v9 * 4] = 0;
  *(_DWORD *)&word_461ED0 = 0;
  dword_460880[v9] = 0;
  v10 = (signed int)&unk_462000;
  word_461ED4 = 0;
  do
  {
    *(byte *)v10 = 0;
    v10 += 150;
  }
  while ( v10 < (signed int)&blacktx1Bpk );
  v11 = unk_461EC3;
  memcpy(&dword_462C4E, "     Welcome to Death Rally(tm) - Windows Version 1.0", 0x34u);
  unk_461EC3 = word_461EC4;
  HIBYTE(word_461EC4) = *(_DWORD *)&word_461EC4 >> 16;
  unk_461EC6 = unk_461EC7;
  unk_461EC7 = word_461EC8;
  HIBYTE(word_461EC8) = unk_461ECA;
  v12 = unk_461EC1;
  unk_461ECA = unk_461ECB;
  unk_461ECB = word_461ECC;
  HIBYTE(word_461ECC) = unk_461ECE;
  unk_461ECE = unk_461ECF;
  unk_461ECF = word_461ED0;
  HIBYTE(word_461ED0) = unk_461ED2;
  unk_461ED2 = unk_461ED3;
  v13 = word_461ED4;
  *((_WORD *)&dword_462C4E + 26) = *(_WORD *)"0";
  unk_461EC0[0] = v12;
  v14 = unk_461EC2;
  v15 = (signed int)&unk_462096;
  unk_461ED3 = v13;
  LOBYTE(word_461ED4) = 1;
  do
  {
    v16 = v15;
    do
    {
      v17 = *(byte *)v16;
      *(byte *)(v16 - 150) = *(byte *)v16;
      ++v16;
    }
    while ( v17 );
    v15 += 150;
  }
  while ( v15 < (signed int)&blacktx1Bpk );
  memcpy(&dword_462C4E, "         Port by Jari Komppa - http://iki.fi/sol/", 0x30u);
  unk_461EC0[0] = v14;
  v18 = v11;
  v19 = unk_461EC3;
  unk_461EC3 = word_461EC4;
  HIBYTE(word_461EC4) = unk_461EC6;
  unk_461EC6 = unk_461EC7;
  unk_461EC7 = word_461EC8;
  HIBYTE(word_461EC8) = unk_461ECA;
  unk_461ECA = unk_461ECB;
  unk_461ECB = word_461ECC;
  HIBYTE(word_461ECC) = unk_461ECE;
  unk_461ECE = unk_461ECF;
  unk_461ECF = word_461ED0;
  HIBYTE(word_461ED0) = unk_461ED2;
  unk_461ED2 = unk_461ED3;
  v20 = word_461ED4;
  *((_WORD *)&dword_462C4E + 24) = *(_WORD *)"/";
  v21 = (signed int)&unk_462096;
  unk_461ED3 = v20;
  do
  {
    v61 = v21;
    do
    {
      v22 = *(byte *)v61;
      *(byte *)(v61 - 150) = *(byte *)v61;
      ++v61;
    }
    while ( v22 );
    v21 += 150;
  }
  while ( v21 < (signed int)&blacktx1Bpk );
  unk_461EC0[0] = v18;
  unk_461EC2 = unk_461EC3;
  unk_461EC3 = word_461EC4;
  HIBYTE(word_461EC4) = unk_461EC6;
  unk_461EC6 = unk_461EC7;
  unk_461EC7 = word_461EC8;
  HIBYTE(word_461EC8) = unk_461ECA;
  unk_461ECA = unk_461ECB;
  unk_461ECB = word_461ECC;
  HIBYTE(word_461ECC) = unk_461ECE;
  memcpy(&dword_462C4E, "    (c)Remedy Entertainment - http://www.remedygames.com", 0x38u);
   unk_461ECE = unk_461ECF;
  unk_461ECF = word_461ED0;
  HIBYTE(word_461ED0) = unk_461ED2;
  v23 = unk_461ED3;
  *((byte *)&dword_462C4E + 56) = aCRemedyEnterta[56];
  v24 = (signed int)&unk_462096;
  unk_461ED2 = v23;
  LOBYTE(word_461ED4) = 1;
  do
  {
    v25 = v24;
    do
    {
      v26 = *(byte *)v25;
      *(byte *)(v25 - 150) = *(byte *)v25;
      ++v25;
    }
    while ( v26 );
    v24 += 150;
  }
  while ( v24 < (signed int)&blacktx1Bpk );
  unk_461EC1 = unk_461EC2;
  unk_461EC2 = unk_461EC3;
  unk_461EC3 = word_461EC4;
  HIBYTE(word_461EC4) = unk_461EC6;
  unk_461EC6 = unk_461EC7;
  unk_461EC7 = word_461EC8;
  HIBYTE(word_461EC8) = unk_461ECA;
  unk_461ECA = unk_461ECB;
  unk_461ECB = word_461ECC;
  HIBYTE(word_461ECC) = unk_461ECE;
  unk_461ECE = unk_461ECF;
  unk_461ECF = word_461ED0;
  v27 = unk_461ED2;
  LOBYTE(dword_462C4E) = 0;
  unk_461ED2 = 1;
  v28 = (signed int)&unk_462096;
  unk_461EC0[0] = v19;
  HIBYTE(word_461ED0) = v27;
  unk_461ED3 = word_461ED4;
  LOBYTE(word_461ED4) = 1;
  do
  {
    v29 = v28;
    do
    {
      v30 = *(byte *)v29;
      *(byte *)(v29 - 150) = *(byte *)v29;
      ++v29;
    }
    while ( v30 );
    v28 += 150;
  }
  while ( v28 < (signed int)&blacktx1Bpk );
  memcpy(&dword_462C4E, "Use arrow keys to change selection and press enter to confirm.", 0x3Fu);
  HIBYTE(word_461ED4) = 1;*/
  drawTransparentBlock(0, 371, 639, 109);
  
  drawBottomMenuText();
  
  
  
  do
  {
	  menuActive_4457F0[1] = 0;
	  memcpy((char *)screenBuffer + 53760, (char *)graphicsGeneral.menubg5Bpk + 53760, 0x2C380u);
	  drawMenu(INITIAL_MENU, 1);
	  
	  if ((dword_456A1C || dword_456B64) && !dword_456B9C)
	  {
		  refreshAllScreen();
		  sub_4224E0();
		  v31 = 0;
		  do
		  {
			  wait();
			  if (v31 % 2)
				  updateCursor(0);
			  v32 = 0;
			  v33 = 0;
			  //FIXED
			  //v33 = (signed int)dword_45FC44;
			  do
			  {
				  v34 = (convertColorToPaletteColor((palette1[v33+2]), v31 << 17) + 0x8000) >> 16;
				  v35 = (convertColorToPaletteColor(palette1[v33 +1], v31 << 17) + 0x8000) >> 16;
				  v36 = convertColorToPaletteColor((palette1[v33 ]), v31 << 17);
				  setPaletteAndGetValue(v32, (v36 + 0x8000) >> 16, v35, v34);
				  v33 += 3;
				  ++v32;
			  } while (v33 < maxPaletteEntries);
			  ++v31;
		  } while (v31 < 50);
		  dword_456A1C = 0;
		  if (dword_456B64)
		  {
			  dword_456B64 = 0;
			  memcpy((void *)dword_461250, dword_461ED8, 0x4B000u);
			  screenBuffer = (void *)dword_461250;
			  dword_461ED8 = (void *)dword_45FC00;
		  }
	  }
	  
	   if (v62)
	  {
		  if (dword_456B9C)
			  goto LABEL_45;
		  screenBuffer = (void *)dword_461250;
		  sub_42C560(-1);
		  stopSong();
		  musicPlayMusic();
		  musicSetOrder(dword_462D7C);
		  setMusicVolume(0x10000);
		  v62 = 0;
	  }
	  if (!dword_456B9C)
		  refreshAllScreen();
  LABEL_45:
	  switch ( readEventInMenu(INITIAL_MENU) )
	  {
		case 0:
		  startRacingMenu();
		  break;
		case 2:
		  showAdjustOptions();
		  break;
		case 3:
		  seeHallOfFame();
		  v62 = 1;
		  break;
		case 4:
		  showCredits();
		  break;
		case 5:
			//exit to os
		  drawMenu(INITIAL_MENU, 0);
		  createPopup(170, 200, 300, 80, 1);
		  drawTextWithFont((int)graphicsGeneral.fsma3aBpk, (int)&byte_4458B0, "Are you sure?", 133373);
		  drawYesNoMenu(180, 238, 1, &v63);
		  break;
		default:

		  break;
	  }
	  if (!dword_456B9C) {
		  v62 = 0;
	  }
  

  }
  while ( !v63 );
  if ( isMultiplayerGame )
  {
    if ( !memcmp(&dword_44671E, "Abort Current Game", 0x13u) )
    {
      v37 = &byte_460840[108 * driverId];
      dword_462C4E = 2108717;
      do
        v38 = *v37++;
      while ( v38 );
      v39 = v37 - &byte_460840[108 * driverId];
      v40 = (char *)&dword_462C4E - 1;
      do
        v41 = (v40++)[1];
      while ( v41 );
      memcpy(v40, &byte_460840[108 * driverId], v39);
      v42 = (char *)&dword_462C4E - 1;
      do
        v43 = (v42++)[1];
      while ( v43 );
      memcpy(v42, " has left from Death Rally.", 0x1Cu);
      HIBYTE(word_461ED4) = 0;
      sub_41EA70((int)&dword_462C4E, 100, 20);
      v44 = &byte_460840[108 * driverId];
      dword_462C4E = 2108717;
      do
        v45 = *v44++;
      while ( v45 );
      v46 = v44 - &byte_460840[108 * driverId];
      v47 = (char *)&dword_462C4E - 1;
      do
        v48 = (v47++)[1];
      while ( v48 );
      memcpy(v47, &byte_460840[108 * driverId], v46);
      v49 = (char *)&dword_462C4E - 1;
      do
        v50 = (v49++)[1];
      while ( v50 );
      memcpy(v49, " aborted current netgame.", 0x18u);
      HIBYTE(word_461ED4) = 0;
      v51 = dword_45E0A8 == 2;
      *((_WORD *)v49 + 12) = *(_WORD *)".";
      if ( !v51 )
      {
        sub_41EA70((int)&dword_462C4E, 100, 9);
        goto LABEL_76;
      }
    }
    else
    {
      v52 = &byte_460840[108 * driverId];
      dword_462C4E = 2108717;
      v53 = &byte_460840[108 * driverId];
      do
        v54 = *v52++;
      while ( v54 );
      v55 = v52 - v53;
      v56 = (char *)&dword_462C4E - 1;
      do
        v57 = (v56++)[1];
      while ( v57 );
      memcpy(v56, v53, v55);
      v58 = (char *)&dword_462C4E - 1;
      do
        v59 = (v58++)[1];
      while ( v59 );
      memcpy(v58, " has left from Death Rally.", 0x1Cu);
      HIBYTE(word_461ED4) = 0;
    }
    sub_41EA70((int)&dword_462C4E, 100, 6);
LABEL_76:
    nullsub_1();
    nullsub_1();
    isMultiplayerGame = 0;
    dword_45E0A8 = 0;
  }
  showEndScreen();
  saveConfiguration();
  freeMemoryGraphics();
  freeMemoryGraphics1();
  freeMemoryGraphics2();
  freeMemoryGraphics3();
  freeMemoryGraphics4();
  stopSong();
  return stopAndOpenMusic();
}

//----- (0043ACB0) --------------------------------------------------------
void __noreturn sub_43ACB0()
{
  nullsub_1();
  setWindowCaption();
  printf("DEATH RALLY Exit: CTRL+ALT+DEL pressed!\n");
  exit(112);
}






//----- (0043ACE0) --------------------------------------------------------
int  sub_43ACE0(double a1, int a2, int a3,char *args)
{
  dword_45EA0C = a2;
 
  dword_45EA24 = *(_DWORD *)(a3 + 4);
  dword_45EA28 = *(_DWORD *)(a3 + 8);
  dword_45EA2C = *(_DWORD *)(a3 + 12);
  dword_45EA30 = *(_DWORD *)(a3 + 16);
  dword_45EA34 = *(_DWORD *)(a3 + 20);
  dword_45EA38 = *(_DWORD *)(a3 + 24);
  dword_45EA3C = *(_DWORD *)(a3 + 28);
  dword_45EA40 = *(_DWORD *)(a3 + 32);
  dword_45EA44 = *(_DWORD *)(a3 + 36);  
  checkArgs(args);
  inicializeScreen(a1);
  dword_4A9140 = (int)sub_43ACB0;
  nullsub_1();
  mainMenu();
  nullsub_1();
  if ( isMultiplayerGame )
    nullsub_1();
  freeMusic();
  return 0;
}


//----- (0043AD80) --------------------------------------------------------
void *__cdecl sub_43AD80(int a1)
{
  const void *v1; // esi@1
  size_t v2; // edi@1
  void *v3=calloc(0xCu, 1u); // eax@1
  void *v4; // ebx@1
  void *v5; // eax@1
  unsigned int v6; // ecx@1

  v1 = &a1 + 4;
  //v1 = *(const void **)(a1 + 4);
  v2 = *(_DWORD *)a1; //es el tamao del audio
 // v3 = calloc(0xCu, 1u);
  v4 = v3;
  *(_DWORD *)v3 = v2;
  v5 = calloc(v2, 1u);

  v1 = calloc(v2, 1u);//esto lo he puesto yo para que no falle
  v6 = *(_DWORD *)v4; //v4 es el tamao del audio
  *((_DWORD *)v4 + 2) = v5;
  *((_DWORD *)v4 + 1) = 0;
  memcpy(v5, v1, v6);
  return v4;
}

//----- (0043ADD0) --------------------------------------------------------
void __cdecl sub_43ADD0(void *Memory)
{
  free(*((void **)Memory + 2));
  free(Memory);
}

//----- (0043ADF0) --------------------------------------------------------
int __cdecl sub_43ADF0(void *a1, unsigned int a2, int a3)
{
  int result; // eax@1
  int v4; // edi@1

  result = a2;
  v4 = *(_DWORD *)(a3 + 4);
  if ( (signed int)(v4 + a2) >= *(_DWORD *)a3 )
    result = *(_DWORD *)a3 - v4;
  memcpy(a1, (const void *)(v4 + *(_DWORD *)(a3 + 8)), result);
  *(_DWORD *)(a3 + 4) += result;
  return result;
}

//----- (0043AE30) --------------------------------------------------------
int __cdecl sub_43AE30(int a1, int a2, char a3)
{
  int result; // eax@1
  int v4; // ecx@2
  int v5; // edx@4
  int v6; // ecx@4

  result = a1;
  if ( a3 )
  {
    if ( a3 == 1 )
    {
      v5 = a2;
      v6 = *(_DWORD *)(a1 + 4);
    }
    else
    {
      if ( a3 != 2 )
        goto LABEL_9;
      v6 = *(_DWORD *)a1;
      v5 = a2;
    }
    v4 = v5 + v6;
  }
  else
  {
    v4 = a2;
  }
  *(_DWORD *)(a1 + 4) = v4;
LABEL_9:
  if ( *(_DWORD *)(a1 + 4) > *(_DWORD *)a1 )
    *(_DWORD *)(a1 + 4) = *(_DWORD *)a1;
  return result;
}

//----- (0043AE70) --------------------------------------------------------
int __cdecl sub_43AE70(int a1)
{
  return *(_DWORD *)(a1 + 4);
}

//----- (0043AE80) --------------------------------------------------------
int __cdecl sub_43AE80(int a1, int a2, int a3, int a4)
{
  int v4; // ecx@1
  int result; // eax@1

  *(_DWORD *)a1 = *(_DWORD *)a2;
  *(_DWORD *)(a1 + a3) = *(_DWORD *)(a4 + a2);
  v4 = a3 + a3 + a1;
  *(_DWORD *)v4 = *(_DWORD *)(a4 + a2 + a4);
  result = *(_DWORD *)(a4 + a4 + a2 + a4);
  *(_DWORD *)(v4 + a3) = result;
  return result;
}

//----- (0043AEC0) --------------------------------------------------------
char __cdecl sub_43AEC0(int a1, int a2, int a3)
{
  int v3; // edx@1
  char result; // al@1
  int v5; // ecx@1
  signed int v6; // edi@1
  signed int v7; // esi@4

  v3 = a3;
  result = 0;
  v5 = (a2 << 9) + a1 - 10164;
  v6 = 40;
  do
  {
    if ( v5 < 0 || v5 >= 102400 )
    {
      v5 += 512;
      v3 += 40;
    }
    else
    {
      v7 = 40;
      do
      {
        result = *((byte *)dword_5034FC + v3++);
        if ( result )
          *(byte *)(dword_464F14 + v5) = result;
        ++v5;
        --v7;
      }
      while ( v7 );
      v5 += 472;
    }
    --v6;
  }
  while ( v6 );
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (0043AF30) --------------------------------------------------------
char __cdecl sub_43AF30(int a1, int a2, int a3)
{
  char result; // al@1
  int v4; // edx@2
  int v5; // ecx@2
  int v6; // edi@2
  signed int v7; // esi@3

  result = a3;
  if ( a3 > 0 )
  {
    v4 = a2;
    v5 = a1;
    v6 = a3;
    do
    {
      v7 = 16;
      do
      {
        result = *(byte *)v4;
        if ( *(byte *)v4 )
          *(byte *)v5 = result;
        ++v4;
        ++v5;
        --v7;
      }
      while ( v7 );
      v5 += 496;
      --v6;
    }
    while ( v6 );
  }
  return result;
}



//----- (0043AFC0) --------------------------------------------------------
char __cdecl sub_43AFC0(int a1, int a2, int a3)
{
  int v3; // edx@1
  char result; // al@1
  int v5; // ecx@1
  signed int v6; // edi@1
  signed int v7; // esi@4

  v3 = a3;
  result = 0;
  v5 = (a2 << 9) + a1 - 4008;
  v6 = 16;
  do
  {
    if ( v5 < 0 || v5 >= 102400 )
    {
      v5 += 512;
      v3 += 16;
    }
    else
    {
      v7 = 16;
      do
      {
        result = *((byte *)burn1aBpk + v3++);
        if ( result )
          *(byte *)(dword_464F14 + v5) = result;
        ++v5;
        --v7;
      }
      while ( v7 );
      v5 += 496;
    }
    --v6;
  }
  while ( v6 );
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (0043B030) --------------------------------------------------------
int __cdecl sub_43B030(int a1, int a2)
{
  int v2; // ecx@1
  int result; // eax@1
  signed int v4; // edx@1

  v2 = a2;
  result = a2 + a1;
  v4 = 10;
  do
  {
    if ( v2 >= 0 )
      *(byte *)result = 0;
    ++result;
    ++v2;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (0043B050) --------------------------------------------------------
int __cdecl sub_43B050(int a1, signed int a2)
{
  signed int v2; // edx@1
  int result; // eax@1
  signed int v4; // ecx@1

  v2 = a2;
  result = a2 + a1;
  v4 = 0;
  do
  {
    if ( v2 > 255 )
      break;
    ++result;
    *(byte *)(result - 1) = 0;
    ++v2;
    ++v4;
  }
  while ( v4 < 10 );
  return result;
}

//----- (0043B080) --------------------------------------------------------
int __cdecl sub_43B080(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // edx@1
  int v6; // ecx@1
  int result; // eax@1
  int v8; // esi@1
  int v9; // edi@3

  v5 = a4;
  v6 = a2;
  result = a5;
  v8 = a1;
  if ( a4 > 0 )
  {
    do
    {
      if ( a3 > 0 )
      {
        v9 = a3;
        do
        {
          if ( *(byte *)v8 )
            *(byte *)result = *(byte *)v6;
          ++v6;
          ++result;
          ++v8;
          --v9;
        }
        while ( v9 );
      }
      result += 640 - a3;
      v6 += 640 - a3;
      --v5;
    }
    while ( v5 );
  }
  return result;
}

//----- (0043B0D0) --------------------------------------------------------
void __cdecl copyBuffer2Screen(void *a1, const void *a2, int a3)
{
  memcpy(a1, a2, 4 * a3);
}

//----- (0043B0F0) --------------------------------------------------------
int __cdecl sub_43B0F0(int a1, signed int a2, int a3)
{
  int v3; // ebp@1
  int v4; // esi@1
  int v5; // edx@1
  int v6; // edi@2

  v3 = 0;
  v4 = 0;
  v5 = a2 % 8;
  if ( a3 > 0 )
  {
    v6 = a2 / 8 + a1;
    do
    {
      v3 |= ((*(byte *)v6 & (unsigned __int8)(1 << v5++)) != 0) << v4++;
      if ( v5 == 8 )
      {
        v5 = 0;
        ++v6;
      }
    }
    while ( v4 < a3 );
  }
  return v3 & ((1 << a3) - 1);
}

//----- (0043B160) --------------------------------------------------------
int __cdecl sub_43B160(int a1, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // ecx@2
  int v6; // ebp@2
  int v7; // esi@4

  result = a3;
  if ( a3 > 0 )
  {
    v5 = a1;
    v6 = a3;
    result = a4;
    do
    {
      if ( a2 > 0 )
      {
        v7 = a2;
        do
        {
          *(byte *)result++ = *(byte *)v5++;
          --v7;
        }
        while ( v7 );
      }
      result += 512 - a2;
      --v6;
    }
    while ( v6 );
  }
  return result;
}

//----- (0043B1A0) --------------------------------------------------------
int __cdecl sub_43B1A0(int a1, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // ecx@2
  int v6; // edx@2
  int v7; // ebx@2
  int v8; // esi@4
  char v9; // al@5

  result = a3;
  if ( a3 > 0 )
  {
    v5 = a4;
    v6 = a1;
    v7 = a3;
    do
    {
      if ( a2 > 0 )
      {
        v8 = a2;
        do
        {
          v9 = *(byte *)v6++;
          if ( v9 )
            *(byte *)v5 = v9;
          ++v5;
          --v8;
        }
        while ( v8 );
      }
      result = 320 - a2;
      v5 += 320 - a2;
      --v7;
    }
    while ( v7 );
  }
  return result;
}

//----- (0043B1F0) --------------------------------------------------------
int __cdecl sub_43B1F0(int a1, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // ecx@2
  int v6; // edx@2
  int v7; // ebx@2
  int v8; // esi@4
  char v9; // al@5

  result = a3;
  if ( a3 > 0 )
  {
    v5 = a4;
    v6 = a1;
    v7 = a3;
    do
    {
      if ( a2 > 0 )
      {
        v8 = a2;
        do
        {
          v9 = *(byte *)v6++;
          if ( v9 )
            *(byte *)v5 = v9;
          ++v5;
          --v8;
        }
        while ( v8 );
      }
      result = 204 - a2;
      v5 += 204 - a2;
      --v7;
    }
    while ( v7 );
  }
  return result;
}

//----- (0043B240) --------------------------------------------------------
int __cdecl sub_43B240(int a1, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // ecx@2
  int v6; // edx@2
  int v7; // ebx@2
  int v8; // esi@4
  char v9; // al@5

  result = a3;
  if ( a3 > 0 )
  {
    v5 = a4;
    v6 = a1;
    v7 = a3;
    do
    {
      if ( a2 > 0 )
      {
        v8 = a2;
        do
        {
          v9 = *(byte *)v6++;
          if ( v9 )
            *(byte *)v5 = v9;
          ++v5;
          --v8;
        }
        while ( v8 );
      }
      result = 512 - a2;
      v5 += 512 - a2;
      --v7;
    }
    while ( v7 );
  }
  return result;
}

//----- (0043B290) --------------------------------------------------------
int __cdecl sub_43B290(int a1, signed int a2)
{
  signed __int64 v2; // rax@2

  if ( a2 )
    v2 = ((signed __int64)a1 << 16) / a2;
  else
    LODWORD(v2) = 0;
  return v2;
}

//----- (0043B2D0) --------------------------------------------------------
int sub_43B2D0()
{
  int result; // eax@1

  result = dword_456BFC;
  dword_456BFC = 0;
  return result;
}
// 456BFC: using guessed type int dword_456BFC;

//----- (0043B2E0) --------------------------------------------------------
int sub_43B2E0()
{
  int result; // eax@1

  result = dword_456BF8;
  dword_456BF8 = 0;
  return result;
}
// 456BF8: using guessed type int dword_456BF8;

//----- (0043B2F0) --------------------------------------------------------
int __cdecl sub_43B2F0(int a1, int a2, int a3)
{
  int v3; // ebx@1
  int v4; // edi@1
  int result; // eax@1
  char *v6; // ecx@1
  int v7; // esi@1
  int i; // ebp@1
  int v9; // edi@6

  v3 = *(_DWORD *)(a3 + 4);
  v4 = dword_464F14;
  result = dword_464F14 + (a2 << 9) + a1 + 96;
  v6 = (char *)dword_4A7A28 + *(_DWORD *)(a3 + 8);
  v7 = *(_DWORD *)a3;
  for ( i = 0; i < v3; ++i )
  {
    if ( v4 + 102400 < (unsigned int)result )
      break;
    if ( result >= (unsigned int)v4 )
    {
      if ( v7 > 0 )
      {
        v9 = v7;
        do
        {
          if ( *v6 )
            *(byte *)result = *v6;
          ++result;
          ++v6;
          --v9;
        }
        while ( v9 );
        v4 = dword_464F14;
      }
      result += 512 - v7;
    }
    else
    {
      v6 += v7;
      result += 512;
    }
  }
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (0043B370) --------------------------------------------------------
int __cdecl sub_43B370(int a1, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int result; // eax@1
  signed int v6; // ebp@1
  char v7; // dl@2

  v3 = a2;
  v4 = a1;
  result = 0;
  v6 = 256;
  do
  {
    v7 = *(byte *)v3;
    result += a3;
    ++v3;
    *(byte *)v4 = v7;
    if ( BYTE1(result) & 1 )
    {
      result = (unsigned __int8)result;
      ++v4;
    }
    --v6;
  }
  while ( v6 );
  return result;
}

//----- (0043B3A0) --------------------------------------------------------
int __cdecl sub_43B3A0(int a1, int a2, int a3, char a4)
{
  int result; // eax@1
  int v5; // edi@2
  int v6; // ecx@4

  result = a3;
  if ( a3 > 0 )
  {
    v5 = a3;
    result = a1;
    do
    {
      if ( a2 > 0 )
      {
        v6 = a2;
        do
        {
          if ( *(byte *)result >= 0x40u )
            *(byte *)result = a4;
          ++result;
          --v6;
        }
        while ( v6 );
      }
      result += 512 - a2;
      --v5;
    }
    while ( v5 );
  }
  return result;
}


//----- (0043B3E0) --------------------------------------------------------
void __cdecl SetVideoMode(boolean fullScreen)
{
  
  unsigned int flagsNoGL; // esi@1
  signed int v3; // ebp@4
  GLsizei glWidth; // esi@4
  GLsizei glHeight; // ebx@4
  GLvoid *v6; // edi@5
  int flags; // [sp+0h] [bp-4h]@4

  flagsNoGL = 0;
  if (fullScreen)
	  flagsNoGL = SDL_FULLSCREEN;
  SDL_ShowCursor(fullScreen == 0);
  if ( mainArgs.configGL )
  {
    v3 = 32;
	flags = 2;
	glWidth = 640;
	glHeight = 480;
    if ( pixels )
    {
      glClear(0x4000u);
      SDL_GL_SwapBuffers();
    }
    else
    {
      v6 = malloc(0x12C000u);
      pixels = v6;
      memset(v6, 0, 0x12C000u);	  
    }
    if (fullScreen)
    {
		glWidth = screenWidth;
		glHeight = screenHeight;
      v3 = screenColors;
	  flags = -2147483646;
    }
    SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 5);
    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 5);
    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 5);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    screenSurface = SDL_SetVideoMode(glWidth, glHeight, v3, flags);
    glMatrixMode(0x1701u);
    glLoadIdentity();
    glMatrixMode(0x1700u);
    glLoadIdentity();
    glViewport(0, 0, glWidth, glHeight);
    glBindTexture(0xDE1u, 1u);
    glTexImage2D(0xDE1u, 0, 6407, 512, 256, 0, 0x1907u, 0x1401u, 0);
    glBindTexture(0xDE1u, 2u);
    glTexImage2D(0xDE1u, 0, 6407, 1024, 512, 0, 0x1907u, 0x1401u, 0);
  }
  else
  {

    //screenSurface = SDL_SetVideoMode(640, 480, 32, v2);
	screenSurface = SDL_SetVideoMode(640, 480, 32, flagsNoGL);
  }
}


//----- (0043B580) --------------------------------------------------------
int __cdecl sub_43B580(int a1)
{
  int result; // eax@1
  int v2; // esi@1
  signed int v3; // edi@4
  char *v4; // eax@5
  signed int v5; // edx@5
  int v6; // ecx@6
  int v7; // esi@6
  int v8; // ecx@6
  int v9; // ecx@6
  void (__stdcall *v10)(GLfloat, GLfloat); // esi@12
  void (__stdcall *v11)(GLfloat, GLfloat); // edi@12
  float y; // ST20_4@12
  float x; // ST1C_4@12
  void (__stdcall *v14)(GLfloat, GLfloat); // esi@13
  void (__stdcall *v15)(GLfloat, GLfloat); // edi@13
  char *v16; // eax@15
  signed int v17; // edx@15
  int v18; // ecx@16
  int v19; // esi@16
  int v20; // ecx@16
  int v21; // ecx@16
  float v22; // ST20_4@19
  float v23; // ST1C_4@19
  float v24; // ST20_4@20
  float v25; // ST1C_4@20
  //SDL_Surface * screenSurfaceTemp; // edx@22
  int screenSurfaceTemp; // edx@22
  
  unsigned int v27; // ecx@22
  int v28; // ebp@24
  signed int v29; // ebx@24
  int v30; // eax@25
  signed int v31; // edi@25
  int v32; // edx@26
  int v33; // edx@26
  int v34; // eax@26
  int v35; // esi@26
  int v36; // edx@26
  int v37; // edx@26
  int v38; // edx@26
  int v39; // edi@29
  int v40; // ebx@29
  int v41; // eax@31
  signed int v42; // ebp@31
  int v43; // edx@32
  int v44; // esi@32
  int v45; // edx@32
  int v46; // edx@32
  int v47; // ebx@34
  int v48; // edx@35
  signed int v49; // ebp@35
  signed int v50; // eax@36
  int v51; // edx@36
  int v52; // esi@38
  int v53; // eax@39
  signed int v54; // edx@39
  int v55; // ebx@43
  int v56; // edi@44
  int v57; // ebp@44
  int v58; // eax@45
  int i; // ecx@45
  signed int v60; // [sp+10h] [bp-1Ch]@29
  signed int v61; // [sp+10h] [bp-1Ch]@34
  signed int v62; // [sp+14h] [bp-18h]@38
  int v63; // [sp+14h] [bp-18h]@44
  SDL_Event event; // [sp+18h] [bp-14h]@51
  unsigned __int8 v65 = 0; // [sp+1Ch] [bp-10h]@58
  int v66 = 0; // [sp+20h] [bp-Ch]@56  
  int v67 = 0; // [sp+24h] [bp-8h]@60
  int v68 = 0; // [sp+28h] [bp-4h]@68

  result = dword_456C28;
  v2 = dword_456BF4;
  if ( dword_456C28 )
    return result;
  result = a1;
  if ( dword_456C18 == a1 )
    return result;
  dword_456C18 = a1;
  SDL_Delay(1);
  if ( mainArgs.configGL )
  {
    v3 = 0;
    if ( dword_456C14 == 19 )
    {
      do
      {
        v4 = (char *)pixels + v3;
        v5 = 64;
        do
        {
          *(_DWORD *)v4 = palette[*(byte *)v2] | 0xFF000000;
          v6 = palette[*(byte *)(v2 + 1)];
          v7 = v2 + 1;
          *((_DWORD *)v4 + 1) = v6 | 0xFF000000;
          v8 = palette[*(byte *)(v7++ + 1)];
          *((_DWORD *)v4 + 2) = v8 | 0xFF000000;
          v9 = palette[*(byte *)(v7 + 1)];
          v7 += 2;
          *((_DWORD *)v4 + 3) = v9 | 0xFF000000;
          *((_DWORD *)v4 + 4) = palette[*(byte *)v7] | 0xFF000000;
          v2 = v7 + 1;
          v4 += 20;
          --v5;
        }
        while ( v5 );
        v3 += 1280;
      }
      while ( v3 < 256000 );
      glEnable(0xDE1u);
      glBindTexture(0xDE1u, 1u);
      glTexSubImage2D(0xDE1u, 0, 0, 0, 320, 200, 0x1908u, 0x1401u, pixels);
      if ( mainArgs.configSmooth )
      {
        glTexParameteri(0xDE1u, 0x2801u, 9728);
        glTexParameteri(0xDE1u, 0x2800u, 9728);
      }
      else
      {
        glTexParameteri(0xDE1u, 0x2801u, 9729);
        glTexParameteri(0xDE1u, 0x2800u, 9729);
      }
      glClear(0x4000u);
      if (screenSurface ==NULL )
      {
        glBegin(7u);
        v10 = glTexCoord2f;
        glTexCoord2f(0.0, 0.78125);
        v11 = glVertex2f;
        y = -y;
        x = -x;
        glVertex2f(x, y);
        glTexCoord2f(0.625, 0.78125);
LABEL_20:
        v24 = -y;
        v11(x, v24);
        v10(0.625, 0.0);
        v11(x, y);
        v10(0.0, 0.0);
        v25 = -x;
        v11(v25, y);
        glEnd();
        SDL_GL_SwapBuffers();
        goto LABEL_49;
      }
      glBegin(7u);
      v14 = glTexCoord2f;
      glTexCoord2f(0.0, 0.78125);
      v15 = glVertex2f;
      glVertex2f(-1.0, -1.0);
      glTexCoord2f(0.625, 0.78125);
    }
    else
    {
      do
      {
        v16 = (char *)pixels + v3;
        v17 = 128;
        do
        {
          *(_DWORD *)v16 = palette[*(byte *)v2] | 0xFF000000;
          v18 = palette[*(byte *)(v2 + 1)];
          v19 = v2 + 1;
          *((_DWORD *)v16 + 1) = v18 | 0xFF000000;
          v20 = palette[*(byte *)(v19++ + 1)];
          *((_DWORD *)v16 + 2) = v20 | 0xFF000000;
          v21 = palette[*(byte *)(v19 + 1)];
          v19 += 2;
          *((_DWORD *)v16 + 3) = v21 | 0xFF000000;
          *((_DWORD *)v16 + 4) = palette[*(byte *)v19] | 0xFF000000;
          v2 = v19 + 1;
          v16 += 20;
          --v17;
        }
        while ( v17 );
        v3 += 2560;
      }
      while ( v3 < 1228800 );
      glEnable(0xDE1u);
      glBindTexture(0xDE1u, 2u);
      glTexSubImage2D(0xDE1u, 0, 0, 0, 640, 480, 0x1908u, 0x1401u, pixels);
      glTexParameteri(0xDE1u, 0x2801u, 9729);
      glTexParameteri(0xDE1u, 0x2800u, 9729);
      glClear(0x4000u);
      if ( *(_DWORD *)screenSurface < 0 )
      {
        glBegin(7u);
        v10 = glTexCoord2f;
        glTexCoord2f(0.0, 0.9375);
        v11 = glVertex2f;
        v22 = -y;
        v23 = -x;
        glVertex2f(v23, v22);
        glTexCoord2f(0.625, 0.9375);
        goto LABEL_20;
      }
      glBegin(7u);
      v14 = glTexCoord2f;
      glTexCoord2f(0.0, 0.9375);
      v15 = glVertex2f;
      glVertex2f(-1.0, -1.0);
      glTexCoord2f(0.625, 0.9375);
    }
    v15(1.0, -1.0);
    v14(0.625, 0.0);
    v15(1.0, 1.0);
    v14(0.0, 0.0);
    v15(-1.0, 1.0);
    glEnd();
    SDL_GL_SwapBuffers();
    goto LABEL_49;
  }
  screenSurfaceTemp = screenSurface;
  //v27 = screenSurface->pitch >> 2;
  v27 = (unsigned int)*(_WORD *)(screenSurface + 16) >> 2;

  if ( dword_456C14 == 19 )
  {
    if ( mainArgs.configSmooth )
    {
      v28 = 160 * v27;
      v29 = 200;
      do
      {		  
		  v30 = v28 + *(_DWORD *)(screenSurfaceTemp + 20);
		 // v30 = v28 +  screenSurfaceTemp->pixels;
        v31 = 64;
        do
        {
          v32 = palette[*(byte *)v2];
          *(_DWORD *)v30 = v32;
          *(_DWORD *)(v30 + 4 * v27) = v32;
          *(_DWORD *)(v30 + 4) = v32;
          *(_DWORD *)(v30 + 4 * v27 + 4) = v32;
          v33 = palette[*(byte *)(v2 + 1)];
          v34 = v30 + 4;
          *(_DWORD *)(v34 + 4) = v33;
          *(_DWORD *)(v34 + 4 * v27 + 4) = v33;
          v34 += 4;
          *(_DWORD *)(v34 + 4) = v33;
          *(_DWORD *)(v34 + 4 * v27 + 4) = v33;
          v35 = v2 + 1;
          v36 = palette[*(byte *)(v35 + 1)];
          v34 += 4;
          *(_DWORD *)(v34 + 4) = v36;
          *(_DWORD *)(v34 + 4 * v27 + 4) = v36;
          v34 += 4;
          *(_DWORD *)(v34 + 4) = v36;
          ++v35;
          *(_DWORD *)(v34 + 4 * v27 + 4) = v36;
          v37 = palette[*(byte *)(v35 + 1)];
          v34 += 4;
          *(_DWORD *)(v34 + 4) = v37;
          ++v35;
          v34 += 4;
          *(_DWORD *)(v34 + 4 * v27) = v37;
          *(_DWORD *)(v34 + 4) = v37;
          v34 += 4;
          *(_DWORD *)(v34 + 4 * v27) = v37;
          v38 = palette[*(byte *)(v35 + 1)];
          v34 += 4;
          *(_DWORD *)v34 = v38;
          *(_DWORD *)(v34 + 4 * v27) = v38;
          v34 += 4;
          *(_DWORD *)v34 = v38;
          *(_DWORD *)(v34 + 4 * v27) = v38;
          v2 = v35 + 2;
          v30 = v34 + 4;
          --v31;
        }
        while ( v31 );
		screenSurfaceTemp = screenSurface;
        v28 += 8 * v27;
        --v29;
      }
      while ( v29 );
    }
    else
    {
      v39 = 8 * v27;
      v40 = 160 * v27;
      v60 = 200;
      while ( 1 )
      {
        v41 = v40 + *(_DWORD *)(screenSurfaceTemp + 20);
        v42 = 64;
        do
        {
          *(_DWORD *)v41 = palette[*(byte *)v2];
          v43 = palette[*(byte *)(v2 + 1)];
          v44 = v2 + 1;
          *(_DWORD *)(v41 + 8) = v43;
          v45 = palette[*(byte *)(v44 + 1)];
          v44 += 2;
          *(_DWORD *)(v41 + 16) = v45;
          v46 = palette[*(byte *)v44++];
          *(_DWORD *)(v41 + 24) = v46;
          *(_DWORD *)(v41 + 32) = palette[*(byte *)v44];
          v2 = v44 + 1;
          v41 += 40;
          --v42;
        }
        while ( v42 );
        v40 += v39;
        --v60;
        if ( !v60 )
          break;
		screenSurfaceTemp = screenSurface;
      }
      v47 = 160 * v27;
      v61 = 200;
      do
      {
        v48 = v47 + *(_DWORD *)(screenSurface + 20);
        v49 = 319;
        do
        {
          v50 = (*(_DWORD *)v48 & 0xFCFCFC) + (*(_DWORD *)(v48 + 8) & 0xFCFCFC);
          v51 = v48 + 4;
          *(_DWORD *)v51 = v50 >> 1;
          v48 = v51 + 4;
          --v49;
        }
        while ( v49 );
        v47 += v39;
        --v61;
      }
      while ( v61 );
      v52 = 160 * v27;
      v62 = 200;
      do
      {
        v53 = v52 + *(_DWORD *)(screenSurface + 20);
        v54 = 213;
        do
        {
          *(_DWORD *)(v53 + 4 * v27) = ((*(_DWORD *)v53 & 0xFCFCFC) + (*(_DWORD *)(v39 + v53) & 0xFCFCFC)) >> 1;
          *(_DWORD *)(v53 + 4 * v27 + 4) = ((*(_DWORD *)(v53 + 4) & 0xFCFCFC) + (*(_DWORD *)(v39 + v53 + 4) & 0xFCFCFC)) >> 1;
          *(_DWORD *)(v53 + 4 * v27 + 8) = ((*(_DWORD *)(v53 + 8) & 0xFCFCFC) + (*(_DWORD *)(v39 + v53 + 8) & 0xFCFCFC)) >> 1;
          v53 += 12;
          --v54;
        }
        while ( v54 );
        v52 += v39;
        --v62;
      }
      while ( v62 );
	  screenSurfaceTemp = screenSurface;
    }
  }
  else
  {
    v55 = 0;
    if ( *(_DWORD *)(screenSurface + 12) > 0 )
    {
      v56 = *(_DWORD *)(screenSurface + 8); //heihgt
      v57 = 0;
      v63 = 4 * v27;
      do
      {
        v58 = v57 + *(_DWORD *)(screenSurfaceTemp + 20);
        for ( i = 0; i < v56; ++i )
        {
          *(_DWORD *)v58 = palette[*(byte *)v2];
		  screenSurfaceTemp = screenSurface;
          v56 = *(_DWORD *)(screenSurface + 8);
          v58 += 4;
          ++v2;
        }
        ++v55;
        v57 += v63;
      }
      while ( v55 < *(_DWORD *)(screenSurfaceTemp + 12) );
    }
  }
  //void SDL_UpdateRect(SDL_Surface *screen, Sint32 x, Sint32 y, Sint32 w, Sint32 h);
  SDL_UpdateRect(screenSurfaceTemp, 0, 0, *(_DWORD *)(screenSurfaceTemp + 8), *(_DWORD *)(screenSurfaceTemp + 12));
LABEL_49:
  if ( !mainArgs.configNoSound )
    FSOUND_Update();
  for ( result = SDL_PollEvent(&event); result; result = SDL_PollEvent(&event) ) //&event v65 es event.key.keysym.scancode
  {
    switch (event.type)
    {
      case SDL_KEYDOWN: //2
		  if (event.key.keysym.sym == SDLK_RETURN) //return 
			 
			//if (v66 == 13)
        {
			 
			if ( !(event.key.keysym.mod & 0x300) ) //v67 es event.key.keysym.mod
            goto LABEL_68;
        }
        else if (event.key.keysym.sym != 293 )
        {
LABEL_68:
			//v68 no se que es aunque no parece grave
          if ( !(v68 & 0xFF80) )
            dword_456BFC = v68 & 0x7F;
          dword_456BF8 = event.key.keysym.scancode;
          byte_45E0C0[event.key.keysym.scancode] = 1;
          continue;
        }
        break;
      case SDL_KEYUP: //3
        if ( event.key.keysym.sym == 293 ) //f12
			//if (v66 == 293)
        {
          mainArgs.configSmooth = mainArgs.configSmooth == 0;
        }
        else if (event.key.keysym.sym == SDLK_RETURN &&  event.key.keysym.mod & 0x300 )
        {
          if ( *(_DWORD *)screenSurface >= 0 )
            SetVideoMode(1);
          else
            SetVideoMode(0);
          continue;
        }
        byte_45E0C0[event.key.keysym.scancode] = 0;
        break;
      case SDL_QUIT: //12
        exit(0);
        break;
    }
  }
  return result;
}


//----- (0043BD70) --------------------------------------------------------
int __cdecl setWindowCaption3(int a1)
{
  int result; // eax@1
  int v2; // esi@4
  int v3; // ebx@4
  int v4; // ecx@5
  int v5; // edi@5
  unsigned int v6; // ebp@5
  int v7; // eax@6
  int i; // edx@6

  memset((void *)dword_456BF4, 0, 0x4B000u);
  result = a1;
  if ( dword_456C14 != a1 )
  {
    if ( a1 == 19 )
    {
      if ( !mainArgs.configGL )
      {
        v2 = screenSurface;
        v3 = 0;
        if ( *(_DWORD *)(screenSurface + 12) > 0 )
        {
          v4 = *(_DWORD *)(screenSurface + 8);
          v5 = 0;
          v6 = 4 * ((unsigned int)*(_WORD *)(screenSurface + 16) >> 2);
          do
          {
            v7 = v5 + *(_DWORD *)(v2 + 20);
            for ( i = 0; i < v4; ++i )
            {
              *(_DWORD *)v7 = 0;
              v2 = screenSurface;
              v4 = *(_DWORD *)(screenSurface + 8);
              v7 += 4;
            }
            ++v3;
            v5 += v6;
          }
          while ( v3 < *(_DWORD *)(v2 + 12) );
        }
      }
      screenPtr = dword_456BF4;
      dword_456C14 = 19;
      //TODO fix
      SDL_WM_SetCaption("DreeRally", 0);
      //result = SDL_WM_SetCaption("DreeRally", 0);
    }
    else
    {
      if ( a1 == 257 )
      {
        screenPtr = dword_456BF4;
        dword_456C14 = 257;
      }
      //TODO fix
      SDL_WM_SetCaption("DreeRally", 0);
      //result = SDL_WM_SetCaption("DreeRally", 0);
    }
  }
  return result;
}
// 43F828: using guessed type int __cdecl SDL_WM_SetCaption(_DWORD, _DWORD);
// 456A24: using guessed type int configGL;
// 456BF0: using guessed type int screenPtr;
// 456BF4: using guessed type int dword_456BF4;
// 456C14: using guessed type int dword_456C14;
// 45E0AC: using guessed type int screenSurface;

//----- (0043BE60) --------------------------------------------------------
int setWindowCaption2()
{
  int result; // eax@1

  memset((void *)dword_456BF4, 0, 0x4B000u);
  result = 257;
  if ( dword_456C14 != 257 )
  {
    screenPtr = dword_456BF4;
    dword_456C14 = 257;
    //TODO fix
      SDL_WM_SetCaption("DreeRally", 0);
      //result = SDL_WM_SetCaption("DreeRally", 0);
  }
  return result;
}


//----- (0043BEB0) --------------------------------------------------------
int setWindowCaption()
{
  int result; // eax@1

  result = 0;
  memset((void *)dword_456BF4, 0, 0x4B000u);
  if ( dword_456C14 != 3 )
    //TODO fix
      SDL_WM_SetCaption("DreeRally", 0);
      //result = SDL_WM_SetCaption("DreeRally", 0);
  return result;
}


//----- (0043BEE0) --------------------------------------------------------
int sub_43BEE0()
{
  return setWindowCaption3(19);
}

//----- (0043BEF0) --------------------------------------------------------
int  sub_43BEF0(int a1, void *a2, unsigned int a3, int a4, char a5)
{
  int result; // eax@1
  void *v6; // ebp@2
  int v7; // eax@4

  result = a4;
  if ( a4 > 0 )
  {
    v6 = a2;
    do
    {
      if ( (signed int)a3 > 0 )
      {
        LOBYTE(a1) = a5;
        BYTE1(a1) = a5;
        v7 = a1 << 16;
        LOWORD(v7) = a1;
        memset32(v6, v7, a3 >> 2);
        memset((char *)v6 + 4 * (a3 >> 2), a5, a3 & 3);
        v6 = (char *)v6 + a3;
      }
      result = 512 - a3;
      v6 = (char *)v6 + 512 - a3;
      --a4;
    }
    while ( a4 );
  }
  return result;
}

//----- (0043BF50) --------------------------------------------------------
int __cdecl drawImageWithPosition2(int texture, int height, int width, int screenBufferPtr)
{
  int v4; // ecx@1
  int result; // eax@1
  int v6; // ebp@2
  int v7; // esi@4
  char v8; // dl@5

  v4 = texture;
  result = screenBufferPtr;
  if (width > 0 )
  {
    v6 = width;
    do
    {
      if (height > 0 )
      {
        v7 = height;
        do
        {
          v8 = *(byte *)v4++;
          *(byte *)result++ = v8;
          --v7;
        }
        while ( v7 );
      }
      result += 640 - height;
      --v6;
    }
    while ( v6 );
  }
  return result;
}

//----- (0043BF90) --------------------------------------------------------
int __cdecl drawImageWithPosition(int icon, int width, int height, int pscreenBufferPos)
{
  int result; // eax@1
  int screenIcon; // edx@1
  int screenPos; // ecx@1
  int v7; // ebx@2
  int v8; // esi@4

  result = height;
  screenIcon = icon;
  screenPos = pscreenBufferPos;
  if (height > 0 )
  {
    v7 = height;
    do
    {
      if (width > 0 )
      {
        v8 = width;
        do
        {
          if ( *(byte *)screenIcon)
            *(byte *)screenPos = *(byte *)screenIcon;
          ++screenIcon;
          ++screenPos;
          --v8;
        }
        while ( v8 );
      }
      result = 640 - width;
	  screenPos += 640 - width;
      --v7;
    }
    while ( v7 );
  }
  return result;
}

//----- (0043BFE0) --------------------------------------------------------
int __cdecl sub_43BFE0(int a1, int a2)
{
  int v2; // eax@1
  int v3; // esi@1
  signed int v4; // edi@1
  signed int v5; // ecx@2

  v2 = a2;
  v3 = a1;
  v4 = 0;
  while ( 2 )
  {
    v5 = 0;
    do
    {
      if ( *(byte *)v3 > 3u && (*(byte *)v2 & 0xFu) < 4 )
      {
        dword_508D20 = v4;
        dword_4A7A40 = v5;
        return *(byte *)v2 & 0xF;
      }
      ++v3;
      ++v2;
      ++v5;
    }
    while ( v5 < 40 );
    ++v4;
    v2 = v2 + dword_464F40 - 40;
    if ( v4 < 40 )
      continue;
    break;
  }
  return 15;
}
// 464F40: using guessed type int dword_464F40;
// 4A7A40: using guessed type int dword_4A7A40;
// 508D20: using guessed type int dword_508D20;

//----- (0043C040) --------------------------------------------------------
int __cdecl setPaletteValue(int pos, int r, int g, int b)
{
  int result; // eax@2

  if ( mainArgs.configGL )
  {
    result = 4 * (r | ((g | (b << 8)) << 8));
    palette[pos] = result;
  }
  else
  {
    result = pos;
    palette[pos] = 4 * (b | ((g | (r << 8)) << 8)); //esta variable contiene paletas
  }
  return result;
}
// 456A24: using guessed type int configGL;
// 45E600: using guessed type int palette[];

//----- (0043C0A0) --------------------------------------------------------
int __cdecl setPaletteAndGetValue(unsigned __int8 pos, unsigned __int8 r, char g, unsigned __int8 b)
{
  unsigned __int16 v4; // ax@2
  int result; // eax@
  unsigned __int16 v6; // ax@3

  if ( mainArgs.configGL )
  {
    HIBYTE(v4) = b;
    LOBYTE(v4) = g;
    result = 4 * (r | (v4 << 8));
    palette[pos] = result;
  }
  else
  {
    HIBYTE(v6) = r;
    LOBYTE(v6) = g;
    result = 4 * (b | (v6 << 8));
    palette[pos] = result;
  }
  return result;
}
// 456A24: using guessed type int configGL;
// 45E600: using guessed type int palette[];

//----- (0043C0F0) --------------------------------------------------------
int __cdecl sub_43C0F0(int a1)
{
  int result; // eax@1
  signed int v2; // ecx@1
  int v3; // eax@2
  int v4; // eax@4

  result = a1;
  v2 = (signed int)palette;
  if ( mainArgs.configGL )
  {
    do
    {
      *(byte *)result = (*(_DWORD *)v2 >> 2) & 0x3F;
      v3 = result + 1;
      *(byte *)v3++ = (*(_DWORD *)v2 >> 10) & 0x3F;
      *(byte *)v3 = (*(_DWORD *)v2 >> 18) & 0x3F;
      v2 += 4;
      result = v3 + 1;
    }
    while ( v2 < (signed int)&configuration.useJoystick );
  }
  else
  {
    do
    {
      *(byte *)result = (*(_DWORD *)v2 >> 18) & 0x3F;
      v4 = result + 1;
      *(byte *)v4++ = (*(_DWORD *)v2 >> 10) & 0x3F;
      *(byte *)v4 = (*(_DWORD *)v2 >> 2) & 0x3F;
      v2 += 4;
      result = v4 + 1;
    }
    while ( v2 < (signed int)&configuration.useJoystick );
  }
  return result;
}
// 456A24: using guessed type int configGL;
// 45E600: using guessed type int palette[];
// 45EA00: using guessed type int configuration.useJoystick;

//----- (0043C160) --------------------------------------------------------
int __cdecl sub_43C160(int a1)
{
  int result; // eax@1
  signed int v2; // ecx@1
  int v3; // eax@2
  int v4; // eax@4

  result = a1;
  v2 = (signed int)palette;
  if ( mainArgs.configGL )
  {
    do
    {
      *(byte *)result = *(byte *)v2;
      v3 = result + 1;
      *(byte *)v3++ = *(_WORD *)v2 >> 8;
      *(byte *)v3 = *(byte *)(v2 + 2);
      v2 += 4;
      result = v3 + 1;
    }
    while ( v2 < (signed int)&configuration.useJoystick );
  }
  else
  {
    do
    {
      *(byte *)result = *(byte *)(v2 + 2);
      v4 = result + 1;
      *(byte *)v4++ = *(_WORD *)v2 >> 8;
      *(byte *)v4 = *(byte *)v2;
      v2 += 4;
      result = v4 + 1;
    }
    while ( v2 < (signed int)&configuration.useJoystick );
  }
  return result;
}
// 456A24: using guessed type int configGL;
// 45E600: using guessed type int palette[];
// 45EA00: using guessed type int configuration.useJoystick;

//----- (0043C1B0) --------------------------------------------------------
int __cdecl sub_43C1B0(unsigned __int8 a1, int a2, signed int a3)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  {
    sub_43EBB0(a1 - 1, (a2 << 6 >> 16) + 16);
    result = sub_43EBD0((unsigned int)a1 - 1, a3);
  }
  return result;
}
// 456C04: using guessed type int configNoSound;

//----- (0043C1F0) --------------------------------------------------------
int sub_43C1F0()
{
  int result; // eax@2

  if ( mainArgs.configNoSound )
    result = 0;
  else
    result = dword_45E1E0[FMUSIC_GetOrder(musicModule)] << 8;
  return result;
}

//----- (0043C220) --------------------------------------------------------
char __stdcall sub_43C220(int a1, int a2, signed int a3, int a4)
{
  if ( !mainArgs.configNoSound )
    sub_43DCB0(a3 / 4, a2);
  return 1;
}
// 456C04: using guessed type int configNoSound;

//----- (0043C250) --------------------------------------------------------
int __cdecl musicSetVolume(signed int a1)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  {
    dword_456A2C = a1 >> 8;
    result = FSOUND_SetVolume(dword_456C10, (a1 >> 8) * dword_456A34 >> 8);
  }
  return result;
}


//----- (0043C280) --------------------------------------------------------
int __cdecl musicSetMasterVolume(signed int a1)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  {
    dword_456A30 = a1 >> 8;
     //TODO
    // result = FMUSIC_SetMasterVolume((a1 >> 8) * dword_456A34 >> 9, dword_456C08, (a1 >> 8) * dword_456A34 >> 9);
    result = FMUSIC_SetMasterVolume(musicModule, (a1 >> 8) * dword_456A34 >> 9);
  }
  return result;
}


//----- (0043C2B0) --------------------------------------------------------
int __cdecl setMusicVolume(signed int a1)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  dword_456A34 = a1 >> 8;
  if ( !mainArgs.configNoSound )
  {
    dword_456A30 = dword_456A30 << 8 >> 8;
    FMUSIC_SetMasterVolume(musicModule, (a1 >> 8) * dword_456A30 >> 9);
    //TODO
     //FMUSIC_SetMasterVolume(a1 >> 8, musicModule, (a1 >> 8) * dword_456A30 >> 9);
    result = mainArgs.configNoSound;
    if ( !mainArgs.configNoSound )
    {
      dword_456A2C = dword_456A2C << 8 >> 8;
      result = FSOUND_SetVolume(dword_456C10, dword_456A34 * dword_456A2C >> 8);
    }
  }
  return result;
}


//----- (0043C320) --------------------------------------------------------
char __cdecl musicSetOrder(signed int a1)
{
  if ( !mainArgs.configNoSound )
    FMUSIC_SetOrder(musicModule, (a1 >> 8) - dword_45DC60[a1 >> 8]);
  return 0;
}



//----- (0043C360) --------------------------------------------------------
int musicPlayMusic()
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
    result = FMUSIC_PlaySong(musicModule);
  return result;
}


//----- (0043C380) --------------------------------------------------------
int __cdecl loadMenuSoundEffect(unsigned __int8 a1, char a2, int a3, int a4, int a5)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
    result = sub_43EC40((int)dword_456C24, a1 - 1, a2 - 1, a5, (a4 << 6 >> 16) + 16);
  return result;
}
// 456C04: using guessed type int configNoSound;

//----- (0043C3C0) --------------------------------------------------------
int stopSong()
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
    result = FMUSIC_StopSong(musicModule);
  return result;
}


//----- (0043C3E0) --------------------------------------------------------
int __cdecl sub_43C3E0(unsigned __int8 a1)
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  {
    result = dword_45C4E4[43 * (a1 - 1)];
    *(_DWORD *)(result + 44) = 0;
    *(_DWORD *)(result + 40) = 0;
    *(_DWORD *)(result + 28) = 0;
    *(_DWORD *)(result + 24) = 0;
  }
  return result;
}


//----- (0043C400) --------------------------------------------------------
int stopAndOpenMusic()
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  {
    FSOUND_Stream_Stop(soundStream);
    FSOUND_Stream_Close(soundStream);
    freeStreamMemory(dword_456C24);
    result = FMUSIC_FreeSong(musicModule);
	musicModule = NULL;
    dword_456C24 = 0;
  }
  return result;
}


//----- (0043C450) --------------------------------------------------------
int __cdecl sub_43C450(int a1)
{
  int result; // eax@1

  result = a1;
  *(_WORD *)a1 = 0;
  *(_WORD *)(a1 + 320) = 0;
  return result;
}

//----- (0043C470) --------------------------------------------------------
__int16 __cdecl sub_43C470(int a1, int a2)
{
  __int16 result; // ax@1

  *(_WORD *)a1 = *(_WORD *)a2;
  result = *(_WORD *)(a2 + 320);
  *(_WORD *)(a1 + 320) = result;
  return result;
}

//----- (0043C490) --------------------------------------------------------
__int16 __cdecl sub_43C490(int a1, int a2)
{
  __int16 result; // ax@1

  *(_WORD *)a1 = *(_WORD *)a2;
  result = *(_WORD *)(a2 + 512);
  *(_WORD *)(a1 + 320) = result;
  return result;
}

//----- (0043C4B0) --------------------------------------------------------
int sub_43C4B0()
{
  return 0;
}

//----- (0043C4D0) --------------------------------------------------------
int freeMusic()
{
  int result; // eax@1

  result = mainArgs.configNoSound;
  if ( !mainArgs.configNoSound )
  //TODO
  //  result = FSOUND_Close();
  return result;
}
void __cdecl logJoystickClose()
{
  if ( dword_456C20 )
    SDL_JoystickClose(dword_456C20);
}
int  inicializeScreen(double a1)
{
  int v1; // esi@1
  SDL_VideoInfo * videoInfo; // eax@12
  double v3; // st7@12
  int v4; // eax@15
  int result; // eax@15

  v1 = 0;
  if ( mainArgs.configWindow )
    v1 = 2147483648;
  FSOUND_GetVersion();
  if ( a1 < 3.75 )
    exit(-1);
  if ( !mainArgs.configNoSound && (unsigned __int8)FSOUND_Init(44100, 64, 0) )
  {
    if ( !mainArgs.configNoSound )
      sub_43F6B0(
        (int (__cdecl *)(_DWORD))sub_43AD80,
        (int (__cdecl *)(_DWORD))sub_43ADD0,
        (int (__cdecl *)(_DWORD, _DWORD, _DWORD))sub_43ADF0,
        (int (__cdecl *)(_DWORD))sub_43AE30,
        sub_43AE70);
  }
  else
  {
    mainArgs.configNoSound = 1;
  }
  if ( SDL_Init(1049120) )
    exit(-1);
  videoInfo = SDL_GetVideoInfo();
  screenWidth = videoInfo->current_w;
  screenHeight = videoInfo->current_h;
  v3 = (double)screenWidth / (double)screenHeight;
  screenColors = videoInfo->vfmt->BitsPerPixel;
  //screenColors = *(byte *)(*(_DWORD *)(videoInfo.vfmt.BitsPerPixel + 8) + 4);
  if ( v3 <= 1.3333334 )
    y = v3 * 0.75;
  else
    x = 1.3333334 / v3;
  atexit(logJoystickClose);
  v4 = (int)malloc(0x96000u);
  dword_456BF4 = v4;
  screenPtr = v4;
  SetVideoMode(v1);
  SDL_EnableUNICODE(1);
  result = SDL_EnableKeyRepeat(500, 30);
  if ( v1 )
  //TODO fix
    //result = SDL_Delay(2000);
    SDL_Delay(2);
  //cambiado porque no merece SDL_Delay(2000);
  return result;
}
signed int SDLCheckJoystick()
{
  signed int result; // eax@2
  char v1; // al@3
  int v2; // ST10_4@3
  char v3; // al@3
  int v4; // ST08_4@3
  char v5; // al@3
  int v6; // ST00_4@3

  if ( dword_456C20 )
  {
    SDL_JoystickUpdate();
    dword_4A7A44 = (signed __int16)SDL_JoystickGetAxis(dword_456C20, 0) / 256;
    dword_4A9EB8 = (signed __int16)SDL_JoystickGetAxis(dword_456C20, 1) / 256;
    v1 = SDL_JoystickGetButton(dword_456C20, 0);
    v2 = dword_456C20;
    byte_463E00[(unsigned __int8)configuration.defaultAccelerateGamepad] = v1;
    v3 = SDL_JoystickGetButton(v2, 1);
    v4 = dword_456C20;
    byte_463E00[(unsigned __int8)configuration.defaultTurboGamepad] = v3;
    v5 = SDL_JoystickGetButton(v4, 2);
    v6 = dword_456C20;
    byte_463E00[(unsigned __int8)configuration.defaultGunGamepad] = v5;
    byte_463E00[(unsigned __int8)configuration.defaultMineGamepad] = SDL_JoystickGetButton(v6, 3);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0043C730) --------------------------------------------------------
void sub_43C730()
{
  dword_456C00 = 0;
}


//----- (0043C740) --------------------------------------------------------
signed __int64 sub_43C740()
{
  unsigned int v0; // ecx@1
  signed __int64 result; // rax@1

  v0 = SDL_GetTicks();
  result = 613566757 * v0;
  sdlTicks14 = v0 / 0xE;
  return result;
}


//----- (0043C760) --------------------------------------------------------
int waitWithDelay()
{
  int result; // eax@2

  if ( sdlTicks14 >= (signed int)(SDL_GetTicks() / 0xEu) )
  {
    sub_43B580(sdlTicks14);
    result = sdlTicks14;
  }
  else
  {
    result = sdlTicks14++ + 1;
    if ( dword_456C00 )
    {
      dword_456C00();
      result = sdlTicks14;
    }
  }
  return result;
}


//----- (0043C7B0) --------------------------------------------------------
int (*__cdecl sub_43C7B0(int (*a1)(void)))(void)
{
  int (*result)(void); // eax@1

  result = a1;
  dword_456C00 = a1;
  return result;
}
// 456C00: using guessed type int (*dword_456C00)(void);

//----- (0043C7C0) --------------------------------------------------------
int __cdecl updateScreenPtr(int a1)
{
  int result; // eax@1

  result = dword_456BF4 + (a1 << 16);
  screenPtr = dword_456BF4 + (a1 << 16);
  return result;
}
// 456BF0: using guessed type int screenPtr;
// 456BF4: using guessed type int dword_456BF4;

//----- (0043C7E0) --------------------------------------------------------
int __cdecl sub_43C7E0(int a1, int a2, int a3, signed int a4, char a5)
{
  __int64 v5; // rax@1
  int v6; // edi@2
  int v7; // ecx@3
  signed int v8; // esi@3
  signed int v10; // [sp+10h] [bp+Ch]@2

  v5 = (unsigned int)(((a3 - a2) << 8) / a4);
  if ( a4 > 0 )
  {
    v6 = 0;
    v10 = a4;
    do
    {
      HIDWORD(v5) += v5;
      v7 = a1 + v6 + (SHIDWORD(v5) >> 8);
      v8 = 2;
      do
      {
        if ( *(byte *)v7 >= 0x40u )
          *(byte *)v7 = a5;
        ++v7;
        --v8;
      }
      while ( v8 );
      v6 += 512;
      --v10;
    }
    while ( v10 );
  }
  return v5;
}

//----- (0043C850) --------------------------------------------------------
int sub_43C850()
{
  int v0; // esi@5
  int result; // eax@7

  if ( sdlTicks14 >= (signed int)(SDL_GetTicks() / 0xEu) )
  {
    sub_43B580(sdlTicks14);
  }
  else
  {
    ++sdlTicks14;
    if ( dword_456C00 )
      dword_456C00();
  }
  v0 = sdlTicks14;
  while ( 1 )
  {
    if ( sdlTicks14 >= (signed int)(SDL_GetTicks() / 0xEu) )
    {
      result = sub_43B580(sdlTicks14);
    }
    else
    {
      ++sdlTicks14;
      result = (int)dword_456C00;
      if ( dword_456C00 )
        result = dword_456C00();
    }
    if ( v0 != sdlTicks14 )
      break;
    SDL_Delay(1);
  }
  return result;
}
// 43C850: using guessed type int sub_43C850(void);
// 43F7E6: using guessed type int SDL_GetTicks(void);
// 43F822: using guessed type int __cdecl SDL_Delay(_DWORD);
// 456C00: using guessed type int (*dword_456C00)(void);
// 456C2C: using guessed type int sdlTicks14;

//----- (0043C900) --------------------------------------------------------
int SDLConfigureJoystick()
{
  int v0; // esi@3
  int result; // eax@8

  if ( dword_456C20 )
    goto LABEL_13;
  if ( SDL_NumJoysticks() > 0 )
  {
    v0 = 0;
    while ( !dword_456C20 || v0 >= SDL_NumJoysticks() )
    {
      dword_456C20 = SDL_JoystickOpen(v0);
      if ( SDL_JoystickNumAxes(dword_456C20) < 2 )
      {
        SDL_JoystickClose(dword_456C20);
        dword_456C20 = 0;
        ++v0;
      }
    }
  }
  result = dword_456C20;
  if ( dword_456C20 )
LABEL_13:
    result = SDLCheckJoystick();
  else
    configuration.useJoystick = 0;
  return result;
}
// 43F82E: using guessed type int __cdecl SDL_JoystickClose(_DWORD);
// 43F85E: using guessed type int __cdecl SDL_JoystickNumAxes(_DWORD);
// 43F86A: using guessed type int SDL_NumJoysticks(void);
// 456C20: using guessed type int dword_456C20;
// 45EA00: using guessed type int configuration.useJoystick;

//----- (0043C980) --------------------------------------------------------//aplica paleta 
void __cdecl decryptTexture(int src,  int dest, int startPos, int lenght)
{
  int v4; // ebx@1
  signed int v5; // ebp@1
  void *v6 = malloc(0x4004u); // esi@1
  signed int v7; // edi@1
  int v8; // eax@2
  int i; // eax@4
  bool v10; // zf@10
  signed int v11; // ecx@12
  signed int v12; // eax@21
  int v13; // [sp+10h] [bp-1Ch]@1
  signed int v14; // [sp+14h] [bp-18h]@1
  int v15; // [sp+18h] [bp-14h]@1
  void *Memory= malloc(0x1001u); // [sp+1Ch] [bp-10h]@1
  char v17; // [sp+20h] [bp-Ch]@1
  void *v18= malloc(0x1001u); // [sp+24h] [bp-8h]@1
  void *v19 = malloc(0x4004u); // [sp+28h] [bp-4h]@1
  
  v4 = 0;
  v15 = 0;
  v5 = 0;
 
  v6 = Memory;
 
  v13 = 9;
  v14 = 512;
  v7 = 258;
  v17 = 0;
  if (lenght)
  {
    while ( 1 )
    {
      v8 = sub_43B0F0(src, v5, v13);
      v5 += v13;
      if ( v8 == 256 )
        goto LABEL_28;
      if ( v8 != 257 )
        break;
      v13 = 9;
      v7 = 258;
      v14 = 512;
      for ( i = sub_43B0F0(src, v5, 9); i == 257; i = sub_43B0F0(src, v5, 9) )
        v5 += 9;
      v5 += 9;
      if ( i == 256 )
        goto LABEL_28;
      if ( i >= 258 )
        i = 0;
      v17 = i;
      v4 = i;
      if (startPos)
      {
        --startPos;
LABEL_26:
        v10 = lenght == 0;
        goto LABEL_27;
      }
      *(byte *)(v15++ + dest) = 32 * i | (i >> 3);
      v10 = lenght-- == 1;
LABEL_27:
      if ( v10 )
        goto LABEL_28;
    }
    v11 = v8;
    if ( v8 >= v7 )
    {
      *(byte *)v6 = v17;
      v11 = v4;
      v6 = (char *)v6 + 1;
    }
    for ( ; v11 >= 258; v6 = (char *)v6 + 1 )
    {
      *(byte *)v6 = *((byte *)v18 + v11);
      v11 = *((int *)v19 + v11);
    }
    *(byte *)v6 = v11;
    v6 = (char *)v6 + 1;
    if ( v7 >= v14 || (*((byte *)v18 + v7) = v11, v17 = v11, *((int *)v19 + v7) = v4, v4 = v8, ++v7, v7 >= v14) )
    {
      if ( v13 < 12 )
      {
        v14 *= 2;
        ++v13;
      }
    }
    while ( v6 > Memory )
    {
      v12 = *((char *)v6 - 1);
      v6 = (char *)v6 - 1;
      if (startPos)
      {
        --startPos;
      }
      else
      {
        *(byte *)(v15++ + dest) = 32 * v12 | (v12 >> 3);
        --lenght;
        if ( !lenght)
          goto LABEL_28;
      }
    }
    goto LABEL_26;
  }
LABEL_28:
  
  free(Memory);
  free(v18);
  free(v19);
}

//----- (0043CB90) --------------------------------------------------------
void __cdecl copyImageToBuffer(int a1, int a2)
{
if(a1!=0 && a2!=0)
 decryptTexture(a1, a2, 0, 0x40000000);
}

//----- (0043CBB0) --------------------------------------------------------
unsigned int sub_43CBB0()
{
  int v0; // esi@1
  unsigned int result; // eax@1

  v0 = SDL_GetTicks() + 2000;
  for ( result = SDL_GetTicks(); v0 > result; result = SDL_GetTicks() )
  {
    sub_43C850();
    SDL_Delay(1);
  }
  return result;
}
// 43C850: using guessed type int sub_43C850(void);
// 43F7E6: using guessed type int SDL_GetTicks(void);
// 43F822: using guessed type int __cdecl SDL_Delay(_DWORD);

//----- (0043CBF0) --------------------------------------------------------
void __cdecl loadMusic(int a1, char * music1, int a3, char* music2)
{
  char *musicStream=NULL; // esi@1
  char *v5= NULL; // ebx@1
  int musicSize; // eax@2
  FMUSIC_MODULE *music_module; // ebp@2
  int v8; // eax@2
  int v9; // edx@2
  int v10; // ecx@2
  FSOUND_STREAM * sound_stream; // eax@8
  int v12; // eax@8
  int v13; // [sp+Ch] [bp-8h]@8
  void *v14; // [sp+10h] [bp-4h]@8

  
  if ( !mainArgs.configNoSound )
  {
	musicSize = getSizeMusic(music1);
	musicStream =malloc( musicSize);
	v13 = getSizeMusic(music2);
	v5=malloc( v13);

	musicStream = getMusicStream(music1);
	v5 = getMusicStream(music2);
    dword_456A34 = 255;
    
	music_module = FMUSIC_LoadSongEx(musicStream, 0, musicSize, FSOUND_LOOP_NORMAL | FSOUND_LOADMEMORY, 0, 0); //32770
	v8 = 0;	
    memset(dword_45DC60, 0, 0x400u);
    musicModule	= music_module;
	//16*4 bytes son la cabecera
    v9 = *((_WORD *)musicStream + 16);
    v10 = 0;
    if ( v9 > 0 )
    {
      do
      {
		  //96 es 60h
        if ( *((byte *)musicStream + v8 + 96) >= 0xFEu )
          ++v10;
        dword_45DC60[v8] = v10;
        dword_45E1E0[v8] = v8 + v10;
        ++v8;
      }
      while ( v8 < v9 );
    }
    if ( !mainArgs.configNoSound )
    {
      dword_456A30 = dword_456A30 << 8 >> 8;
      //TODO
      //FMUSIC_SetMasterVolume(v10, music_module, dword_456A34 * dword_456A30 >> 9);
      FMUSIC_SetMasterVolume(music_module, dword_456A34 * dword_456A30 >> 9);
    }
    
    v14 = v5;
    dword_456C24 = (void *)sub_43DC50((int)&v13, 0);
	
    sub_43DA40((int)dword_456C24);
    sound_stream = FSOUND_Stream_Create(sub_43C220, 4096, 80, 44100, 0);
    soundStream = sound_stream;
    v12 = FSOUND_Stream_Play(-1, sound_stream);
    dword_456C10 = v12;
    if ( !mainArgs.configNoSound )
    {
      dword_456A2C = dword_456A2C << 8 >> 8;
      FSOUND_SetVolume(v12, dword_456A34 * dword_456A2C >> 8);
    }
    free(musicStream);
    free(v5);
  }
}


//----- (0043CD50) --------------------------------------------------------
int __cdecl sub_43CD50(int a1, int a2, int a3, int a4, int a5, int a6, char a7)
{
  int v7; // ecx@1
  signed int v8; // ecx@2
  int v9; // edx@4
  signed int v10; // edx@5
  signed int v11; // esi@7
  signed int v12; // edi@7
  int result; // eax@7
  signed int v14; // ebx@8
  int *v15; // edx@8
  int *v16; // eax@8
  int v17; // eax@8
  double v18; // st7@8
  int v19; // ebx@8
  int v20; // ecx@8
  double v21; // st7@12
  signed int v22; // edi@14
  unsigned __int64 v23; // rax@14
  signed int v24; // ecx@18
  double v25; // st7@29
  signed int v26; // edi@31
  unsigned __int64 v27; // rax@31
  signed int i; // ecx@35
  float v29; // [sp+18h] [bp-40h]@9
  float v30; // [sp+1Ch] [bp-3Ch]@9
  float v31; // [sp+20h] [bp-38h]@8
  float v32; // [sp+20h] [bp-38h]@26
  int v33; // [sp+24h] [bp-34h]@7
  float v34; // [sp+28h] [bp-30h]@12
  signed int v35; // [sp+2Ch] [bp-2Ch]@8
  int *v36; // [sp+30h] [bp-28h]@8
  float v37; // [sp+30h] [bp-28h]@29
  float v38; // [sp+34h] [bp-24h]@8
  int v39; // [sp+38h] [bp-20h]@8
  int v40; // [sp+3Ch] [bp-1Ch]@9
  int v41; // [sp+40h] [bp-18h]@1
  int v42; // [sp+44h] [bp-14h]@1
  int v43; // [sp+48h] [bp-10h]@1
  int v44; // [sp+4Ch] [bp-Ch]@1
  int v45; // [sp+50h] [bp-8h]@1
  int v46; // [sp+54h] [bp-4h]@1

  v41 = a1;
  v43 = a3;
  v7 = 0;
  v42 = a2;
  v44 = a4;
  v45 = a5;
  v46 = a6;
  if ( a2 >= a4 )
  {
    LOBYTE(v7) = a4 >= a6;
    v8 = 2 * v7 + 2;
  }
  else
  {
    v8 = a2 < a6 ? 0 : 4;
  }
  v9 = 0;
  if ( a2 <= a4 )
  {
    LOBYTE(v9) = a4 <= a6;
    v10 = 2 * v9 + 2;
  }
  else
  {
    v10 = a2 > a6 ? 0 : 4;
  }
  v11 = *(&v42 + v8);
  v12 = v10;
  result = 6 - v10 - v8;
  v33 = *(&v42 + v10);
  if ( v33 == v11 )
    return result;
  v14 = *(&v41 + result);
  v15 = &v41 + v8;
  v35 = v14;
  v16 = &v42 + result;
  v36 = v16;
  v17 = *v16;
  v18 = (double)(v14 - *v15) / (double)(v17 - v11);
  v19 = *(&v41 + v12);
  v20 = v33;
  v39 = *(&v41 + v12);
  v31 = v18;
  v38 = (double)(*(&v41 + v12) - *v15) / (double)(v33 - v11);
  if ( v17 == v11 )
  {
    v30 = (double)v35;
    v29 = (double)*v15;
LABEL_26:
    result = v20 - *v36;
    v32 = (double)(v19 - v35) / (double)(v20 - *v36);
    if ( v11 < v20 )
    {
      do
      {
        if ( v11 > 0 && v11 < 200 )
        {
          v25 = v30;
          v37 = v29;
          if ( v30 > (double)v29 )
          {
            v25 = v29;
            v37 = v30;
          }
          v26 = (unsigned __int64)floor(v25 + 0.40000001);
          v27 = (unsigned __int64)floor(v37 + 0.60000002);
          if ( v26 < 0 )
            v26 = 0;
          if ( (signed int)v27 > 512 )
            LODWORD(v27) = 512;
          for ( i = v26; i < (signed int)v27; ++i )
            *(byte *)((v11 << 9) + dword_464F14 + i + 96) = a7;
        }
        result = v33;
        ++v11;
        v30 = v30 + v32;
        v29 = v29 + v38;
      }
      while ( v11 < v33 );
    }
    return result;
  }
  v29 = (double)*v15;
  v30 = v29;
  result = *v36;
  v40 = *v36;
  if ( v11 < *v36 )
  {
    do
    {
      if ( v11 > 0 && v11 < 200 )
      {
        v21 = v30;
        v34 = v29;
        if ( v30 > (double)v29 )
        {
          v21 = v29;
          v34 = v30;
        }
        v22 = (unsigned __int64)floor(v21 + 0.40000001);
        v23 = (unsigned __int64)floor(v34 + 0.60000002);
        if ( v22 < 0 )
          v22 = 0;
        if ( (signed int)v23 > 512 )
          LODWORD(v23) = 512;
        v24 = v22;
        if ( v22 < (signed int)v23 )
        {
          do
            *(byte *)((v11 << 9) + dword_464F14 + v24++ + 96) = a7;
          while ( v24 < (signed int)v23 );
          v19 = v39;
        }
      }
      result = v40;
      ++v11;
      v30 = v30 + v31;
      v29 = v29 + v38;
    }
    while ( v11 < v40 );
    v20 = v33;
  }
  if ( result != v20 )
    goto LABEL_26;
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (0043D050) --------------------------------------------------------
int __cdecl sub_43D050(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // edx@1
  signed int v10; // edx@2
  int v11; // ecx@4
  signed int v12; // ecx@5
  int result; // eax@7
  int v14; // esi@8
  int *v15; // edi@8
  int v16; // edi@8
  int *v17; // edx@8
  double v18; // st7@8
  int v19; // edx@8
  double v20; // st6@8
  int v21; // ebx@8
  int *v22; // edx@8
  double v23; // st6@8
  double v24; // st5@8
  signed int v25; // ebx@8
  int v26; // ST14_4@8
  int v27; // ebx@8
  signed int v28; // ecx@10
  double v29; // st7@14
  signed int v30; // edi@16
  unsigned __int64 v31; // rax@16
  double v32; // st7@16
  int v33; // edi@21
  unsigned __int64 v34; // rax@22
  bool v35; // zf@24
  double v36; // st7@28
  signed int v37; // ebx@29
  double v38; // st7@33
  signed int v39; // esi@35
  unsigned __int64 v40; // rax@35
  double v41; // st7@35
  int v42; // edi@40
  int v43; // esi@40
  unsigned __int64 v44; // rax@41
  float v45; // [sp+14h] [bp-84h]@8
  float v46; // [sp+18h] [bp-80h]@9
  float v47; // [sp+1Ch] [bp-7Ch]@9
  float v48; // [sp+20h] [bp-78h]@9
  float v49; // [sp+24h] [bp-74h]@9
  int *v50; // [sp+28h] [bp-70h]@8
  int v51; // [sp+28h] [bp-70h]@10
  int v52; // [sp+28h] [bp-70h]@29
  signed int v53; // [sp+2Ch] [bp-6Ch]@8
  float v54; // [sp+2Ch] [bp-6Ch]@33
  int v55; // [sp+30h] [bp-68h]@7
  float v56; // [sp+30h] [bp-68h]@35
  int v57; // [sp+34h] [bp-64h]@8
  float v58; // [sp+34h] [bp-64h]@33
  int *v59; // [sp+38h] [bp-60h]@7
  float v60; // [sp+38h] [bp-60h]@33
  int v61; // [sp+3Ch] [bp-5Ch]@21
  signed int v62; // [sp+40h] [bp-58h]@10
  float v63; // [sp+44h] [bp-54h]@8
  float v64; // [sp+44h] [bp-54h]@28
  float v65; // [sp+48h] [bp-50h]@8
  float v66; // [sp+48h] [bp-50h]@28
  int *v67; // [sp+4Ch] [bp-4Ch]@8
  signed int v68; // [sp+50h] [bp-48h]@8
  float v69; // [sp+54h] [bp-44h]@14
  float v70; // [sp+58h] [bp-40h]@8
  float v71; // [sp+5Ch] [bp-3Ch]@14
  float v72; // [sp+60h] [bp-38h]@16
  float v73; // [sp+64h] [bp-34h]@14
  int v74; // [sp+68h] [bp-30h]@1
  int v75; // [sp+6Ch] [bp-2Ch]@1
  int v76; // [sp+70h] [bp-28h]@1
  int v77; // [sp+74h] [bp-24h]@1
  int v78; // [sp+78h] [bp-20h]@1
  int v79; // [sp+7Ch] [bp-1Ch]@1
  int v80; // [sp+80h] [bp-18h]@1
  int v81; // [sp+84h] [bp-14h]@1
  int v82; // [sp+88h] [bp-10h]@1
  int v83; // [sp+8Ch] [bp-Ch]@4

  v74 = a1;
  v77 = a4;
  v76 = a3;
  v79 = a6;
  v82 = a9;
  v9 = 0;
  v75 = a2;
  v78 = a5;
  v80 = a7;
  v81 = a8;
  if ( a2 >= a5 )
  {
    LOBYTE(v9) = a5 >= a8;
    v10 = ((v9 - 1) & 0xFFFFFFFD) + 6;
  }
  else
  {
    v10 = a2 < a8 ? 0 : 6;
  }
  v11 = 0;
  v83 = v10;
  if ( a2 <= a5 )
  {
    LOBYTE(v11) = a5 <= a8;
    v12 = ((v11 - 1) & 0xFFFFFFFD) + 6;
  }
  else
  {
    v12 = a2 > a8 ? 0 : 6;
  }
  v59 = &v75 + v12;
  result = 9 - v12 - v10;
  v55 = *v59;
  if ( *v59 == *(&v75 + v10) )
    return result;
  v14 = *(&v75 + v10);
  v68 = *(&v74 + result);
  v15 = &v75 + result;
  v67 = v15;
  v16 = *v15;
  v17 = &v74 + v10;
  v18 = (double)(v16 - v14);
  v50 = v17;
  v19 = *v17;
  v57 = *(&v74 + v12);
  v20 = (double)(v68 - v19) / v18;
  v21 = v57 - v19;
  v22 = &v76 + v83;
  v63 = v20;
  v23 = (double)(*v59 - v14);
  v24 = (double)v21;
  v25 = *(&v76 + result);
  v53 = v25;
  v26 = v25 - *v22;
  v27 = *(&v76 + v12);
  v70 = v24 / v23;
  v65 = (double)v26 / v18;
  v45 = (double)(*(&v76 + v12) - *v22) / v23;
  if ( v16 == v14 )
  {
    v47 = (double)v68;
    result = *v59;
    v46 = (double)*v50;
    v49 = (double)v53;
    v48 = (double)*v22;
LABEL_28:
    v36 = (double)(*v59 - *v67);
    v64 = (double)(v57 - v68) / v36;
    v66 = (double)(v27 - v53) / v36;
    if ( v14 < result )
    {
      v37 = v14 << 9;
      v52 = result - v14;
      do
      {
        if ( v37 > 0 && v37 < 102400 && v47 != v46 )
        {
          v38 = v47;
          v60 = v48;
          v58 = v49;
          v54 = v46;
          if ( v47 > (double)v46 )
          {
            v38 = v46;
            v54 = v47;
            v58 = v48;
            v60 = v49;
          }
          v39 = (unsigned __int64)floor(v38 + 0.40000001);
          v40 = (unsigned __int64)floor(v54 + 0.60000002);
          v41 = v58;
          v56 = (v60 - v58) / (double)((signed int)v40 - v39);
          if ( v39 < 0 )
          {
            v39 = 0;
            v41 = v41 - v56 * 0.0;
          }
          if ( (signed int)v40 > 512 )
            LODWORD(v40) = 512;
          if ( v39 < (signed int)v40 )
          {
            v42 = v37 + v39;
            v43 = v40 - v39;
            do
            {
              v44 = (unsigned __int64)v41;
              v41 = v41 + v56;
              *(byte *)(v42++ + dword_464F14 + 96) = v44;
              --v43;
            }
            while ( v43 );
          }
        }
        v37 += 512;
        result = v52 - 1;
        v35 = v52-- == 1;
        v47 = v47 + v64;
        v46 = v46 + v70;
        v49 = v49 + v66;
        v48 = v48 + v45;
      }
      while ( !v35 );
    }
    return result;
  }
  v46 = (double)*v50;
  v47 = v46;
  v48 = (double)*v22;
  v49 = v48;
  if ( v14 < *v67 )
  {
    v28 = v14 << 9;
    v62 = v14 << 9;
    v51 = *v67 - v14;
    v14 = *v67;
    do
    {
      if ( v28 > 0 && v28 < 102400 && v47 != v46 )
      {
        v29 = v47;
        v73 = v46;
        v71 = v49;
        v69 = v48;
        if ( v47 > (double)v46 )
        {
          v29 = v46;
          v73 = v47;
          v71 = v48;
          v69 = v49;
        }
        v30 = (unsigned __int64)floor(v29 + 0.40000001);
        v31 = (unsigned __int64)floor(v73 + 0.60000002);
        v32 = v71;
        v72 = (v69 - v71) / (double)((signed int)v31 - v30);
        if ( v30 < 0 )
        {
          v30 = 0;
          v32 = v32 - v72 * 0.0;
        }
        if ( (signed int)v31 > 512 )
          LODWORD(v31) = 512;
        if ( v30 < (signed int)v31 )
        {
          v61 = v30 + v62;
          v33 = v31 - v30;
          do
          {
            v34 = (unsigned __int64)v32;
            v32 = v32 + v72;
            *(byte *)(v61 + dword_464F14 + 96) = v34;
            --v33;
            ++v61;
          }
          while ( v33 );
        }
        v28 = v62;
      }
      v28 += 512;
      v35 = v51 == 1;
      v62 = v28;
      v47 = v47 + v63;
      --v51;
      v46 = v46 + v70;
      v49 = v49 + v65;
      v48 = v48 + v45;
    }
    while ( !v35 );
  }
  result = v55;
  if ( *v67 != v55 )
    goto LABEL_28;
  return result;
}
// 464F14: using guessed type int dword_464F14;

//----- (0043D530) --------------------------------------------------------
int __cdecl sub_43D530(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // ecx@1
  signed int v8; // ecx@2
  int v9; // edx@4
  signed int v10; // edx@5
  signed int v11; // esi@7
  signed int v12; // edi@7
  int result; // eax@7
  signed int v14; // ebx@8
  int *v15; // edx@8
  int *v16; // eax@8
  int v17; // eax@8
  double v18; // st7@8
  int v19; // ebx@8
  int v20; // ecx@8
  double v21; // st7@12
  signed int v22; // ST1C_4@14
  unsigned __int64 v23; // rax@14
  signed int v24; // ecx@14
  signed int v25; // edi@14
  signed int j; // eax@19
  int v27; // edx@21
  double v28; // st7@31
  signed int v29; // ebx@33
  unsigned __int64 v30; // rax@33
  signed int v31; // edi@33
  signed int v32; // ecx@37
  signed int i; // eax@38
  int v34; // edx@40
  float v35; // [sp+14h] [bp-44h]@9
  float v36; // [sp+18h] [bp-40h]@9
  float v37; // [sp+20h] [bp-38h]@8
  float v38; // [sp+20h] [bp-38h]@28
  int v39; // [sp+24h] [bp-34h]@7
  float v40; // [sp+28h] [bp-30h]@12
  signed int v41; // [sp+2Ch] [bp-2Ch]@8
  int v42; // [sp+30h] [bp-28h]@8
  float v43; // [sp+30h] [bp-28h]@31
  float v44; // [sp+34h] [bp-24h]@8
  int v45; // [sp+38h] [bp-20h]@8
  int v46; // [sp+3Ch] [bp-1Ch]@9
  int v47; // [sp+40h] [bp-18h]@1
  int v48; // [sp+44h] [bp-14h]@1
  int v49; // [sp+48h] [bp-10h]@1
  int v50; // [sp+4Ch] [bp-Ch]@1
  int v51; // [sp+50h] [bp-8h]@1
  int v52; // [sp+54h] [bp-4h]@1

  v47 = a1;
  v49 = a3;
  v7 = 0;
  v48 = a2;
  v50 = a4;
  v51 = a5;
  v52 = a6;
  if ( a2 >= a4 )
  {
    LOBYTE(v7) = a4 >= a6;
    v8 = 2 * v7 + 2;
  }
  else
  {
    v8 = a2 < a6 ? 0 : 4;
  }
  v9 = 0;
  if ( a2 <= a4 )
  {
    LOBYTE(v9) = a4 <= a6;
    v10 = 2 * v9 + 2;
  }
  else
  {
    v10 = a2 > a6 ? 0 : 4;
  }
  v11 = *(&v48 + v8);
  v12 = v10;
  result = 6 - v10 - v8;
  v39 = *(&v48 + v10);
  if ( v39 == v11 )
    return result;
  v14 = *(&v47 + result);
  v15 = &v47 + v8;
  v41 = v14;
  v16 = &v48 + result;
  v42 = (int)v16;
  v17 = *v16;
  v18 = (double)(v14 - *v15) / (double)(v17 - v11);
  v19 = *(&v47 + v12);
  v20 = v39;
  v45 = *(&v47 + v12);
  v37 = v18;
  v44 = (double)(*(&v47 + v12) - *v15) / (double)(v39 - v11);
  if ( v17 == v11 )
  {
    v36 = (double)v41;
    v35 = (double)*v15;
LABEL_28:
    result = v42;
    v38 = (double)(v19 - v41) / (double)(v20 - *(_DWORD *)v42);
    if ( v11 < v20 )
    {
      do
      {
        if ( v11 > 0 && v11 < 200 )
        {
          v28 = v36;
          v43 = v35;
          if ( v36 > (double)v35 )
          {
            v28 = v35;
            v43 = v36;
          }
          v29 = (unsigned __int64)floor(v28 + 0.40000001);
          v30 = (unsigned __int64)floor(v43 + 0.60000002);
          v31 = v30;
          if ( v29 < 0 )
            v29 = 0;
          if ( (signed int)v30 > 512 )
            v31 = 512;
          v32 = v29;
          if ( v29 < v31 )
          {
            for ( i = v11 << 9; ; i = v11 << 9 )
            {
              v34 = dword_464F14 + i + v32++ + 96;
              *(byte *)v34 = *(byte *)(*(byte *)v34 + a7);
              if ( v32 >= v31 )
                break;
            }
          }
        }
        result = v39;
        ++v11;
        v36 = v36 + v38;
        v35 = v35 + v44;
      }
      while ( v11 < v39 );
    }
    return result;
  }
  v35 = (double)*v15;
  v36 = v35;
  result = *(_DWORD *)v42;
  v46 = *(_DWORD *)v42;
  if ( v11 < *(_DWORD *)v42 )
  {
    do
    {
      if ( v11 > 0 && v11 < 200 )
      {
        v21 = v36;
        v40 = v35;
        if ( v36 > (double)v35 )
        {
          v21 = v35;
          v40 = v36;
        }
        v22 = (unsigned __int64)floor(v21 + 0.40000001);
        v23 = (unsigned __int64)floor(v40 + 0.60000002);
        v24 = v22;
        v25 = v23;
        if ( v22 < 0 )
          v24 = 0;
        if ( (signed int)v23 > 512 )
          v25 = 512;
        if ( v24 < v25 )
        {
          for ( j = v11 << 9; ; j = v11 << 9 )
          {
            v27 = dword_464F14 + j + v24++ + 96;
            *(byte *)v27 = *(byte *)(*(byte *)v27 + a7);
            if ( v24 >= v25 )
              break;
          }
          v19 = v45;
        }
      }
      result = v46;
      ++v11;
      v36 = v36 + v37;
      v35 = v35 + v44;
    }
    while ( v11 < v46 );
    v20 = v39;
  }
  if ( result != v20 )
    goto LABEL_28;
  return result;
}
// 464F14: using guessed type int dword_464F14;


int wait()
{
  int v0; // esi@1
  int result; // eax@1

  v0 = waitWithDelay();
  for ( result = waitWithDelay(); v0 == result; result = waitWithDelay() )
    SDL_Delay(1);
  return result;
}


//----- (0043D8A0) --------------------------------------------------------
unsigned __int64 __cdecl sub_43D8A0(int a1, signed int a2)
{
  unsigned __int64 result; // rax@1

  *(_DWORD *)(a1 + 316) = a2;
  result = (unsigned __int64)(1000.0 / ((double)a2 * 0.40000001) * (double)dword_456A40 * 0.001);
  *(_DWORD *)(a1 + 12) = result;
  return result;
}
// 456A40: using guessed type int dword_456A40;

//----- (0043D8E0) --------------------------------------------------------
char __cdecl sub_43D8E0(int a1)
{
  char result; // al@2

  if ( a1 )
  {
    if ( dword_45DA64 )
    {
      free(dword_45DA64);
      dword_45DA64 = 0;
    }
    dword_456C30 = 0;
    if ( dword_45DAB0 )
    {
      free(dword_45DAB0);
      dword_45DAB0 = 0;
    }
    dword_456C3C = 0;
    dword_45C4C0 = 0;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 456C30: using guessed type int dword_456C30;
// 456C3C: using guessed type int dword_456C3C;
// 45C4C0: using guessed type int dword_45C4C0;

//----- (0043D940) --------------------------------------------------------
char __cdecl freeStreamMemory(void *Memory)
{
  void *v1; // edi@1
  char result; // al@2
  int v3; // esi@7
  int v4; // eax@7
  int v5; // esi@7
  int v6; // ebx@7
  int v7; // ebp@8
  void **v8; // edi@9
  int v9; // ecx@13
  bool v10; // sf@13
  unsigned __int8 v11; // of@13
  int i; // esi@17
  int v13; // [sp+8h] [bp-8h]@6
  int v14; // [sp+Ch] [bp-4h]@5

  v1 = Memory;
  if ( Memory )
  {
    while ( byte_456C35 )
      ;
    sub_43D8E0((int)Memory);
    if ( *((_DWORD *)Memory + 1) )
    {
      v14 = 0;
      if ( *((_WORD *)Memory + 16) > 0 )
      {
        v13 = 0;
        do
        {
          v3 = *((_DWORD *)v1 + 1);
          v4 = *(_DWORD *)(v3 + v13);
          v5 = v13 + v3;
          v6 = 0;
          if ( v4 > 0 )
          {
            v7 = v5 + 4;
            do
            {
              v8 = *(void ***)v7;
              if ( *(_DWORD *)v7 )
              {
                free(*v8);
                free(v8);
              }
              ++v6;
              v7 += 4;
            }
            while ( v6 < *(_DWORD *)v5 );
            v1 = Memory;
          }
          v9 = *((_WORD *)v1 + 16);
          v11 = __OFSUB__(v14 + 1, v9);
          v10 = v14++ + 1 - v9 < 0;
          v13 += 340;
        }
        while ( v10 ^ v11 );
      }
    }
    if ( *((_DWORD *)v1 + 1) )
      free(*((void **)v1 + 1));
    if ( *(_DWORD *)v1 )
    {
      for ( i = 0; i < *((_DWORD *)v1 + 7); ++i )
      {
        if ( *(_DWORD *)(*(_DWORD *)v1 + 8 * i + 4) )
          free(*(void **)(*(_DWORD *)v1 + 8 * i + 4));
      }
      if ( *(_DWORD *)v1 )
        free(*(void **)v1);
    }
    free(v1);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 456C35: using guessed type char byte_456C35;

//----- (0043DA40) --------------------------------------------------------
char __cdecl sub_43DA40(int a1)
{
  signed int v1; // edi@7
  int v2; // esi@7
  int v3; // ecx@7
  signed int v4; // eax@7
  signed int v5; // ecx@9
  int v6; // edx@9
  signed int v7; // edx@9
  int v8; // ecx@10
  _UNKNOWN *v9; // eax@10
  void *v10; // eax@12
  char result; // al@12

  if ( a1 && (sub_43D8E0(a1), dword_456C9C) && dword_456CA0 && dword_456CA4 && dword_456CA8 && dword_456CAC )
  {
    flt_45DAB4 = 1.0 / (double)dword_456A40;
    v1 = (20 * dword_456A40 / 1000 + 3) & 0xFFFFFFFC;
    dword_45DA68 = (20 * dword_456A40 / 1000 + 3) & 0xFFFFFFFC;
    dword_45C4C4 = 2 * v1 * (dword_456A44 / 20);
    dword_456C94 = (dword_456A40 << 7) / 44100;
    flt_456C98 = 1.0 / (double)((dword_456A40 << 7) / 44100);
    v2 = 2 * v1 * (dword_456A44 / 20) / v1;
    memset(&unk_456CC0, 0, 0x5800u);
    v3 = 0;
    v4 = (signed int)&unk_456CF4;
    do
    {
      *(_DWORD *)(v4 - 52) = v3;
      *(_DWORD *)v4 = 1;
      v4 += 88;
      ++v3;
    }
    while ( v4 < (signed int)&unk_45C4F4 );
    v5 = *(_WORD *)(a1 + 38);
    v6 = *(byte *)(a1 + 296);
    *(_DWORD *)(a1 + 312) = *(_WORD *)(a1 + 36);
    *(_DWORD *)(a1 + 300) = v6;
    *(_DWORD *)(a1 + 320) = 0;
    *(_DWORD *)(a1 + 324) = 0;
    *(_DWORD *)(a1 + 336) = -1;
    *(_DWORD *)(a1 + 332) = -1;
    *(_DWORD *)(a1 + 8) = 0;
    *(_DWORD *)(a1 + 308) = 0;
    *(_DWORD *)(a1 + 328) = 0;
    *(_DWORD *)(a1 + 340) = 0;
    sub_43D8A0(a1, v5);
    memset(&unk_45C4E0, 0, 172 * *(_WORD *)(a1 + 20));
    v7 = 0;
    if ( *(_WORD *)(a1 + 20) > 0 )
    {
      v8 = (int)dword_45C4E4;
      v9 = &unk_456CC0;
      do
      {
        *(_DWORD *)v8 = v9;
        ++v7;
        v9 = (char *)v9 + 88;
        v8 += 172;
      }
      while ( v7 < *(_WORD *)(a1 + 20) );
    }
    dword_456C30 = a1;
    dword_45DAB0 = calloc(6 * v2, 1u);
    v10 = calloc(8 * dword_45C4C4 + 256, 1u);
    dword_45DA64 = v10;
    dword_45DA60 = (unsigned int)((char *)v10 + 15) & 0xFFFFFFF0;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}


//----- (0043DC50) --------------------------------------------------------
int __cdecl sub_43DC50(int a1, int a2)
{
  int v2; // edi@1
  int v3; // eax@1
  void *v4; // esi@1
  char v5; // bl@2

  v2 = (int)calloc(0x160u, 1u);
  v3 = (int)sub_43F720(a1, 0, 0);
  v4 = (void *)v3;
  if ( !v3 )
    return 0;
  //*(_DWORD *)(v2 + 348) = a2;
  *(_DWORD *)(v2 + 87) = a2;
  v5 = sub_43EF60(v2, v3);
  sub_43F770(v4);
  if ( !v5 )
  {
    freeStreamMemory((void *)v2);
    return 0;
  }
  return v2;
}

//----- (0043DCB0) --------------------------------------------------------
int __cdecl sub_43DCB0(signed int a1, int a2)
{
  signed int v2; // ebx@1
  int v3; // edx@1
  int v4; // eax@1
  int v5; // ebp@1
  signed int v6; // edi@1
  int v7; // esi@3
  int result; // eax@9
  int v9; // [sp+10h] [bp-Ch]@5
  int v10; // [sp+14h] [bp-8h]@1
  int v11; // [sp+18h] [bp-4h]@1
  int v12; // [sp+20h] [bp+4h]@1

  v2 = a1;
  v11 = dword_45C4C4 / a1;
  v3 = dword_45DA60 + 8 * a1 * dword_456C3C;
  memset((void *)(dword_45DA60 + 8 * a1 * dword_456C3C), 0, 8 * a1);
  v4 = dword_456C30;
  v5 = *(_DWORD *)(dword_456C30 + 8);
  v6 = 0;
  v10 = v3;
  v12 = v3;
  if ( v2 > 0 )
  {
    do
    {
      if ( v5 )
      {
        v7 = v5;
      }
      else
      {
        (*(void (__cdecl **)(int))(v4 + 344))(v4);
        v7 = *(_DWORD *)(dword_456C30 + 12);
        v5 = *(_DWORD *)(dword_456C30 + 12);
      }
      v9 = v7;
      if ( v7 + v6 > v2 )
      {
        v7 = v2 - v6;
        v9 = v2 - v6;
      }
      sub_43DEA0(v5);
      v6 += v7;
      v5 -= v7;
      v12 += 8 * v7;
      *(_DWORD *)(dword_456C30 + 340) += (unsigned __int64)((double)v9 * flt_45DAB4 * 1000.0);
      v4 = dword_456C30;
    }
    while ( v6 < v2 );
    v3 = v10;
  }
  *(_DWORD *)((char *)dword_45DAB0 + 6 * dword_456C3C + 2) = *(_DWORD *)(v4 + 340);
  *((byte *)dword_45DAB0 + 6 * dword_456C3C + 1) = *(byte *)(dword_456C30 + 320);
  *((byte *)dword_45DAB0 + 6 * dword_456C3C) = *(byte *)(dword_456C30 + 324);
  *(_DWORD *)(dword_456C30 + 8) = v5;
  sub_43DE30(a2, v3, v2 & 0x3FFFFFFF);
  result = dword_456C3C++ + 1;
  if ( dword_456C3C >= v11 )
    dword_456C3C = 0;
  return result;
}


//----- (0043DE30) --------------------------------------------------------
int __cdecl sub_43DE30(int a1, int a2, int a3)
{
  int result; // eax@1
  int v4; // esi@1
  int v5; // ecx@5
  double v6; // st7@6
  int v7; // [sp+8h] [bp+4h]@1

  result = a1;
  v4 = a1;
  v7 = a2;
  if ( a3 > 0 )
  {
    if ( result )
    {
      if ( a2 )
      {
        result = 2 * a3;
        if ( 2 * a3 > 0 )
        {
          v5 = 2 * a3;
          do
          {
            v6 = *(float *)v7;
            v7 += 4;
            result = (signed int)v6;
            if ( (signed int)v6 >= -32768 )
            {
              if ( result > 0x7FFF )
                result = 0x7FFF;
            }
            else
            {
              result = -32768;
            }
            *(_WORD *)v4 = result;
            v4 += 2;
            --v5;
          }
          while ( v5 );
        }
      }
    }
  }
  return result;
}

//----- (0043DEA0) --------------------------------------------------------
int  sub_43DEA0(int a1)
{
  int result; // eax@1
  int v2; // ecx@2
  int v3; // ecx@3
  int v4; // ebx@4
  unsigned int v5; // eax@5
  int v6; // esi@6
  int v7; // edx@7
  unsigned __int64 v8; // rax@9
  __int64 v9; // rax@10
  unsigned __int64 v10; // rax@12
  int v11; // ebp@12
  unsigned int v12; // edi@12
  int v13; // ebp@15
  unsigned int v14; // eax@15
  unsigned __int64 v15; // rt2@15
  int v16; // ecx@19
  int v17; // eax@23
  int v18; // edx@23
  int v19; // eax@23
  int v20; // eax@25
  int v21; // edx@25
  int v22; // eax@25
  unsigned int v23; // eax@27
  int v24; // ebx@30
  unsigned int v25; // ecx@30
  unsigned int v26; // ebp@30
  int v27; // edi@30
  unsigned int v28; // esi@32
  int v29; // edx@32
  unsigned int v30; // edx@33
  signed int v31; // ebp@34
  double v32; // st7@34
  double v33; // st6@34
  double v34; // st5@34
  unsigned int v35; // esi@34
  unsigned int v36; // kr10_4@34
  double v37; // st4@34
  double v38; // st2@34
  double v39; // st7@34
  double v40; // st7@34
  double v41; // st5@34
  double i; // st6@34
  signed int v43; // ebp@35
  double v44; // st4@35
  double v45; // st3@35
  double v46; // st2@35
  unsigned int v47; // esi@35
  unsigned int v48; // kr20_4@35
  double v49; // st1@35
  double v50; // st0@35
  double v51; // rt1@35
  double v52; // st2@35
  double v53; // st6@35
  double v54; // st4@35
  double v55; // st5@35
  double v56; // rt1@35
  double v57; // st4@36
  double v58; // st6@36
  double v59; // st5@36
  double v60; // st4@36
  double v61; // st7@36
  double v62; // rt0@36
  double v63; // st5@36
  double v64; // st6@36
  double v65; // st5@36
  double v66; // st6@37
  double v67; // st7@37
  double v68; // st7@40
  double v69; // st6@40
  double v70; // st5@40
  double v71; // st4@40
  signed int v72; // ebp@41
  double v73; // st3@41
  double v74; // st2@41
  double v75; // st1@41
  double v76; // st3@41
  double v77; // rt1@41
  double v78; // st2@41
  double v79; // st5@41
  double v80; // st4@41
  int v81; // esi@43
  int v82; // eax@44
  int v83; // edx@44
  char v84; // dl@48
  unsigned __int64 v85; // kr38_8@54
  unsigned __int64 v86; // kr40_8@55
  int v87; // ecx@59
  int v88; // [sp-4h] [bp-10h]@3

  result = *(_DWORD *)(a1 + 12);
  if ( result > 0 )
  {
    v2 = *(_DWORD *)(a1 + 8);
    dword_456C4C = *(_DWORD *)(a1 + 12);
    dword_456C50 = v2;
    dword_456C54 = v2 + 8 * result;
    *(_DWORD *)(a1 + 12) = &unk_456CC0;
    dword_456C48 = 64;
LABEL_3:
    dword_456C44 = *(_DWORD *)(a1 + 12);
    v88 = a1;
    dword_456C58 = dword_456C50;
    v3 = dword_456C44;
    dword_456C64 = dword_456C44;
    if ( !dword_456C44 )
      goto LABEL_60;
    v4 = *(_DWORD *)(dword_456C44 + 28);
    dword_456C60 = v4;
    if ( !v4 )
      goto LABEL_60;
    dword_456C6C = *(_DWORD *)v4;
    v5 = dword_456C4C;
    while ( 1 )
    {
      while ( 1 )
      {
        do
        {
          dword_456C68 = v5;
          v6 = *(_DWORD *)(v3 + 40);
          dword_456C5C = 0;
          if ( *(_DWORD *)(v3 + 56) == 1 )
          {
            v7 = *(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8);
            if ( v6 > v7 )
              v7 = *(_DWORD *)(v4 + 4);
            v8 = 0;
			//v8 = __PAIR__((__PAIR__(v7 - v6, 0) - (unsigned __int64)*(_DWORD *)(v3 + 44)) >> 32, -*(_DWORD *)(v3 + 44));
          }
          else
          {
            HIDWORD(v9) = *(_DWORD *)(v3 + 40);
            LODWORD(v9) = *(_DWORD *)(v3 + 44);
            //v8 = v9 - __PAIR__(*(_DWORD *)(v4 + 8), 0);
			v8 = 0;
          }
          if ( HIDWORD(v8) < 0x1000000 )
          {
            v10 = v8 >> 8;
            v11 = *(_DWORD *)(v3 + 52);
            v12 = *(_DWORD *)(v3 + 48);
            if ( !v11 && !v12 )
              v12 = 24932236;
            v13 = (v12 >> 8) | (v11 << 24);
            v15 = v10 % (unsigned int)v13;
            v14 = v10 / (unsigned int)v13;
            if ( (_DWORD)v15 )
              ++v14;
            if ( v14 <= dword_456C68 )
            {
              dword_456C68 = v14;
              dword_456C5C = 1;
            }
          }
          v16 = dword_456C64;
          dword_456C8C = 0;
          dword_456C90 = 0;
          dword_456C7C = dword_456C68;
          dword_456C88 = 0;
          if ( *(_DWORD *)(dword_456C64 + 84)
            && *(_DWORD *)(dword_456C64 + 32) == *(_DWORD *)(dword_456C64 + 60)
            && *(_DWORD *)(dword_456C64 + 36) == *(_DWORD *)(dword_456C64 + 64) )
          {
            dword_456C88 = *(_DWORD *)(dword_456C64 + 84);
            dword_456C8C = *(_DWORD *)(dword_456C64 + 76);
            dword_456C90 = *(_DWORD *)(dword_456C64 + 80);
          }
          else
          {
            v17 = *(_DWORD *)(dword_456C64 + 32);
            v18 = *(_DWORD *)(dword_456C64 + 68) >> 8;
            *(_DWORD *)(dword_456C64 + 60) = v17;
            v19 = v17 - v18;
            if ( v19 )
            {
              dword_456C78 = v19;
              *(float *)&dword_456C8C = (double)v19 * 0.0039215689 * flt_456C98;
              *(_DWORD *)(v16 + 76) = dword_456C8C;
              dword_456C88 = dword_456C94;
            }
            v20 = *(_DWORD *)(v16 + 36);
            v21 = *(_DWORD *)(v16 + 72) >> 8;
            *(_DWORD *)(v16 + 64) = v20;
            v22 = v20 - v21;
            if ( v22 )
            {
              dword_456C78 = v22;
              *(float *)&dword_456C90 = (double)v22 * 0.0039215689 * flt_456C98;
              *(_DWORD *)(v16 + 80) = dword_456C90;
              dword_456C88 = dword_456C94;
            }
          }
          v23 = dword_456C88;
          if ( dword_456C88 > 0 )
          {
            *(_DWORD *)(v16 + 84) = dword_456C88;
            if ( dword_456C68 > v23 )
              dword_456C68 = v23;
          }
          dword_456C78 = *(_DWORD *)(dword_456C64 + 36);
          flt_456C74 = (double)dword_456C78 * 0.0039215689;
          dword_456C78 = *(_DWORD *)(dword_456C64 + 32);
          flt_456C70 = (double)dword_456C78 * 0.0039215689;
          dword_456C78 = *(_DWORD *)(dword_456C64 + 72);
          flt_456C84 = (double)dword_456C78 * 0.00390625 * 0.0039215689;
          dword_456C78 = *(_DWORD *)(dword_456C64 + 68);
          flt_456C80 = (double)dword_456C78 * 0.00390625 * 0.0039215689;
          v24 = *(_DWORD *)(dword_456C64 + 48);
          v25 = *(_DWORD *)(dword_456C64 + 52);
          v26 = *(_DWORD *)(dword_456C64 + 44);
          v27 = dword_456C58;
          if ( *(_DWORD *)(dword_456C64 + 56) != 1 )
          {
            v25 = 0;
			//v25 = (__PAIR__(~v25, ~v24) + 1) >> 32;
            v24 = -v24;
          }
          v28 = ((unsigned int)dword_456C6C >> 1) + *(_DWORD *)(dword_456C64 + 40);
          v29 = dword_456C68;
          if ( !dword_456C88 )
          {
            v30 = (unsigned int)dword_456C68 >> 1;
            if ( (unsigned int)dword_456C68 >> 1 )
            {
              v31 = v26 >> 1;
              v27 = dword_456C58 + 16;
              v32 = (double)*(signed __int16 *)(2 * v28 + 2);
              dword_456C78 = v31;
              v33 = (double)*(signed __int16 *)(2 * v28);
              v34 = (double)v31;
              v36 = v24 + 2 * v31;
              v35 = 0;
			  //v35 = (__PAIR__(v25, v24) + __PAIR__(v28, 2 * v31)) >> 32;
              v37 = (double)*(signed __int16 *)(2 * v35 + 2);
              dword_456C78 = v36 >> 1;
              v38 = v32;
              v39 = (double)*(signed __int16 *)(2 * v35);
              //v28 = (__PAIR__(v25, v24) + __PAIR__(v35, 2 * (v36 >> 1))) >> 32;
			  v28 =0;
              v26 = v24 + 2 * (v36 >> 1);
              v40 = v39 + (double)(v36 >> 1) * 4.6566129e-10 * (v37 - v39);
              v41 = v33 + v34 * 4.6566129e-10 * (v38 - v33);
              for ( i = v41 * flt_456C70; ; i = v56 )
              {
                v57 = i;
                v58 = v40 * flt_456C74;
                v59 = v41 * flt_456C74 + *(float *)(v27 - 12);
                v60 = v57 + *(float *)(v27 - 16);
                v61 = v40 * flt_456C70 + *(float *)(v27 - 8);
                *(float *)(v27 - 16) = v60;
                v62 = v59;
                v63 = v58;
                v64 = v62;
                v65 = v63 + *(float *)(v27 - 4);
                --v30;
                if ( !v30 )
                  break;
                v43 = v26 >> 1;
                dword_456C78 = v43;
                v44 = (double)*(signed __int16 *)(2 * v28 + 2);
                v45 = (double)*(signed __int16 *)(2 * v28);
                v46 = (double)v43;
                v48 = v24 + 2 * v43;
                v47 = 0;
				//v47 = (__PAIR__(v25, v24) + __PAIR__(v28, 2 * v43)) >> 32;
                v27 += 16;
                dword_456C78 = v48 >> 1;
                v49 = (double)*(signed __int16 *)(2 * v47);
                v50 = (double)*(signed __int16 *)(2 * v47 + 2) - v49;
                v28 = 0;
				//v28 = (__PAIR__(v25, v24) + __PAIR__(v47, 2 * (v48 >> 1))) >> 32;
                v26 = v24 + 2 * (v48 >> 1);
                v51 = v46 * 4.6566129e-10 * (v44 - v45) + v45;
                v52 = v64;
                v53 = v51;
                *(float *)(v27 - 28) = v52;
                *(float *)(v27 - 24) = v61;
                v40 = v49 + (double)(v48 >> 1) * 4.6566129e-10 * v50;
                v54 = v65;
                v55 = v51 * flt_456C70;
                *(float *)(v27 - 20) = v54;
                v56 = v55;
                v41 = v53;
              }
              *(float *)(v27 - 12) = v64;
              v66 = v61;
              v67 = v65;
              *(float *)(v27 - 8) = v66;
              *(float *)(v27 - 4) = v67;
            }
            v29 = dword_456C68 & 1;
          }
          if ( v29 )
          {
            v68 = *(float *)&dword_456C8C;
            v69 = *(float *)&dword_456C90;
            v70 = flt_456C80;
            v71 = flt_456C84;
            do
            {
              v72 = v26 >> 1;
              v27 += 8;
              v73 = (double)*(signed __int16 *)(2 * v28 + 2);
              dword_456C78 = v72;
              v74 = (double)*(signed __int16 *)(2 * v28);
              v75 = (double)v72;
              v28 = 0;
			  //v28 = (__PAIR__(v25, v24) + __PAIR__(v28, 2 * v72)) >> 32;
              v26 = v24 + 2 * v72;
              v76 = v75 * 4.6566129e-10 * (v73 - v74) + v74;
              v77 = v70 + v68;
              v78 = v76 * v70;
              v79 = v71 + v69;
              v80 = v76 * v71 + *(float *)(v27 - 4);
              *(float *)(v27 - 8) = v78 + *(float *)(v27 - 8);
              *(float *)(v27 - 4) = v80;
              v71 = v79;
              v70 = v77;
              --v29;
            }
            while ( v29 );
            *(float *)&dword_456C90 = v69;
            *(float *)&dword_456C8C = v68;
            LODWORD(flt_456C80) = (signed int)(v70 * 255.0 * 256.0);
            LODWORD(flt_456C84) = (signed int)(v71 * 255.0 * 256.0);
          }
          v81 = v28 - ((unsigned int)dword_456C6C >> 1);
          if ( !dword_456C88 )
            break;
          v4 = dword_456C60;
          v3 = dword_456C64;
          *(_DWORD *)(dword_456C64 + 68) = LODWORD(flt_456C80);
          *(_DWORD *)(v3 + 72) = LODWORD(flt_456C84);
          v82 = dword_456C68;
          v83 = dword_456C88 - dword_456C68;
          dword_456C8C = 0;
          dword_456C90 = 0;
          dword_456C88 = v83;
          *(_DWORD *)(v3 + 84) = v83;
          if ( v83 )
            break;
          *(_DWORD *)(v3 + 76) = 0;
          *(_DWORD *)(v3 + 80) = 0;
          *(_DWORD *)(v3 + 68) = *(_DWORD *)(v3 + 32) << 8;
          *(_DWORD *)(v3 + 72) = *(_DWORD *)(v3 + 36) << 8;
          if ( dword_456C7C == v82 )
            break;
          *(_DWORD *)(v3 + 40) = v81;
          *(_DWORD *)(v3 + 44) = v26;
          v5 = (unsigned int)(dword_456C54 - v27) >> 3;
          dword_456C58 = v27;
        }
        while ( v5 );
        if ( !dword_456C5C )
          goto LABEL_59;
        v4 = dword_456C60;
        v3 = dword_456C64;
        v84 = *(byte *)(dword_456C60 + 29);
        if ( !(v84 & 2) )
          break;
        do
          v81 -= *(_DWORD *)(dword_456C60 + 12);
        while ( v81 >= (unsigned int)(*(_DWORD *)(dword_456C60 + 12) + *(_DWORD *)(dword_456C60 + 8)) );
        *(_DWORD *)(dword_456C64 + 40) = v81;
        *(_DWORD *)(v3 + 44) = v26;
        v5 = (unsigned int)(dword_456C54 - v27) >> 3;
        dword_456C58 = v27;
        if ( !v5 )
          goto LABEL_59;
      }
      if ( !(v84 & 4) )
      {
        v26 = 0;
        v81 = 0;
        *(_DWORD *)(dword_456C64 + 28) = 0;
LABEL_59:
        v87 = dword_456C64;
        *(_DWORD *)(dword_456C64 + 44) = v26;
        *(_DWORD *)(v87 + 40) = v81;
LABEL_60:
        a1 = v88;
        result = *(_DWORD *)(v88 + 12) + 88;
        *(_DWORD *)(v88 + 12) = result;
        if ( result >= (signed int)&unk_4582C0 )
          return result;
        goto LABEL_3;
      }
      if ( *(_DWORD *)(dword_456C64 + 56) == 1 )
        goto LABEL_55;
      do
      {
		  v85 = 0;
        v81 = 0;
		//v85 = __PAIR__(*(_DWORD *)(v4 + 8), 0) + __PAIR__(*(_DWORD *)(v4 + 8) - 1, -1) - __PAIR__(v81, v26);
        //v81 = (__PAIR__(*(_DWORD *)(v4 + 8), 0) + __PAIR__(*(_DWORD *)(v4 + 8) - 1, -1) - __PAIR__(v81, v26)) >> 32;
        v26 = v85;
        *(_DWORD *)(v3 + 56) = 1;
        if ( v81 < *(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8) )
          break;
LABEL_55:
        v86 = 0;
        v81 = 0;
		 /*v86 = __PAIR__(*(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8) - 1, -1)
            + __PAIR__(*(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8), 0)
            - __PAIR__(v81, v26);
        v81 = (__PAIR__(*(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8) - 1, -1)
             + __PAIR__(*(_DWORD *)(v4 + 12) + *(_DWORD *)(v4 + 8), 0)
             - __PAIR__((unsigned int)v81, v26)) >> 32;*/
        v26 = v86;
        *(_DWORD *)(v3 + 56) = 2;
      }
      while ( v81 < *(_DWORD *)(v4 + 8) );
      *(_DWORD *)(v3 + 40) = v81;
      *(_DWORD *)(v3 + 44) = v26;
      v5 = (unsigned int)(dword_456C54 - v27) >> 3;
      dword_456C58 = v27;
      if ( !v5 )
        goto LABEL_59;
    }
  }
  return result;
}


//----- (0043E550) --------------------------------------------------------
char __cdecl sub_43E550(int a1, int a2)
{
  unsigned __int64 v2; // rax@2
  char v3; // dl@7
  int v4; // ecx@7
  int v5; // edx@9
  int v6; // eax@9
  int v7; // ecx@9
  int v8; // eax@9
  int v9; // edi@11
  char result; // al@13

  switch ( *(byte *)(a2 + 334) )
  {
    case 0:
      v2 = (unsigned __int64)(sin((double)*(signed int *)(a1 + 92) * 0.024543688) * 64.0);
      break;
    case 1:
      LODWORD(v2) = (unsigned __int8)(*(_DWORD *)(a1 + 92) >= 128 ? 0 : 0x80) - 64;
      break;
    case 2:
      LODWORD(v2) = (128 - (*(_DWORD *)(a1 + 92) + 128) % 256) >> 1;
      break;
    case 3:
      LODWORD(v2) = (128 - (384 - *(_DWORD *)(a1 + 92)) % 256) >> 1;
      break;
    default:
      LODWORD(v2) = a2;
      break;
  }
  BYTE4(v2) = *(byte *)(a2 + 335);
  v4 = v2 * *(byte *)(a2 + 336);
  if ( BYTE4(v2) )
    v4 = v4 * *(_DWORD *)(a1 + 96) / (unsigned __int8)v3;
  v5 = (v4 >> 6) + *(_DWORD *)(a1 + 28);
  v6 = *(_DWORD *)(a1 + 96) + 1;
  v7 = v6;
  *(_DWORD *)(a1 + 28) = v5;
  *(_DWORD *)(a1 + 96) = v6;
  v8 = *(byte *)(a2 + 335);
  if ( v7 > v8 )
    *(_DWORD *)(a1 + 96) = v8;
  v9 = *(byte *)(a2 + 337) + *(_DWORD *)(a1 + 92);
  *(_DWORD *)(a1 + 92) = v9;
  if ( v9 > 255 )
    *(_DWORD *)(a1 + 92) = v9 - 256;
  result = *(byte *)(a1 + 2) | 1;
  *(byte *)(a1 + 2) = result;
  return result;
}

//----- (0043E670) --------------------------------------------------------
char __cdecl sub_43E670(int a1, int a2, int a3, char a4, int a5, int a6, unsigned __int8 a7, unsigned __int8 a8, unsigned __int8 a9, int a10, int a11, int a12, int a13, char a14)
{
  int v14; // edx@1
  int v15; // ebp@1
  int v16; // ecx@1
  int v17; // edi@1
  int v18; // ecx@6
  int v19; // edi@6
  int v20; // esi@6
  char result; // al@7
  int v22; // ecx@10
  int v23; // [sp+18h] [bp+8h]@6

  v14 = a3;
  v15 = a2;
  v16 = *(_DWORD *)a2;
  v17 = a11;
  if ( *(_DWORD *)a2 >= a5 )
    goto LABEL_17;
  if ( *(_DWORD *)a3 != *(_WORD *)(a6 + 4 * v16) )
  {
    *(_DWORD *)a11 += *(_DWORD *)a13;
LABEL_17:
    v22 = a1;
    goto LABEL_18;
  }
  if ( a4 & 4 && v16 == a7 )
  {
    *(_DWORD *)a2 = a8;
    *(_DWORD *)a3 = *(_WORD *)(a6 + 4 * a8);
  }
  v18 = *(_DWORD *)a2;
  v19 = *(_WORD *)(a6 + 4 * *(_DWORD *)a2 + 2);
  v23 = *(_WORD *)(a6 + 4 * *(_DWORD *)a2);
  v20 = v19 << 16;
  if ( *(_DWORD *)v15 == a5 - 1 )
  {
    *(_DWORD *)a10 = v19;
    result = a1;
    *(byte *)a12 = 1;
    *(byte *)(a1 + 2) |= a14;
    return result;
  }
  if ( a4 & 2 && v18 == a9 )
  {
    v22 = a1;
    if ( !*(byte *)(a1 + 101) )
    {
      *(_DWORD *)a10 = v19;
      result = a14 | *(byte *)(a1 + 2);
      *(byte *)(a1 + 2) = result;
      return result;
    }
  }
  else
  {
    v22 = a1;
  }
  if ( *(_WORD *)(a6 + 4 * *(_DWORD *)v15 + 4) == v23 )
  {
    v17 = a11;
    v14 = a3;
    *(_DWORD *)a13 = 0;
    *(_DWORD *)a11 = v20;
    ++*(_DWORD *)v15;
  }
  else
  {
    v17 = a11;
    *(_DWORD *)a13 = ((*(_WORD *)(a6 + 4 * *(_DWORD *)v15 + 6) << 16) - v20)
                   / (*(_WORD *)(a6 + 4 * *(_DWORD *)v15 + 4) - v23);
    v14 = a3;
    *(_DWORD *)a11 = v20;
    ++*(_DWORD *)v15;
  }
LABEL_18:
  *(_DWORD *)a10 = *(_WORD *)(v17 + 2);
  ++*(_DWORD *)v14;
  result = a14 | *(byte *)(v22 + 2);
  *(byte *)(v22 + 2) = result;
  return result;
}

//----- (0043E7A0) --------------------------------------------------------
char __cdecl sub_43E7A0(int a1, unsigned __int8 a2)
{
  int v2; // eax@3
  int v3; // edx@5

  if ( a2 < 0x10u || a2 > 0x50u )
  {
    LOBYTE(v2) = a2;
    switch ( (unsigned int)a2 >> 4 )
    {
      case 6u:
      case 8u:
        v2 = a2 & 0xF;
        v3 = *(_DWORD *)(a1 + 16) - v2;
        *(_DWORD *)(a1 + 16) = v3;
        if ( v3 < 0 )
          *(_DWORD *)(a1 + 16) = 0;
        *(byte *)(a1 + 2) |= 2u;
        break;
      case 7u:
      case 9u:
        v2 = (a2 & 0xF) + *(_DWORD *)(a1 + 16);
        *(_DWORD *)(a1 + 16) = v2;
        if ( v2 > 64 )
          *(_DWORD *)(a1 + 16) = 64;
        *(byte *)(a1 + 2) |= 2u;
        break;
      case 0xAu:
        LOBYTE(v2) = a1;
        *(byte *)(a1 + 134) = a2 & 0xF;
        break;
      case 0xBu:
        *(byte *)(a1 + 135) = a2 & 0xF;
        break;
      case 0xCu:
        v2 = 16 * (a2 & 0xF);
        *(_DWORD *)(a1 + 20) = v2;
        *(byte *)(a1 + 2) |= 4u;
        break;
      case 0xDu:
        LOBYTE(v2) = *(byte *)(a1 + 2) | 4;
        *(_DWORD *)(a1 + 20) -= a2 & 0xF;
        *(byte *)(a1 + 2) = v2;
        break;
      case 0xEu:
        LOBYTE(v2) = *(byte *)(a1 + 2) | 4;
        *(_DWORD *)(a1 + 20) += a2 & 0xF;
        *(byte *)(a1 + 2) = v2;
        break;
      case 0xFu:
        LOBYTE(v2) = a1;
        if ( a2 & 0xF )
          *(byte *)(a1 + 132) = 16 * a2;
        *(_DWORD *)(a1 + 128) = *(_DWORD *)(a1 + 104);
        *(byte *)(a1 + 2) &= 0xF7u;
        break;
      default:
        return v2;
    }
  }
  else
  {
    v2 = a1;
    *(_DWORD *)(a1 + 16) = a2 - 16;
    *(byte *)(v2 + 2) |= 2u;
  }
  return v2;
}

//----- (0043E8C0) --------------------------------------------------------
int __cdecl sub_43E8C0(signed int a1, int a2, int a3)
{
  signed int v3; // ebx@1
  char *v4; // ebp@1
  signed int v5; // edx@2
  unsigned __int64 v6; // rax@4
  int v7; // edx@9
  char *v8; // eax@11
  int v9; // esi@16
  signed int v10; // ecx@17
  int v11; // esi@19
  int v12; // ecx@19
  int v13; // ecx@19
  signed int v14; // esi@24
  unsigned __int64 v15; // rax@26
  int v16; // ST0C_4@28
  int v17; // ebx@28
  unsigned int v18; // eax@28
  char *v20; // [sp+10h] [bp-8h]@1
  unsigned int v21; // [sp+14h] [bp-4h]@26

  v3 = a1;
  v4 = *(char **)(a1 + 4);
  v20 = *(char **)(a1 + 4);
  if ( v4 )
    v5 = *(_DWORD *)v4;
  else
    v5 = a1;
  LODWORD(v6) = *(_DWORD *)(a1 + 28) + *(_DWORD *)(a1 + 12);
  if ( !(_DWORD)v6 )
    *(byte *)(a1 + 2) &= 0xFEu;
  if ( *(byte *)(a1 + 2) & 8 )
  {
    v4 = (char *)&unk_456CC0 + 88 * v5;
    v20 = (char *)&unk_456CC0 + 88 * v5;
    if ( *((_DWORD *)v4 + 7) )
    {
      if ( v5 >= 32 )
        v7 = v5 - 32;
      else
        v7 = v5 + 32;
      v8 = (char *)&unk_456CC0 + 88 * v7;
      memcpy((char *)&unk_456CC0 + 88 * v7, v4, 0x58u);
      *(_DWORD *)v8 = v7;
      *((_DWORD *)v4 + 4) = 0;
      *((_DWORD *)v4 + 1) = 0;
      *((_DWORD *)v4 + 8) = 0;
      *((_DWORD *)v4 + 9) = 0;
      v4 = (char *)&unk_456CC0 + 88 * v7;
      v20 = (char *)&unk_456CC0 + 88 * v7;
      *(_DWORD *)(a1 + 4) = v8;
    }
    *((_DWORD *)v4 + 7) = a2;
    if ( *((_DWORD *)v4 + 6) >= (unsigned int)(*(_DWORD *)(a2 + 8) + *(_DWORD *)(a2 + 12)) )
      *((_DWORD *)v4 + 6) = 0;
    LODWORD(v6) = *((_DWORD *)v4 + 6);
    *((_DWORD *)v4 + 10) = v6;
    *((_DWORD *)v4 + 11) = 0;
    *((_DWORD *)v4 + 14) = 1;
    *((_DWORD *)v4 + 6) = 0;
    *((_DWORD *)v4 + 17) = 0;
    *((_DWORD *)v4 + 18) = 0;
    *((_DWORD *)v4 + 21) = 0;
  }
  if ( *(byte *)(a1 + 2) & 2 )
  {
    v6 = (unsigned __int64)((double)(*(_DWORD *)(a1 + 16) + *(_DWORD *)(a1 + 24))
                          * (double)*(signed int *)(a1 + 52)
                          * (double)*(signed int *)(a1 + 88)
                          * (double)*(signed int *)(a3 + 300)
                          * 0.0000000074214768);
    v9 = v6;
    if ( v4 )
    {
      v10 = v6 * (255 - *((_DWORD *)v4 + 5));
      *((_DWORD *)v4 + 8) = (signed int)v6 * *((_DWORD *)v4 + 5) / 255;
      LODWORD(v6) = -2139062143 * v10;
      *((_DWORD *)v4 + 4) = v9;
      *((_DWORD *)v4 + 1) = v9;
      *((_DWORD *)v4 + 9) = v10 / 255;
    }
  }
  if ( *(byte *)(a1 + 2) & 4 )
  {
    v11 = *(_DWORD *)(a1 + 20);
    v12 = abs(v11 - 128);
    LODWORD(v6) = (((unsigned __int64)(128 - v12) >> 32) & 0x1F) + 128 - v12;
    v13 = v11 + (*(_DWORD *)(a1 + 76) - 32) * ((128 - v12) / 32);
    if ( v13 >= 0 )
    {
      if ( v13 > 255 )
        v13 = 255;
    }
    else
    {
      v13 = 0;
    }
    if ( v4 )
    {
      v14 = *((_DWORD *)v4 + 4) * (255 - v13);
      *((_DWORD *)v4 + 8) = v13 * *((_DWORD *)v4 + 4) / 255;
      LODWORD(v6) = -2139062143 * v14;
      *((_DWORD *)v4 + 5) = v13;
      *((_DWORD *)v4 + 3) = v13;
      *((_DWORD *)v4 + 9) = v14 / 255;
    }
  }
  if ( *(byte *)(a1 + 2) & 1 )
  {
    v15 = (unsigned __int64)(pow(
                               2.0,
                               (4608.0 - (double)*(signed int *)(a1 + 12) + (double)*(signed int *)(a1 + 28))
                             * 0.0013020834)
                           * 8363.0);
    v21 = v15;
    *((_DWORD *)v4 + 2) = v15;
    if ( (signed int)v15 < 100 )
      v21 = 100;
    v16 = v15;
    v17 = dword_456A40;
    v18 = v21 / dword_456A40;
    HIDWORD(v6) = v21 % dword_456A40;
    *((_DWORD *)v20 + 13) = v21 / dword_456A40;
    *((_DWORD *)v20 + 12) = v6 / (unsigned int)v17;
    LODWORD(v6) = v16;
    v3 = a1;
  }
  if ( *(byte *)(v3 + 2) & 0x20 )
  {
    *((_DWORD *)v4 + 11) = 0;
    *((_DWORD *)v4 + 10) = 0;
    *((_DWORD *)v4 + 6) = 0;
  }
  return v6;
}
// 456A40: using guessed type int dword_456A40;

//----- (0043EB10) --------------------------------------------------------
int __cdecl sub_43EB10(int a1, int a2)
{
  int result; // eax@1
  char v3; // dl@1

  result = a1;
  *(_DWORD *)(a1 + 16) = *(byte *)(a2 + 16);
  v3 = *(byte *)(a1 + 162);
  *(_DWORD *)(a1 + 20) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(a1 + 52) = 64;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)(a1 + 40) = 0;
  *(_DWORD *)(a1 + 56) = 0;
  *(_DWORD *)(a1 + 76) = 32;
  *(_DWORD *)(a1 + 68) = 0;
  *(_DWORD *)(a1 + 64) = 0;
  *(_DWORD *)(a1 + 80) = 0;
  *(byte *)(a1 + 101) = 0;
  *(_DWORD *)(a1 + 88) = 0x10000;
  *(byte *)(a1 + 60) = 0;
  *(byte *)(a1 + 84) = 0;
  *(_DWORD *)(a1 + 96) = 0;
  *(_DWORD *)(a1 + 92) = 0;
  if ( (v3 & 0xFu) < 4 )
    *(byte *)(a1 + 133) = 0;
  if ( (v3 & 0xF0u) < 0x40 )
    *(byte *)(a1 + 137) = 0;
  *(byte *)(a1 + 146) = 0;
  *(byte *)(a1 + 2) |= 6u;
  return result;
}

//----- (0043EBB0) --------------------------------------------------------
char __cdecl sub_43EBB0(int a1, unsigned __int8 a2)
{
  return sub_43E7A0((int)((char *)&unk_45C4E0 + 172 * a1), a2);
}

//----- (0043EBD0) --------------------------------------------------------
unsigned __int64 __cdecl sub_43EBD0(int a1, signed int a2)
{
  char *v2; // esi@1
  unsigned __int64 result; // rax@1

  v2 = (char *)&unk_45C4E0 + 172 * a1;
  result = (unsigned __int64)(7680.0
                            - ((double)a2 * 0.000015258789 * 6.0
                             + 52.0
                             - 6.0
                             + (double)*(byte *)(*((_DWORD *)v2 + 2) + 31))
                            * 64.0
                            - (double)(*(byte *)(*((_DWORD *)v2 + 2) + 17) / 2));
  *((_DWORD *)v2 + 26) = result;
  *((_DWORD *)v2 + 3) = result;
  return result;
}

//----- (0043EC40) --------------------------------------------------------
int __cdecl sub_43EC40(int a1, int a2, unsigned __int8 a3, int a4, char a5)
{
  int v5; // esi@1
  int v6; // edi@2
  int v7; // ebp@2
  int v8; // ebp@3
  int v9; // edi@3
  unsigned __int8 v10; // al@3
  char v11; // dl@7
  char v12; // al@7
  char v13; // cl@12

  v5 = (int)((char *)&unk_45C4E0 + 172 * a2);
  *(byte *)(v5 + 102) = a3;
  if ( a3 < (signed int)*(_WORD *)(a1 + 32) )
  {
    v8 = *(_DWORD *)(a1 + 4);
    v9 = 340 * a3;
    v10 = *(byte *)(v9 + v8 + 108);
    v6 = v8 + v9;
    if ( v10 < 0x10u )
      v7 = *(_DWORD *)(v6 + 4 * v10 + 4);
    else
      v7 = (int)&dword_45DA80;
    *(_DWORD *)(v5 + 8) = v7;
  }
  else
  {
    v6 = (int)&unk_45DAC0;
    v7 = (int)&dword_45DA80;
    dword_45DA80 = 0;
  }
  *(_DWORD *)(v5 + 24) = 0;
  *(byte *)(v5 + 2) = 8;
  sub_43EBD0(a2, a4);
  v11 = *(byte *)(v5 + 2) | 3;
  *(_DWORD *)(v5 + 28) = 0;
  *(byte *)(v5 + 2) = v11;
  sub_43EB10(v5, v7);
  sub_43E7A0(v5, a5);
  v12 = *(byte *)(v6 + 332);
  if ( v12 & 1 )
  {
    if ( !*(byte *)(v5 + 60) )
      sub_43E670(
        v5,
        v5 + 44,
        v5 + 40,
        v12,
        *(byte *)(v6 + 324),
        v6 + 164,
        *(byte *)(v6 + 328),
        *(byte *)(v6 + 327),
        *(byte *)(v6 + 326),
        v5 + 52,
        v5 + 48,
        v5 + 60,
        v5 + 56,
        2);
  }
  else if ( *(byte *)(v5 + 101) )
  {
    *(_DWORD *)(v5 + 52) = 0;
  }
  v13 = *(byte *)(v6 + 333);
  if ( v13 & 1 && !*(byte *)(v5 + 84) )
    sub_43E670(
      v5,
      v5 + 68,
      v5 + 64,
      v13,
      *(byte *)(v6 + 325),
      v6 + 244,
      *(byte *)(v6 + 331),
      *(byte *)(v6 + 330),
      *(byte *)(v6 + 329),
      v5 + 76,
      v5 + 72,
      v5 + 84,
      v5 + 80,
      4);
  return sub_43E8C0(v5, v7, a1);
}
// 45DA80: using guessed type int dword_45DA80;

//----- (0043EDC0) --------------------------------------------------------
int __cdecl sub_43EDC0(int a1)
{
  int result; // eax@1
  _UNKNOWN *v2; // esi@2
  signed int v3; // edi@4
  int v4; // edi@5
  unsigned __int8 v5; // al@6
  int v6; // ebx@7
  char v7; // al@9
  char v8; // cl@12
  int v9; // ecx@16
  bool v10; // sf@16
  signed int v11; // [sp+4h] [bp-4h]@1

  result = a1;
  v11 = 0;
  if ( *(_WORD *)(a1 + 20) > 0 )
  {
    v2 = &unk_45C546;
    while ( 1 )
    {
      v3 = *(byte *)v2;
      if ( v3 >= *(_WORD *)(result + 32) )
        break;
      v4 = *(_DWORD *)(result + 4) + 340 * v3;
      v5 = *(byte *)(*((byte *)v2 - 102) + v4 + 68);
      if ( v5 >= 0x10u )
        goto LABEL_8;
      v6 = *(_DWORD *)(v4 + 4 * v5 + 4);
      if ( !v6 )
        goto LABEL_8;
LABEL_9:
      *(_DWORD *)((char *)v2 - 78) = 0;
      *(_DWORD *)((char *)v2 - 74) = 0;
      *((byte *)v2 - 100) = 0;
      v7 = *(byte *)(v4 + 332);
      if ( v7 & 1 && !*((byte *)v2 - 42) )
        sub_43E670(
          (int)((char *)v2 - 102),
          (int)((char *)v2 - 58),
          (int)((char *)v2 - 62),
          v7,
          *(byte *)(v4 + 324),
          v4 + 164,
          *(byte *)(v4 + 328),
          *(byte *)(v4 + 327),
          *(byte *)(v4 + 326),
          (int)((char *)v2 - 50),
          (int)((char *)v2 - 54),
          (int)((char *)v2 - 42),
          (int)((char *)v2 - 46),
          2);
      v8 = *(byte *)(v4 + 333);
      if ( v8 & 1 && !*((byte *)v2 - 18) )
        sub_43E670(
          (int)((char *)v2 - 102),
          (int)((char *)v2 - 34),
          (int)((char *)v2 - 38),
          v8,
          *(byte *)(v4 + 325),
          v4 + 244,
          *(byte *)(v4 + 331),
          *(byte *)(v4 + 330),
          *(byte *)(v4 + 329),
          (int)((char *)v2 - 26),
          (int)((char *)v2 - 30),
          (int)((char *)v2 - 18),
          (int)((char *)v2 - 22),
          4);
      if ( *((byte *)v2 - 1) )
      {
        v9 = *(_WORD *)(v4 + 338);
        v10 = *(_DWORD *)((char *)v2 - 14) - v9 < 0;
        *(_DWORD *)((char *)v2 - 14) -= v9;
        if ( v10 )
          *(_DWORD *)((char *)v2 - 14) = 0;
        *((byte *)v2 - 100) |= 2u;
      }
      sub_43E550((int)((char *)v2 - 102), v4);
      sub_43E8C0((signed int)((char *)v2 - 102), v6, a1);
      result = v11 + 1;
      v2 = (char *)v2 + 172;
      ++v11;
      if ( v11 >= *(_WORD *)(a1 + 20) )
        return result;
      result = a1;
    }
    v4 = (int)&unk_45DAC0;
    dword_45DA80 = 0;
LABEL_8:
    v6 = (int)&dword_45DA80;
    goto LABEL_9;
  }
  return result;
}
// 45DA80: using guessed type int dword_45DA80;

//----- (0043EF60) --------------------------------------------------------
char __cdecl sub_43EF60(int a1, int a2)
{
  signed int v2; // eax@1
  bool v3; // zf@4
  bool v4; // sf@4
  int v5; // eax@5
  int v6; // ecx@6
  signed int v7; // eax@9
  unsigned __int16 v8; // ax@11
  int v9; // eax@12
  int v10; // ebx@12
  void *v11; // eax@12
  int v12; // edx@13
  int v13; // edi@14
  unsigned __int8 v14; // al@15
  char result; // al@26
  int v16; // eax@30
  int v17; // ecx@34
  int v18; // edi@36
  int v19; // ebx@37
  int v20; // ebx@40
  bool v21; // cf@42
  void *v22; // esi@48
  int v23; // edi@48
  int v24; // edx@55
  int v25; // ecx@57
  int v26; // eax@57
  int v27; // eax@59
  int v28; // edi@60
  int v29; // eax@65
  int v30; // esi@70
  int v31; // eax@70
  int v32; // edi@70
  void *v33; // ebx@71
  void (__cdecl *v34)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // eax@71
  void *v35; // edi@75
  int i; // eax@75
  __int16 v37; // dx@76
  void *v38; // ecx@80
  int v39; // edx@80
  unsigned int v40; // edi@80
  int v41; // eax@81
  char v42; // cl@82
  void *v43; // eax@82
  int v44; // eax@88
  int v45; // ecx@89
  unsigned __int8 v46; // of@89
  unsigned __int8 v47; // [sp+Ah] [bp-126h]@15
  char v48; // [sp+Bh] [bp-125h]@12
  unsigned __int16 v49; // [sp+Ch] [bp-124h]@12
  int v50; // [sp+10h] [bp-120h]@13
  unsigned int v51; // [sp+14h] [bp-11Ch]@12
  int v52; // [sp+18h] [bp-118h]@11
  int v53; // [sp+1Ch] [bp-114h]@13
  int v54; // [sp+20h] [bp-110h]@1
  int v55; // [sp+24h] [bp-10Ch]@12
  int v56; // [sp+28h] [bp-108h]@4
  char v57; // [sp+2Ch] [bp-104h]@42
  char v58[256]; // [sp+30h] [bp-100h]@1

  v54 = 0;
  sub_43F7B0(a2);
  sub_43F790((int)v58, 17, a2);
  v2 = 0;
  do
  {
    if ( v58[v2] != byte_4444F8[v2] )
      return 0;
    ++v2;
  }
  while ( v2 < 17 );
  *(_DWORD *)(a1 + 344) = sub_43EF50;
  *(byte *)(a1 + 296) = 64;
  sub_43F7B0(a2);
  sub_43F790((int)&v56, 4, a2);
  sub_43F790(a1 + 16, 6, a2);
  sub_43F790((int)&v54, 2, a2);
  sub_43F790(a1 + 32, 264, a2);
  sub_43F7B0(a2);
  v3 = *(_WORD *)(a1 + 16) == 0;
  v4 = *(_WORD *)(a1 + 16) < 0;
  *(_DWORD *)(a1 + 24) = 0;
  if ( !v4 && !v3 )
  {
    v5 = a1 + 40;
    do
    {
      v6 = *(byte *)v5;
      if ( v6 >= *(_DWORD *)(a1 + 24) )
        *(_DWORD *)(a1 + 24) = v6 + 1;
      ++v5;
    }
    while ( -40 - a1 + v5 < *(_WORD *)(a1 + 16) );
  }
  v7 = *(_DWORD *)(a1 + 24);
  if ( v7 <= (unsigned __int16)v54 )
    v7 = (unsigned __int16)v54;
  *(_DWORD *)(a1 + 28) = v7;
  *(_DWORD *)a1 = calloc(8 * v7, 1u);
  v8 = v54;
  v52 = 0;
  if ( (unsigned __int16)v54 > 0u )
  {
    do
    {
      v9 = *(_DWORD *)a1;
      v48 = 0;
      v10 = v9 + 8 * v52;
      sub_43F790((int)&v55, 4, a2);
      sub_43F790((int)&v48, 1, a2);
      sub_43F790((int)&v49, 2, a2);
      *(_DWORD *)v10 = v49;
      sub_43F790((int)&v51, 2, a2);
      v11 = calloc(5 * *(_DWORD *)v10 * *(_WORD *)(a1 + 20), 1u);
      *(_DWORD *)(v10 + 4) = v11;
      if ( (_WORD)v51 )
      {
        v12 = *(_DWORD *)v10 * *(_WORD *)(a1 + 20);
        v50 = (int)v11;
        v53 = 0;
        if ( v12 > 0 )
        {
          v13 = (int)((char *)v11 + 1);
          do
          {
            sub_43F790((int)&v47, 1, a2);
            v14 = v47;
            if ( (v47 & 0x80u) == 0 )
            {
              if ( v47 )
                *(byte *)v50 = v47;
              sub_43F790(v13, 4, a2);
            }
            else
            {
              if ( v47 & 1 )
              {
                sub_43F790(v50, 1, a2);
                v14 = v47;
              }
              if ( v14 & 2 )
              {
                sub_43F790(v13, 1, a2);
                v14 = v47;
              }
              if ( v14 & 4 )
              {
                sub_43F790(v13 + 1, 1, a2);
                v14 = v47;
              }
              if ( v14 & 8 )
              {
                sub_43F790(v13 + 2, 1, a2);
                v14 = v47;
              }
              if ( v14 & 0x10 )
                sub_43F790(v13 + 3, 1, a2);
            }
            v16 = v50;
            if ( *(byte *)v50 == 97 )
              *(byte *)v50 = -1;
            if ( *(byte *)v13 > 0x80u )
              *(byte *)v13 = 0;
            v17 = *(_DWORD *)v10 * *(_WORD *)(a1 + 20);
            v50 = v16 + 5;
            v13 += 5;
            ++v53;
          }
          while ( v53 < v17 );
        }
      }
      v8 = v54;
      ++v52;
    }
    while ( v52 < (unsigned __int16)v54 );
  }
  v18 = v8;
  if ( (signed int)v8 < *(_DWORD *)(a1 + 24) )
  {
    do
    {
      v19 = *(_DWORD *)a1 + 8 * v18;
      *(_DWORD *)v19 = 64;
      *(_DWORD *)(v19 + 4) = calloc(320 * *(_WORD *)(a1 + 20), 1u);
      ++v18;
    }
    while ( v18 < *(_DWORD *)(a1 + 24) );
  }
  *(_DWORD *)(a1 + 4) = calloc(340 * *(_WORD *)(a1 + 32), 1u);
  v3 = *(_WORD *)(a1 + 32) == 0;
  v4 = *(_WORD *)(a1 + 32) < 0;
  v52 = 0;
  if ( v4 || v3 )
  {
LABEL_90:
    result = 1;
  }
  else
  {
    v53 = 0;
    while ( 1 )
    {
      v20 = v53 + *(_DWORD *)(a1 + 4);
      sub_43F7D0(a2);
      sub_43F790((int)&v55, 4, a2);
      sub_43F7B0(a2);
      sub_43F790((int)&v49, 2, a2);
      if ( v49 > 0x10u )
        break;
      *(_DWORD *)v20 = v49;
      if ( v49 )
      {
        v47 = 0;
        sub_43F790((int)&v57, 4, a2);
        sub_43F790(v20 + 68, 96, a2);
        sub_43F790(v20 + 164, 48, a2);
        sub_43F790(v20 + 244, 48, a2);
        sub_43F790(v20 + 324, 16, a2);
        v21 = *(byte *)(v20 + 324) < 2u;
        *(_WORD *)(v20 + 338) *= 2;
        if ( v21 )
          *(byte *)(v20 + 332) = 0;
        if ( *(byte *)(v20 + 325) < 2u )
          *(byte *)(v20 + 333) = 0;
        sub_43F7B0(a2);
        v51 = 0;
        if ( !v49 )
          goto LABEL_94;
        v50 = v20 + 4;
        do
        {
          v22 = calloc(0x30u, 1u);
          v23 = (int)((char *)v22 + 4);
          *(_DWORD *)v50 = v22;
          sub_43F790((int)((char *)v22 + 4), 14, a2);
          *((byte *)v22 + 29) = 1;
          *((byte *)v22 + 28) = 8;
          sub_43F790((int)&v48, 1, a2);
          if ( v48 & 1 )
            *((byte *)v22 + 29) = *((byte *)v22 + 29) & 0xFE | 2;
          if ( v48 & 2 )
            *((byte *)v22 + 29) = *((byte *)v22 + 29) & 0xFC | 4;
          if ( v48 & 0x10 )
            *((byte *)v22 + 28) = 16;
          if ( *((byte *)v22 + 29) & 1 )
          {
            v24 = *(_DWORD *)v23;
            *((_DWORD *)v22 + 2) = 0;
            *((_DWORD *)v22 + 3) = v24;
          }
          if ( *((byte *)v22 + 28) == 16 )
          {
            v25 = *((_DWORD *)v22 + 2) >> 1;
            v26 = *((_DWORD *)v22 + 3) >> 1;
            *(_DWORD *)v23 >>= 1;
            *((_DWORD *)v22 + 2) = v25;
            *((_DWORD *)v22 + 3) = v26;
          }
          if ( !*((_DWORD *)v22 + 3) )
          {
            v27 = *(_DWORD *)v23;
            *((_DWORD *)v22 + 2) = 0;
            *((_DWORD *)v22 + 3) = v27;
            *((byte *)v22 + 29) = 1;
          }
          sub_43F790((int)&v47, 1, a2);
          *((_DWORD *)v22 + 6) = v47;
          sub_43F790((int)&v47, 1, a2);
          *((byte *)v22 + 31) = v47;
          sub_43F7B0(a2);
          v28 = 2 * *(_DWORD *)v23;
          if ( *(_DWORD *)v22 )
            free(*(void **)v22);
          if ( v28 )
            *(_DWORD *)v22 = calloc(v28 + 16, 1u);
          else
            *(_DWORD *)v22 = 0;
          v50 += 4;
          v29 = v51++ + 1;
        }
        while ( v51 < v49 );
        if ( (unsigned int)v29 < 0x10 )
LABEL_94:
          memset32((void *)(v20 + 4 * v51 + 4), (int)&dword_45DA80, 16 - v51);
        v51 = 0;
        if ( v49 )
        {
          v50 = v20 + 4;
          do
          {
            v30 = *(_DWORD *)v50;
            v31 = *(_DWORD *)(*(_DWORD *)v50 + 4);
            v32 = v31 * (unsigned int)*(byte *)(*(_DWORD *)v50 + 28) >> 3;
            if ( v31 )
            {
              v33 = calloc(2 * v31 + 16, 1u);
              v34 = *(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(a1 + 348);
              if ( v34 )
              {
                v34(v33, v32, *(byte *)(v30 + 28), v52, v51);
                sub_43F7B0(a2);
              }
              else
              {
                sub_43F790((int)v33, v32, a2);
              }
              if ( *(byte *)(v30 + 28) == 8 )
              {
                v35 = *(void **)v30;
                for ( i = 0; i < *(_DWORD *)(v30 + 4); *((_WORD *)v35 - 1) = v37 )
                {
                  LOBYTE(v37) = 0;
                  HIBYTE(v37) = *((byte *)v33 + i);
                  v35 = (char *)v35 + 2;
                  ++i;
                }
                *(byte *)(v30 + 28) = 16;
                free(v33);
              }
              else
              {
                free(*(void **)v30);
                *(_DWORD *)v30 = v33;
              }
              if ( !*(_DWORD *)(a1 + 348) )
              {
                v38 = *(void **)v30;
                v39 = 0;
                v40 = 0;
                if ( *(_DWORD *)(v30 + 4) )
                {
                  do
                  {
                    v41 = v39 + *(_WORD *)v38;
                    *(_WORD *)v38 = v41;
                    v38 = (char *)v38 + 2;
                    v39 = v41;
                    ++v40;
                  }
                  while ( v40 < *(_DWORD *)(v30 + 4) );
                }
              }
              v42 = *(byte *)(v30 + 29);
              v43 = *(void **)v30;
              if ( v42 == 4 )
              {
                *((_WORD *)v43 + *(_DWORD *)(v30 + 8) + *(_DWORD *)(v30 + 12)) = *((_WORD *)v43
                                                                                 + *(_DWORD *)(v30 + 8)
                                                                                 + *(_DWORD *)(v30 + 12)
                                                                                 - 1);
              }
              else if ( v42 == 2 )
              {
                *((_WORD *)v43 + *(_DWORD *)(v30 + 8) + *(_DWORD *)(v30 + 12)) = *((_WORD *)v43 + *(_DWORD *)(v30 + 8));
              }
            }
            v50 += 4;
            ++v51;
          }
          while ( v51 < v49 );
        }
      }
      else
      {
        v44 = v20 + 4;
        *(_DWORD *)v44 = &dword_45DA80;
        *(_DWORD *)(v44 + 4) = &dword_45DA80;
        *(_DWORD *)(v44 + 8) = &dword_45DA80;
        *(_DWORD *)(v44 + 12) = &dword_45DA80;
        *(_DWORD *)(v44 + 16) = &dword_45DA80;
        *(_DWORD *)(v44 + 20) = &dword_45DA80;
        *(_DWORD *)(v44 + 24) = &dword_45DA80;
        *(_DWORD *)(v44 + 28) = &dword_45DA80;
        *(_DWORD *)(v44 + 32) = &dword_45DA80;
        *(_DWORD *)(v44 + 36) = &dword_45DA80;
        *(_DWORD *)(v44 + 40) = &dword_45DA80;
        *(_DWORD *)(v44 + 44) = &dword_45DA80;
        *(_DWORD *)(v44 + 48) = &dword_45DA80;
        *(_DWORD *)(v44 + 52) = &dword_45DA80;
        *(_DWORD *)(v44 + 56) = &dword_45DA80;
        *(_DWORD *)(v44 + 60) = &dword_45DA80;
        sub_43F7B0(a2);
      }
      v45 = *(_WORD *)(a1 + 32);
      v46 = __OFSUB__(v52 + 1, v45);
      v4 = v52++ + 1 - v45 < 0;
      v53 += 340;
      if ( !(v4 ^ v46) )
        goto LABEL_90;
    }
    result = 0;
  }
  return result;
}
// 43EF50: using guessed type int __cdecl sub_43EF50(int);
// 45DA80: using guessed type int dword_45DA80;
// 43EF60: using guessed type char var_100[256];

//----- (0043F6B0) --------------------------------------------------------
int (__cdecl *__cdecl sub_43F6B0(int (__cdecl *a1)(_DWORD), int (__cdecl *a2)(_DWORD), int (__cdecl *a3)(_DWORD, _DWORD, _DWORD), int (__cdecl *a4)(_DWORD), int (__cdecl *a5)(_DWORD)))(_DWORD)
{
  int (__cdecl *result)(_DWORD); // eax@5

  if ( a1 && a2 && a3 && a4 && (result = a5) != 0 )
  {
    dword_456C9C = a1;
    dword_456CA0 = a2;
    dword_456CA4 = a3;
    dword_456CA8 = a4;
    dword_456CAC = a5;
  }
  else
  {
    dword_456C9C = 0;
    dword_456CA0 = 0;
    dword_456CA4 = 0;
    dword_456CA8 = 0;
    dword_456CAC = 0;
  }
  return result;
}
// 456C9C: using guessed type int (__cdecl *dword_456C9C)(_DWORD);
// 456CA0: using guessed type int (__cdecl *dword_456CA0)(_DWORD);
// 456CA4: using guessed type int (__cdecl *dword_456CA4)(_DWORD, _DWORD, _DWORD);
// 456CA8: using guessed type int (__cdecl *dword_456CA8)(_DWORD);
// 456CAC: using guessed type int (__cdecl *dword_456CAC)(_DWORD);

//----- (0043F720) --------------------------------------------------------
void *__cdecl sub_43F720(int a1, char a2, int a3)
{
  void *v3 = calloc(0x18u, 1u); // esi@1
  int v4; // eax@1
  void *result; // eax@2

  v3 = calloc(0x18u, 1u);
  *(byte *)v3 = a2;
  *((_DWORD *)v3 + 5) = a3;
  //v4 = sub_43AD80(a1);
  v4 = dword_456C9C(a1);
  //sub_43AD80
  *((_DWORD *)v3 + 4) = v4;
  if ( v4 )
  {
    result = v3;
  }
  else
  {
    free(v3);
    result = 0;
  }
  return result;
}
// 456C9C: using guessed type int (__cdecl *dword_456C9C)(_DWORD);

//----- (0043F770) --------------------------------------------------------
void __cdecl sub_43F770(void *Memory)
{
  if ( Memory )
  {
    dword_456CA0(*((_DWORD *)Memory + 4));
    free(Memory);
  }
}
// 456CA0: using guessed type int (__cdecl *dword_456CA0)(_DWORD);

//----- (0043F790) --------------------------------------------------------
int __cdecl sub_43F790(int a1, int a2, int a3)
{
  int result; // eax@1

  result = a3;
  if ( a3 )
    result = dword_456CA4(a1, a2, *(_DWORD *)(a3 + 16));
  return result;
}
// 456CA4: using guessed type int (__cdecl *dword_456CA4)(_DWORD, _DWORD, _DWORD);

//----- (0043F7B0) --------------------------------------------------------
int __cdecl sub_43F7B0(int a1)
{
  int result; // eax@1

  result = a1;
  if ( a1 )
    result = dword_456CA8(*(_DWORD *)(a1 + 16));
  return result;
}
// 456CA8: using guessed type int (__cdecl *dword_456CA8)(_DWORD);

//----- (0043F7D0) --------------------------------------------------------
int __cdecl sub_43F7D0(int a1)
{
  int result; // eax@1

  result = a1;
  if ( a1 )
    result = dword_456CAC(*(_DWORD *)(a1 + 16));
  return result;
}
// 456CAC: using guessed type int (__cdecl *dword_456CAC)(_DWORD);

//----- (0043FC72) --------------------------------------------------------
void sub_43FC72()
{
  unsigned int i; // [sp+Ch] [bp-1Ch]@1

  for ( i = (unsigned int)&unk_444540; i < (unsigned int)&unk_444540; i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (**)(void))i)();
  }
}

//----- (0043FCB6) --------------------------------------------------------
void __cdecl sub_43FCB6()
{
  unsigned int i; // [sp+Ch] [bp-1Ch]@1

  for ( i = (unsigned int)&unk_444548; i < (unsigned int)&unk_444548; i += 4 )
  {
    if ( *(_DWORD *)i )
      (*(void (**)(void))i)();
  }
}

//----- (0043FD12) --------------------------------------------------------
int sub_43FD12()
{
  return 0;
}

//----- (0043FD70) --------------------------------------------------------
int  initSystem(double fmodMinVersion, int a1, const char **a2, const char *args)
{
  const char *v3; // esi@1
  char *v4; // eax@1
  char *v5; // eax@4
  int v6; // eax@5
  int v7; // edi@7
  int v8; // eax@7
  void *v9; // esp@7
  int result; // eax@8
  char* sdlError; // eax@10
  HMODULE v12; // eax@11
  int v13; // eax@12
  int v14; // [sp+0h] [bp-Ch]@7

  v3 = *a2;
  v4 = strrchr(*a2, 92);
  if ( v4 || (v4 = strrchr(*a2, 47)) != 0 )
    v3 = v4 + 1;
  v5 = strrchr(v3, 46);
  if ( v5 )
    v6 = v5 - v3;
  else
    v6 = strlen(v3);
  v7 = v6 + 1;
 
  if ( &v14 )
  {
    SDL_strlcpy(&v14, v3, v7);
    if ( SDL_Init(SDL_INIT_NOPARACHUTE) >= 0 )
    {
      atexit(generateExitError);
      atexit(SDL_Quit);
      v12 = GetModuleHandleA(0);
      SDL_SetModuleHandle(v12);
      v13 = sub_43ACE0(fmodMinVersion, a1, (int)a2, args);
      exit(v13);
    }
    sdlError = SDL_GetError();
    logError((int)aWinmainError, sdlError);
    result = 0;
  }
  else
  {
    result = outOfMemoryError();
  }
  return result;
}



int __cdecl logError(int a1, int a2)
{
  return fprintf((FILE *)&iob[0] + 2, aSS, a1, a2);
  //return fprintf((FILE *)iob[0]._ptr + 2, aSS, a1, a2);
}


int outOfMemoryError()
{
  logError((int)aFatalError, (int)aOutOfMemoryAbo);
  return 0;
}
// 43FE80: using guessed type int outOfMemoryError(void);


void __cdecl generateExitError()
{
  fclose((FILE *)&iob[0] + 1);
  fclose((FILE *)&iob[0] + 2);
}


int __stdcall WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
  double fmodMinVersion=3.75; // st7@0
  HMODULE ddrawModule; // eax@1
  const char *arg; // ebx@3
  unsigned int argLenght; // kr04_4@3
  int v8; // eax@3
  
  int result; // eax@4
  int v11; // eax@5
  int v12; // ebx@5
  int v13; // eax@5
  void *v14; // esp@5
  int v15; // [sp+0h] [bp-Ch]@3

  ddrawModule = LoadLibraryA(LibFileName);
  if (ddrawModule)
    FreeLibrary(ddrawModule);
  arg = GetCommandLineA();
  argLenght = strlen(arg) + 1;
  v8 = argLenght - 1 + 4;
  
  if ( &v15 )
  {
    SDL_strlcpy(&v15, arg, argLenght);
    v11 = sub_43FF90(&v15, 0);
	v12 = v11;
   
    if ( &v15 )
    {
      sub_43FF90(&v15, (int)&v15);
      initSystem(fmodMinVersion, v12, (const char **)&v15, arg);
      result = 0;
    }
    else
    {
      result = outOfMemoryError();
    }
  }  else
  {
    result = outOfMemoryError();
  }
  return result;
}


//----- (0043FF90) --------------------------------------------------------
int __cdecl sub_43FF90(int *a1, int a2)
{
  int *v2; // esi@1
  int v3; // ebx@1
  int v4; // eax@3
  char v5; // al@8
  char v6; // al@11
  char v7; // al@18
  int v8; // eax@20
  char v9; // al@27
  int result; // eax@28

  v2 = a1;
  v3 = 0;
  if ( *(byte *)a1 )
  {
    do
    {
      while ( 1 )
      {
        v4 = _mb_cur_max <= 1 ? pctype[*(byte *)v2] & 8 : _isctype(*(byte *)v2, 8);
        if ( !v4 )
          break;
        v2 = (int *)((char *)v2 + 1);
      }
      if ( *(byte *)v2 == 34 )
      {
        v5 = *((byte *)v2 + 1);
        v2 = (int *)((char *)v2 + 1);
        if ( !v5 )
          break;
        if ( a2 )
          *(_DWORD *)(a2 + 4 * v3) = v2;
        v6 = *(byte *)v2;
        ++v3;
        if ( *(byte *)v2 )
        {
          do
          {
            if ( v6 == 34 )
              break;
            v6 = *((byte *)v2 + 1);
            v2 = (int *)((char *)v2 + 1);
          }
          while ( v6 );
        }
      }
      else if ( *(byte *)v2 )
      {
        if ( a2 )
          *(_DWORD *)(a2 + 4 * v3) = v2;
        v7 = *(byte *)v2;
        ++v3;
        if ( *(byte *)v2 )
        {
          do
          {
            if ( _mb_cur_max <= 1 )
              v8 = pctype[v7] & 8;
            else
              v8 = _isctype(v7, 8);
            if ( v8 )
              break;
            v7 = *((byte *)v2 + 1);
            v2 = (int *)((char *)v2 + 1);
          }
          while ( v7 );
        }
      }
      if ( !*(byte *)v2 )
        break;
      if ( a2 )
        *(byte *)v2 = 0;
      v9 = *((byte *)v2 + 1);
      v2 = (int *)((char *)v2 + 1);
    }
    while ( v9 );
  }
  result = v3;
  if ( a2 )
    *(_DWORD *)(a2 + 4 * v3) = 0;
  return result;
}

//_43B2C0
int __cdecl convertColorToPaletteColor(int a1, int a2)
{
  return a2 * (signed __int64)a1 >> 16;
}
// ALL OK, 396 function(s) have been successfully decompiled


 int __OFSUB__(int x, int y)
{
 
    int y2 = y;
    int8 sx = __SETS__(x);
    return (sx ^ __SETS__(y2)) & (sx ^ __SETS__(x-y2));
  
}


// sign flag
int __SETS__(int x)
{
    return x < 0;
  
}
